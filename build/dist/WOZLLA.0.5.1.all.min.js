(function(d,g){function c(){a.READY||(r.determineEventTypes(),t.each(a.gestures,function(b){w.register(b)}),r.onTouch(a.DOCUMENT,l,w.detect),r.onTouch(a.DOCUMENT,q,w.detect),a.READY=!0)}var a=function y(b,a){return new y.Instance(b,a||{})};a.VERSION="1.1.3";a.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};a.DOCUMENT=document;a.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;
a.HAS_TOUCHEVENTS="ontouchstart"in d;a.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);a.NO_MOUSEEVENTS=a.HAS_TOUCHEVENTS&&a.IS_MOBILE||a.HAS_POINTEREVENTS;a.CALCULATE_INTERVAL=25;var b={},e=a.DIRECTION_DOWN="down",f=a.DIRECTION_LEFT="left",h=a.DIRECTION_UP="up",s=a.DIRECTION_RIGHT="right",k=a.POINTER_MOUSE="mouse",m=a.POINTER_TOUCH="touch",p=a.POINTER_PEN="pen",n=a.EVENT_START="start",l=a.EVENT_MOVE="move",q=a.EVENT_END="end",u=a.EVENT_RELEASE="release",v=a.EVENT_TOUCH=
"touch";a.READY=!1;a.plugins=a.plugins||{};a.gestures=a.gestures||{};var t=a.utils={extend:function(b,a,e){for(var f in a)!a.hasOwnProperty(f)||b[f]!==g&&e||(b[f]=a[f]);return b},on:function(b,a,e){b.addEventListener(a,e,!1)},off:function(b,a,e){b.removeEventListener(a,e,!1)},each:function(b,a,e){var f,h;if("forEach"in b)b.forEach(a,e);else if(b.length!==g)for(f=0,h=b.length;f<h&&!1!==a.call(e,b[f],f,b);f++);else for(f in b)if(b.hasOwnProperty(f)&&!1===a.call(e,b[f],f,b))break},inStr:function(b,a){return-1<
b.indexOf(a)},inArray:function(b,a){if(b.indexOf){var e=b.indexOf(a);return-1===e?!1:e}for(var e=0,f=b.length;e<f;e++)if(b[e]===a)return e;return!1},toArray:function(b){return Array.prototype.slice.call(b,0)},hasParent:function(b,a){for(;b;){if(b==a)return!0;b=b.parentNode}return!1},getCenter:function(b){var a=[],e=[],f=[],h=[],c=Math.min,d=Math.max;if(1===b.length)return{pageX:b[0].pageX,pageY:b[0].pageY,clientX:b[0].clientX,clientY:b[0].clientY};t.each(b,function(b){a.push(b.pageX);e.push(b.pageY);
f.push(b.clientX);h.push(b.clientY)});return{pageX:(c.apply(Math,a)+d.apply(Math,a))/2,pageY:(c.apply(Math,e)+d.apply(Math,e))/2,clientX:(c.apply(Math,f)+d.apply(Math,f))/2,clientY:(c.apply(Math,h)+d.apply(Math,h))/2}},getVelocity:function(b,a,e){return{x:Math.abs(a/b)||0,y:Math.abs(e/b)||0}},getAngle:function(b,a){return 180*Math.atan2(a.clientY-b.clientY,a.clientX-b.clientX)/Math.PI},getDirection:function(b,a){var c=Math.abs(b.clientX-a.clientX),d=Math.abs(b.clientY-a.clientY);return c>=d?0<b.clientX-
a.clientX?f:s:0<b.clientY-a.clientY?h:e},getDistance:function(b,a){var e=a.clientX-b.clientX,f=a.clientY-b.clientY;return Math.sqrt(e*e+f*f)},getScale:function(b,a){return 2<=b.length&&2<=a.length?this.getDistance(a[0],a[1])/this.getDistance(b[0],b[1]):1},getRotation:function(b,a){return 2<=b.length&&2<=a.length?this.getAngle(a[1],a[0])-this.getAngle(b[1],b[0]):0},isVertical:function(b){return b==h||b==e},setPrefixedCss:function(b,a,e,f){var h=["","Webkit","Moz","O","ms"];a=t.toCamelCase(a);for(var c=
0;c<h.length;c++){var d=a;h[c]&&(d=h[c]+d.slice(0,1).toUpperCase()+d.slice(1));if(d in b.style){b.style[d]=(null==f||f)&&e||"";break}}},toggleBehavior:function(b,a,e){if(a&&b&&b.style){t.each(a,function(a,f){t.setPrefixedCss(b,f,a,e)});var f=e&&function(){return!1};"none"==a.userSelect&&(b.onselectstart=f);"none"==a.userDrag&&(b.ondragstart=f)}},toCamelCase:function(b){return b.replace(/[_-]([a-z])/g,function(b){return b[1].toUpperCase()})}},r=a.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,
on:function(b,a,e,f){a=a.split(" ");t.each(a,function(a){t.on(b,a,e);f&&f(a)})},off:function(b,a,e,f){a=a.split(" ");t.each(a,function(a){t.off(b,a,e);f&&f(a)})},onTouch:function(e,f,h){var c=this,d=function(b){var d=b.type.toLowerCase(),s=a.HAS_POINTEREVENTS,d=t.inStr(d,"mouse"),k;d&&c.preventMouseEvents||(d&&f==n&&0===b.button?(c.preventMouseEvents=!1,c.shouldDetect=!0):s&&f==n?c.shouldDetect=1===b.buttons||x.matchType(m,b):d||f!=n||(c.preventMouseEvents=!0,c.shouldDetect=!0),s&&f!=q&&x.updatePointer(f,
b),c.shouldDetect&&(k=c.doDetect.call(c,b,f,e,h)),k==q&&(c.preventMouseEvents=!1,c.shouldDetect=!1,x.reset()),s&&f==q&&x.updatePointer(f,b))};this.on(e,b[f],d);return d},doDetect:function(b,a,e,f){var h=this.getTouchList(b,a),c=a,d=h.trigger,s=h.length;a==n?d=v:a==q&&(d=u,s=h.length-(b.changedTouches?b.changedTouches.length:1));0<s&&this.started&&(c=l);this.started=!0;b=this.collectEventData(e,c,h,b);a!=q&&f.call(w,b);d&&(b.changedLength=s,b.eventType=d,f.call(w,b),b.eventType=c,delete b.changedLength);
c==q&&(f.call(w,b),this.started=!1);return c},determineEventTypes:function(){var e;e=a.HAS_POINTEREVENTS?d.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:a.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"];b[n]=e[0];b[l]=e[1];b[q]=e[2];return b},getTouchList:function(b,e){if(a.HAS_POINTEREVENTS)return x.getTouchList();
if(b.touches){if(e==l)return b.touches;var f=[],h=[].concat(t.toArray(b.touches),t.toArray(b.changedTouches)),c=[];t.each(h,function(b){!1===t.inArray(f,b.identifier)&&c.push(b);f.push(b.identifier)});return c}b.identifier=1;return[b]},collectEventData:function(b,a,e,f){b=m;t.inStr(f.type,"mouse")||x.matchType(k,f)?b=k:x.matchType(p,f)&&(b=p);return{center:t.getCenter(e),timeStamp:Date.now(),target:f.target,touches:e,eventType:a,pointerType:b,srcEvent:f,preventDefault:function(){var b=this.srcEvent;
b.preventManipulation&&b.preventManipulation();b.preventDefault&&b.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return w.stopDetect()}}}},x=a.PointerEvent={pointers:{},getTouchList:function(){var b=[];t.each(this.pointers,function(a){b.push(a)});return b},updatePointer:function(b,a){b==q?delete this.pointers[a.pointerId]:(a.identifier=a.pointerId,this.pointers[a.pointerId]=a)},matchType:function(b,a){if(!a.pointerType)return!1;var e=a.pointerType,
f={};f[k]=e===(a.MSPOINTER_TYPE_MOUSE||k);f[m]=e===(a.MSPOINTER_TYPE_TOUCH||m);f[p]=e===(a.MSPOINTER_TYPE_PEN||p);return f[b]},reset:function(){this.pointers={}}},w=a.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(b,a){this.current||(this.stopped=!1,this.current={inst:b,startEvent:t.extend({},a),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(a))},detect:function(b){if(this.current&&!this.stopped){b=this.extendEventData(b);var a=
this.current.inst,e=a.options;t.each(this.gestures,function(f){!this.stopped&&a.enabled&&e[f.name]&&f.handler.call(f,b,a)},this);this.current&&(this.current.lastEvent=b);b.eventType==q&&this.stopDetect();return b}},stopDetect:function(){this.previous=t.extend({},this.current);this.current=null;this.stopped=!0},getCalculatedData:function(b,e,f,h,c){var d=this.current,s=!1,k=d.lastCalcEvent,m=d.lastCalcData;k&&b.timeStamp-k.timeStamp>a.CALCULATE_INTERVAL&&(e=k.center,f=b.timeStamp-k.timeStamp,h=b.center.clientX-
k.center.clientX,c=b.center.clientY-k.center.clientY,s=!0);if(b.eventType==v||b.eventType==u)d.futureCalcEvent=b;if(!d.lastCalcEvent||s)m.velocity=t.getVelocity(f,h,c),m.angle=t.getAngle(e,b.center),m.direction=t.getDirection(e,b.center),d.lastCalcEvent=d.futureCalcEvent||b,d.futureCalcEvent=b;b.velocityX=m.velocity.x;b.velocityY=m.velocity.y;b.interimAngle=m.angle;b.interimDirection=m.direction},extendEventData:function(b){var a=this.current,e=a.startEvent,a=a.lastEvent||e;if(b.eventType==v||b.eventType==
u)e.touches=[],t.each(b.touches,function(b){e.touches.push({clientX:b.clientX,clientY:b.clientY})});var f=b.timeStamp-e.timeStamp,h=b.center.clientX-e.center.clientX,c=b.center.clientY-e.center.clientY;this.getCalculatedData(b,a.center,f,h,c);t.extend(b,{startEvent:e,deltaTime:f,deltaX:h,deltaY:c,distance:t.getDistance(e.center,b.center),angle:t.getAngle(e.center,b.center),direction:t.getDirection(e.center,b.center),scale:t.getScale(e.touches,b.touches),rotation:t.getRotation(e.touches,b.touches)});
return b},register:function(b){var e=b.defaults||{};e[b.name]===g&&(e[b.name]=!0);t.extend(a.defaults,e,!0);b.index=b.index||1E3;this.gestures.push(b);this.gestures.sort(function(b,a){return b.index<a.index?-1:b.index>a.index?1:0});return this.gestures}};a.Instance=function(b,e){var f=this;c();this.element=b;this.enabled=!0;t.each(e,function(b,a){delete e[a];e[t.toCamelCase(a)]=b});this.options=t.extend(t.extend({},a.defaults),e||{});this.options.behavior&&t.toggleBehavior(this.element,this.options.behavior,
!0);this.eventStartHandler=r.onTouch(b,n,function(b){f.enabled&&b.eventType==n?w.startDetect(f,b):b.eventType==v&&w.detect(b)});this.eventHandlers=[]};a.Instance.prototype={on:function(b,a){var e=this;r.on(e.element,b,a,function(b){e.eventHandlers.push({gesture:b,handler:a})});return e},off:function(b,a){var e=this;r.off(e.element,b,a,function(b){b=t.inArray({gesture:b,handler:a});!1!==b&&e.eventHandlers.splice(b,1)});return e},trigger:function(b,e){e||(e={});var f=a.DOCUMENT.createEvent("Event");
f.initEvent(b,!0,!0);f.gesture=e;var h=this.element;t.hasParent(e.target,h)&&(h=e.target);navigator.isCocoonJS?this.eventHandlers.forEach(function(a){b===a.gesture&&a.handler(f)}):h.dispatchEvent(f);return this},enable:function(b){this.enabled=b;return this},dispose:function(){var a,e;t.toggleBehavior(this.element,this.options.behavior,!1);for(a=-1;e=this.eventHandlers[++a];)t.off(this.element,e.gesture,e.handler);this.eventHandlers=[];r.off(this.element,b[n],this.eventStartHandler);return null}};
(function(b){var c=!1;a.gestures.Drag={name:b,index:50,handler:function(a,d){var k=w.current;if(!(0<d.options.dragMaxTouches&&a.touches.length>d.options.dragMaxTouches))switch(a.eventType){case n:c=!1;break;case l:if(a.distance<d.options.dragMinDistance&&k.name!=b)break;var m=k.startEvent.center;if(k.name!=b&&(k.name=b,d.options.dragDistanceCorrection&&0<a.distance)){var g=Math.abs(d.options.dragMinDistance/a.distance);m.pageX+=a.deltaX*g;m.pageY+=a.deltaY*g;m.clientX+=a.deltaX*g;m.clientY+=a.deltaY*
g;a=w.extendEventData(a)}if(k.lastEvent.dragLockToAxis||d.options.dragLockToAxis&&d.options.dragLockMinDistance<=a.distance)a.dragLockToAxis=!0;k=k.lastEvent.direction;a.dragLockToAxis&&k!==a.direction&&(t.isVertical(k)?a.direction=0>a.deltaY?h:e:a.direction=0>a.deltaX?f:s);c||(d.trigger(b+"start",a),c=!0);d.trigger(b,a);d.trigger(b+a.direction,a);k=t.isVertical(a.direction);(d.options.dragBlockVertical&&k||d.options.dragBlockHorizontal&&!k)&&a.preventDefault();break;case u:c&&a.changedLength<=d.options.dragMaxTouches&&
(d.trigger(b+"end",a),c=!1);break;case q:c=!1}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}})("drag");a.gestures.Gesture={name:"gesture",index:1337,handler:function(b,a){a.trigger(this.name,b)}};(function(b){var e;a.gestures.Hold={name:b,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(a,f){var h=f.options,c=w.current;switch(a.eventType){case n:clearTimeout(e);c.name=
b;e=setTimeout(function(){c&&c.name==b&&f.trigger(b,a)},h.holdTimeout);break;case l:a.distance>h.holdThreshold&&clearTimeout(e);break;case u:clearTimeout(e)}}}})("hold");a.gestures.Release={name:"release",index:Infinity,handler:function(b,a){b.eventType==u&&a.trigger(this.name,b)}};a.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(b,a){if(b.eventType==u){var e=b.touches.length,f=a.options;e<f.swipeMinTouches||
e>f.swipeMaxTouches||!(b.velocityX>f.swipeVelocityX||b.velocityY>f.swipeVelocityY)||(a.trigger(this.name,b),a.trigger(this.name+b.direction,b))}}};(function(b){var e=!1;a.gestures.Tap={name:b,index:100,handler:function(a,f){var h=f.options,c=w.current,d=w.previous,s,k;switch(a.eventType){case n:e=!1;break;case l:e=e||a.distance>h.tapMaxDistance;break;case q:!t.inStr(a.srcEvent.type,"cancel")&&a.deltaTime<h.tapMaxTime&&!e&&(s=d&&d.lastEvent&&a.timeStamp-d.lastEvent.timeStamp,k=!1,d&&d.name==b&&s&&
s<h.doubleTapInterval&&a.distance<h.doubleTapDistance&&(f.trigger("doubletap",a),k=!0),!k||h.tapAlways)&&(c.name=b,f.trigger(c.name,a))}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}})("tap");a.gestures.Touch={name:"touch",index:-Infinity,defaults:{preventDefault:!1,preventMouse:!1},handler:function(b,a){a.options.preventMouse&&b.pointerType==k?b.stopDetect():(a.options.preventDefault&&b.preventDefault(),b.eventType==v&&a.trigger("touch",b))}};
(function(b){var e=!1;a.gestures.Transform={name:b,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:function(a,f){switch(a.eventType){case n:e=!1;break;case l:if(2>a.touches.length)break;var h=Math.abs(1-a.scale),c=Math.abs(a.rotation);if(h<f.options.transformMinScale&&c<f.options.transformMinRotation)break;w.current.name=b;e||(f.trigger(b+"start",a),e=!0);f.trigger(b,a);c>f.options.transformMinRotation&&f.trigger("rotate",a);h>f.options.transformMinScale&&(f.trigger("pinch",
a),f.trigger("pinch"+(1>a.scale?"in":"out"),a));break;case u:e&&2>a.changedLength&&(f.trigger(b+"end",a),e=!1)}}}})("transform");"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!==typeof module&&module.exports?module.exports=a:d.Hammer=a})(window);var dragonBones;
(function(d){var g=function(){function c(a){this._animationStateCount=0;this._armature=a;this._animationList=[];this._animationStateList=[];this._timeScale=1;this._isPlaying=!1;this.tweenEnabled=!0}c.prototype.dispose=function(){if(this._armature){for(var a=this._animationStateList.length;a--;)d.AnimationState._returnObject(this._animationStateList[a]);this._animationList.length=0;this._animationStateList.length=0;this._animationStateList=this._animationList=this._animationDataList=this._armature=
null}};c.prototype.gotoAndPlay=function(a,b,e,f,h,s,k,m,g){void 0===b&&(b=-1);void 0===e&&(e=-1);void 0===f&&(f=NaN);void 0===h&&(h=0);void 0===s&&(s=null);void 0===k&&(k=c.SAME_LAYER_AND_GROUP);void 0===m&&(m=!0);void 0===g&&(g=!0);if(!this._animationDataList)return null;for(var n=this._animationDataList.length,l;n--;)if(this._animationDataList[n].name==a){l=this._animationDataList[n];break}if(!l)return null;this._isFading=this._isPlaying=!0;b=0>b?0>l.fadeTime?.3:l.fadeTime:b;e=0>e?0>l.scale?1:l.scale:
1E3*e/l.duration;f=isNaN(f)?l.playTimes:f;switch(k){case c.NONE:break;case c.SAME_LAYER:for(n=this._animationStateList.length;n--;)k=this._animationStateList[n],k.layer==h&&k.fadeOut(b,m);break;case c.SAME_GROUP:for(n=this._animationStateList.length;n--;)k=this._animationStateList[n],k.group==s&&k.fadeOut(b,m);break;case c.ALL:for(n=this._animationStateList.length;n--;)k=this._animationStateList[n],k.fadeOut(b,m);break;default:for(n=this._animationStateList.length;n--;)k=this._animationStateList[n],
k.layer==h&&k.group==s&&k.fadeOut(b,m)}this._lastAnimationState=d.AnimationState._borrowObject();this._lastAnimationState._layer=h;this._lastAnimationState._group=s;this._lastAnimationState.autoTween=this.tweenEnabled;this._lastAnimationState._fadeIn(this._armature,l,b,1/e,f,g);this.addState(this._lastAnimationState);f=this._armature.getSlots(!1);for(n=f.length;n--;)h=f[n],h.childArmature&&h.childArmature.animation.gotoAndPlay(a,b);return this._lastAnimationState};c.prototype.gotoAndStop=function(a,
b,e,f,h,d,k,m){void 0===e&&(e=-1);void 0===f&&(f=0);void 0===h&&(h=-1);void 0===d&&(d=0);void 0===k&&(k=null);void 0===m&&(m=c.ALL);var g=this.getState(a,d);g||(g=this.gotoAndPlay(a,f,h,NaN,d,k,m));0<=e?g.setCurrentTime(g.totalTime*e):g.setCurrentTime(b);g.stop();return g};c.prototype.play=function(){this._animationDataList&&0!=this._animationDataList.length&&(this._lastAnimationState?this._isPlaying?this.gotoAndPlay(this._lastAnimationState.name):this._isPlaying=!0:this.gotoAndPlay(this._animationDataList[0].name))};
c.prototype.stop=function(){this._isPlaying=!1};c.prototype.getState=function(a,b){void 0===b&&(b=0);for(var e=this._animationStateList.length;e--;){var f=this._animationStateList[e];if(f.name==a&&f.layer==b)return f}return null};c.prototype.hasAnimation=function(a){for(var b=this._animationDataList.length;b--;)if(this._animationDataList[b].name==a)return!0;return!1};c.prototype._advanceTime=function(a){if(this._isPlaying){var b=!1;a*=this._timeScale;for(var e=this._animationStateList.length;e--;){var f=
this._animationStateList[e];f._advanceTime(a)?this.removeState(f):1!=f.fadeState&&(b=!0)}this._isFading=b}};c.prototype._updateAnimationStates=function(){for(var a=this._animationStateList.length;a--;)this._animationStateList[a]._updateTimelineStates()};c.prototype.addState=function(a){0>this._animationStateList.indexOf(a)&&(this._animationStateList.unshift(a),this._animationStateCount=this._animationStateList.length)};c.prototype.removeState=function(a){var b=this._animationStateList.indexOf(a);
0<=b&&(this._animationStateList.splice(b,1),d.AnimationState._returnObject(a),this._lastAnimationState==a&&(this._lastAnimationState=0<this._animationStateList.length?this._animationStateList[0]:null),this._animationStateCount=this._animationStateList.length)};Object.defineProperty(c.prototype,"movementList",{get:function(){return this._animationList},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"movementID",{get:function(){return this.lastAnimationName},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lastAnimationName",{get:function(){return this._lastAnimationState?this._lastAnimationState.name:null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"animationList",{get:function(){return this._animationList},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isPlaying",{get:function(){return this._isPlaying&&
!this.isComplete},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isComplete",{get:function(){if(this._lastAnimationState){if(!this._lastAnimationState.isComplete)return!1;for(var a=this._animationStateList.length;a--;)if(!this._animationStateList[a].isComplete)return!1}return!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeScale",{get:function(){return this._timeScale},set:function(a){if(isNaN(a)||0>a)a=1;this._timeScale=a},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"animationDataList",{get:function(){return this._animationDataList},set:function(a){this._animationDataList=a;this._animationList.length=0;for(var b in this._animationDataList)this._animationList[this._animationList.length]=this._animationDataList[b].name},enumerable:!0,configurable:!0});c.NONE="none";c.SAME_LAYER="sameLayer";c.SAME_GROUP="sameGroup";c.SAME_LAYER_AND_GROUP="sameLayerAndGroup";c.ALL="all";return c}();d.Animation=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this._playTimes=this._fadeState=this._currentTime=this._totalTime=this._currentPlayTimes=this._currentFrameDuration=this._currentFramePosition=this._currentFrameIndex=this._layer=0;this._timelineStateList=[];this._boneMasks=[]}c._borrowObject=function(){return 0==c._pool.length?new c:c._pool.pop()};c._returnObject=function(a){a.clear();0>c._pool.indexOf(a)&&(c._pool[c._pool.length]=a)};c._clear=function(){for(var a=c._pool.length;a--;)c._pool[a].clear();
c._pool.length=0;d.TimelineState._clear()};c.prototype.clear=function(){for(var a=this._timelineStateList.length;a--;)d.TimelineState._returnObject(this._timelineStateList[a]);this._timelineStateList.length=0;this._boneMasks.length=0;this._clip=this._armature=null};c.prototype.containsBoneMask=function(a){return 0==this._boneMasks.length||0<=this._boneMasks.indexOf(a)};c.prototype.addBoneMask=function(a,b){void 0===b&&(b=!0);this.addBoneToBoneMask(e.name);if(b){var e=this._armature.getBone(a);if(e)for(var f=
this._armature.getBones(!1),h=f.length;h--;)e.contains(f[h])&&this.addBoneToBoneMask(e.name)}this._updateTimelineStates();return this};c.prototype.removeBoneMask=function(a,b){void 0===b&&(b=!0);this.removeBoneFromBoneMask(a);if(b){var e=this._armature.getBone(a);if(e)for(var f=this._armature.getBones(!1),h=f.length;h--;)e.contains(f[h])&&this.removeBoneFromBoneMask(e.name)}this._updateTimelineStates();return this};c.prototype.removeAllMixingTransform=function(){this._boneMasks.length=0;this._updateTimelineStates();
return this};c.prototype.addBoneToBoneMask=function(a){this._clip.getTimeline(a)&&0>this._boneMasks.indexOf(a)&&this._boneMasks.push(a)};c.prototype.removeBoneFromBoneMask=function(a){a=this._boneMasks.indexOf(a);0<=a&&this._boneMasks.splice(a,1)};c.prototype._updateTimelineStates=function(){for(var a,b=this._timelineStateList.length;b--;)a=this._timelineStateList[b],this._armature.getBone(a.name)||this.removeTimelineState(a);if(0<this._boneMasks.length){for(b=this._timelineStateList.length;b--;)a=
this._timelineStateList[b],0>this._boneMasks.indexOf(a.name)&&this.removeTimelineState(a);for(var e in this._boneMasks)this.addTimelineState(this._boneMasks[e])}else for(e in this._clip.timelineList)this.addTimelineState(this._clip.timelineList[e].name)};c.prototype.addTimelineState=function(a){var b=this._armature.getBone(a);if(b){for(var e in this._timelineStateList)if(this._timelineStateList[e].name==a)return;e=d.TimelineState._borrowObject();e._fadeIn(b,this,this._clip.getTimeline(a));this._timelineStateList.push(e)}};
c.prototype.removeTimelineState=function(a){var b=this._timelineStateList.indexOf(a);this._timelineStateList.splice(b,1);d.TimelineState._returnObject(a)};c.prototype.play=function(){this._isPlaying=!0;return this};c.prototype.stop=function(){this._isPlaying=!1;return this};c.prototype._fadeIn=function(a,b,e,f,h,c){this._armature=a;this._clip=b;this._pausePlayheadInFade=c;this._name=this._clip.name;this._totalTime=this._clip.duration;this.autoTween=this._clip.autoTween;this.setTimeScale(f);this.setPlayTimes(h);
this._isComplete=!1;this._currentPlayTimes=this._currentFrameIndex=-1;2>Math.round(this._totalTime*this._clip.frameRate*.001)||Infinity==f?this._currentTime=this._totalTime:this._currentTime=-1;this._time=0;this._boneMasks.length=0;this._isFadeOut=!1;this._fadeWeight=0;this._fadeTotalWeight=1;this._fadeState=-1;this._fadeBeginTime=this._fadeCurrentTime=0;this._fadeTotalTime=e*this._timeScale;this.lastFrameAutoTween=this.displayControl=this._isPlaying=!0;this.additiveBlending=!1;this.weight=1;this.fadeOutTime=
e;this._updateTimelineStates();return this};c.prototype.fadeOut=function(a,b){if(!this._armature)return null;if(isNaN(a)||0>a)a=0;this._pausePlayheadInFade=b;if(this._isFadeOut){if(a>this._fadeTotalTime/this._timeScale-(this._fadeCurrentTime-this._fadeBeginTime))return this}else for(var e in this._timelineStateList)this._timelineStateList[e]._fadeOut();this._isFadeOut=!0;this._fadeTotalWeight=this._fadeWeight;this._fadeState=-1;this._fadeBeginTime=this._fadeCurrentTime;this._fadeTotalTime=0<=this._fadeTotalWeight?
a*this._timeScale:0;this.displayControl=!1;return this};c.prototype._advanceTime=function(a){a*=this._timeScale;this.advanceFadeTime(a);this._fadeWeight&&this.advanceTimelinesTime(a);return this._isFadeOut&&1==this._fadeState};c.prototype.advanceFadeTime=function(a){var b=!1,e=!1;if(0<=this._fadeBeginTime){var f=this._fadeState;this._fadeCurrentTime+=0>a?-a:a;if(this._fadeCurrentTime>=this._fadeBeginTime+this._fadeTotalTime){if(1==this._fadeWeight||0==this._fadeWeight)f=1,this._pausePlayheadInFade&&
(this._pausePlayheadInFade=!1,this._currentTime=-1);this._fadeWeight=this._isFadeOut?0:1}else this._fadeCurrentTime>=this._fadeBeginTime?(f=0,this._fadeWeight=(this._fadeCurrentTime-this._fadeBeginTime)/this._fadeTotalTime*this._fadeTotalWeight,this._isFadeOut&&(this._fadeWeight=this._fadeTotalWeight-this._fadeWeight)):(f=-1,this._fadeWeight=this._isFadeOut?1:0);this._fadeState!=f&&(-1==this._fadeState&&(b=!0),1==f&&(e=!0),this._fadeState=f)}b&&(this._isFadeOut?this._armature.hasEventListener(d.AnimationEvent.FADE_OUT)&&
(a=new d.AnimationEvent(d.AnimationEvent.FADE_OUT),a.animationState=this,this._armature._eventList.push(a)):(this.hideBones(),this._armature.hasEventListener(d.AnimationEvent.FADE_IN)&&(a=new d.AnimationEvent(d.AnimationEvent.FADE_IN),a.animationState=this,this._armature._eventList.push(a))));e&&(this._isFadeOut?this._armature.hasEventListener(d.AnimationEvent.FADE_OUT_COMPLETE)&&(a=new d.AnimationEvent(d.AnimationEvent.FADE_OUT_COMPLETE),a.animationState=this,this._armature._eventList.push(a)):this._armature.hasEventListener(d.AnimationEvent.FADE_IN_COMPLETE)&&
(a=new d.AnimationEvent(d.AnimationEvent.FADE_IN_COMPLETE),a.animationState=this,this._armature._eventList.push(a)))};c.prototype.advanceTimelinesTime=function(a){this._isPlaying&&!this._pausePlayheadInFade&&(this._time+=a);var b=!1,e=a=!1,f=!1,h=0,c=1E3*this._time;0==this._playTimes?(f=!1,h=Math.ceil(Math.abs(c)/this._totalTime)||1,c=0<=c?c-Math.floor(c/this._totalTime)*this._totalTime:c-Math.ceil(c/this._totalTime)*this._totalTime,0>c&&(c+=this._totalTime)):(h=this._playTimes*this._totalTime,c>=
h?(c=h,f=!0):c<=-h?(c=-h,f=!0):f=!1,0>c&&(c+=h),h=Math.ceil(c/this._totalTime)||1,c=0<=c?c-Math.floor(c/this._totalTime)*this._totalTime:c-Math.ceil(c/this._totalTime)*this._totalTime,f&&(c=this._totalTime));this._isComplete=f;var k=1E3*this._time/this._totalTime,m;for(m in this._timelineStateList){var g=this._timelineStateList[m];g._update(k);this._isComplete=g._isComplete&&this._isComplete}this._currentTime!=c&&(this._currentPlayTimes!=h&&(0<this._currentPlayTimes&&1<h&&(e=!0),this._currentPlayTimes=
h),0>this._currentTime&&(b=!0),this._isComplete&&(a=!0),this._currentTime=c,this.updateMainTimeline(f));b&&this._armature.hasEventListener(d.AnimationEvent.START)&&(m=new d.AnimationEvent(d.AnimationEvent.START),m.animationState=this,this._armature._eventList.push(m));a?(this._armature.hasEventListener(d.AnimationEvent.COMPLETE)&&(m=new d.AnimationEvent(d.AnimationEvent.COMPLETE),m.animationState=this,this._armature._eventList.push(m)),this.autoFadeOut&&this.fadeOut(this.fadeOutTime,!0)):e&&this._armature.hasEventListener(d.AnimationEvent.LOOP_COMPLETE)&&
(m=new d.AnimationEvent(d.AnimationEvent.LOOP_COMPLETE),m.animationState=this,this._armature._eventList.push(m))};c.prototype.updateMainTimeline=function(a){var b=this._clip.frameList;if(0<b.length){for(var e,f,h=0,c=this._clip.frameList.length;h<c;++h){if(0>this._currentFrameIndex)this._currentFrameIndex=0;else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){if(this._currentFrameIndex++,this._currentFrameIndex>=b.length)if(a){this._currentFrameIndex--;
break}else this._currentFrameIndex=0}else break;f=b[this._currentFrameIndex];e&&this._armature._arriveAtFrame(e,null,this,!0);this._currentFrameDuration=f.duration;this._currentFramePosition=f.position;e=f}f&&this._armature._arriveAtFrame(f,null,this,!1)}};c.prototype.hideBones=function(){for(var a in this._clip.hideTimelineNameMap){var b=this._armature.getBone(this._clip.hideTimelineNameMap[a]);b&&b._hideSlots()}};c.prototype.setAdditiveBlending=function(a){this.additiveBlending=a;return this};c.prototype.setAutoFadeOut=
function(a,b){void 0===b&&(b=-1);this.autoFadeOut=a;0<=b&&(this.fadeOutTime=b*this._timeScale);return this};c.prototype.setWeight=function(a){if(isNaN(a)||0>a)a=1;this.weight=a;return this};c.prototype.setFrameTween=function(a,b){this.autoTween=a;this.lastFrameAutoTween=b;return this};c.prototype.setCurrentTime=function(a){if(0>a||isNaN(a))a=0;this._time=a;this._currentTime=1E3*this._time;return this};c.prototype.setTimeScale=function(a){if(isNaN(a)||Infinity==a)a=1;this._timeScale=a;return this};
c.prototype.setPlayTimes=function(a){void 0===a&&(a=0);2>Math.round(.001*this._totalTime*this._clip.frameRate)?this._playTimes=0>a?-1:1:this._playTimes=0>a?-a:a;this.autoFadeOut=0>a?!0:!1;return this};Object.defineProperty(c.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"group",{get:function(){return this._group},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"clip",{get:function(){return this._clip},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isComplete",{get:function(){return this._isComplete},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isPlaying",{get:function(){return this._isPlaying&&!this._isComplete},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"currentPlayTimes",{get:function(){return 0>this._currentPlayTimes?0:this._currentPlayTimes},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"totalTime",{get:function(){return.001*this._totalTime},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"currentTime",{get:function(){return 0>this._currentTime?0:.001*this._currentTime},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fadeWeight",{get:function(){return this._fadeWeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fadeState",{get:function(){return this._fadeState},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fadeTotalTime",{get:function(){return this._fadeTotalTime},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeScale",{get:function(){return this._timeScale},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"playTimes",{get:function(){return this._playTimes},enumerable:!0,configurable:!0});c._pool=[];return c}();d.AnimationState=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this._updateMode=this._currentFrameDuration=this._currentFramePosition=this._currentFrameIndex=this._currentTime=this._totalTime=0;this._transform=new d.DBTransform;this._pivot=new d.Point;this._durationTransform=new d.DBTransform;this._durationPivot=new d.Point;this._durationColor=new d.ColorTransform}c._borrowObject=function(){return 0==c._pool.length?new c:c._pool.pop()};c._returnObject=function(a){0>c._pool.indexOf(a)&&(c._pool[c._pool.length]=a);a.clear()};
c._clear=function(){for(var a=c._pool.length;a--;)c._pool[a].clear();c._pool.length=0};c.prototype.clear=function(){this._bone&&(this._bone._removeState(this),this._bone=null);this._originPivot=this._originTransform=this._timelineData=this._animationState=this._animation=this._armature=null};c.prototype._fadeIn=function(a,b,e){this._bone=a;this._armature=this._bone.armature;this._animation=this._armature.animation;this._animationState=b;this._timelineData=e;this._originTransform=this._timelineData.originTransform;
this._originPivot=this._timelineData.originPivot;this.name=e.name;this._totalTime=this._timelineData.duration;this._rawAnimationScale=this._animationState.clip.scale;this._tweenColor=this._tweenScale=this._tweenTransform=this._blendEnabled=this._isComplete=!1;this._currentTime=this._currentFrameIndex=-1;this._tweenEasing=NaN;this._weight=1;this._transform.x=0;this._transform.y=0;this._transform.scaleX=1;this._transform.scaleY=1;this._transform.skewX=0;this._transform.skewY=0;this._pivot.x=0;this._pivot.y=
0;this._durationTransform.x=0;this._durationTransform.y=0;this._durationTransform.scaleX=1;this._durationTransform.scaleY=1;this._durationTransform.skewX=0;this._durationTransform.skewY=0;this._durationPivot.x=0;this._durationPivot.y=0;switch(this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1}this._bone._addState(this)};c.prototype._fadeOut=function(){this._transform.skewX=d.TransformUtil.formatRadian(this._transform.skewX);
this._transform.skewY=d.TransformUtil.formatRadian(this._transform.skewY)};c.prototype._update=function(a){-1==this._updateMode?this.updateMultipleFrame(a):1==this._updateMode&&(this._updateMode=0,this.updateSingleFrame())};c.prototype.updateMultipleFrame=function(a){var b=0;a/=this._timelineData.scale;a+=this._timelineData.offset;a*=this._totalTime;b=this._animationState.playTimes;0==b?(this._isComplete=!1,b=Math.ceil(Math.abs(a)/this._totalTime)||1,a=0<=a?a-Math.floor(a/this._totalTime)*this._totalTime:
a-Math.ceil(a/this._totalTime)*this._totalTime,0>a&&(a+=this._totalTime)):(b*=this._totalTime,a>=b?(a=b,this._isComplete=!0):a<=-b?(a=-b,this._isComplete=!0):this._isComplete=!1,0>a&&(a+=b),b=Math.ceil(a/this._totalTime)||1,a=this._isComplete?this._totalTime:0<=a?a-Math.floor(a/this._totalTime)*this._totalTime:a-Math.ceil(a/this._totalTime)*this._totalTime);if(this._currentTime!=a){this._currentTime=a;a=this._timelineData.frameList;for(var e,f,h=0,c=this._timelineData.frameList.length;h<c;++h){if(0>
this._currentFrameIndex)this._currentFrameIndex=0;else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){if(this._currentFrameIndex++,this._currentFrameIndex>=a.length)if(this._isComplete){this._currentFrameIndex--;break}else this._currentFrameIndex=0}else break;f=a[this._currentFrameIndex];e&&this._bone._arriveAtFrame(e,this,this._animationState,!0);this._currentFrameDuration=f.duration;this._currentFramePosition=f.position;
e=f}f&&(this._bone._arriveAtFrame(f,this,this._animationState,!1),(this._blendEnabled=0<=f.displayIndex)?this.updateToNextFrame(b):(this._tweenEasing=NaN,this._tweenColor=this._tweenScale=this._tweenTransform=!1));this._blendEnabled&&this.updateTween()}};c.prototype.updateToNextFrame=function(a){void 0===a&&(a=0);var b=this._currentFrameIndex+1;b>=this._timelineData.frameList.length&&(b=0);var e=this._timelineData.frameList[this._currentFrameIndex],f=this._timelineData.frameList[b],h=!1;0==b&&(!this._animationState.lastFrameAutoTween||
this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&.999999<((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+a-this._timelineData.offset)*this._timelineData.scale)?(this._tweenEasing=NaN,h=!1):0>e.displayIndex||0>f.displayIndex?(this._tweenEasing=NaN,h=!1):this._animationState.autoTween?(this._tweenEasing=this._animationState.clip.tweenEasing,isNaN(this._tweenEasing)?(this._tweenEasing=e.tweenEasing,isNaN(this._tweenEasing)?
h=!1:(10==this._tweenEasing&&(this._tweenEasing=0),h=!0)):h=!0):(this._tweenEasing=e.tweenEasing,isNaN(this._tweenEasing)||10==this._tweenEasing?(this._tweenEasing=NaN,h=!1):h=!0);h?(this._durationTransform.x=f.transform.x-e.transform.x,this._durationTransform.y=f.transform.y-e.transform.y,this._durationTransform.skewX=f.transform.skewX-e.transform.skewX,this._durationTransform.skewY=f.transform.skewY-e.transform.skewY,this._durationTransform.scaleX=f.transform.scaleX-e.transform.scaleX+f.scaleOffset.x,
this._durationTransform.scaleY=f.transform.scaleY-e.transform.scaleY+f.scaleOffset.y,0==b&&(this._durationTransform.skewX=d.TransformUtil.formatRadian(this._durationTransform.skewX),this._durationTransform.skewY=d.TransformUtil.formatRadian(this._durationTransform.skewY)),this._durationPivot.x=f.pivot.x-e.pivot.x,this._durationPivot.y=f.pivot.y-e.pivot.y,this._durationTransform.x||this._durationTransform.y||this._durationTransform.skewX||this._durationTransform.skewY||this._durationTransform.scaleX||
this._durationTransform.scaleY||this._durationPivot.x||this._durationPivot.y?(this._tweenTransform=!0,this._tweenScale=e.tweenScale):this._tweenScale=this._tweenTransform=!1,e.color&&f.color?(this._durationColor.alphaOffset=f.color.alphaOffset-e.color.alphaOffset,this._durationColor.redOffset=f.color.redOffset-e.color.redOffset,this._durationColor.greenOffset=f.color.greenOffset-e.color.greenOffset,this._durationColor.blueOffset=f.color.blueOffset-e.color.blueOffset,this._durationColor.alphaMultiplier=
f.color.alphaMultiplier-e.color.alphaMultiplier,this._durationColor.redMultiplier=f.color.redMultiplier-e.color.redMultiplier,this._durationColor.greenMultiplier=f.color.greenMultiplier-e.color.greenMultiplier,this._durationColor.blueMultiplier=f.color.blueMultiplier-e.color.blueMultiplier,this._tweenColor=this._durationColor.alphaOffset||this._durationColor.redOffset||this._durationColor.greenOffset||this._durationColor.blueOffset||this._durationColor.alphaMultiplier||this._durationColor.redMultiplier||
this._durationColor.greenMultiplier||this._durationColor.blueMultiplier?!0:!1):e.color?(this._tweenColor=!0,this._durationColor.alphaOffset=-e.color.alphaOffset,this._durationColor.redOffset=-e.color.redOffset,this._durationColor.greenOffset=-e.color.greenOffset,this._durationColor.blueOffset=-e.color.blueOffset,this._durationColor.alphaMultiplier=1-e.color.alphaMultiplier,this._durationColor.redMultiplier=1-e.color.redMultiplier,this._durationColor.greenMultiplier=1-e.color.greenMultiplier,this._durationColor.blueMultiplier=
1-e.color.blueMultiplier):f.color?(this._tweenColor=!0,this._durationColor.alphaOffset=f.color.alphaOffset,this._durationColor.redOffset=f.color.redOffset,this._durationColor.greenOffset=f.color.greenOffset,this._durationColor.blueOffset=f.color.blueOffset,this._durationColor.alphaMultiplier=f.color.alphaMultiplier-1,this._durationColor.redMultiplier=f.color.redMultiplier-1,this._durationColor.greenMultiplier=f.color.greenMultiplier-1,this._durationColor.blueMultiplier=f.color.blueMultiplier-1):this._tweenColor=
!1):this._tweenColor=this._tweenScale=this._tweenTransform=!1;this._tweenTransform?this._tweenScale||(this._animationState.additiveBlending?(this._transform.scaleX=e.transform.scaleX,this._transform.scaleY=e.transform.scaleY):(this._transform.scaleX=this._originTransform.scaleX*e.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*e.transform.scaleY)):(this._animationState.additiveBlending?(this._transform.x=e.transform.x,this._transform.y=e.transform.y,this._transform.skewX=e.transform.skewX,
this._transform.skewY=e.transform.skewY,this._transform.scaleX=e.transform.scaleX,this._transform.scaleY=e.transform.scaleY,this._pivot.x=e.pivot.x,this._pivot.y=e.pivot.y):(this._transform.x=this._originTransform.x+e.transform.x,this._transform.y=this._originTransform.y+e.transform.y,this._transform.skewX=this._originTransform.skewX+e.transform.skewX,this._transform.skewY=this._originTransform.skewY+e.transform.skewY,this._transform.scaleX=this._originTransform.scaleX*e.transform.scaleX,this._transform.scaleY=
this._originTransform.scaleY*e.transform.scaleY,this._pivot.x=this._originPivot.x+e.pivot.x,this._pivot.y=this._originPivot.y+e.pivot.y),this._bone.invalidUpdate());!this._tweenColor&&this._animationState.displayControl&&(e.color?this._bone._updateColor(e.color.alphaOffset,e.color.redOffset,e.color.greenOffset,e.color.blueOffset,e.color.alphaMultiplier,e.color.redMultiplier,e.color.greenMultiplier,e.color.blueMultiplier,!0):this._bone._isColorChanged&&this._bone._updateColor(0,0,0,0,1,1,1,1,!1))};
c.prototype.updateTween=function(){var a=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;this._tweenEasing&&(a=d.MathUtil.getEaseValue(a,this._tweenEasing));var b=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenTransform){var e=b.transform,f=b.pivot;this._animationState.additiveBlending?(this._transform.x=e.x+this._durationTransform.x*a,this._transform.y=e.y+this._durationTransform.y*a,this._transform.skewX=e.skewX+this._durationTransform.skewX*a,this._transform.skewY=
e.skewY+this._durationTransform.skewY*a,this._tweenScale&&(this._transform.scaleX=e.scaleX+this._durationTransform.scaleX*a,this._transform.scaleY=e.scaleY+this._durationTransform.scaleY*a),this._pivot.x=f.x+this._durationPivot.x*a,this._pivot.y=f.y+this._durationPivot.y*a):(this._transform.x=this._originTransform.x+e.x+this._durationTransform.x*a,this._transform.y=this._originTransform.y+e.y+this._durationTransform.y*a,this._transform.skewX=this._originTransform.skewX+e.skewX+this._durationTransform.skewX*
a,this._transform.skewY=this._originTransform.skewY+e.skewY+this._durationTransform.skewY*a,this._tweenScale&&(this._transform.scaleX=this._originTransform.scaleX*e.scaleX+this._durationTransform.scaleX*a,this._transform.scaleY=this._originTransform.scaleY*e.scaleY+this._durationTransform.scaleY*a),this._pivot.x=this._originPivot.x+f.x+this._durationPivot.x*a,this._pivot.y=this._originPivot.y+f.y+this._durationPivot.y*a);this._bone.invalidUpdate()}this._tweenColor&&this._animationState.displayControl&&
(b.color?this._bone._updateColor(b.color.alphaOffset+this._durationColor.alphaOffset*a,b.color.redOffset+this._durationColor.redOffset*a,b.color.greenOffset+this._durationColor.greenOffset*a,b.color.blueOffset+this._durationColor.blueOffset*a,b.color.alphaMultiplier+this._durationColor.alphaMultiplier*a,b.color.redMultiplier+this._durationColor.redMultiplier*a,b.color.greenMultiplier+this._durationColor.greenMultiplier*a,b.color.blueMultiplier+this._durationColor.blueMultiplier*a,!0):this._bone._updateColor(this._durationColor.alphaOffset*
a,this._durationColor.redOffset*a,this._durationColor.greenOffset*a,this._durationColor.blueOffset*a,1+this._durationColor.alphaMultiplier*a,1+this._durationColor.redMultiplier*a,1+this._durationColor.greenMultiplier*a,1+this._durationColor.blueMultiplier*a,!0))};c.prototype.updateSingleFrame=function(){var a=this._timelineData.frameList[0];this._bone._arriveAtFrame(a,this,this._animationState,!1);this._isComplete=!0;this._tweenEasing=NaN;this._tweenColor=this._tweenScale=this._tweenTransform=!1;
if(this._blendEnabled=0<=a.displayIndex)this._animationState.additiveBlending?(this._transform.x=a.transform.x,this._transform.y=a.transform.y,this._transform.skewX=a.transform.skewX,this._transform.skewY=a.transform.skewY,this._transform.scaleX=a.transform.scaleX,this._transform.scaleY=a.transform.scaleY,this._pivot.x=a.pivot.x,this._pivot.y=a.pivot.y):(this._transform.x=this._originTransform.x+a.transform.x,this._transform.y=this._originTransform.y+a.transform.y,this._transform.skewX=this._originTransform.skewX+
a.transform.skewX,this._transform.skewY=this._originTransform.skewY+a.transform.skewY,this._transform.scaleX=this._originTransform.scaleX*a.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*a.transform.scaleY,this._pivot.x=this._originPivot.x+a.pivot.x,this._pivot.y=this._originPivot.y+a.pivot.y),this._bone.invalidUpdate(),this._animationState.displayControl&&(a.color?this._bone._updateColor(a.color.alphaOffset,a.color.redOffset,a.color.greenOffset,a.color.blueOffset,a.color.alphaMultiplier,
a.color.redMultiplier,a.color.greenMultiplier,a.color.blueMultiplier,!0):this._bone._isColorChanged&&this._bone._updateColor(0,0,0,0,1,1,1,1,!1))};c.HALF_PI=.5*Math.PI;c.DOUBLE_PI=2*Math.PI;c._pool=[];return c}();d.TimelineState=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(a,b){void 0===a&&(a=-1);void 0===b&&(b=1);this._time=0<=a?a:.001*(new Date).getTime();this._timeScale=isNaN(b)?1:b;this._animatableList=[]}Object.defineProperty(c.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeScale",{get:function(){return this._timeScale},set:function(a){if(isNaN(a)||0>a)a=1;this._timeScale=a},enumerable:!0,configurable:!0});c.prototype.contains=function(a){return 0<=
this._animatableList.indexOf(a)};c.prototype.add=function(a){a&&-1==this._animatableList.indexOf(a)&&this._animatableList.push(a)};c.prototype.remove=function(a){a=this._animatableList.indexOf(a);0<=a&&(this._animatableList[a]=null)};c.prototype.clear=function(){this._animatableList.length=0};c.prototype.advanceTime=function(a){void 0===a&&(a=-1);0>a&&(a=(new Date).getTime()-this._time);a*=this._timeScale;this._time+=a;var b=this._animatableList.length;if(0!=b){for(var e=0,f=0;f<b;f++){var h=this._animatableList[f];
h&&(e!=f&&(this._animatableList[e]=h,this._animatableList[f]=null),h.advanceTime(a),e++)}if(e!=f){for(b=this._animatableList.length;f<b;)this._animatableList[e++]=this._animatableList[f++];this._animatableList.length=e}}};c.clock=new c;return c}();d.WorldClock=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){}c.prototype.hasEventListener=function(a){return this._listenersMap&&this._listenersMap[a]?!0:!1};c.prototype.addEventListener=function(a,b){if(a&&b){this._listenersMap||(this._listenersMap={});var e=this._listenersMap[a];e&&this.removeEventListener(a,b);e?e.push(b):this._listenersMap[a]=[b]}};c.prototype.removeEventListener=function(a,b){if(this._listenersMap&&a&&b){var e=this._listenersMap[a];if(e)for(var f=e.length,h=0;h<f;h++)e[h]==b&&(1==f?(e.length=
0,delete this._listenersMap[a]):e.splice(h,1))}};c.prototype.removeAllEventListeners=function(a){a?delete this._listenersMap[a]:this._listenersMap=null};c.prototype.dispatchEvent=function(a){if(a){var b=this._listenersMap[a.type];if(b){a.target=this;for(var e=b.concat(),b=b.length,f=0;f<b;f++)e[f](a)}}};return c}();d.EventDispatcher=g})(dragonBones||(dragonBones={}));
var __extends=this.__extends||function(d,g){function c(){this.constructor=d}for(var a in g)g.hasOwnProperty(a)&&(d[a]=g[a]);c.prototype=g.prototype;d.prototype=new c};
(function(d){var g=function(c){function a(b){c.call(this);this._display=b;this._animation=new d.Animation(this);this._slotsZOrderChanged=!1;this._slotList=[];this._boneList=[];this._eventList=[];this._lockDispose=this._delayDispose=!1;this._armatureData=null}__extends(a,c);Object.defineProperty(a.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0});
a.prototype.getDisplay=function(){return this._display};Object.defineProperty(a.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._delayDispose=!0;if(this._animation&&!this._lockDispose){this.userData=null;this._animation.dispose();for(var b=this._slotList.length;b--;)this._slotList[b].dispose();for(b=this._boneList.length;b--;)this._boneList[b].dispose();this._eventList=this._boneList=this._slotList=this._animation=this._armatureData=
null}};a.prototype.invalidUpdate=function(b){void 0===b&&(b=null);if(b)(b=this.getBone(b))&&b.invalidUpdate();else for(b=this._boneList.length;b--;)this._boneList[b].invalidUpdate()};a.prototype.advanceTime=function(b){this._lockDispose=!0;this._animation._advanceTime(b);b*=this._animation.timeScale;for(var a=this._animation._isFading,f=this._boneList.length;f--;)this._boneList[f]._update(a);for(f=this._slotList.length;f--;)a=this._slotList[f],a._update(),a._isShowDisplay&&(a=a.childArmature)&&a.advanceTime(b);
this._slotsZOrderChanged&&(this.updateSlotsZOrder(),this.hasEventListener(d.ArmatureEvent.Z_ORDER_UPDATED)&&this.dispatchEvent(new d.ArmatureEvent(d.ArmatureEvent.Z_ORDER_UPDATED)));if(0<this._eventList.length){for(var h in this._eventList)this.dispatchEvent(this._eventList[h]);this._eventList.length=0}this._lockDispose=!1;this._delayDispose&&this.dispose()};a.prototype.getSlots=function(b){void 0===b&&(b=!0);return b?this._slotList.concat():this._slotList};a.prototype.getSlot=function(b){for(var a=
this._slotList.length,f=0;f<a;f++){var h=this._slotList[f];if(h.name==b)return h}return null};a.prototype.getSlotByDisplay=function(b){if(b)for(var a=this._slotList.length,f=0;f<a;f++){var h=this._slotList[f];if(h.display==b)return h}return null};a.prototype.addSlot=function(b,a){var f=this.getBone(a);if(f)f.addSlot(b);else throw Error();};a.prototype.removeSlot=function(b){if(!b||b.armature!=this)throw Error();b.parent.removeSlot(b)};a.prototype.removeSlotByName=function(b){(b=this.getSlot(b))&&
this.removeSlot(b);return b};a.prototype.getBones=function(b){void 0===b&&(b=!0);return b?this._boneList.concat():this._boneList};a.prototype.getBone=function(b){for(var a=this._boneList.length,f=0;f<a;f++){var h=this._boneList[f];if(h.name==b)return h}return null};a.prototype.getBoneByDisplay=function(b){return(b=this.getSlotByDisplay(b))?b.parent:null};a.prototype.addBone=function(b,a,f){void 0===a&&(a=null);void 0===f&&(f=!1);var h;if(a&&(h=this.getBone(a),!h))throw Error();h?h.addChildBone(b,
f):(b.parent&&b.parent.removeChildBone(b,f),b._setArmature(this),f||this._updateAnimationAfterBoneListChanged())};a.prototype.removeBone=function(b,a){void 0===a&&(a=!1);if(!b||b.armature!=this)throw Error();b.parent?b.parent.removeChildBone(b,a):(b._setArmature(null),a||this._updateAnimationAfterBoneListChanged(!1))};a.prototype.removeBoneByName=function(b){(b=this.getBone(b))&&this.removeBone(b);return b};a.prototype._addBoneToBoneList=function(b){0>this._boneList.indexOf(b)&&(this._boneList[this._boneList.length]=
b)};a.prototype._removeBoneFromBoneList=function(b){b=this._boneList.indexOf(b);0<=b&&this._boneList.splice(b,1)};a.prototype._addSlotToSlotList=function(b){0>this._slotList.indexOf(b)&&(this._slotList[this._slotList.length]=b)};a.prototype._removeSlotFromSlotList=function(b){b=this._slotList.indexOf(b);0<=b&&this._slotList.splice(b,1)};a.prototype.updateSlotsZOrder=function(){this._slotList.sort(this.sortSlot);for(var b=this._slotList.length;b--;){var a=this._slotList[b];a._isShowDisplay&&a._addDisplayToContainer(this._display)}this._slotsZOrderChanged=
!1};a.prototype._updateAnimationAfterBoneListChanged=function(b){void 0===b&&(b=!0);b&&this.sortBoneList();this._animation._updateAnimationStates()};a.prototype.sortBoneList=function(){var b=this._boneList.length;if(0!=b){for(var a=[];b--;){for(var f=0,h=this._boneList[b],c=h;c;)f++,c=c.parent;a[b]=[f,h]}a.sort(d.ArmatureData.sortBoneDataHelpArrayDescending);for(b=a.length;b--;)this._boneList[b]=a[b][1];a.length=0}};a.prototype._arriveAtFrame=function(b,a,f,h){b.event&&this.hasEventListener(d.FrameEvent.ANIMATION_FRAME_EVENT)&&
(a=new d.FrameEvent(d.FrameEvent.ANIMATION_FRAME_EVENT),a.animationState=f,a.frameLabel=b.event,this._eventList.push(a));b.action&&f.displayControl&&this.animation.gotoAndPlay(b.action)};a.prototype.sortSlot=function(b,a){return b.zOrder<a.zOrder?1:-1};return a}(d.EventDispatcher);d.Armature=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0}c.prototype.invert=function(){var a=this.a,b=this.b,e=this.c,f=this.d,h=this.tx,c=a*f-b*e;this.a=f/c;this.b=-b/c;this.c=-e/c;this.d=a/c;this.tx=(e*this.ty-f*h)/c;this.ty=-(a*this.ty-b*h)/c};c.prototype.concat=function(a){var b=a.a,e=a.b,f=a.c,h=a.d,c=this.tx,d=this.ty;if(1!=b||0!=e||0!=f||1!=h){var m=this.a,g=this.b,n=this.c,l=this.d;this.a=m*b+g*f;this.b=m*e+g*h;this.c=n*b+l*f;this.d=n*e+l*h}this.tx=c*
b+d*f+a.tx;this.ty=c*e+d*h+a.ty};return c}();d.Matrix=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this.skewY=this.skewX=this.y=this.x=0;this.scaleY=this.scaleX=1}Object.defineProperty(c.prototype,"rotation",{get:function(){return this.skewX},set:function(a){this.skewX=this.skewY=a},enumerable:!0,configurable:!0});c.prototype.copy=function(a){this.x=a.x;this.y=a.y;this.skewX=a.skewX;this.skewY=a.skewY;this.scaleX=a.scaleX;this.scaleY=a.scaleY};c.prototype.toString=function(){return"x:"+this.x+" y:"+this.y+" skewX:"+this.skewX+" skewY:"+this.skewY+" scaleX:"+
this.scaleX+" scaleY:"+this.scaleY};return c}();d.DBTransform=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this._globalTransformMatrix=new d.Matrix;this._global=new d.DBTransform;this._origin=new d.DBTransform;this._offset=new d.DBTransform;this._offset.scaleX=this._offset.scaleY=1;this._visible=!0;this.userData=this._parent=this._armature=null;this.inheritTranslation=this.inheritScale=this.inheritRotation=!0}Object.defineProperty(c.prototype,"global",{get:function(){return this._global},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"origin",
{get:function(){return this._origin},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0});c.prototype._setArmature=function(a){this._armature=a};Object.defineProperty(c.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});c.prototype._setParent=function(a){this._parent=
a};c.prototype.dispose=function(){this._parent=this._armature=this._offset=this._origin=this._global=this._globalTransformMatrix=this.userData=null};c.prototype._calculateRelativeParentTransform=function(){};c.prototype._calculateParentTransform=function(){if(this.parent&&(this.inheritTranslation||this.inheritRotation||this.inheritScale)){var a=this._parent._globalTransformForChild,b=this._parent._globalTransformMatrixForChild;this.inheritTranslation&&this.inheritRotation&&this.inheritScale||(a=c._tempParentGlobalTransform,
a.copy(this._parent._globalTransformForChild),this.inheritTranslation||(a.x=0,a.y=0),this.inheritScale||(a.scaleX=1,a.scaleY=1),this.inheritRotation||(a.skewX=0,a.skewY=0),b=c._tempParentGlobalTransformMatrix,d.TransformUtil.transformToMatrix(a,b,!0));return{parentGlobalTransform:a,parentGlobalTransformMatrix:b}}return null};c.prototype._updateGlobal=function(){this._calculateRelativeParentTransform();d.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix,!0);var a=this._calculateParentTransform();
a&&(this._globalTransformMatrix.concat(a.parentGlobalTransformMatrix),d.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,0<=this._global.scaleX*a.parentGlobalTransform.scaleX,0<=this._global.scaleY*a.parentGlobalTransform.scaleY));return a};c._tempParentGlobalTransformMatrix=new d.Matrix;c._tempParentGlobalTransform=new d.DBTransform;return c}();d.DBObject=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(c){function a(){c.call(this);this.applyOffsetRotationToChild=this.applyOffsetTranslationToChild=!0;this.applyOffsetScaleToChild=!1;this._needUpdate=0;this._tween=new d.DBTransform;this._tweenPivot=new d.Point;this._tween.scaleX=this._tween.scaleY=1;this._boneList=[];this._slotList=[];this._timelineStateList=[];this._needUpdate=2;this._isColorChanged=!1}__extends(a,c);a.initWithBoneData=function(b){var e=new a;e.name=b.name;e.inheritRotation=b.inheritRotation;e.inheritScale=
b.inheritScale;e.origin.copy(b.transform);return e};a.prototype.dispose=function(){if(this._boneList){c.prototype.dispose.call(this);for(var b=this._boneList.length;b--;)this._boneList[b].dispose();for(b=this._slotList.length;b--;)this._slotList[b].dispose();this._timelineStateList=this._slotList=this._boneList=this._tweenPivot=this._tween=null}};a.prototype.contains=function(b){if(!b)throw Error();if(b==this)return!1;for(;b!=this&&null!=b;)b=b.parent;return b==this};a.prototype.addChildBone=function(b,
a){void 0===a&&(a=!1);if(!b)throw Error();if(b==this||b.contains(this))throw Error("An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)");b.parent!=this&&(b.parent&&b.parent.removeChildBone(b,a),this._boneList[this._boneList.length]=b,b._setParent(this),b._setArmature(this._armature),this._armature&&!a&&this._armature._updateAnimationAfterBoneListChanged())};a.prototype.removeChildBone=function(b,a){void 0===a&&(a=!1);if(!b)throw Error();var f=this._boneList.indexOf(b);
if(0>f)throw Error();this._boneList.splice(f,1);b._setParent(null);b._setArmature(null);this._armature&&!a&&this._armature._updateAnimationAfterBoneListChanged(!1)};a.prototype.addSlot=function(b){if(!b)throw Error();b.parent&&b.parent.removeSlot(b);this._slotList[this._slotList.length]=b;b._setParent(this);b.setArmature(this._armature)};a.prototype.removeSlot=function(b){if(!b)throw Error();var a=this._slotList.indexOf(b);if(0>a)throw Error();this._slotList.splice(a,1);b._setParent(null);b.setArmature(null)};
a.prototype._setArmature=function(b){if(this._armature!=b){this._armature&&(this._armature._removeBoneFromBoneList(this),this._armature._updateAnimationAfterBoneListChanged(!1));(this._armature=b)&&this._armature._addBoneToBoneList(this);for(b=this._boneList.length;b--;)this._boneList[b]._setArmature(this._armature);for(b=this._slotList.length;b--;)this._slotList[b].setArmature(this._armature)}};a.prototype.getBones=function(b){void 0===b&&(b=!0);return b?this._boneList.concat():this._boneList};a.prototype.getSlots=
function(b){void 0===b&&(b=!0);return b?this._slotList.concat():this._slotList};a.prototype.invalidUpdate=function(){this._needUpdate=2};a.prototype._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._tween.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._tween.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._tween.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._tween.skewY+this._offset.skewY;
this._global.x=this._origin.x+this._tween.x+this._offset.x;this._global.y=this._origin.y+this._tween.y+this._offset.y};a.prototype._update=function(b){void 0===b&&(b=!1);this._needUpdate--;if(b||0<this._needUpdate||this._parent&&0<this._parent._needUpdate){this._needUpdate=1;this.blendingTimeline();var a=this._updateGlobal();b=a?a.parentGlobalTransform:null;var a=a?a.parentGlobalTransformMatrix:null,f=0!=this._offset.scaleX||0!=this._offset.scaleY,h=0!=this._offset.skewX||0!=this._offset.skewY;!(0==
this._offset.x&&0==this._offset.y||this.applyOffsetTranslationToChild)||f&&!this.applyOffsetScaleToChild||h&&!this.applyOffsetRotationToChild?(this._tempGlobalTransformForChild||(this._tempGlobalTransformForChild=new d.DBTransform),this._globalTransformForChild=this._tempGlobalTransformForChild,this._tempGlobalTransformMatrixForChild||(this._tempGlobalTransformMatrixForChild=new d.Matrix),this._globalTransformMatrixForChild=this._tempGlobalTransformMatrixForChild,this._globalTransformForChild.x=this._origin.x+
this._tween.x,this._globalTransformForChild.y=this._origin.y+this._tween.y,this._globalTransformForChild.scaleX=this._origin.scaleX*this._tween.scaleX,this._globalTransformForChild.scaleY=this._origin.scaleY*this._tween.scaleY,this._globalTransformForChild.skewX=this._origin.skewX+this._tween.skewX,this._globalTransformForChild.skewY=this._origin.skewY+this._tween.skewY,this.applyOffsetTranslationToChild&&(this._globalTransformForChild.x+=this._offset.x,this._globalTransformForChild.y+=this._offset.y),
this.applyOffsetScaleToChild&&(this._globalTransformForChild.scaleX*=this._offset.scaleX,this._globalTransformForChild.scaleY*=this._offset.scaleY),this.applyOffsetRotationToChild&&(this._globalTransformForChild.skewX+=this._offset.skewX,this._globalTransformForChild.skewY+=this._offset.skewY),d.TransformUtil.transformToMatrix(this._globalTransformForChild,this._globalTransformMatrixForChild,!0),a&&(this._globalTransformMatrixForChild.concat(a),d.TransformUtil.matrixToTransform(this._globalTransformMatrixForChild,
this._globalTransformForChild,0<=this._globalTransformForChild.scaleX*b.scaleX,0<=this._globalTransformForChild.scaleY*b.scaleY))):(this._globalTransformForChild=this._global,this._globalTransformMatrixForChild=this._globalTransformMatrix)}};a.prototype._updateColor=function(b,a,f,h,c,d,m,g,n){for(var l=this._slotList.length,q=0;q<l;q++)this._slotList[q]._updateDisplayColor(b,a,f,h,c,d,m,g);this._isColorChanged=n};a.prototype._hideSlots=function(){for(var b=this._slotList.length,a=0;a<b;a++)this._slotList[a]._changeDisplay(-1)};
a.prototype._arriveAtFrame=function(b,a,f,h){if(f.displayControl&&(!this.displayController||this.displayController==f.name)&&f.containsBoneMask(this.name)){h=b.displayIndex;for(var c=this._slotList.length,k=0;k<c;k++)a=this._slotList[k],a._changeDisplay(h),a._updateDisplayVisible(b.visible),0<=h&&!isNaN(b.zOrder)&&b.zOrder!=a._tweenZOrder&&(a._tweenZOrder=b.zOrder,this._armature._slotsZOrderChanged=!0);b.event&&this._armature.hasEventListener(d.FrameEvent.BONE_FRAME_EVENT)&&(a=new d.FrameEvent(d.FrameEvent.BONE_FRAME_EVENT),
a.bone=this,a.animationState=f,a.frameLabel=b.event,this._armature._eventList.push(a));if(b.action)for(f=this._slotList.length,h=0;h<f;h++)a=this._slotList[h],(a=a.childArmature)&&a.animation.gotoAndPlay(b.action)}};a.prototype._addState=function(b){0>this._timelineStateList.indexOf(b)&&(this._timelineStateList.push(b),this._timelineStateList.sort(this.sortState))};a.prototype._removeState=function(b){b=this._timelineStateList.indexOf(b);0<=b&&this._timelineStateList.splice(b,1)};a.prototype.blendingTimeline=
function(){var b,a,f,h=this._timelineStateList.length;if(1==h)b=this._timelineStateList[0],f=b._animationState.weight*b._animationState.fadeWeight,b._weight=f,a=b._transform,b=b._pivot,this._tween.x=a.x*f,this._tween.y=a.y*f,this._tween.skewX=a.skewX*f,this._tween.skewY=a.skewY*f,this._tween.scaleX=1+(a.scaleX-1)*f,this._tween.scaleY=1+(a.scaleY-1)*f,this._tweenPivot.x=b.x*f,this._tweenPivot.y=b.y*f;else if(1<h){var c=0,d=0,m=0,g=0,n=0,l=0,q=0,u=0,v=1,t=0,r=this._timelineStateList[h-1]._animationState.layer;
for(a=0;h--;){b=this._timelineStateList[h];a=b._animationState.layer;if(r!=a)if(t>=v){b._weight=0;break}else v-=t;r=a;f=b._animationState.weight*b._animationState.fadeWeight*v;(b._weight=f)&&b._blendEnabled&&(a=b._transform,b=b._pivot,c+=a.x*f,d+=a.y*f,m+=a.skewX*f,g+=a.skewY*f,n+=(a.scaleX-1)*f,l+=(a.scaleY-1)*f,q+=b.x*f,u+=b.y*f,t+=f)}this._tween.x=c;this._tween.y=d;this._tween.skewX=m;this._tween.skewY=g;this._tween.scaleX=n;this._tween.scaleY=l;this._tweenPivot.x=q;this._tweenPivot.y=u}};a.prototype.sortState=
function(b,a){return b._animationState.layer<a._animationState.layer?-1:1};Object.defineProperty(a.prototype,"childArmature",{get:function(){return this.slot?this.slot.childArmature:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"display",{get:function(){return this.slot?this.slot.display:null},set:function(b){this.slot&&(this.slot.display=b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"node",{get:function(){return this._offset},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"visible",{set:function(b){if(this._visible!=b){this._visible=b;b=this._slotList.length;for(var a=0;a<b;a++)this._slotList[a]._updateDisplayVisible(this._visible)}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"slot",{get:function(){return 0<this._slotList.length?this._slotList[0]:null},enumerable:!0,configurable:!0});return a}(d.DBObject);d.Bone=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(c){function a(b){c.call(this);this._currentDisplayIndex=0;if(b!=this)throw Error("Abstract class can not be instantiated!");this._displayList=[];this._currentDisplayIndex=-1;this._offsetZOrder=this._tweenZOrder=this._originZOrder=0;this._isShowDisplay=!1;this._colorTransform=new d.ColorTransform;this._currentDisplay=this._displayDataList=null;this.inheritScale=this.inheritRotation=!0}__extends(a,c);a.prototype.initWithSlotData=function(b){this.name=b.name;this.blendMode=
b.blendMode;this._originZOrder=b.zOrder;this._displayDataList=b.displayDataList};a.prototype.dispose=function(){this._displayList&&(c.prototype.dispose.call(this),this._displayList.length=0,this._currentDisplay=this._displayList=this._displayDataList=null)};a.prototype.setArmature=function(b){this._armature!=b&&(this._armature&&this._armature._removeSlotFromSlotList(this),(this._armature=b)?(this._armature._addSlotToSlotList(this),this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)):
this._removeDisplayFromContainer())};a.prototype._update=function(){0>=this._parent._needUpdate||(this._updateGlobal(),this._updateTransform())};a.prototype._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._offset.skewY;this._global.x=this._origin.x+this._offset.x+this._parent._tweenPivot.x;
this._global.y=this._origin.y+this._offset.y+this._parent._tweenPivot.y};a.prototype.updateChildArmatureAnimation=function(){this.childArmature&&(this._isShowDisplay?this._armature&&this._armature.animation.lastAnimationState&&this.childArmature.animation.hasAnimation(this._armature.animation.lastAnimationState.name)?this.childArmature.animation.gotoAndPlay(this._armature.animation.lastAnimationState.name):this.childArmature.animation.play():(this.childArmature.animation.stop(),this.childArmature.animation._lastAnimationState=
null))};a.prototype._changeDisplay=function(b){void 0===b&&(b=0);if(0>b)this._isShowDisplay&&(this._isShowDisplay=!1,this._removeDisplayFromContainer(),this.updateChildArmatureAnimation());else if(0<this._displayList.length){var a=this._displayList.length;b>=a&&(b=a-1);this._currentDisplayIndex!=b?(this._isShowDisplay=!0,this._currentDisplayIndex=b,this._updateSlotDisplay(),this.updateChildArmatureAnimation(),this._displayDataList&&0<this._displayDataList.length&&this._currentDisplayIndex<this._displayDataList.length&&
this._origin.copy(this._displayDataList[this._currentDisplayIndex].transform)):this._isShowDisplay||(this._isShowDisplay=!0,this._armature&&(this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)),this.updateChildArmatureAnimation())}};a.prototype._updateSlotDisplay=function(){var b=-1;this._currentDisplay&&(b=this._getDisplayIndex(),this._removeDisplayFromContainer());var a=this._displayList[this._currentDisplayIndex];this._currentDisplay=a?a instanceof d.Armature?
a.display:a:null;this._updateDisplay(this._currentDisplay);this._currentDisplay&&(this._armature&&this._isShowDisplay&&(0>b?(this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)):this._addDisplayToContainer(this._armature.display,b)),this._updateDisplayBlendMode(this._blendMode),this._updateDisplayColor(this._colorTransform.alphaOffset,this._colorTransform.redOffset,this._colorTransform.greenOffset,this._colorTransform.blueOffset,this._colorTransform.alphaMultiplier,
this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier),this._updateDisplayVisible(this._visible))};Object.defineProperty(a.prototype,"visible",{set:function(b){this._visible!=b&&(this._visible=b,this._updateDisplayVisible(this._visible))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"displayList",{get:function(){return this._displayList},set:function(b){if(!b)throw Error();0>this._currentDisplayIndex&&(this._currentDisplayIndex=
0);for(var a=this._displayList.length=b.length;a--;)this._displayList[a]=b[a];b=this._currentDisplayIndex;this._currentDisplayIndex=-1;this._changeDisplay(b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"display",{get:function(){return this._currentDisplay},set:function(b){0>this._currentDisplayIndex&&(this._currentDisplayIndex=0);this._displayList[this._currentDisplayIndex]!=b&&(this._displayList[this._currentDisplayIndex]=b,this._updateSlotDisplay(),this.updateChildArmatureAnimation(),
this._updateTransform())},enumerable:!0,configurable:!0});a.prototype.getDisplay=function(){return this.display};a.prototype.setDisplay=function(b){this.display=b};Object.defineProperty(a.prototype,"childArmature",{get:function(){return this._displayList[this._currentDisplayIndex]instanceof d.Armature?this._displayList[this._currentDisplayIndex]:null},set:function(b){this.display=b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"zOrder",{get:function(){return this._originZOrder+
this._tweenZOrder+this._offsetZOrder},set:function(b){this.zOrder!=b&&(this._offsetZOrder=b-this._originZOrder-this._tweenZOrder,this._armature&&(this._armature._slotsZOrderChanged=!0))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blendMode",{get:function(){return this._blendMode},set:function(b){this._blendMode!=b&&(this._blendMode=b,this._updateDisplayBlendMode(this._blendMode))},enumerable:!0,configurable:!0});a.prototype._updateDisplay=function(b){throw Error("Abstract method needs to be implemented in subclass!");
};a.prototype._getDisplayIndex=function(){throw Error("Abstract method needs to be implemented in subclass!");};a.prototype._addDisplayToContainer=function(b,a){throw Error("Abstract method needs to be implemented in subclass!");};a.prototype._removeDisplayFromContainer=function(){throw Error("Abstract method needs to be implemented in subclass!");};a.prototype._updateTransform=function(){throw Error("Abstract method needs to be implemented in subclass!");};a.prototype._updateDisplayVisible=function(b){throw Error("Abstract method needs to be implemented in subclass!");
};a.prototype._updateDisplayColor=function(b,a,f,h,c,d,m,g){this._colorTransform.alphaOffset=b;this._colorTransform.redOffset=a;this._colorTransform.greenOffset=f;this._colorTransform.blueOffset=h;this._colorTransform.alphaMultiplier=c;this._colorTransform.redMultiplier=d;this._colorTransform.greenMultiplier=m;this._colorTransform.blueMultiplier=g};a.prototype._updateDisplayBlendMode=function(b){throw Error("Abstract method needs to be implemented in subclass!");};return a}(d.DBObject);d.Slot=g})(dragonBones||
(dragonBones={}));(function(d){var g=function(){function c(){}c.DATA_VERSION="2.3";c.PARENT_COORDINATE_DATA_VERSION="3.0";return c}();d.DragonBones=g})(dragonBones||(dragonBones={}));(function(d){var g=function(){return function(c){this.type=c}}();d.Event=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(c){function a(b,a){c.call(this,b)}__extends(a,c);Object.defineProperty(a,"MOVEMENT_CHANGE",{get:function(){return a.FADE_IN},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"movementID",{get:function(){return this.animationName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"armature",{get:function(){return this.target},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animationName",{get:function(){return this.animationState.name},
enumerable:!0,configurable:!0});a.FADE_IN="fadeIn";a.FADE_OUT="fadeOut";a.START="start";a.COMPLETE="complete";a.LOOP_COMPLETE="loopComplete";a.FADE_IN_COMPLETE="fadeInComplete";a.FADE_OUT_COMPLETE="fadeOutComplete";return a}(d.Event);d.AnimationEvent=g})(dragonBones||(dragonBones={}));(function(d){var g=function(c){function a(b){c.call(this,b)}__extends(a,c);a.Z_ORDER_UPDATED="zOrderUpdated";return a}(d.Event);d.ArmatureEvent=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(c){function a(b,a){c.call(this,b)}__extends(a,c);Object.defineProperty(a,"MOVEMENT_FRAME_EVENT",{get:function(){return a.ANIMATION_FRAME_EVENT},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"armature",{get:function(){return this.target},enumerable:!0,configurable:!0});a.ANIMATION_FRAME_EVENT="animationFrameEvent";a.BONE_FRAME_EVENT="boneFrameEvent";return a}(d.Event);d.FrameEvent=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(c){function a(b){c.call(this);this.dragonBonesDataDic={};this.textureAtlasDic={};if(b!=this)throw Error("Abstract class can not be instantiated!");}__extends(a,c);a.prototype.dispose=function(b){void 0===b&&(b=!0);if(b){for(var a in this.dragonBonesDataDic)this.dragonBonesDataDic[a].dispose(),delete this.dragonBonesDataDic[a];for(var f in this.textureAtlasDic)this.textureAtlasDic[f].dispose(),delete this.textureAtlasDic[f]}this.textureAtlasDic=this.dragonBonesDataDic=null};
a.prototype.getDragonBonesData=function(b){return this.dragonBonesDataDic[b]};a.prototype.getSkeletonData=function(b){return this.getDragonBonesData(b)};a.prototype.addDragonBonesData=function(b,a){void 0===a&&(a=null);if(!b)throw Error();a=a||b.name;if(!a)throw Error("Unnamed data!");if(this.dragonBonesDataDic[a])throw Error();this.dragonBonesDataDic[a]=b};a.prototype.addSkeletonData=function(b,a){void 0===a&&(a=null);this.addDragonBonesData(b,a)};a.prototype.removeDragonBonesData=function(b){delete this.dragonBonesDataDic[b]};
a.prototype.removeSkeletonData=function(b){delete this.dragonBonesDataDic[b]};a.prototype.getTextureAtlas=function(b){return this.textureAtlasDic[b]};a.prototype.addTextureAtlas=function(b,a){void 0===a&&(a=null);if(!b)throw Error();!a&&b.hasOwnProperty("name")&&(a=b.name);if(!a)throw Error("Unnamed data!");if(this.textureAtlasDic[a])throw Error();this.textureAtlasDic[a]=b};a.prototype.removeTextureAtlas=function(b){delete this.textureAtlasDic[b]};a.prototype.getTextureDisplay=function(b,a,f,h){void 0===
a&&(a=null);void 0===f&&(f=NaN);void 0===h&&(h=NaN);var c;if(a)c=this.textureAtlasDic[a];else for(a in this.textureAtlasDic){c=this.textureAtlasDic[a];if(c.getRegion(b))break;c=null}if(!c)return null;if(isNaN(f)||isNaN(h))if(a=(a=this.dragonBonesDataDic[a])?a:this.findFirstDragonBonesData())if(a=a.getDisplayDataByName(b))f=a.pivot.x,h=a.pivot.y;return this._generateDisplay(c,b,f,h)};a.prototype.buildArmature=function(b,a,f,h){void 0===a&&(a=null);void 0===f&&(f=null);void 0===h&&(h=null);var c={};
this.fillBuildArmatureDataPackageArmatureInfo(b,a,c)&&this.fillBuildArmatureDataPackageTextureInfo(f,c);b=c.armatureData;a=c.textureAtlas;return b&&a?this.buildArmatureUsingArmatureDataFromTextureAtlas(c.dragonBonesData,b,a,h):null};a.prototype.buildArmatureUsingArmatureDataFromTextureAtlas=function(b,a,f,h){void 0===h&&(h=null);var c=this._generateArmature();c.name=a.name;c.__dragonBonesData=b;c._armatureData=a;c.animation.animationDataList=a.animationDataList;this._buildBones(c);this._buildSlots(c,
h,f);c.advanceTime(0);return c};a.prototype.copyAnimationsToArmature=function(b,a,f,h){void 0===f&&(f=null);void 0===h&&(h=!0);var c={};if(!this.fillBuildArmatureDataPackageArmatureInfo(a,f,c))return!1;a=c.armatureData;b.animation.animationDataList=a.animationDataList;a=a.getSkinData("");var k;b=b.getSlots(!1);for(var m,g=0,n,l=b.length,q=0;q<l;q++){f=b[q];m=f.displayList;for(var g=m.length,u=0;u<g;u++)n=m[u],n instanceof d.Armature&&(k=a.getSlotData(f.name),k=k.displayDataList[u],k.type==d.DisplayData.ARMATURE&&
this.copyAnimationsToArmature(n,k.name,c.dragonBonesDataName,h))}return!0};a.prototype.fillBuildArmatureDataPackageArmatureInfo=function(b,a,f){if(a)f.dragonBonesDataName=a,f.dragonBonesData=this.dragonBonesDataDic[a],f.armatureData=f.dragonBonesData.getArmatureDataByName(b);else for(a in this.dragonBonesDataDic)if(f.dragonBonesData=this.dragonBonesDataDic[a],f.armatureData=f.dragonBonesData.getArmatureDataByName(b),f.armatureData)return f.dragonBonesDataName=a,!0;return!1};a.prototype.fillBuildArmatureDataPackageTextureInfo=
function(b,a){a.textureAtlas=this.textureAtlasDic[b?b:a.dragonBonesDataName]};a.prototype.findFirstDragonBonesData=function(){for(var b in this.dragonBonesDataDic){var a=this.dragonBonesDataDic[b];if(a)return a}return null};a.prototype.findFirstTextureAtlas=function(){for(var b in this.textureAtlasDic){var a=this.textureAtlasDic[b];if(a)return a}return null};a.prototype._buildBones=function(b){for(var a=b.armatureData.boneDataList,f,h,c=0;c<a.length;c++)f=a[c],h=d.Bone.initWithBoneData(f),(f=f.parent)&&
null==b.armatureData.getBoneData(f)&&(f=null),b.addBone(h,f,!0);b._updateAnimationAfterBoneListChanged()};a.prototype._buildSlots=function(b,a,f){var h=b.armatureData.getSkinData(a);if(h)for(var c=[],h=h.slotDataList,k,m,g,n=0;n<h.length;n++)if(k=h[n],g=b.getBone(k.parent)){m=this._generateSlot();m.initWithSlotData(k);g.addSlot(m);for(g=k.displayDataList.length;g--;){var l=k.displayDataList[g];switch(l.type){case d.DisplayData.ARMATURE:l=this.buildArmatureUsingArmatureDataFromTextureAtlas(b.__dragonBonesData,
b.__dragonBonesData.getArmatureDataByName(l.name),f,a);c[g]=l;break;default:c[g]=this._generateDisplay(f,l.name,l.pivot.x,l.pivot.y)}}for(var q in c)if(k=c[q],k instanceof d.Armature&&(k=k.display),k.hasOwnProperty("name"))try{k.name=m.name}catch(u){}m.displayList=c;m._changeDisplay(0)}};a.prototype._generateArmature=function(){return null};a.prototype._generateSlot=function(){return null};a.prototype._generateDisplay=function(b,a,f,h){return null};a._helpMatrix=new d.Matrix;return a}(d.EventDispatcher);
d.BaseFactory=g})(dragonBones||(dragonBones={}));(function(d){var g=function(){function c(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.x=a;this.y=b}c.prototype.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};return c}();d.Point=g})(dragonBones||(dragonBones={}));(function(d){var g=function(){return function(c,a,b,e){void 0===c&&(c=0);void 0===a&&(a=0);void 0===b&&(b=0);void 0===e&&(e=0);this.x=c;this.y=a;this.width=b;this.height=e}}();d.Rectangle=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this.duration=0;this._frameList=[];this.duration=0;this.scale=1}c.prototype.dispose=function(){for(var a=this._frameList.length;a--;)this._frameList[a].dispose();this._frameList=null};c.prototype.addFrame=function(a){if(!a)throw Error();if(0>this._frameList.indexOf(a))this._frameList[this._frameList.length]=a;else throw Error();};Object.defineProperty(c.prototype,"frameList",{get:function(){return this._frameList},enumerable:!0,configurable:!0});return c}();
d.Timeline=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(c){function a(){c.call(this);this.playTimes=this.fadeTime=this.lastFrameDuration=this.playTimes=this.frameRate=0;this.autoTween=!0;this.tweenEasing=NaN;this.hideTimelineNameMap=[];this._timelineList=[]}__extends(a,c);Object.defineProperty(a.prototype,"timelineList",{get:function(){return this._timelineList},enumerable:!0,configurable:!0});a.prototype.dispose=function(){c.prototype.dispose.call(this);this.hideTimelineNameMap=null;for(var b in this._timelineList)this._timelineList[b].dispose();
this._timelineList=null};a.prototype.getTimeline=function(b){for(var a=this._timelineList.length;a--;)if(this._timelineList[a].name==b)return this._timelineList[a];return null};a.prototype.addTimeline=function(b){if(!b)throw Error();0>this._timelineList.indexOf(b)&&(this._timelineList[this._timelineList.length]=b)};return a}(d.Timeline);d.AnimationData=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this._boneDataList=[];this._skinDataList=[];this._animationDataList=[]}c.sortBoneDataHelpArray=function(a,b){return a[0]>b[0]?1:-1};c.sortBoneDataHelpArrayDescending=function(a,b){return a[0]>b[0]?-1:1};c.prototype.dispose=function(){for(var a=this._boneDataList.length;a--;)this._boneDataList[a].dispose();for(a=this._skinDataList.length;a--;)this._skinDataList[a].dispose();for(a=this._animationDataList.length;a--;)this._animationDataList[a].dispose();this._animationDataList=
this._skinDataList=this._boneDataList=null};c.prototype.getBoneData=function(a){for(var b=this._boneDataList.length;b--;)if(this._boneDataList[b].name==a)return this._boneDataList[b];return null};c.prototype.getSkinData=function(a){if(!a&&0<this._skinDataList.length)return this._skinDataList[0];for(var b=this._skinDataList.length;b--;)if(this._skinDataList[b].name==a)return this._skinDataList[b];return null};c.prototype.getAnimationData=function(a){for(var b=this._animationDataList.length;b--;)if(this._animationDataList[b].name==
a)return this._animationDataList[b];return null};c.prototype.addBoneData=function(a){if(!a)throw Error();if(0>this._boneDataList.indexOf(a))this._boneDataList[this._boneDataList.length]=a;else throw Error();};c.prototype.addSkinData=function(a){if(!a)throw Error();if(0>this._skinDataList.indexOf(a))this._skinDataList[this._skinDataList.length]=a;else throw Error();};c.prototype.addAnimationData=function(a){if(!a)throw Error();0>this._animationDataList.indexOf(a)&&(this._animationDataList[this._animationDataList.length]=
a)};c.prototype.sortBoneDataList=function(){var a=this._boneDataList.length;if(0!=a){for(var b=[];a--;){for(var e=this._boneDataList[a],f=0,h=e;h;)f++,h=this.getBoneData(h.parent);b[a]=[f,e]}b.sort(c.sortBoneDataHelpArray);for(a=b.length;a--;)this._boneDataList[a]=b[a][1]}};Object.defineProperty(c.prototype,"boneDataList",{get:function(){return this._boneDataList},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"skinDataList",{get:function(){return this._skinDataList},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"animationDataList",{get:function(){return this._animationDataList},enumerable:!0,configurable:!0});return c}();d.ArmatureData=g})(dragonBones||(dragonBones={}));(function(d){var g=function(){function c(){this.length=0;this.global=new d.DBTransform;this.transform=new d.DBTransform;this.inheritRotation=!0;this.inheritScale=!1}c.prototype.dispose=function(){this.transform=this.global=null};return c}();d.BoneData=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){return function(){this.alphaMultiplier=1;this.alphaOffset=0;this.blueMultiplier=1;this.blueOffset=0;this.greenMultiplier=1;this.greenOffset=0;this.redMultiplier=1;this.redOffset=0}}();d.ColorTransform=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this.transform=new d.DBTransform;this.pivot=new d.Point}c.prototype.dispose=function(){this.pivot=this.transform=null};c.ARMATURE="armature";c.IMAGE="image";return c}();d.DisplayData=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this._armatureDataList=[];this._displayDataDictionary={}}c.prototype.dispose=function(){for(var a in this._armatureDataList)this._armatureDataList[a].dispose();this._armatureDataList=null;this.removeAllDisplayData();this._displayDataDictionary=null};Object.defineProperty(c.prototype,"armatureDataList",{get:function(){return this._armatureDataList},enumerable:!0,configurable:!0});c.prototype.getArmatureDataByName=function(a){for(var b=this._armatureDataList.length;b--;)if(this._armatureDataList[b].name==
a)return this._armatureDataList[b];return null};c.prototype.addArmatureData=function(a){if(!a)throw Error();if(0>this._armatureDataList.indexOf(a))this._armatureDataList[this._armatureDataList.length]=a;else throw Error();};c.prototype.removeArmatureData=function(a){a=this._armatureDataList.indexOf(a);0<=a&&this._armatureDataList.splice(a,1)};c.prototype.removeArmatureDataByName=function(a){for(var b=this._armatureDataList.length;b--;)this._armatureDataList[b].name==a&&this._armatureDataList.splice(b,
1)};c.prototype.getDisplayDataByName=function(a){return this._displayDataDictionary[a]};c.prototype.addDisplayData=function(a){this._displayDataDictionary[a.name]=a};c.prototype.removeDisplayDataByName=function(a){delete this._displayDataDictionary[a]};c.prototype.removeAllDisplayData=function(){for(var a in this._displayDataDictionary)delete this._displayDataDictionary[a]};return c}();d.DragonBonesData=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this.duration=this.position=this.duration=this.position=0}c.prototype.dispose=function(){};return c}();d.Frame=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this._slotDataList=[]}c.prototype.dispose=function(){for(var a=this._slotDataList.length;a--;)this._slotDataList[a].dispose();this._slotDataList=null};c.prototype.getSlotData=function(a){for(var b=this._slotDataList.length;b--;)if(this._slotDataList[b].name==a)return this._slotDataList[b];return null};c.prototype.addSlotData=function(a){if(!a)throw Error();if(0>this._slotDataList.indexOf(a))this._slotDataList[this._slotDataList.length]=a;else throw Error();
};Object.defineProperty(c.prototype,"slotDataList",{get:function(){return this._slotDataList},enumerable:!0,configurable:!0});return c}();d.SkinData=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){this._displayDataList=[];this.zOrder=0}c.prototype.dispose=function(){for(var a=this._displayDataList.length;a--;)this._displayDataList[a].dispose();this._displayDataList=null};c.prototype.addDisplayData=function(a){if(!a)throw Error();if(0>this._displayDataList.indexOf(a))this._displayDataList[this._displayDataList.length]=a;else throw Error();};c.prototype.getDisplayData=function(a){for(var b=this._displayDataList.length;b--;)if(this._displayDataList[b].name==
a)return this._displayDataList[b];return null};Object.defineProperty(c.prototype,"displayDataList",{get:function(){return this._displayDataList},enumerable:!0,configurable:!0});return c}();d.SlotData=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(c){function a(){c.call(this);this.displayIndex=this.tweenRotate=0;this.tweenEasing=10;this.tweenRotate=0;this.tweenScale=!0;this.displayIndex=0;this.visible=!0;this.zOrder=NaN;this.global=new d.DBTransform;this.transform=new d.DBTransform;this.pivot=new d.Point;this.scaleOffset=new d.Point}__extends(a,c);a.prototype.dispose=function(){c.prototype.dispose.call(this);this.color=this.scaleOffset=this.pivot=this.transform=this.global=null};return a}(d.Frame);d.TransformFrame=
g})(dragonBones||(dragonBones={}));(function(d){var g=function(c){function a(){c.call(this);this.originTransform=new d.DBTransform;this.originTransform.scaleX=1;this.originTransform.scaleY=1;this.originPivot=new d.Point;this.offset=0}__extends(a,c);a.prototype.dispose=function(){c.prototype.dispose.call(this);this.originPivot=this.originTransform=null};return a}(d.Timeline);d.TransformTimeline=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){}c.parseTextureAtlasData=function(a,b){void 0===b&&(b=1);var e={},f,h=a[d.ConstValues.SUB_TEXTURE],s;for(s in h){var k=h[s],m=k[d.ConstValues.A_NAME],g=new d.Rectangle;g.x=c.getNumber(k,d.ConstValues.A_X,0)/b;g.y=c.getNumber(k,d.ConstValues.A_Y,0)/b;g.width=c.getNumber(k,d.ConstValues.A_WIDTH,0)/b;g.height=c.getNumber(k,d.ConstValues.A_HEIGHT,0)/b;var n="true"==k[d.ConstValues.A_ROTATED],l=c.getNumber(k,d.ConstValues.A_FRAME_WIDTH,0)/b,q=c.getNumber(k,d.ConstValues.A_FRAME_HEIGHT,
0)/b;0<l&&0<q?(f=new d.Rectangle,f.x=c.getNumber(k,d.ConstValues.A_FRAME_X,0)/b,f.y=c.getNumber(k,d.ConstValues.A_FRAME_Y,0)/b,f.width=l,f.height=q):f=null;e[m]=new d.TextureData(g,f,n)}return e};c.parseDragonBonesData=function(a){if(!a)throw Error();var b=a[d.ConstValues.A_VERSION],b=b.toString();if(b.toString()!=d.DragonBones.DATA_VERSION&&b.toString()!=d.DragonBones.PARENT_COORDINATE_DATA_VERSION)throw Error("Nonsupport version!");var b=c.getNumber(a,d.ConstValues.A_FRAME_RATE,0)||0,e=new d.DragonBonesData;
e.name=a[d.ConstValues.A_NAME];e.isGlobal="0"==a[d.ConstValues.A_IS_GLOBAL]?!1:!0;c.tempDragonBonesData=e;var f=a[d.ConstValues.ARMATURE],h;for(h in f)e.addArmatureData(c.parseArmatureData(a[d.ConstValues.ARMATURE][h],b));c.tempDragonBonesData=null;return e};c.parseArmatureData=function(a,b){var e=new d.ArmatureData;e.name=a[d.ConstValues.A_NAME];var f=a[d.ConstValues.BONE],h;for(h in f)e.addBoneData(c.parseBoneData(f[h]));f=a[d.ConstValues.SKIN];for(h in f)e.addSkinData(c.parseSkinData(f[h]));c.tempDragonBonesData.isGlobal&&
d.DBDataUtil.transformArmatureData(e);e.sortBoneDataList();f=a[d.ConstValues.ANIMATION];for(h in f){var s=c.parseAnimationData(f[h],b);d.DBDataUtil.addHideTimeline(s,e);d.DBDataUtil.transformAnimationData(s,e,c.tempDragonBonesData.isGlobal);e.addAnimationData(s)}return e};c.parseBoneData=function(a){var b=new d.BoneData;b.name=a[d.ConstValues.A_NAME];b.parent=a[d.ConstValues.A_PARENT];b.length=Number(a[d.ConstValues.A_LENGTH])||0;b.inheritRotation=c.getBoolean(a,d.ConstValues.A_INHERIT_ROTATION,!0);
b.inheritScale=c.getBoolean(a,d.ConstValues.A_INHERIT_SCALE,!0);c.parseTransform(a[d.ConstValues.TRANSFORM],b.transform);c.tempDragonBonesData.isGlobal&&b.global.copy(b.transform);return b};c.parseSkinData=function(a){var b=new d.SkinData;b.name=a[d.ConstValues.A_NAME];a=a[d.ConstValues.SLOT];for(var e in a)b.addSlotData(c.parseSlotData(a[e]));return b};c.parseSlotData=function(a){var b=new d.SlotData;b.name=a[d.ConstValues.A_NAME];b.parent=a[d.ConstValues.A_PARENT];b.zOrder=a[d.ConstValues.A_Z_ORDER];
b.zOrder=c.getNumber(a,d.ConstValues.A_Z_ORDER,0)||0;b.blendMode=a[d.ConstValues.A_BLENDMODE];a=a[d.ConstValues.DISPLAY];for(var e in a)b.addDisplayData(c.parseDisplayData(a[e]));return b};c.parseDisplayData=function(a){var b=new d.DisplayData;b.name=a[d.ConstValues.A_NAME];b.type=a[d.ConstValues.A_TYPE];c.parseTransform(a[d.ConstValues.TRANSFORM],b.transform,b.pivot);null!=c.tempDragonBonesData&&c.tempDragonBonesData.addDisplayData(b);return b};c.parseAnimationData=function(a,b){var e=new d.AnimationData;
e.name=a[d.ConstValues.A_NAME];e.frameRate=b;e.duration=Math.round(1E3*(c.getNumber(a,d.ConstValues.A_DURATION,1)||1)/b);e.playTimes=c.getNumber(a,d.ConstValues.A_LOOP,1);e.playTimes=NaN!=e.playTimes?e.playTimes:1;e.fadeTime=c.getNumber(a,d.ConstValues.A_FADE_IN_TIME,0)||0;e.scale=c.getNumber(a,d.ConstValues.A_SCALE,1)||0;e.tweenEasing=c.getNumber(a,d.ConstValues.A_TWEEN_EASING,NaN);e.autoTween=c.getBoolean(a,d.ConstValues.A_AUTO_TWEEN,!0);var f=a[d.ConstValues.FRAME],h;for(h in f){var s=c.parseTransformFrame(f[h],
b);e.addFrame(s)}c.parseTimeline(a,e);f=e.duration;s=a[d.ConstValues.TIMELINE];for(h in s){var k=s[h],g=c.parseTransformTimeline(k,e.duration,b),g=c.parseTransformTimeline(k,e.duration,b),f=Math.min(f,g.frameList[g.frameList.length-1].duration);e.addTimeline(g)}0<e.frameList.length&&(f=Math.min(f,e.frameList[e.frameList.length-1].duration));e.lastFrameDuration=f;return e};c.parseTransformTimeline=function(a,b,e){var f=new d.TransformTimeline;f.name=a[d.ConstValues.A_NAME];f.scale=c.getNumber(a,d.ConstValues.A_SCALE,
1)||0;f.offset=c.getNumber(a,d.ConstValues.A_OFFSET,0)||0;f.originPivot.x=c.getNumber(a,d.ConstValues.A_PIVOT_X,0)||0;f.originPivot.y=c.getNumber(a,d.ConstValues.A_PIVOT_Y,0)||0;f.duration=b;b=a[d.ConstValues.FRAME];for(var h in b){var s=c.parseTransformFrame(b[h],e);f.addFrame(s)}c.parseTimeline(a,f);return f};c.parseTransformFrame=function(a,b){var e=new d.TransformFrame;c.parseFrame(a,e,b);e.visible=!c.getBoolean(a,d.ConstValues.A_HIDE,!1);e.tweenEasing=c.getNumber(a,d.ConstValues.A_TWEEN_EASING,
10)||10;e.tweenRotate=Math.floor(c.getNumber(a,d.ConstValues.A_TWEEN_ROTATE,0)||0);e.tweenScale=c.getBoolean(a,d.ConstValues.A_TWEEN_SCALE,!0);e.displayIndex=Math.floor(c.getNumber(a,d.ConstValues.A_DISPLAY_INDEX,0)||0);e.zOrder=c.getNumber(a,d.ConstValues.A_Z_ORDER,c.tempDragonBonesData.isGlobal?NaN:0);c.parseTransform(a[d.ConstValues.TRANSFORM],e.transform,e.pivot);c.tempDragonBonesData.isGlobal&&e.global.copy(e.transform);e.scaleOffset.x=c.getNumber(a,d.ConstValues.A_SCALE_X_OFFSET,0)||0;e.scaleOffset.y=
c.getNumber(a,d.ConstValues.A_SCALE_Y_OFFSET,0)||0;var f=a[d.ConstValues.COLOR_TRANSFORM];f&&(e.color=new d.ColorTransform,c.parseColorTransform(f,e.color));return e};c.parseTimeline=function(a,b){var e=0,f,h=b.frameList,c;for(c in h)f=h[c],f.position=e,e+=f.duration;f&&(f.duration=b.duration-f.position)};c.parseFrame=function(a,b,e){void 0===e&&(e=0);b.duration=Math.round(1E3*(a[d.ConstValues.A_DURATION]||1)/e);b.action=a[d.ConstValues.A_ACTION];b.event=a[d.ConstValues.A_EVENT];b.sound=a[d.ConstValues.A_SOUND]};
c.parseTransform=function(a,b,e){void 0===e&&(e=null);a&&(b&&(b.x=c.getNumber(a,d.ConstValues.A_X,0)||0,b.y=c.getNumber(a,d.ConstValues.A_Y,0)||0,b.skewX=c.getNumber(a,d.ConstValues.A_SKEW_X,0)*d.ConstValues.ANGLE_TO_RADIAN||0,b.skewY=c.getNumber(a,d.ConstValues.A_SKEW_Y,0)*d.ConstValues.ANGLE_TO_RADIAN||0,b.scaleX=c.getNumber(a,d.ConstValues.A_SCALE_X,1)||0,b.scaleY=c.getNumber(a,d.ConstValues.A_SCALE_Y,1)||0),e&&(e.x=c.getNumber(a,d.ConstValues.A_PIVOT_X,0)||0,e.y=c.getNumber(a,d.ConstValues.A_PIVOT_Y,
0)||0))};c.parseColorTransform=function(a,b){a&&b&&(b.alphaOffset=c.getNumber(a,d.ConstValues.A_ALPHA_OFFSET,0),b.redOffset=c.getNumber(a,d.ConstValues.A_RED_OFFSET,0),b.greenOffset=c.getNumber(a,d.ConstValues.A_GREEN_OFFSET,0),b.blueOffset=c.getNumber(a,d.ConstValues.A_BLUE_OFFSET,0),b.alphaMultiplier=.01*c.getNumber(a,d.ConstValues.A_ALPHA_MULTIPLIER,100),b.redMultiplier=.01*c.getNumber(a,d.ConstValues.A_RED_MULTIPLIER,100),b.greenMultiplier=.01*c.getNumber(a,d.ConstValues.A_GREEN_MULTIPLIER,100),
b.blueMultiplier=.01*c.getNumber(a,d.ConstValues.A_BLUE_MULTIPLIER,100))};c.getBoolean=function(a,b,e){if(a&&b in a)switch(String(a[b])){case "0":case "NaN":case "":case "false":case "null":case "undefined":return!1;default:return!0}return e};c.getNumber=function(a,b,e){if(a&&b in a)switch(String(a[b])){case "NaN":case "":case "false":case "null":case "undefined":return NaN;default:return Number(a[b])}return e};return c}();d.DataParser=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){return function(c,a,b){this.region=c;this.frame=a;this.rotated=b}}();d.TextureData=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){}c.ANGLE_TO_RADIAN=Math.PI/180;c.RADIAN_TO_ANGLE=180/Math.PI;c.DRAGON_BONES="dragonBones";c.ARMATURE="armature";c.SKIN="skin";c.BONE="bone";c.SLOT="slot";c.DISPLAY="display";c.ANIMATION="animation";c.TIMELINE="timeline";c.FRAME="frame";c.TRANSFORM="transform";c.COLOR_TRANSFORM="colorTransform";c.RECTANGLE="rectangle";c.ELLIPSE="ellipse";c.TEXTURE_ATLAS="TextureAtlas";c.SUB_TEXTURE="SubTexture";c.A_ROTATED="rotated";c.A_FRAME_X="frameX";c.A_FRAME_Y="frameY";
c.A_FRAME_WIDTH="frameWidth";c.A_FRAME_HEIGHT="frameHeight";c.A_VERSION="version";c.A_IMAGE_PATH="imagePath";c.A_FRAME_RATE="frameRate";c.A_NAME="name";c.A_IS_GLOBAL="isGlobal";c.A_PARENT="parent";c.A_LENGTH="length";c.A_TYPE="type";c.A_FADE_IN_TIME="fadeInTime";c.A_DURATION="duration";c.A_SCALE="scale";c.A_OFFSET="offset";c.A_LOOP="loop";c.A_EVENT="event";c.A_EVENT_PARAMETERS="eventParameters";c.A_SOUND="sound";c.A_ACTION="action";c.A_HIDE="hide";c.A_AUTO_TWEEN="autoTween";c.A_TWEEN_EASING="tweenEasing";
c.A_TWEEN_ROTATE="tweenRotate";c.A_TWEEN_SCALE="tweenScale";c.A_DISPLAY_INDEX="displayIndex";c.A_Z_ORDER="z";c.A_BLENDMODE="blendMode";c.A_WIDTH="width";c.A_HEIGHT="height";c.A_INHERIT_SCALE="inheritScale";c.A_INHERIT_ROTATION="inheritRotation";c.A_X="x";c.A_Y="y";c.A_SKEW_X="skX";c.A_SKEW_Y="skY";c.A_SCALE_X="scX";c.A_SCALE_Y="scY";c.A_PIVOT_X="pX";c.A_PIVOT_Y="pY";c.A_ALPHA_OFFSET="aO";c.A_RED_OFFSET="rO";c.A_GREEN_OFFSET="gO";c.A_BLUE_OFFSET="bO";c.A_ALPHA_MULTIPLIER="aM";c.A_RED_MULTIPLIER="rM";
c.A_GREEN_MULTIPLIER="gM";c.A_BLUE_MULTIPLIER="bM";c.A_SCALE_X_OFFSET="scXOffset";c.A_SCALE_Y_OFFSET="scYOffset";c.A_SCALE_MODE="scaleMode";c.A_FIXED_ROTATION="fixedRotation";return c}();d.ConstValues=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){}c.transformArmatureData=function(a){for(var b=a.boneDataList,e=b.length;e--;){var f=b[e];if(f.parent){var h=a.getBoneData(f.parent);h&&(f.transform.copy(f.global),d.TransformUtil.globalToLocal(f.transform,h.global))}}};c.transformArmatureDataAnimations=function(a){for(var b=a.animationDataList,e=b.length;e--;)c.transformAnimationData(b[e],a,!1)};c.transformRelativeAnimationData=function(a,b){};c.transformAnimationData=function(a,b,e){if(e){var f=b.getSkinData(null);
e=b.boneDataList;var h;f&&(h=f.slotDataList);for(f=0;f<e.length;f++){var s=e[f],k=a.getTimeline(s.name);if(k){var g=null;if(h)for(var p in h)if(g=h[p],g.parent==s.name)break;for(var n=k.frameList,l=null,q=null,u=null,v=n.length,t=0;t<v;t++){var r=n[t];c.setFrameTransform(a,b,s,r);r.transform.x-=s.transform.x;r.transform.y-=s.transform.y;r.transform.skewX-=s.transform.skewX;r.transform.skewY-=s.transform.skewY;r.transform.scaleX/=s.transform.scaleX;r.transform.scaleY/=s.transform.scaleY;!k.transformed&&
g&&(r.zOrder-=g.zOrder);l||(l=k.originTransform,l.copy(r.transform),l.skewX=d.TransformUtil.formatRadian(l.skewX),l.skewY=d.TransformUtil.formatRadian(l.skewY),q=k.originPivot,q.x=r.pivot.x,q.y=r.pivot.y);r.transform.x-=l.x;r.transform.y-=l.y;r.transform.skewX=d.TransformUtil.formatRadian(r.transform.skewX-l.skewX);r.transform.skewY=d.TransformUtil.formatRadian(r.transform.skewY-l.skewY);r.transform.scaleX/=l.scaleX;r.transform.scaleY/=l.scaleY;k.transformed||(r.pivot.x-=q.x,r.pivot.y-=q.y);if(u){var x=
r.transform.skewX-u.transform.skewX;u.tweenRotate?0<u.tweenRotate?(0>x&&(r.transform.skewX+=2*Math.PI,r.transform.skewY+=2*Math.PI),1<u.tweenRotate&&(r.transform.skewX+=2*Math.PI*(u.tweenRotate-1),r.transform.skewY+=2*Math.PI*(u.tweenRotate-1))):(0<x&&(r.transform.skewX-=2*Math.PI,r.transform.skewY-=2*Math.PI),1>u.tweenRotate&&(r.transform.skewX+=2*Math.PI*(u.tweenRotate+1),r.transform.skewY+=2*Math.PI*(u.tweenRotate+1))):(r.transform.skewX=u.transform.skewX+d.TransformUtil.formatRadian(r.transform.skewX-
u.transform.skewX),r.transform.skewY=u.transform.skewY+d.TransformUtil.formatRadian(r.transform.skewY-u.transform.skewY))}u=r}k.transformed=!0}}}else c.transformRelativeAnimationData(a,b)};c.setFrameTransform=function(a,b,e,f){f.transform.copy(f.global);if(e=b.getBoneData(e.parent)){var h=a.getTimeline(e.name);if(h){for(var s=[],k=[];h;)s.push(h),k.push(e),h=(e=b.getBoneData(e.parent))?a.getTimeline(e.name):null;a=s.length;var g;b=new d.Matrix;for(var p=new d.DBTransform,n=new d.Matrix;a--;)h=s[a],
e=k[a],c.getTimelineTransform(h,f.position,p,!g),g?(p.x+=h.originTransform.x+e.transform.x,p.y+=h.originTransform.y+e.transform.y,p.skewX+=h.originTransform.skewX+e.transform.skewX,p.skewY+=h.originTransform.skewY+e.transform.skewY,p.scaleX=p.scaleX*h.originTransform.scaleX*e.transform.scaleX,p.scaleY=p.scaleY*h.originTransform.scaleY*e.transform.scaleY,d.TransformUtil.transformToMatrix(p,n,!0),n.concat(b),d.TransformUtil.matrixToTransform(n,g,0<=p.scaleX*g.scaleX,0<=p.scaleY*g.scaleY)):(g=new d.DBTransform,
g.copy(p)),d.TransformUtil.transformToMatrix(g,b,!0);d.TransformUtil.globalToLocal(f.transform,g)}}};c.getTimelineTransform=function(a,b,e,f){for(var h=a.frameList,c=h.length;c--;)if(a=h[c],a.position<=b&&a.position+a.duration>b){if(c==h.length-1||b==a.position)e.copy(f?a.global:a.transform);else{var k=a.tweenEasing;b=(b-a.position)/a.duration;k&&10!=k&&(b=d.MathUtil.getEaseValue(b,k));h=h[c+1];a=f?a.global:a.transform;f=f?h.global:h.transform;e.x=a.x+(f.x-a.x)*b;e.y=a.y+(f.y-a.y)*b;e.skewX=d.TransformUtil.formatRadian(a.skewX+
(f.skewX-a.skewX)*b);e.skewY=d.TransformUtil.formatRadian(a.skewY+(f.skewY-a.skewY)*b);e.scaleX=a.scaleX+(f.scaleX-a.scaleX)*b;e.scaleY=a.scaleY+(f.scaleY-a.scaleY)*b}break}};c.addHideTimeline=function(a,b){for(var e=b.boneDataList,f=e.length;f--;){var h=e[f].name;a.getTimeline(h)||0>a.hideTimelineNameMap.indexOf(h)&&a.hideTimelineNameMap.push(h)}};return c}();d.DBDataUtil=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){}c.getEaseValue=function(a,b){var e=1;1<b?(e=.5*(1-Math.cos(a*Math.PI)),b-=1):0<b?e=1-Math.pow(1-a,2):0>b&&(b*=-1,e=Math.pow(a,2));return(e-a)*b+a};return c}();d.MathUtil=g})(dragonBones||(dragonBones={}));
(function(d){var g=function(){function c(){}c.globalToLocal=function(a,b){c.transformToMatrix(a,c._helpTransformMatrix,!0);c.transformToMatrix(b,c._helpParentTransformMatrix,!0);c._helpParentTransformMatrix.invert();c._helpTransformMatrix.concat(c._helpParentTransformMatrix);c.matrixToTransform(c._helpTransformMatrix,a,0<=a.scaleX*b.scaleX,0<=a.scaleY*b.scaleY)};c.transformToMatrix=function(a,b,e){void 0===e&&(e=!1);e?(b.a=a.scaleX*Math.cos(a.skewY),b.b=a.scaleX*Math.sin(a.skewY),b.c=-a.scaleY*Math.sin(a.skewX),
b.d=a.scaleY*Math.cos(a.skewX)):(b.a=Math.cos(a.skewY),b.b=Math.sin(a.skewY),b.c=-Math.sin(a.skewX),b.d=Math.cos(a.skewX));b.tx=a.x;b.ty=a.y};c.matrixToTransform=function(a,b,e,f){b.x=a.tx;b.y=a.ty;b.scaleX=Math.sqrt(a.a*a.a+a.b*a.b)*(e?1:-1);b.scaleY=Math.sqrt(a.d*a.d+a.c*a.c)*(f?1:-1);e=[];e[0]=Math.acos(a.d/b.scaleY);e[1]=-e[0];e[2]=Math.asin(-a.c/b.scaleY);e[3]=0<=e[2]?Math.PI-e[2]:e[2]-Math.PI;Number(e[0]).toFixed(4)==Number(e[2]).toFixed(4)||Number(e[0]).toFixed(4)==Number(e[3]).toFixed(4)?
b.skewX=e[0]:b.skewX=e[1];e=[];e[0]=Math.acos(a.a/b.scaleX);e[1]=-e[0];e[2]=Math.asin(a.b/b.scaleX);e[3]=0<=e[2]?Math.PI-e[2]:e[2]-Math.PI;Number(e[0]).toFixed(4)==Number(e[2]).toFixed(4)||Number(e[0]).toFixed(4)==Number(e[3]).toFixed(4)?b.skewY=e[0]:b.skewY=e[1]};c.formatRadian=function(a){a>Math.PI&&(a-=c.DOUBLE_PI);a<-Math.PI&&(a+=c.DOUBLE_PI);return a};c.HALF_PI=.5*Math.PI;c.DOUBLE_PI=2*Math.PI;c._helpTransformMatrix=new d.Matrix;c._helpParentTransformMatrix=new d.Matrix;return c}();d.TransformUtil=
g})(dragonBones||(dragonBones={}));var WOZLLA;
(function(d){(function(d){(function(a){a[a.CAPTURE=0]="CAPTURE";a[a.BUBBLE=1]="BUBBLE";a[a.TARGET=2]="TARGET"})(d.EventPhase||(d.EventPhase={}));var c=function(){function a(b,a,f,h){void 0===a&&(a=!1);void 0===f&&(f=null);void 0===h&&(h=!0);this._eventPhase=0;this._listenerRemove=this._propagationStoped=this._immediatePropagationStoped=!1;this._type=b;this._bubbles=a;this._data=f;this._canStopBubbles=h}Object.defineProperty(a.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bubbles",
{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"canStopBubbles",{get:function(){return this._canStopBubbles},enumerable:!0,configurable:!0});a.prototype.isStopPropagation=function(){return this._propagationStoped};a.prototype.stopPropagation=function(){this._canStopBubbles&&(this._propagationStoped=!0)};a.prototype.isStopImmediatePropagation=function(){return this._immediatePropagationStoped};a.prototype.stopImmediatePropagation=function(){this._canStopBubbles&&
(this._propagationStoped=this._immediatePropagationStoped=!0)};a.prototype.removeCurrentListener=function(){this._listenerRemove=!0};return a}();d.Event=c})(d.event||(d.event={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(){this._listeners=[]}b.prototype.add=function(b){this._listeners.push(b)};b.prototype.remove=function(b){var a,h=this._listeners.length;for(a=0;a<h;a++)if(this._listeners[a]===b)return this._listeners.splice(a,1),!0;return!1};b.prototype.removeAt=function(b){return this._listeners.splice(b,1)};b.prototype.get=function(b){return this._listeners[b]};b.prototype.length=function(){return this._listeners.length};b.prototype.clear=function(){this._listeners.length=
0};return b}(),a=function(){function b(){this._captureDict={};this._bubbleDict={}}b.prototype.setBubbleParent=function(b){this._bubbleParent=b};b.prototype.hasListener=function(b,a){void 0===a&&(a=!1);return 0<this._getListenerList(b,a).length()};b.prototype.getListenerCount=function(b,a){return this._getListenerList(b,a).length()};b.prototype.addListener=function(b,a,h){void 0===h&&(h=!1);this._getListenerList(b,h).add(a)};b.prototype.removeListener=function(b,a,h){void 0===h&&(h=!1);return this._getListenerList(b,
h).remove(a)};b.prototype.clearListeners=function(b,a){this._getListenerList(b,a).clear()};b.prototype.clearAllListeners=function(){this._captureDict={};this._bubbleDict={}};b.prototype.dispatchEvent=function(b){var a,h,c,d;b._target=this;if(b.bubbles){c=this._getAncients();h=c.length;for(a=h-1;0<=a;a--)if(d=c[a],d._dispatchEventInPhase(b,0))return;if(!this._dispatchEventInPhase(b,0)&&!this._dispatchEventInPhase(b,2))for(a=0;a<h&&(d=c[a],!d._dispatchEventInPhase(b,1));a++);}else this._dispatchEventInPhase(b,
2)};b.prototype._dispatchEventInPhase=function(b,a){var h,c,d;b._eventPhase=a;b._listenerRemove=!1;b._currentTarget=this;d=this._getListenerList(b.type,0===a);h=d.length();if(0<h){for(h-=1;0<=h;h--)if(c=d.get(h),c(b),b._listenerRemove&&(b._listenerRemove=!1,d.removeAt(h)),b.isStopImmediatePropagation())return!0;if(b.isStopPropagation())return!0}return!1};b.prototype._getAncients=function(){for(var b=[],a=this;a._bubbleParent;)a=a._bubbleParent,b.push(a);return b};b.prototype._getListenerList=function(b,
a){var h,d=a?this._captureDict:this._bubbleDict;h=d[b];h||(h=new c,d[b]=h);return h};return b}();d.EventDispatcher=a})(d.event||(d.event={}))})(WOZLLA||(WOZLLA={}));__extends=this.__extends||function(d,g){function c(){this.constructor=d}for(var a in g)g.hasOwnProperty(a)&&(d[a]=g[a]);c.prototype=g.prototype;d.prototype=new c};
(function(d){(function(g){var c=function(a){function b(b){a.call(this);this._refCount=0;this._src=b}__extends(b,a);Object.defineProperty(b.prototype,"src",{get:function(){return this._src},enumerable:!0,configurable:!0});b.prototype.retain=function(){this._refCount++};b.prototype.release=function(b){void 0===b&&(b=!0);b&&0<this._refCount&&this._refCount--;0===this._refCount&&this.unload()};b.prototype.load=function(b,a){b()};b.prototype.unload=function(){var a=new d.event.Event(b.EVENT_UNLOAD,!1);
a.target=a.currentTarget=this;this.dispatchEvent(a)};b.EVENT_UNLOAD="unload";return b}(d.event.EventDispatcher);g.Asset=c})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(){this._loadedAssets={};this._loadingUnits={}}b.getInstance=function(){b.instance||(b.instance=new b);return b.instance};b.prototype.getAsset=function(b){return this._loadedAssets[b]};b.prototype.addAsset=function(b){var a=this;this._loadedAssets[b.src]=b;b.addListener(d.Asset.EVENT_UNLOAD,function(h){h.removeCurrentListener();a.removeAsset(b)})};b.prototype.removeAsset=function(b){delete this._loadedAssets[b.src]};b.prototype.loadAll=function(b){var a,
h,c;h=0;for(c=b.length;h<c;h++)a=b[h],this.load(a.src,a.AssetClass,a.callback)};b.prototype.load=function(b,f,h){var c=this,d,g;(d=this._loadedAssets[b])?h&&h():(g=this._loadingUnits[b])?g.addCallback(h,h):(d=new f(b),g=new a(b),g.addCallback(h,h),this._loadingUnits[b]=g,d.load(function(){delete c._loadingUnits[b];c.addAsset(d);g.complete(null,d)},function(a){console.log(a);delete c._loadingUnits[b];g.complete(a)}))};return b}();d.AssetLoader=c;var a=function(){function b(b){this.callbacks=[];this.src=
b}b.prototype.addCallback=function(b,a){this.callbacks.push({onSuccess:b,onError:a})};b.prototype.complete=function(b,a){this.callbacks.forEach(function(h){b?h.onError&&h.onError(b):h.onSuccess&&h.onSuccess(a)})};return b}()})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.ITexture||(d.ITexture={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IRenderer||(d.IRenderer={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(){this.values=new Float32Array(9);this.identity()}a.prototype.applyMatrix=function(b){this.values.set(b.values)};a.prototype.identity=function(){this.values[0]=1;this.values[1]=0;this.values[2]=0;this.values[3]=0;this.values[4]=1;this.values[5]=0;this.values[6]=0;this.values[7]=0;this.values[8]=1};a.prototype.invert=function(){var b=this.values[0],a=this.values[1],f=this.values[3],h=this.values[4],c=this.values[6],d=this.values[7],g=b*h-a*f;this.values[0]=
h/g;this.values[1]=-a/g;this.values[3]=-f/g;this.values[4]=b/g;this.values[6]=(f*d-h*c)/g;this.values[7]=-(b*d-a*c)/g};a.prototype.prepend=function(b,a,f,h,c,d){var g,p,n,l,q=this.values,u=q[6],v=q[7];if(1!=b||0!=a||0!=f||1!=h)g=q[0],p=q[1],n=q[3],l=q[4],q[0]=g*b+p*f,q[1]=g*a+p*h,q[3]=n*b+l*f,q[4]=n*a+l*h;q[6]=u*b+v*f+c;q[7]=u*a+v*h+d};a.prototype.append=function(b,a,f,h,c,d){var g,p,n,l,q=this.values;g=q[0];p=q[1];n=q[3];l=q[4];q[0]=b*g+a*n;q[1]=b*p+a*l;q[3]=f*g+h*n;q[4]=f*p+h*l;q[6]=c*g+d*n+q[6];
q[7]=c*p+d*l+q[7]};a.prototype.prependTransform=function(b,e,f,h,c,d,g,p,n){if(c%360){var l=c*a.DEG_TO_RAD;c=Math.cos(l);l=Math.sin(l)}else c=1,l=0;if(p||n)this.values[6]-=p,this.values[7]-=n;d||g?(d*=a.DEG_TO_RAD,g*=a.DEG_TO_RAD,this.prepend(c*f,l*f,-l*h,c*h,0,0),this.prepend(Math.cos(g),Math.sin(g),-Math.sin(d),Math.cos(d),b,e)):this.prepend(c*f,l*f,-l*h,c*h,b,e);return this};a.prototype.appendTransform=function(b,e,f,h,c,d,g,p,n){if(c%360){var l=c*a.DEG_TO_RAD;c=Math.cos(l);l=Math.sin(l)}else c=
1,l=0;d||g?(d*=a.DEG_TO_RAD,g*=a.DEG_TO_RAD,this.append(Math.cos(g),Math.sin(g),-Math.sin(d),Math.cos(d),b,e),this.append(c*f,l*f,-l*h,c*h,0,0)):this.append(c*f,l*f,-l*h,c*h,b,e);if(p||n)this.values[6]-=p*this.values[0]+n*this.values[3],this.values[7]-=p*this.values[1]+n*this.values[4];return this};a.DEG_TO_RAD=Math.PI/180;return a}();d.Matrix=c})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(b,a,f){this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(b,a,f)}a.get=function(b,e,f,h){void 0===e&&(e=null);void 0===f&&(f=null);void 0===h&&(h=!1);h&&a.removeTweens(b);return new a(b,e,f)};a.removeTweens=function(b){if(b.tween_count){for(var e=
a._tweens,f=e.length-1;0<=f;f--)e[f]._target==b&&(e[f].paused=!0,e.splice(f,1));b.tween_count=0}};a.tick=function(b,e){void 0===e&&(e=!1);for(var f=a._tweens.concat(),h=f.length-1;0<=h;h--){var c=f[h];e&&!c.ignoreGlobalPause||c.paused||c.tick(c._useTicks?1:b)}};a._register=function(b,e){var f=b._target,h=a._tweens;if(e)f&&(f.tween_count=f.tween_count?f.tween_count+1:1),h.push(b);else for(f&&f.tween_count--,f=h.length;f--;)if(h[f]==b){h.splice(f,1);break}};a.removeAllTweens=function(){for(var b=a._tweens,
e=0,f=b.length;e<f;e++){var h=b[e];h.paused=!0;h._target.tweenjs_count=0}b.length=0};a.prototype.initialize=function(b,e,f){this._target=b;e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.override&&a.removeTweens(b));this.pluginData=f||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];e&&e.paused?this.paused=!0:a._register(this,!0);e&&null!=e.position&&this.setPosition(e.position,a.NONE)};a.prototype.setPosition=function(b,
a){void 0===a&&(a=1);0>b&&(b=0);var f=b,h=!1;f>=this.duration&&(this.loop?f%=this.duration:(f=this.duration,h=!0));if(f==this._prevPos)return h;var c=this._prevPos;this.position=this._prevPos=f;this._prevPosition=b;if(this._target)if(h)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var d=0,g=this._steps.length;d<g&&!(this._steps[d].t>f);d++);d=this._steps[d-1];this._updateTargetProps(d,(this._stepPosition=f-d.t)/d.d)}0!=a&&0<this._actions.length&&(this._useTicks?this._runActions(f,
f):1==a&&f<c?(c!=this.duration&&this._runActions(c,this.duration),this._runActions(0,f,!0)):this._runActions(c,f));h&&this.setPaused(!0);return h};a.prototype._runActions=function(b,a,f){void 0===f&&(f=!1);var h=b,c=a,d=-1,g=this._actions.length,p=1;b>a&&(h=a,c=b,d=g,g=p=-1);for(;(d+=p)!=g;){a=this._actions[d];var n=a.t;(n==c||n>h&&n<c||f&&n==b)&&a.f.apply(a.o,a.p)}};a.prototype._updateTargetProps=function(b,e){var f,h,c,d;if(b||1!=e){if(this.passive=!!b.v)return;b.e&&(e=b.e(e,0,1,1));f=b.p0;h=b.p1}else this.passive=
!1,f=h=this._curQueueProps;for(var g in this._initQueueProps){null==(c=f[g])&&(f[g]=c=this._initQueueProps[g]);null==(d=h[g])&&(h[g]=d=c);c=c==d||0==e||1==e||"number"!=typeof c?1==e?d:c:c+(d-c)*e;var p=!1;if(d=a._plugins[g])for(var n=0,l=d.length;n<l;n++){var q=d[n].tween(this,g,c,f,h,e,!!b&&f==h,!b);q==a.IGNORE?p=!0:c=q}p||(this._target[g]=c)}};a.prototype.setPaused=function(b){this.paused=b;a._register(this,!b);return this};a.prototype._cloneProps=function(b){var a={},f;for(f in b)a[f]=b[f];return a};
a.prototype._addStep=function(b){0<b.d&&(this._steps.push(b),b.t=this.duration,this.duration+=b.d);return this};a.prototype._appendQueueProps=function(b){var e,f,c,d,g,m;for(m in b)if(void 0===this._initQueueProps[m]){f=this._target[m];if(e=a._plugins[m])for(c=0,d=e.length;c<d;c++)f=e[c].init(this,m,f);this._initQueueProps[m]=this._curQueueProps[m]=void 0===f?null:f}for(m in b){f=this._curQueueProps[m];if(e=a._plugins[m])for(g=g||{},c=0,d=e.length;c<d;c++)e[c].step&&e[c].step(this,m,f,b[m],g);this._curQueueProps[m]=
b[m]}g&&this._appendQueueProps(g);return this._curQueueProps};a.prototype._addAction=function(b){b.t=this.duration;this._actions.push(b);return this};a.prototype._set=function(b,a){for(var f in b)a[f]=b[f]};a.prototype.wait=function(b,a){void 0===a&&(a=!1);if(null==b||0>=b)return this;var f=this._cloneProps(this._curQueueProps);return this._addStep({d:b,p0:f,p1:f,v:a})};a.prototype.to=function(b,a,f){void 0===f&&(f=void 0);if(isNaN(a)||0>a)a=0;return this._addStep({d:a||0,p0:this._cloneProps(this._curQueueProps),
e:f,p1:this._cloneProps(this._appendQueueProps(b))})};a.prototype.call=function(b,a,f){void 0===a&&(a=void 0);void 0===f&&(f=void 0);b||(b=function(){});return this._addAction({f:b,p:f?f:[this],o:a?a:this._target})};a.prototype.set=function(b,a){void 0===a&&(a=null);return this._addAction({f:this._set,o:this,p:[b,a?a:this._target]})};a.prototype.play=function(b){b||(b=this);return this.call(b.setPaused,[!1],b)};a.prototype.pause=function(b){b||(b=this);return this.call(b.setPaused,[!0],b)};a.prototype.tick=
function(b){this.paused||this.setPosition(this._prevPosition+b)};a.NONE=0;a.LOOP=1;a.REVERSE=2;a._tweens=[];a.IGNORE={};a._plugins={};a._inited=!1;return a}();d.Tween=c})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){var g=new d.math.Matrix,c=function(){function a(){this.worldMatrix=new d.math.Matrix;this.useGLCoords=!1;this._relative=!0;this._dirty=!1;this._values=Array(9);this.reset()}Object.defineProperty(a.prototype,"x",{get:function(){return this._values[0]},set:function(b){this._values[0]=b;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"y",{get:function(){return this._values[1]},set:function(b){this._values[1]=b;this._dirty=!0},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"rotation",{get:function(){return this._values[4]},set:function(b){this._values[4]=b;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"scaleX",{get:function(){return this._values[5]},set:function(b){this._values[5]=b;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"scaleY",{get:function(){return this._values[6]},set:function(b){this._values[6]=b;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"skewX",{get:function(){return this._values[7]},set:function(b){this._values[7]=b;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"skewY",{get:function(){return this._values[8]},set:function(b){this._values[8]=b;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"relative",{get:function(){return this._relative},set:function(b){this._relative=b;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"dirty",
{get:function(){return this._dirty},set:function(b){this._dirty=b},enumerable:!0,configurable:!0});a.prototype.setPosition=function(b,a){this._values[0]=b;this._values[1]=a;this._dirty=!0};a.prototype.setAnchor=function(b,a){this._values[2]=b;this._values[3]=a;this._dirty=!0};a.prototype.setRotation=function(b){this._values[4]=b;this._dirty=!0};a.prototype.setScale=function(b,a){this._values[5]=b;this._values[6]=a;this._dirty=!0};a.prototype.setSkew=function(b,a){this._values[7]=b;this._values[8]=
a;this._dirty=!0};a.prototype.reset=function(){this._values[0]=0;this._values[1]=0;this._values[2]=0;this._values[3]=0;this._values[4]=0;this._values[5]=1;this._values[6]=1;this._values[7]=0;this._values[8]=0};a.prototype.set=function(b){"number"===typeof b.x&&(this._values[0]=b.x);"number"===typeof b.y&&(this._values[1]=b.y);"number"===typeof b.rotation&&(this._values[4]=b.rotation);"number"===typeof b.scaleX&&(this._values[5]=b.scaleX);"number"===typeof b.scaleY&&(this._values[6]=b.scaleY);"number"===
typeof b.skewX&&(this._values[7]=b.skewX);"number"===typeof b.skewY&&(this._values[8]=b.skewY);"undefined"!==typeof b.relative&&(this._relative=b.relative);this._dirty=!0};a.prototype.transform=function(b){void 0===b&&(b=null);var e,f,c=this.worldMatrix;f=this._values[0];var d=this._values[1];e=this._values[4];var g=this._values[5],m=this._values[6],p=this._values[7],n=this._values[8];this.useGLCoords&&(p+=180);b&&this._relative?c.applyMatrix(b.worldMatrix):this===b?c.identity():c.applyMatrix(b.worldMatrix);
this.__local_matrix?(f=this.__local_matrix,c.append(f.a,f.b,f.c,f.d,f.tx,f.ty)):(e%360?(e*=a.DEG_TO_RAD,b=Math.cos(e),e=Math.sin(e)):(b=1,e=0),p||n?(p*=a.DEG_TO_RAD,n*=a.DEG_TO_RAD,c.append(Math.cos(n),Math.sin(n),-Math.sin(p),Math.cos(p),f,d),c.append(b*g,e*g,-e*m,b*m,0,0)):c.append(b*g,e*g,-e*m,b*m,f,d));this._dirty=!1};a.prototype.updateWorldMatrix=function(){if(this._dirty){var b=this.worldMatrix;b?b.identity():b=new d.math.Matrix;for(var a=this;null!=a;)b.prependTransform(a.x,a.y,a.scaleX,a.scaleY,
a.rotation,a.skewX,a.skewY,0,0),a=a.parent}};a.prototype.globalToLocal=function(b,a,f){void 0===f&&(f=!1);f&&this.updateWorldMatrix();g.applyMatrix(this.worldMatrix);g.invert();g.append(1,0,0,1,b,a);return{x:g.values[6],y:g.values[7]}};a.prototype.localToGlobal=function(b,a,f){void 0===f&&(f=!1);f&&this.updateWorldMatrix();g.applyMatrix(this.worldMatrix);g.append(1,0,0,1,b,a);return{x:g.values[6],y:g.values[7]}};a.prototype.tween=function(b){return d.utils.Tween.get(this,null,null,b)};a.prototype.clearTweens=
function(){return d.utils.Tween.removeTweens(this)};a.DEG_TO_RAD=Math.PI/180;return a}();d.Transform=c})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(c){function a(){c.apply(this,arguments);this._py=this._px=this._bottom=this._right=this._left=this._top=this._height=this._width=0;this._anchorMode=a.ANCHOR_CENTER|a.ANCHOR_MIDDLE}__extends(a,c);Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(b){this._width!==b&&(this._width=b,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(b){this._height!==
b&&(this._height=b,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"top",{get:function(){return this._top},set:function(b){this._top!==b&&(this._top=b,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"left",{get:function(){return this._left},set:function(b){this._left!==b&&(this._left=b,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"right",{get:function(){return this._right},set:function(b){this._right!==
b&&(this._right=b,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bottom",{get:function(){return this._bottom},set:function(b){this._bottom!==b&&(this._bottom=b,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"px",{get:function(){return this._px},set:function(b){this._px!==b&&(this._px=b,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"py",{get:function(){return this._py},set:function(b){this._py!==
b&&(this._py=b,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"anchorMode",{get:function(){return this._anchorMode},set:function(b){this._anchorMode!==b&&(this._anchorMode=b,this.dirty=!0)},enumerable:!0,configurable:!0});a.prototype.set=function(b){this._anchorMode=b.anchorMode;this._width=b.width||0;this._height=b.height||0;this._top=b.top||0;this._left=b.left||0;this._right=b.right||0;this._bottom=b.bottom||0;this._px=b.px||0;this._px=b.py||0;this.dirty=!0};a.prototype.transform=
function(b){void 0===b&&(b=null);var e,f;f=b&&this._relative&&b instanceof a?b:d.Director.getInstance().viewRectTransform;e=this._anchorMode;(e&a.ANCHOR_LEFT)===a.ANCHOR_LEFT?this.x=this._px:(e&a.ANCHOR_RIGHT)===a.ANCHOR_RIGHT?this.x=f._width+this._px:(e&a.ANCHOR_HORIZONTAL_STRENGTH)===a.ANCHOR_HORIZONTAL_STRENGTH?(this.x=this._left,this._width=f._width-this._left-this._right):this.x=f._width/2+this._px;(e&a.ANCHOR_TOP)===a.ANCHOR_TOP?this.y=this._py:(e&a.ANCHOR_BOTTOM)===a.ANCHOR_BOTTOM?this.y=f._height+
this._py:(e&a.ANCHOR_VERTICAL_STRENGTH)===a.ANCHOR_VERTICAL_STRENGTH?(this.y=this._top,this._height=f._height-this._top-this._bottom):this.y=f._height/2+this._py;c.prototype.transform.call(this,b)};a.ANCHOR_TOP=1;a.ANCHOR_MIDDLE=16;a.ANCHOR_BOTTOM=256;a.ANCHOR_VERTICAL_STRENGTH=4096;a.ANCHOR_LEFT=65536;a.ANCHOR_CENTER=1048576;a.ANCHOR_RIGHT=16777216;a.ANCHOR_HORIZONTAL_STRENGTH=268435456;return a}(d.Transform);d.RectTransform=g})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(){function c(){}c.isTrue=function(a,b){void 0===b&&(b=c.DEFAULT_MESSAGE);if(!0!==a)throw Error(b);};c.isFalse=function(a,b){void 0===b&&(b=c.DEFAULT_MESSAGE);if(!1!==a)throw Error(b);};c.isTypeof=function(a,b,e){void 0===e&&(e=c.DEFAULT_MESSAGE);if(typeof a!==b)throw Error(e);};c.isNotTypeof=function(a,b,e){void 0===e&&(e=c.DEFAULT_MESSAGE);if(typeof a===b)throw Error(e);};c.isString=function(a,b){void 0===b&&(b=c.DEFAULT_MESSAGE);c.isTypeof(a,"string",b)};c.isObject=function(a,
b){void 0===b&&(b=c.DEFAULT_MESSAGE);c.isTypeof(a,"object",b)};c.isUndefined=function(a,b){void 0===b&&(b=c.DEFAULT_MESSAGE);c.isTypeof(a,"undefined",b)};c.isNotUndefined=function(a,b){void 0===b&&(b=c.DEFAULT_MESSAGE);c.isNotTypeof(a,"undefined",b)};c.isFunction=function(a,b){void 0===b&&(b=c.DEFAULT_MESSAGE);c.isTypeof(a,"function",b)};c.DEFAULT_MESSAGE="Assertion Fail";return c}();d.Assert=g})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(c){function a(){c.apply(this,arguments)}__extends(a,c);Object.defineProperty(a.prototype,"gameObject",{get:function(){return this._gameObject},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"transform",{get:function(){return this._gameObject.transform},enumerable:!0,configurable:!0});a.prototype.init=function(){};a.prototype.destroy=function(){};a.prototype.loadAssets=function(b){b&&b()};a.prototype.listRequiredComponents=function(){return[]};a.register=
function(b,e){d.Assert.isObject(e);d.Assert.isString(e.name);d.Assert.isUndefined(a.configMap[e.name]);a.configMap[e.name]=b};a.create=function(b){d.Assert.isString(b);b=a.configMap[b];d.Assert.isFunction(b);return new b};a.getConfig=function(b){d.Assert.isString(b);b=a.configMap[b];d.Assert.isNotUndefined(b);return b};a.configMap={};return a}(d.event.EventDispatcher);d.Component=g})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(c){function a(){c.apply(this,arguments)}__extends(a,c);a.prototype.collideXY=function(b,a){return!1};a.prototype.collide=function(b){return!1};return a}(d.Component);d.Collider=g})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(b,a){return b.z-a.z},c={},a=function(b){function a(f){void 0===f&&(f=!1);b.call(this);this._visible=this._active=!0;this._loadingAssets=this._touchable=this._destroyed=this._initialized=!1;this._name="GameObject";this._children=[];this._components=[];this._transform=f?new d.RectTransform:new d.Transform;this._rectTransform=f?this._transform:null;this._z=0;this._behaviours=[]}__extends(a,b);a.getById=function(a){return c[a]};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},
set:function(a){var b=this._id;this._id=a;b&&delete c[b];c[a]=this},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"name",{get:function(){return this._name},set:function(a){this._name=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rectTransform",{get:function(){return this._rectTransform},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"children",{get:function(){return this._children.slice(0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"childCount",{get:function(){return this._children.length},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"z",{get:function(){return this._z},set:function(a){this.setZ(a,!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"active",
{get:function(){return this._active},set:function(a){var b=this._active;this._active=a;!b&&a&&(this._transform.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"destroyed",{get:function(){return this._destroyed},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"touchable",{get:function(){return this._touchable},set:function(a){this._touchable=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"collider",{get:function(){return this._collider},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"behaviours",{get:function(){return this._behaviours.slice(0)},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0});a.prototype.setZ=function(a,b){void 0===b&&(b=!0);this._z!==a&&(this._z=a,b&&this._children.sort(g))};a.prototype.addChild=function(a,b){void 0===b&&(b=!0);if(-1!==this._children.indexOf(a))return!1;a._parent&&a.removeMe();a.dispatchEvent(new d.CoreEvent("beforeadd",!0));this._children.push(a);b&&this._children.sort(g);a._parent=this;a._transform.dirty=!0;a.dispatchEvent(new d.CoreEvent("add",
!0));return!0};a.prototype.removeChild=function(a){var b=this._children.indexOf(a);return-1!==b?(a.dispatchEvent(new d.CoreEvent("beforeremove",!0,null,!1)),this._children.splice(b,1),a._parent=null,a.dispatchEvent(new d.CoreEvent("remove",!0,null,!1)),!0):!1};a.prototype.getChild=function(a){var b,e,c;e=0;for(c=this._children.length;e<c;e++)if(b=this._children[e],b._name===a)return b;return null};a.prototype.getChildren=function(a){var b,e,c,d=[];e=0;for(c=this._children.length;e<c;e++)b=this._children[e],
b._name===a&&d.push(b);return d};a.prototype.removeMe=function(){var a=this._parent;return a&&a.removeChild(this)};a.prototype.eachChild=function(a){this._children.forEach(a)};a.prototype.sortChildren=function(){this._children.sort(g)};a.prototype.getPath=function(a){void 0===a&&(a="/");for(var b=[],e=this;e;)b.unshift(e.name),e=e.parent;return b.join(a)};a.prototype.contains=function(a){if(a===this)return!0;for(;a=a.parent;)if(a===this)return!0;return!1};a.prototype.getComponent=function(a){var b,
e,c;if(0>=this._components.length)return null;e=0;for(c=this._components.length;e<c;e++)if(b=this._components[e],b instanceof a)return b;return null};a.prototype.hasComponent=function(a){var b,e,c;if(0>=this._components.length)return!1;e=0;for(c=this._components.length;e<c;e++)if(b=this._components[e],b instanceof a)return!0;return!1};a.prototype.getComponents=function(a){var b,e,c,d=[];if(0>=this._components.length)return d;e=0;for(c=this._components.length;e<c;e++)b=this._components[e],b instanceof
a&&d.push(b);return d};a.prototype.addComponent=function(a){if(-1!==this._components.indexOf(a))return!1;if(!this.checkComponentDependency(a))throw Error("Can't not add, because of dependency");a._gameObject&&a._gameObject.removeComponent(a);this._components.push(a);a._gameObject=this;a instanceof d.Behaviour?this._behaviours.push(a):a instanceof d.Renderer?this._renderer=a:a instanceof d.Collider?this._collider=a:a instanceof d.Mask&&(this._mask=a);return!0};a.prototype.removeComponent=function(a){var b,
e,c,g=this._components.indexOf(a);if(-1!==g){b=0;for(e=this._components.length;b<e;b++)if(c=this._components[b],c!==a&&this.checkComponentDependency(c))throw Error("Can't not remove, because of dependency");this._components.splice(g,1);a instanceof d.Behaviour?this._behaviours.splice(this._behaviours.indexOf(a),1):a instanceof d.Renderer?this._renderer=null:a instanceof d.Collider?this._collider=null:a instanceof d.Mask&&(this._mask=null);a._gameObject=null;return!0}return!1};a.prototype.init=function(){var a,
b;if(!this._initialized&&!this._destroyed){a=0;for(b=this._components.length;a<b;a++)this._components[a].init();a=0;for(b=this._children.length;a<b;a++)this._children[a].init();this._initialized=!0}};a.prototype.destroy=function(){var a,b;if(!this._destroyed&&this._initialized){a=0;for(b=this._components.length;a<b;a++)this._components[a].destroy();a=0;for(b=this._children.length;a<b;a++)this._children[a].destroy();this._id&&delete c[this._id];this.clearAllListeners();this._destroyed=!0}};a.prototype.update=
function(){var a,b,e;if(this._active){if(0<this._behaviours.length)for(a=0,b=this._behaviours.length;a<b;a++)e=this._behaviours[a],e.enabled&&e.update();if(0<this._children.length)for(a=0,b=this._children.length;a<b;a++)this._children[a].update()}};a.prototype.visit=function(b,c,d){var g;if(this._active&&this._initialized&&!this._destroyed)for(this._transform.dirty&&(d|=a.MASK_TRANSFORM_DIRTY),(d&a.MASK_TRANSFORM_DIRTY)==a.MASK_TRANSFORM_DIRTY&&this._transform.transform(c),this._visible||(d&=~a.MASK_VISIBLE),
(d&a.MASK_VISIBLE)===a.MASK_VISIBLE&&this.render(b,d),c=0,g=this._children.length;c<g;c++)this._children[c].visit(b,this._transform,d);else(d&a.MASK_TRANSFORM_DIRTY)===a.MASK_TRANSFORM_DIRTY&&(this._transform.dirty=!0)};a.prototype.render=function(a,b){this._mask&&this._mask.render(a,b);this._renderer&&this._renderer.render(a,b)};a.prototype.getUnderPoint=function(a,b,e){void 0===e&&(e=!1);var c,d;if(!this._active||!this._visible)return null;d=this._children;if(0<d.length)for(var g=d.length-1;0<=
g;g--)if(c=d[g],c=c.getUnderPoint(a,b,e))return c;if(!e||this._touchable)if(a=this.transform.globalToLocal(a,b),this.testHit(a.x,a.y))return this;return null};a.prototype.testHit=function(a,b){var e=this._collider;return e&&e.collideXY(a,b)};a.prototype.loadAssets=function(a){var b,e,c,d;if(!this._loadingAssets)if(c=this._components.length+this._children.length,0===c)a&&a();else{b=0;for(e=this._components.length;b<e;b++)d=this._components[b],d.loadAssets(function(){0===--c&&a&&a()});b=0;for(e=this._children.length;b<
e;b++)this._children[b].loadAssets(function(){0===--c&&a&&a()})}};a.prototype.checkComponentDependency=function(a){for(var b=a.listRequiredComponents(),e=!0,c=0,d=b.length;c<d;c++)a=b[c],e=e&&this.hasComponent(a);return e};a.MASK_TRANSFORM_DIRTY=1;a.MASK_VISIBLE=16;return a}(d.event.EventDispatcher);d.GameObject=a})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(c){function a(){c.call(this);this.name=this.id=a.ID;this._rootTransform=new d.Transform;this._viewRectTransform=new d.RectTransform;this._viewRectTransform.anchorMode=d.RectTransform.ANCHOR_TOP|d.RectTransform.ANCHOR_LEFT;this._viewRectTransform.width=d.Director.getInstance().renderer.viewport.width;this._viewRectTransform.height=d.Director.getInstance().renderer.viewport.height;this.init()}__extends(a,c);Object.defineProperty(a.prototype,"viewRectTransform",{get:function(){return this._viewRectTransform},
enumerable:!0,configurable:!0});a.prototype.visitStage=function(a){c.prototype.visit.call(this,a,this._rootTransform,d.GameObject.MASK_VISIBLE)};a.ID="WOZLLAStage";return a}(d.GameObject);d.Stage=g})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(){function c(){}c.update=function(a){var b=Date.now()+this._nowIncrease;this.now?(this.delta=(b-this.now)*a,this._nowIncrease+=this.delta*(a-1),this.now+=this.delta,this.measuredFPS=1E3/this.delta):(this.now=b,this.delta=1E3/60)};c.reset=function(){this.measuredFPS=this._nowIncrease=this.now=this.delta=0};c.delta=0;c.now=0;c.measuredFPS=0;c._nowIncrease=0;return c}();d.Time=g})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(){function c(){this._scheduleCount=0;this._schedules={};this._runScheduleCount=0}c.getInstance=function(){c.instance||(c.instance=new c);return c.instance};c.prototype.runSchedule=function(){var a,b;this._runScheduleCount=0;for(a in this._schedules)b=this._schedules[a],b.isFrame&&!b.paused?(b.frame--,0>b.frame&&(delete this._schedules[a],b.task.apply(b,b.args))):b.isTime&&!b.paused?(b.time-=d.Time.delta,0>b.time&&(delete this._schedules[a],b.task.apply(b,b.args))):b.isInterval&&
!b.paused?(b.time-=d.Time.delta,0>b.time&&(b.task.apply(b,b.args),b.time+=b.intervalTime)):b.isLoop&&!b.paused&&b.task.apply(b,b.args),this._runScheduleCount++};c.prototype.removeSchedule=function(a){delete this._schedules[a]};c.prototype.scheduleLoop=function(a,b){var e="Schedule_"+this._scheduleCount++;this._schedules[e]={task:a,args:b,isLoop:!0};return e};c.prototype.scheduleFrame=function(a,b,e){var f="Schedule_"+this._scheduleCount++;this._schedules[f]={task:a,frame:b||0,args:e,isFrame:!0};return f};
c.prototype.scheduleInterval=function(a,b,e){var f="Schedule_"+this._scheduleCount++;this._schedules[f]={task:a,intervalTime:b,time:b,args:e,isInterval:!0};return f};c.prototype.scheduleTime=function(a,b,e){var f="Schedule_"+this._scheduleCount++;this._schedules[f]={task:a,time:b||0,args:e,isTime:!0};return f};c.prototype.resumeSchedule=function(a){this._schedules[a].paused=!1};c.prototype.pauseSchedule=function(a){this._schedules[a].paused=!0};return c}();d.Scheduler=g})(WOZLLA||(WOZLLA={}));
(function(d){function g(a){for(var e={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)e.x+=a.offsetLeft,e.y+=a.offsetTop;return e}var c=function(a){function e(e){a.call(this,e.type,e.bubbles,e.data);this.touchMoveDetection=!1;this.x=e.x;this.y=e.y;this.touch=e.touch;this.touchMoveDetection=e.touchMoveDetection;this.gesture=e.gesture;this.identifier=e.identifier}__extends(e,a);e.prototype.setTouchMoveDetection=function(a){this.touchMoveDetection=a};return e}(d.event.Event);d.GestureEvent=c;var a=function(){function a(e,
f){void 0===f&&(f=1);this.enabled=!0;this.canvasOffset=this.canvas=null;this.channelMap={};var c=this,s=window.navigator;c.canvas=e;c.canvasOffset=g(e);c.touchScale=f;Hammer(s.isCocoonJS?document:e,{transform:!1,doubletap:!1,hold:!1,rotate:!1,pinch:!1}).on(a.enabledGestures||"touch release tap swipe drag dragstart dragend",function(a){("release"===a.type||c.enabled)&&d.Scheduler.getInstance().scheduleFrame(function(){c.onGestureEvent(a)})})}a.setEanbledGestures=function(a){this.enabledGestures=a};
a.prototype.onGestureEvent=function(a){var b,c,g,k,m,p,n,l,q=a.type,u=d.Director.getInstance().stage,v=this.touchScale||1;if(n=a.gesture.srcEvent.changedTouches)for(k=n.length,g=0;g<k;g++)c=n[g],m=parseInt(c.identifier),b=c.pageX-this.canvasOffset.x,c=c.pageY-this.canvasOffset.y,b*=v,c*=v,"touch"===q&&(l=u.getUnderPoint(b,c,!0))&&(this.channelMap[m]=this.createDispatchChanel(l),delete this.channelMap[m-10]),(p=this.channelMap[m])&&p.onGestureEvent(a,l,b,c,m);else m=1,b=a.gesture.srcEvent.pageX-this.canvasOffset.x,
c=a.gesture.srcEvent.pageY-this.canvasOffset.y,b*=v,c*=v,"touch"===q&&((l=u.getUnderPoint(b,c,!0))?this.channelMap[m]=this.createDispatchChanel(l):delete this.channelMap[m]),(p=this.channelMap[m])&&p.onGestureEvent(a,l,b,c,m)};a.prototype.createDispatchChanel=function(a){var b=!0;return{onGestureEvent:function(h,g,k,m,p){var n=h.type,l=d.Director.getInstance().stage;switch(n){case "drag":if(!b){g=a;break}case "tap":case "release":g=l.getUnderPoint(k,m,!0)}if("tap"!==n||a===g)h=new c({x:k,y:m,type:n,
bubbles:!0,touch:g,gesture:h.gesture,identifier:p,touchMoveDetection:!1}),a.dispatchEvent(h),b=h.touchMoveDetection}}};return a}();d.Touch=a})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(){}a.getGLContext=function(a,e){var c,d=e||{},g={alpha:!0,antialias:!0,premultipliedAlpha:!1,stencil:!0},k;for(k in g)"undefined"===typeof d[k]&&(d[k]=g[k]);e=d;try{c=a.getContext("experimental-webgl",e)}catch(m){try{c=a.getContext("webgl",e)}catch(p){}}return c};a.compileShader=function(a,e,c){e=a.createShader(e);a.shaderSource(e,c);a.compileShader(e);return a.getShaderParameter(e,a.COMPILE_STATUS)?e:(console.log(a.getShaderInfoLog(e)),null)};
a.compileProgram=function(b,e,c){e=a.compileShader(b,b.VERTEX_SHADER,e);c=a.compileShader(b,b.FRAGMENT_SHADER,c);var d=b.createProgram();b.attachShader(d,e);b.attachShader(d,c);b.linkProgram(d);b.getProgramParameter(d,b.LINK_STATUS)||console.log("Could not initialise program");return{program:d,vertexShader:e,fragmentShader:c}};return a}();d.WebGLUtils=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){d=d.renderer||(d.renderer={});(d.ILayerManager||(d.ILayerManager={})).DEFAULT="default"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(){this._layerIndexMap={};this._sortedLayers=[];this.define(d.ILayerManager.DEFAULT,0)}a.prototype.define=function(a,e){var c=this;if(this._layerIndexMap[a])throw Error("Layer has been defined: "+a);this._layerIndexMap[a]=e;this._sortedLayers.push(a);this._sortedLayers.sort(function(a,b){return c.getZIndex(a)-c.getZIndex(b)})};a.prototype.undefine=function(a){this._sortedLayers.splice(this._sortedLayers.indexOf(a),1);delete this._layerIndexMap[a]};
a.prototype.getZIndex=function(a){return this._layerIndexMap[a]};a.prototype.getSortedLayers=function(){return this._sortedLayers.slice(0)};a.prototype._getSortedLayers=function(){return this._sortedLayers};return a}();d.LayerManager=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,e){this._srcFactor=a;this._distFactor=e}Object.defineProperty(a.prototype,"srcFactor",{get:function(){return this._srcFactor},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"distFactor",{get:function(){return this._distFactor},enumerable:!0,configurable:!0});a.prototype.applyBlend=function(a){a.blendFunc(this._srcFactor,this._distFactor)};a.NORMAL=1;a.ADD=2;a.MULTIPLY=3;a.SCREEN=4;return a}();d.BlendType=c})(d.renderer||(d.renderer=
{}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,e,c){this._id=a;this._shaderProgramId=e;this._blendType=c}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"shaderProgramId",{get:function(){return this._shaderProgramId},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blendType",{get:function(){return this._blendType},enumerable:!0,configurable:!0});a.prototype.equals=function(a){return a.blendType===
this._blendType&&a.shaderProgramId===this._shaderProgramId};return a}();d.Material=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IMaterial||(d.IMaterial={})).DEFAULT="Builtin_default"})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IShaderProgram||(d.IShaderProgram={})).V2T2C1A1="Builtin_V2T2C1A1"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(){this._materialMap={};this._materialMap[d.IMaterial.DEFAULT]=this.createMaterial(d.IMaterial.DEFAULT,d.IShaderProgram.V2T2C1A1,d.BlendType.NORMAL)}a.prototype.createMaterial=function(a,e,c){e=new d.Material(a,e,c);return this._materialMap[a]=e};a.prototype.getMaterial=function(a){return this._materialMap[a]};a.prototype.deleteMaterial=function(a){delete this._materialMap[a.id]};a.prototype.clear=function(){this._materialMap={}};return a}();d.MaterialManager=
c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,e,c){this._id=a;this._vertexShader=e;this._fragmentShader=c}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexShader",{get:function(){return this._vertexShader},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fragmentShader",{get:function(){return this._fragmentShader},enumerable:!0,configurable:!0});a.prototype.useProgram=function(a){a.useProgram(this._id)};
a.prototype.syncUniforms=function(a,e){};return a}();d.ShaderProgram=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){(function(c){var a=function(a){function e(e,c,d){a.call(this,e,c,d);this._locations={initialized:!1}}__extends(e,a);e.prototype.useProgram=function(e){a.prototype.useProgram.call(this,e);this._locations.initialized||(this._initLocaitions(e),this._locations.initialized=!0);this._activate(e)};e.prototype.syncUniforms=function(a,b){a.uniform2f(this._locations.projectionVector,b.projection.x,b.projection.y)};e.prototype._initLocaitions=function(a){var b=this._id;this._locations.uSampler=
a.getUniformLocation(b,"uSampler");this._locations.projectionVector=a.getUniformLocation(b,"projectionVector");this._locations.offsetVector=a.getUniformLocation(b,"offsetVector");this._locations.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this._locations.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this._locations.aColor=a.getAttribLocation(b,"aColor")};e.prototype._activate=function(a){a.activeTexture(a.TEXTURE0);var b=4*g.Quad.V2T2C1A1.strade;a.vertexAttribPointer(this._locations.aVertexPosition,
2,a.FLOAT,!1,b,0);a.vertexAttribPointer(this._locations.aTextureCoord,2,a.FLOAT,!1,b,8);a.vertexAttribPointer(this._locations.aColor,2,a.FLOAT,!1,b,16);a.enableVertexAttribArray(this._locations.aVertexPosition);a.enableVertexAttribArray(this._locations.aTextureCoord);a.enableVertexAttribArray(this._locations.aColor)};e.VERTEX_SOURCE="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\ngl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\nvTextureCoord = aTextureCoord;\nvec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;\nvColor = vec4(color * aColor.x, aColor.x);\n}";
e.FRAGMENT_SOURCE="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";return e}(d.renderer.ShaderProgram);c.V2T2C1A1=a})(g.shader||(g.shader={}))})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a){this._gl=a;this._shaderMap={};this._shaderMap[d.IShaderProgram.V2T2C1A1]=this.createShaderProgram(d.shader.V2T2C1A1.VERTEX_SOURCE,d.shader.V2T2C1A1.FRAGMENT_SOURCE,d.shader.V2T2C1A1)}a.prototype.getShaderProgram=function(a){return this._shaderMap[a]};a.prototype.createShaderProgram=function(a,e,c){void 0===c&&(c=d.ShaderProgram);a=d.WebGLUtils.compileProgram(this._gl,a,e);c=new c(a.program,a.vertexShader,a.fragmentShader);return this._shaderMap[c.id]=
c};a.prototype.deleteShaderProgram=function(a){this._gl.deleteProgram(a.id);this._gl.deleteShader(a.vertexShader);this._gl.deleteShader(a.fragmentShader);delete this._shaderMap[a.id]};a.prototype.clear=function(){for(var a in this._shaderMap)this.deleteShaderProgram(this._shaderMap[a])};return a}();d.ShaderManager=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,e){this._id=a;this._descriptor=e}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0});a.prototype.bind=function(a){a.bindTexture(a.TEXTURE_2D,this._id)};return a}();d.Texture=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){function c(a){return 0===(a&a-1)}var a=function(){function a(b){this._gl=b;this._textureMap={}}a.prototype.getTexture=function(a){return this._textureMap[a]};a.prototype.generateTexture=function(a){var b,h=this._gl,s=h.createTexture();h.bindTexture(h.TEXTURE_2D,s);h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR);c(a.width)&&c(a.height)?(h.texParameteri(h.TEXTURE_2D,
h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT)):(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE));switch(a.textureFormat){case 0:case 1:h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,a.source);break;case 2:switch(a.pixelFormat){case 5:b=d.WebGLExtension.getExtension(h,d.WebGLExtension.PVRTC);b=b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;break;case 4:b=d.WebGLExtension.getExtension(h,
d.WebGLExtension.PVRTC);b=b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;default:throw Error("Unsupported pixel format: "+a.pixelFormat);}h.compressedTexImage2D(h.TEXTURE_2D,0,b,a.width,a.height,0,a.source);break;default:throw Error("Unsupported texture format: "+a.textureFormat);}a=new d.Texture(s,a);return this._textureMap[s]=a};a.prototype.deleteTexture=function(a){this._gl.deleteTexture(a.id);delete this._textureMap[a.id]};a.prototype.clear=function(){for(var a in this._textureMap)this.deleteTexture(this._textureMap[a])};
return a}();d.TextureManager=a})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){function c(a,b){return a.globalZ===b.globalZ?a._addIndex-b._addIndex:a.globalZ-b.globalZ}var a=function(){function a(b,c){this._commandQueueMap={};this._blendModes={};this._uniforms={};this._gl=b;this._viewport=c;this._blendModes[d.BlendType.NORMAL]=new d.BlendType(b.ONE,b.ONE_MINUS_SRC_ALPHA);this._blendModes[d.BlendType.ADD]=new d.BlendType(b.SRC_ALPHA,b.DST_ALPHA);this._blendModes[d.BlendType.MULTIPLY]=new d.BlendType(b.DST_COLOR,b.ONE_MINUS_SRC_ALPHA);this._blendModes[d.BlendType.SCREEN]=
new d.BlendType(b.SRC_ALPHA,b.ONE);this._layerManager=new d.LayerManager;this._materialManager=new d.MaterialManager;this._shaderManager=new d.ShaderManager(b);this._textureManager=new d.TextureManager(b);this._quadBatch=new e(b);this._uniforms.projection={x:c.width/2,y:-c.height/2};b.disable(b.DEPTH_TEST);b.disable(b.CULL_FACE);b.enable(b.BLEND)}Object.defineProperty(a.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"materialManager",{get:function(){return this._materialManager},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"shaderManager",{get:function(){return this._shaderManager},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureManager",{get:function(){return this._textureManager},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"gl",{get:function(){return this._gl},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"viewport",{get:function(){return this._viewport},
enumerable:!0,configurable:!0});a.prototype.addCommand=function(a){var e=a.layer,c=this._commandQueueMap[e];c||(c=this._commandQueueMap[e]=new b(e));c.add(a)};a.prototype.render=function(){var a=this,b,e,c,f=this._gl;f.viewport(0,0,this._viewport.width,this._viewport.height);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);this._eachCommand(function(f){b?b instanceof d.CustomCommand?a.flush():f instanceof d.CustomCommand?a.flush():f.materialId!==c.id?a.flush():f.texture!==e&&a.flush():a.flush();
f instanceof d.CustomCommand?f.execute(a):(a._quadBatch.canFill(f.quad)||a.flush(),a._quadBatch.fillQuad(f.quad));a._usingMaterial=c=a._materialManager.getMaterial(f.materialId);a._usingTexture=e=f.texture;b=f});b&&(this.flush(),this._clearCommands(),this._usingMaterial=this._usingTexture=null)};a.prototype.flush=function(){var a,b;this._usingMaterial&&(a=this._gl,b=this._shaderManager.getShaderProgram(this._usingMaterial.shaderProgramId),b.useProgram(a),b.syncUniforms(a,this._uniforms),this._blendModes[this._usingMaterial.blendType].applyBlend(a),
this._usingTexture&&this._usingTexture.bind(a),this._quadBatch.flush(a))};a.prototype._clearCommands=function(){var a=this._commandQueueMap,b;for(b in a)a[b].clear()};a.prototype._eachCommand=function(a){var b,e,c,f,d,g,q,u=this._commandQueueMap,v=this._layerManager._getSortedLayers();b=0;for(e=v.length;b<e;b++)if(c=v[b],d=u[c]){g=d.negativeZQueue;if(0<g.length)for(c=0,f=g.length;c<f;c++)q=g[c],a(q);g=d.zeroZQueue;if(0<g.length)for(c=0,f=g.length;c<f;c++)q=g[c],a(q);g=d.positiveZQueue;if(0<g.length)for(c=
0,f=g.length;c<f;c++)q=g[c],a(q)}};a.MAX_QUAD_SIZE=500;return a}();d.Renderer=a;var b=function(){function a(b){this._addIndex=0;this.negativeZQueue=[];this.zeroZQueue=[];this.positiveZQueue=[];this.layer=b}a.prototype.add=function(a){a._addIndex=this._addIndex++;0===a.globalZ?this.zeroZQueue.push(a):0<a.globalZ?this.positiveZQueue.push(a):this.negativeZQueue.push(a)};a.prototype.clear=function(){var a,b,e;a=0;for(b=this.negativeZQueue.length;a<b;a++)e=this.negativeZQueue[a],e.isPoolable&&e.release();
a=0;for(b=this.zeroZQueue.length;a<b;a++)e=this.zeroZQueue[a],e.isPoolable&&e.release();a=0;for(b=this.positiveZQueue.length;a<b;a++)e=this.positiveZQueue[a],e.isPoolable&&e.release();this.negativeZQueue.length=0;this.zeroZQueue.length=0;this._addIndex=this.positiveZQueue.length=0};a.prototype.sort=function(){this.positiveZQueue.sort(c);this.negativeZQueue.sort(c)};return a}(),e=function(){function b(e){this._size=a.MAX_QUAD_SIZE;this._curBatchSize=this._curVertexIndex=0;this._gl=e;this._initBuffers()}
Object.defineProperty(b.prototype,"vertexBuffer",{get:function(){return this._vertexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});b.prototype.canFill=function(a){return this._curVertexIndex<this._size};b.prototype.fillQuad=function(a){var b,e,c=this._vertices;b=this._curVertexIndex;if(a.count===a.renderCount)c.set(a.storage,b);else{var f=0,d=a.renderOffset*a.type.size,g=a.renderCount*
a.type.size;for(e=a.storage;f<g;d++,f++)c[b+f]=e[d]}this._curVertexIndex+=a.renderCount*a.type.size;this._curBatchSize+=a.renderCount};b.prototype.flush=function(a){0!==this._curBatchSize&&(a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this._vertices,a.DYNAMIC_DRAW),a.drawElements(a.TRIANGLES,6*this._curBatchSize,a.UNSIGNED_SHORT,0),this._curBatchSize=this._curVertexIndex=0)};b.prototype._initBuffers=function(){var a,b,e=this._gl,c=6*this._size;this._vertices=new Float32Array(24*
this._size);this._indices=new Uint16Array(c);for(b=a=0;a<c;a+=6,b+=4)this._indices[a]=b,this._indices[a+1]=b+1,this._indices[a+2]=b+2,this._indices[a+3]=b,this._indices[a+4]=b+2,this._indices[a+5]=b+3;this._vertexBuffer=e.createBuffer();this._indexBuffer=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer);e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW);e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)};return b}()})(d.renderer||
(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){var g=window.requestAnimationFrame||window.msRequestAnimationFrame||function(a,b){void 0===b&&(b=1E3/62);setTimeout(a,b)},c=function(){function a(b,e){void 0===e&&(e={});this._paused=this._runing=!1;this._timeScale=1;a.instance=this;this._view="string"===typeof b?document.getElementById("canvas"):b;this._scheduler=d.Scheduler.getInstance();this._assetLoader=d.assets.AssetLoader.getInstance();this._touch=new d.Touch(b,e.touchScale);this._renderer=new d.renderer.Renderer(d.renderer.WebGLUtils.getGLContext(b,
e.renderer),{x:0,y:0,width:b.width,height:b.height});this._stage=new d.Stage}a.getInstance=function(){return a.instance};Object.defineProperty(a.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"touch",{get:function(){return this._touch},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"scheduler",{get:function(){return this._scheduler},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"assetLoader",{get:function(){return this._assetLoader},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"viewRectTransform",{get:function(){return this._stage.viewRectTransform},enumerable:!0,configurable:!0});a.prototype.start=function(){var a=this,e;this._runing||(this._runing=!0,d.Time.reset(),e=function(){a._runing&&
g(e);a.runStep()},g(e))};a.prototype.stop=function(){this._runing=!1};a.prototype.runStep=function(a){void 0===a&&(a=this._timeScale);d.Time.update(a);this._stage.update();this._stage.visitStage(this._renderer);this._renderer.render();this._scheduler.runSchedule();d.utils.Tween.tick(d.Time.delta)};return a}();d.Director=c})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=function(b){function e(a){b.call(this,a)}__extends(e,b);Object.defineProperty(e.prototype,"glTexture",{get:function(){return this._glTexture},enumerable:!0,configurable:!0});e.prototype._generateTexture=function(b){var e=d.Director.getInstance().renderer;if(!e)throw Error("Director not initialized");this._glTexture=e.textureManager.generateTexture(new a(b))};e.prototype._generatePVRTexture=function(a){throw Error("Unsupported now");};return e}(g.Asset);g.GLTextureAsset=
c;var a=function(){function a(b){this._source=b;this._pixelFormat=this._textureFormat=0}Object.defineProperty(a.prototype,"width",{get:function(){return this._source.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._source.height},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureFormat",{get:function(){return this._textureFormat},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!0,configurable:!0});return a}();g.HTMLImageDescriptor=a;c=function(){function a(b,c){this._source=b;this._textureFormat=2;this._pixelFormat=c}Object.defineProperty(a.prototype,"width",{get:function(){return this._source.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._source.height},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureFormat",{get:function(){return this._textureFormat},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!0,configurable:!0});return a}();g.PVRDescriptor=c})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,e,c){this._spriteAtlas=a;this._frame=e;this._name=c}Object.defineProperty(a.prototype,"spriteAtlas",{get:function(){return this._spriteAtlas},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});return a}();d.Sprite=c})(d.assets||(d.assets={}))})(WOZLLA||
(WOZLLA={}));
(function(d){(function(d){function c(a,b){for(var e in b)"undefined"===typeof a[e]&&(a[e]=b[e]);return a}var a={json:function(a){return JSON.parse(a.responseText)},arraybuffer:function(a){return a.response}},b=function(){},e=function(){function e(){}e.request=function(d){void 0===d&&(d={});var g,k;d=c(d,{url:"",async:!0,method:"GET",contentType:"text",responseType:"text/plain",timeout:3E4,success:b,error:b});g=new XMLHttpRequest;g.responseType=d.responseType;g.onreadystatechange=function(){var e;4===
g.readyState&&(g.onreadystatechange=b,clearTimeout(k),e=a[d.contentType]||function(){return g.responseText},d.success(e(g)))};g.open(d.method,d.url,d.async);k=setTimeout(function(){g.onreadystatechange=b;g.abort();d.error({code:e.ERROR_TIMEOUT,message:"request timeout"})},d.timeout);g.send()};e.ERROR_TIMEOUT=1;e.ERROR_SERVER=2;return e}();d.Ajax=e})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){function c(a){var b=a.lastIndexOf("/");return-1!==b?a.substr(b+1,a.length):a}var a=/(\.png|\.jpg)$/i,b=function(b){function f(a){b.call(this,a);this._spriteCache={}}__extends(f,b);Object.defineProperty(f.prototype,"imageSrc",{get:function(){return this._imageSrc},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"metaSrc",{get:function(){return this._metaSrc},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"sourceImage",{get:function(){return this._sourceImage},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"spriteData",{get:function(){return this._spriteData},enumerable:!0,configurable:!0});f.prototype.getSprite=function(a){var b;return a?(b=this._spriteCache[a])?b:this._spriteData?(b=this._spriteData.frames[a])?("undefined"===typeof b.frame.width&&(b.frame.width=b.frame.w,b.frame.height=b.frame.h),b=new g.Sprite(this,{x:b.frame.x,y:b.frame.y,width:b.frame.width,height:b.frame.height},a),this._spriteCache[a]=b):null:null:this._entireSprite};
f.prototype.load=function(b,e){var c=this;a.test(this.src)?(this._imageSrc=this.src,this._loadImage(function(a,d){a?e&&e(a):(c._generateTexture(d),c._sourceImage=d,c._entireSprite=new g.Sprite(c,{x:0,y:0,width:d.width,height:d.height}),b&&b())})):(this._metaSrc=this.src,this._loadSpriteAtlas(function(a,d,f){a?e&&e(a):(c._sourceImage=d,c._generateTexture(d),c._entireSprite=new g.Sprite(c,{x:0,y:0,width:d.width,height:d.height}),c._spriteData=f,b&&b())}))};f.prototype._loadImage=function(a){var b=this,
e=new Image;e.src=this._imageSrc;e.onload=function(){a&&a(null,e)};e.onerror=function(){a("Fail to load image: "+b._imageSrc)}};f.prototype._loadSpriteAtlas=function(a){var b=this;d.utils.Ajax.request({url:b._metaSrc,contentType:"json",success:function(e){var d=e.meta.image,f=c(b._metaSrc);b._imageSrc=b._metaSrc.replace(new RegExp(f+"$"),d);b._loadImage(function(b,c){b?a&&a(b):a&&a(null,c,e)})},error:function(b){a("Fail to load sprite: "+this._metaSrc+", "+b.code+":"+b.message)}})};return f}(g.GLTextureAsset);
g.SpriteAtlas=b})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,e,c,d){this.x=a;this.y=e;this.width=c;this.height=d}Object.defineProperty(a.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bottom",{get:function(){return this.y+
this.height},enumerable:!0,configurable:!0});a.prototype.containsXY=function(a,e){return this.x<=a&&this.right>a&&this.y<=e&&this.bottom>e};a.prototype.toString=function(){return"Rectangle["+this.x+","+this.y+","+this.width+","+this.height+"]"};return a}();d.Rectangle=c})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.collideXY=function(a,b){return this.region&&this.region.containsXY(a,b)};b.prototype.collide=function(a){return!1};return b}(d.Collider);g.CircleCollider=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.collideXY=function(a,b){return!0};b.prototype.collide=function(a){return!1};return b}(d.Collider);g.MaskCollider=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.fromSpriteRenderer=function(a){var b=new d.component.RectCollider,c=a.sprite.frame;a=a.spriteOffset;b.region=new d.math.Rectangle(0-c.width*a.x,0-c.height*a.y,c.width,c.height);return b};b.prototype.collideXY=function(a,b){return this.region&&this.region.containsXY(a,b)};b.prototype.collide=function(a){return!1};return b}(d.Collider);g.RectCollider=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA=
{}));(function(d){(function(d){var c=function(){function a(a,e){this._globalZ=a;this._layer=e}Object.defineProperty(a.prototype,"globalZ",{get:function(){return this._globalZ},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});return a}();d.RenderCommandBase=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(a){function b(b,c){a.call(this,b,c)}__extends(b,a);b.prototype.execute=function(a){throw Error("abstract method");};return b}(d.RenderCommandBase);d.CustomCommand=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(e){function f(){e.apply(this,arguments);this.reverse=!1;this._endGlobalZ=this._startGlobalZ=0;this._maskLayer=d.renderer.ILayerManager.DEFAULT}__extends(f,e);f.prototype.setMaskRange=function(a,b,e){void 0===e&&(e=d.renderer.ILayerManager.DEFAULT);this._startGlobalZ=a;this._endGlobalZ=b;this._maskLayer=e};f.prototype.render=function(e,d){e.addCommand(new c(this._startGlobalZ,this._maskLayer));this.renderMask(e,d);e.addCommand(new a(this._startGlobalZ,this._maskLayer,this.reverse));
e.addCommand(new b(this._endGlobalZ,this._maskLayer))};f.prototype.renderMask=function(a,b){};return f}(d.Component);d.Mask=g;var c=function(a){function b(c,d){a.call(this,c,d)}__extends(b,a);b.prototype.execute=function(a){a=a.gl;a.enable(a.STENCIL_TEST);a.clear(a.STENCIL_BUFFER_BIT);a.colorMask(!1,!1,!1,!1);a.stencilFunc(a.ALWAYS,1,0);a.stencilOp(a.KEEP,a.KEEP,a.REPLACE)};return b}(d.renderer.CustomCommand),a=function(a){function b(c,d,f){a.call(this,c,d);this.reverse=f}__extends(b,a);b.prototype.execute=
function(a){a=a.gl;a.colorMask(!0,!0,!0,!0);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.stencilFunc(this.reverse?a.NOTEQUAL:a.EQUAL,1,255)};return b}(d.renderer.CustomCommand),b=function(a){function b(c,d){a.call(this,c,d)}__extends(b,a);b.prototype.execute=function(a){a.gl.disable(a.gl.STENCIL_TEST)};return b}(d.renderer.CustomCommand)})(WOZLLA||(WOZLLA={}));
(function(d){var g=function(c){function a(){c.apply(this,arguments)}__extends(a,c);a.prototype.render=function(a,e){};return a}(d.Component);d.Renderer=g})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(b){this._info=b}Object.defineProperty(a.prototype,"size",{get:function(){return 4*this.strade},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"strade",{get:function(){return this._info[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexIndex",{get:function(){return this._info[1]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"texCoordIndex",{get:function(){return this._info[2]},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"alphaIndex",{get:function(){return this._info[3]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorIndex",{get:function(){return this._info[4]},enumerable:!0,configurable:!0});return a}();d.QuadType=c;var a=function(){function a(e,c){void 0===c&&(c=a.V2T2C1A1);this._count=e;this._type=c;this._storage=Array(c.size*e);this._renderOffset=0;this._renderCount=e}Object.defineProperty(a.prototype,"storage",{get:function(){return this._storage},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderOffset",{get:function(){return this._renderOffset},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderCount",{get:function(){return this._renderCount},enumerable:!0,configurable:!0});a.prototype.setRenderRange=
function(a,b){this._renderOffset=a;this._renderCount=b};a.prototype.setVertices=function(a,b,c,d,g,m,p,n,l){void 0===l&&(l=0);var q=this._type.strade;l=this._type.size*l+this._type.vertexIndex;this._storage[0+l]=a;this._storage[1+l]=b;this._storage[0+l+1*q]=c;this._storage[1+l+1*q]=d;this._storage[0+l+2*q]=g;this._storage[1+l+2*q]=m;this._storage[0+l+3*q]=p;this._storage[1+l+3*q]=n};a.prototype.setTexCoords=function(a,b,c,d,g,m,p,n,l){void 0===l&&(l=0);var q=this._type.strade;l=this._type.size*l+
this._type.texCoordIndex;this._storage[0+l]=a;this._storage[1+l]=b;this._storage[0+l+1*q]=c;this._storage[1+l+1*q]=d;this._storage[0+l+2*q]=g;this._storage[1+l+2*q]=m;this._storage[0+l+3*q]=p;this._storage[1+l+3*q]=n};a.prototype.setAlpha=function(a,b){void 0===b&&(b=0);var c=this._type.strade,d=this._type.size*b+this._type.alphaIndex;this._storage[d]=a;this._storage[d+1*c]=a;this._storage[d+2*c]=a;this._storage[d+3*c]=a};a.prototype.setColor=function(a,b){void 0===b&&(b=0);var c=this._type.strade,
d=this._type.size*b+this._type.colorIndex;this._storage[d]=a;this._storage[d+1*c]=a;this._storage[d+2*c]=a;this._storage[d+3*c]=a};a.V2T2C1A1=new c([6,0,2,4,5]);return a}();d.Quad=a})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,c){this._minCount=a;this._factory=c;this._pool=[];for(var d=0;d<this._minCount;d++)this._pool.push(this._factory())}a.prototype.retain=function(){var a=this._pool.shift();return a?a:this._factory()};a.prototype.release=function(a){-1===this._pool.indexOf(a)&&this._pool.push(a)};return a}();d.ObjectPool=c})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c,a=function(a){function e(c,e){a.call(this,c,e);this.isPoolable=!0}__extends(e,a);e.init=function(a,b,e,d,g){var p=c.retain();p.initWith(a,b,e,d,g);return p};Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"materialId",{get:function(){return this._materialId},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"quad",{get:function(){return this._quad},enumerable:!0,
configurable:!0});e.prototype.initWith=function(a,b,c,e,d){this._globalZ=a;this._layer=b;this._texture=c;this._materialId=e;this._quad=d};e.prototype.release=function(){c.release(this)};return e}(g.RenderCommandBase);g.QuadCommand=a;c=new d.utils.ObjectPool(200,function(){return new a(0,g.ILayerManager.DEFAULT)})})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=d.renderer.QuadCommand,a=function(a){function e(){a.apply(this,arguments);this._quadLayer=d.renderer.ILayerManager.DEFAULT;this._quadMaterialId=d.renderer.IMaterial.DEFAULT;this._quadGlobalZ=0;this._quadAlpha=1;this._quadColor=16777215;this._quadColorDirty=this._quadAlphaDirty=this._quadVertexDirty=!0;this._textureUpdated=!1}__extends(e,a);e.prototype.setQuadRenderRange=function(a,b){this._quad.setRenderRange(a,b)};e.prototype.setQuadGlobalZ=function(a){this._quadGlobalZ=
a};e.prototype.setQuadLayer=function(a){this._quadLayer=a};e.prototype.setQuadMaterialId=function(a){this._quadMaterialId=a};e.prototype.setQuadAlpha=function(a){this._quadAlpha=a;this._quadAlphaDirty=!0};e.prototype.setQuadColor=function(a){this._quadColor=a;this._quadColorDirty=!0};e.prototype.setTexture=function(a){this._texture=a;this._textureUVS=null;this._textureUpdated=!0};e.prototype.setTextureFrame=function(a){this._textureFrame=a;this._textureUVS=null;this._textureUpdated=!0};e.prototype.setTextureOffset=
function(a){this._textureOffset=a;this._textureUpdated=!0};e.prototype.init=function(){this._initQuad();a.prototype.init.call(this)};e.prototype.render=function(a,b){this._texture&&((b&d.GameObject.MASK_TRANSFORM_DIRTY)===d.GameObject.MASK_TRANSFORM_DIRTY&&(this._quadVertexDirty=!0),this._textureUpdated&&this._updateQuad(),this._quadVertexDirty&&(this._updateQuadVertices(),this._quadVertexDirty=!1),this._quadAlphaDirty&&this._updateQuadAlpha(),this._quadColorDirty&&this._updateQuadColor(),a.addCommand(c.init(this._quadGlobalZ,
this._quadLayer,this._texture,this._quadMaterialId,this._quad)))};e.prototype._initQuad=function(){this._quad=new d.renderer.Quad(1)};e.prototype._getTextureFrame=function(){return this._textureFrame||{x:0,y:0,width:this._texture.descriptor.width,height:this._texture.descriptor.height}};e.prototype._getTextureOffset=function(){return this._textureOffset||{x:0,y:0}};e.prototype._getTextureUVS=function(){var a,b,c,e;if(this._textureUVS)return this._textureUVS;a=this._texture.descriptor.width;b=this._texture.descriptor.height;
c=this._textureFrame||{x:0,y:0,width:a,height:b};e={};e.x0=c.x/a;e.y0=c.y/b;e.x1=(c.x+c.width)/a;e.y1=c.y/b;e.x2=(c.x+c.width)/a;e.y2=(c.y+c.height)/b;e.x3=c.x/a;e.y3=(c.y+c.height)/b;return this._textureUVS=e};e.prototype._updateQuad=function(a){void 0===a&&(a=0);this._updateQuadVertices(a);this._updateQuadAlpha(a);this._updateQuadColor(a);this._textureUpdated=!1};e.prototype._updateQuadVertices=function(a){void 0===a&&(a=0);var b=this._getTextureUVS(),c=this._getTextureFrame(),e=this._getTextureOffset();
this._updateQuadVerticesByArgs(b,c,e,this._gameObject.transform.worldMatrix,a);this._quadVertexDirty=!1};e.prototype._updateQuadVerticesByArgs=function(a,b,c,e,d){void 0===d&&(d=0);var g=e.values[0],n=e.values[1],l=e.values[3],q=e.values[4],u=e.values[6];e=e.values[7];var v=-c.x*b.width,t=v+b.width;c=-c.y*b.height;b=c+b.height;this._quad.setVertices(g*v+l*c+u,q*c+n*v+e,g*t+l*c+u,q*c+n*t+e,g*t+l*b+u,q*b+n*t+e,g*v+l*b+u,q*b+n*v+e,d);this._quad.setTexCoords(a.x0,a.y0,a.x1,a.y1,a.x2,a.y2,a.x3,a.y3,d)};
e.prototype._clearQuadVertices=function(a){this._quad.setVertices(0,0,0,0,0,0,0,0);this._quad.setTexCoords(0,0,0,0,0,0,0,0)};e.prototype._updateQuadAlpha=function(a){void 0===a&&(a=0);this._quad.setAlpha(this._quadAlpha,a);this._quadAlphaDirty=!1};e.prototype._updateQuadColor=function(a){void 0===a&&(a=0);this._quad.setColor(this._quadColor,a);this._quadColorDirty=!1};return e}(d.Renderer);g.QuadRenderer=a})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=function(a){function b(){a.apply(this,arguments);this._helperGameObject=new d.GameObject}__extends(b,a);Object.defineProperty(b.prototype,"region",{get:function(){return this._region},set:function(a){this._region=a;this._helperGameObject.transform.setPosition(a.x,a.y);this._helperGameObject.transform.setScale(a.width,a.height)},enumerable:!0,configurable:!0});b.prototype.renderMask=function(a,b){this._region&&(this._maskQuadRenderer||this._initMaskQuadRenderer(a),this._helperGameObject.transform.dirty&&
(b|=d.GameObject.MASK_TRANSFORM_DIRTY),(b&d.GameObject.MASK_TRANSFORM_DIRTY)==d.GameObject.MASK_TRANSFORM_DIRTY&&this._helperGameObject.transform.transform(this.transform),this._maskQuadRenderer.setQuadGlobalZ(this._startGlobalZ),this._maskQuadRenderer.render(a,b))};b.prototype._initMaskQuadRenderer=function(a){var b=document.createElement("canvas"),c=b.getContext("2d");b.width=1;b.height=1;c.fillStyle="#FFFFFF";c.fillRect(0,0,b.width,b.height);b=new d.assets.HTMLImageDescriptor(b);a=a.textureManager.generateTexture(b);
this._maskQuadRenderer=new d.component.QuadRenderer;this._maskQuadRenderer.setTexture(a);this._helperGameObject.addComponent(this._maskQuadRenderer);this._helperGameObject.init()};return b}(d.Mask);g.RectMask=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=function(a){function b(){a.apply(this,arguments)}__extends(b,a);Object.defineProperty(b.prototype,"color",{get:function(){return this._quadColor},set:function(a){this.setQuadColor(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"alpha",{get:function(){return this._quadAlpha},set:function(a){this.setQuadAlpha(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"materialId",{get:function(){return this._quadMaterialId},set:function(a){this.setQuadMaterialId(a)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderLayer",{get:function(){return this._quadLayer},set:function(a){this.setQuadLayer(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderOrder",{get:function(){return this._quadGlobalZ},set:function(a){this.setQuadGlobalZ(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"sprite",{get:function(){return this._sprite},set:function(a){var b=this._sprite;(this._sprite=a)?(this.setTextureFrame(a.frame),
b&&b.spriteAtlas===a.spriteAtlas||this.setTexture(a.spriteAtlas.glTexture)):(this.setTexture(null),this.setTextureFrame(null))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"spriteOffset",{get:function(){return this._getTextureOffset()},set:function(a){this.setTextureOffset(a)},enumerable:!0,configurable:!0});return b}(g.QuadRenderer);g.SpriteRenderer=c;d.Component.register(c,{name:"SpriteRenderer",properties:[{name:"color",type:"int"}]})})(d.component||(d.component={}))})(WOZLLA||
(WOZLLA={}));
(function(d){(function(g){var c=d.renderer.QuadCommand,a=function(a){function e(){a.apply(this,arguments)}__extends(e,a);Object.defineProperty(e.prototype,"renderRegion",{get:function(){return this._renderRegion},set:function(a){this._renderRegion=a},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"patch",{get:function(){return this._patch},set:function(a){this._patch=a;this._quadVertexDirty=!0},enumerable:!0,configurable:!0});e.prototype._initQuad=function(){this._quad=new d.renderer.Quad(9)};
e.prototype._updateNinePatchQuads=function(){this._updateNinePatchQuadVertices();this._updateNinePatchQuadAlpha();this._updateNinePatchQuadColor();this._textureUpdated=!1};e.prototype._updateNinePatchQuadVertices=function(){for(var a=new d.Transform,b=this._getTextureFrame(),c,e={x:0,y:0},g=this._patch||new d.math.Rectangle(0,0,b.width,b.height),p=this._renderRegion||g,b=[{frame:{x:b.x,y:b.y,width:g.left,height:g.top},pos:{x:p.x,y:p.y},size:{width:1,height:1}},{frame:{x:b.x+g.left,y:b.y,width:g.width,
height:g.top},pos:{x:p.x+g.left,y:p.y},size:{width:(p.width-(g.right-g.width))/g.width,height:1}},{frame:{x:b.x+g.right,y:b.y,width:b.width-g.right,height:g.top},pos:{x:p.right,y:p.y},size:{width:1,height:1}},{frame:{x:b.x,y:b.y+g.top,width:g.left,height:g.height},pos:{x:p.x,y:p.y+g.top},size:{width:1,height:(p.height-(g.bottom-g.height))/g.height}},{frame:{x:b.x+g.left,y:b.y+g.top,width:g.width,height:g.height},pos:{x:p.x+g.left,y:p.y+g.top},size:{width:(p.width-(g.right-g.width))/g.width,height:(p.height-
(g.bottom-g.height))/g.height}},{frame:{x:b.x+g.right,y:b.y+g.top,width:b.width-g.right,height:g.height},pos:{x:p.right,y:p.y+g.top},size:{width:1,height:(p.height-(g.bottom-g.height))/g.height}},{frame:{x:b.x,y:b.y+g.bottom,width:b.width-g.right,height:b.height-g.bottom},pos:{x:p.x,y:p.bottom},size:{width:1,height:1}},{frame:{x:b.x+g.left,y:b.y+g.bottom,width:g.width,height:b.height-g.bottom},pos:{x:p.x+g.left,y:p.bottom},size:{width:(p.width-(g.right-g.width))/g.width,height:1}},{frame:{x:b.x+g.right,
y:b.y+g.bottom,width:b.width-g.right,height:b.height-g.bottom},pos:{x:p.right,y:p.bottom},size:{width:1,height:1}}],g=0;9>g;g++)if(p=b[g],0<p.frame.width&&0<p.frame.height){c=p.frame;var n=this._texture,l=n.descriptor.width,n=n.descriptor.height,q={};q.x0=c.x/l;q.y0=c.y/n;q.x1=(c.x+c.width)/l;q.y1=c.y/n;q.x2=(c.x+c.width)/l;q.y2=(c.y+c.height)/n;q.x3=c.x/l;q.y3=(c.y+c.height)/n;c=q;a.set(this.gameObject.transform);a.x+=p.pos.x;a.y+=p.pos.y;a.setScale(p.size.width,p.size.height);a.updateWorldMatrix();
this._updateQuadVerticesByArgs(c,p.frame,e,a.worldMatrix,g)}else this._clearQuadVertices(g);this._quadVertexDirty=!1};e.prototype._updateNinePatchQuadAlpha=function(){for(var a=0;9>a;a++)this._updateQuadAlpha(a);this._quadAlphaDirty=!1};e.prototype._updateNinePatchQuadColor=function(){for(var a=0;9>a;a++)this._updateQuadColor(a);this._quadColorDirty=!1};e.prototype.render=function(a,b){this._texture&&((b&d.GameObject.MASK_TRANSFORM_DIRTY)===d.GameObject.MASK_TRANSFORM_DIRTY&&(this._quadVertexDirty=
!0),this._textureUpdated&&this._updateNinePatchQuads(),this._quadVertexDirty&&(this._updateNinePatchQuadVertices(),this._quadVertexDirty=!1),this._quadAlphaDirty&&this._updateNinePatchQuadAlpha(),this._quadColorDirty&&this._updateNinePatchQuadColor(),a.addCommand(c.init(this._quadGlobalZ,this._quadLayer,this._texture,this._quadMaterialId,this._quad)))};return e}(g.SpriteRenderer);g.NinePatchRenderer=a;d.Component.register(a,{name:"NinePatchRenderer",properties:[]})})(d.component||(d.component={}))})(WOZLLA||
(WOZLLA={}));(function(d){var g=function(c){function a(){c.apply(this,arguments);this.enabled=!0}__extends(a,c);a.prototype.update=function(){};return a}(d.Component);d.Behaviour=g})(WOZLLA||(WOZLLA={}));(function(d){var g=function(c){function a(a,e,d,h){void 0===e&&(e=!1);void 0===d&&(d=null);void 0===h&&(h=!0);c.call(this,a,e,d,h)}__extends(a,c);return a}(d.event.Event);d.CoreEvent=g})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){function c(a,c){c()}var a=function(){function a(){this.doInit=this.doLoad=!1}a.prototype.instantiateWithSrc=function(a,b){void 0===b&&(b=c);this.src=a;this.newCallback=b;return this};a.prototype.instantiateWithJSON=function(a,b){void 0===b&&(b=c);this.data=a;this.newCallback=b;return this};a.prototype.load=function(a){void 0===a&&(a=c);this.doLoad=!0;this.loadCallback=a;return this};a.prototype.init=function(){this.doLoad?this.doInit=!0:this.err="JSONXBuilder: init must after load";
return this};a.prototype.build=function(a){var b=this;this._loadJSONData(function(){b._checkError(a)||b._newGameObjectTree(function(){b._checkError(a)||(b.doLoad?b.newCallback(b.root,function(){b._loadAssets(function(){b._checkError(a)||(b.doInit&&b._init(),a(b.err,b.root))})}):a(b.err,b.root))})})};a.prototype._checkError=function(a){return this.err?(a(this.err,null),!0):!1};a.prototype._loadJSONData=function(a){var b=this;this.src&&!this.data?d.utils.Ajax.request({url:this.src,contentType:"json",
success:function(c){b.data=c;a&&a()},error:function(c){b.err=c;a&&a()}}):a&&a()};a.prototype._newGameObjectTree=function(a){var b=this;this._newGameObject(this.data.root,function(c){b.root=c;a&&a()})};a.prototype._newGameObject=function(a,b){var c=this,g=new d.GameObject(a.rect);g.id=a.id;g.name=a.name;g.active=a.active;g.visible=a.visible;g.touchable=a.touchable;g.transform.set(a.transform);var k=a.components;k&&0<k.length&&k.forEach(function(a){g.addComponent(c._newComponent(a))});var m=0,p=a.children;
p&&0!==p.length?p.forEach(function(a){a.reference?c._newReferenceObject(a,function(a){a&&g.addChild(a);m++;m===p.length&&b(g)}):c._newGameObject(a,function(a){g.addChild(a);m++;m===p.length&&b(g)})}):b(g)};a.prototype._newReferenceObject=function(c,d){var h=this;(new a).instantiateWithSrc(c.reference).build(function(a,b){a?h.err=a:b&&(b.name=c.name,b.id=c.id,b.active=c.active,b.visible=c.visible,b.touchable=c.touchable,b.transform.set(c.transform));d(b)})};a.prototype._newComponent=function(a){var b=
d.Component.create(a.name);d.Component.getConfig(a.name).properties.forEach(function(c){var d=a.properties[c.name];b[c.name]="undefined"===typeof d?c.defaultValue:d});return b};a.prototype._loadAssets=function(a){a&&a()};a.prototype._init=function(){this.root.init()};return a}();g.JSONXBuilder=a})(d.jsonx||(d.jsonx={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,c,d){this.centerX=a;this.centerY=c;this.radius=d}a.prototype.containsXY=function(a,c){return Math.pow(a-this.centerX,2)+Math.pow(c-this.centerY,2)<=this.radius};a.prototype.toString=function(){return"Circle["+this.centerX+","+this.centerY+","+this.radius+"]"};return a}();d.Circle=c})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){(function(c){c.rectIntersect=function(a,b){return a.x<b.x+b.width&&b.x<a.x+a.width&&a.y<b.y+b.height&&b.y<a.y+a.height};c.rectIntersect2=function(a,b,c,d,h,g,k,m){return a<=h+k&&h<=a+c&&b<=g+m&&g<=b+d}})(d.MathUtils||(d.MathUtils={}))})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a,c){this.width=a;this.height=c}a.prototype.toString=function(){return"Size["+this.width+","+this.height+"]"};return a}();d.Size=c})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IMaterialManager||(d.IMaterialManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IShaderManager||(d.IShaderManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){(function(c){c[c.PNG=0]="PNG";c[c.JPEG=1]="JPEG";c[c.PVR=2]="PVR"})(d.TextureFormat||(d.TextureFormat={}));(function(c){c[c.RGBA8888=0]="RGBA8888";c[c.RGBA4444=1]="RGBA4444";c[c.RGB888=2]="RGB888";c[c.RGB565=3]="RGB565";c[c.PVRTC4=4]="PVRTC4";c[c.PVRTC2=5]="PVRTC2"})(d.PixelFormat||(d.PixelFormat={}))})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.ITextureManager||(d.ITextureManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(){}a.getExtension=function(b,c,d){void 0===d&&(d=!0);b=b.getExtension(c)||b.getExtension(b,a.VENDOR_WEBKIT+c);if(null!=b)return b;if(d)throw Error("Unsupported extension: "+c);};a.VENDOR_WEBKIT="WEBKIT_";a.PVRTC="WEBGL_compressed_texture_pvrtc";a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842;a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843;return a}();d.WebGLExtension=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=function(c){function f(){c.apply(this,arguments);this._stateConfig={}}__extends(f,c);f.prototype.defineState=function(a,b){void 0===b&&(b=!1);d.Assert.isUndefined(this._stateConfig[a],'state "'+a+'" has been defined');this._stateConfig[a]={data:{}};b&&(this._defaultState=a)};f.prototype.getStateData=function(a,b){d.Assert.isNotUndefined(this._stateConfig[a],'state "'+a+'" not defined');return this._stateConfig[a].data[b]};f.prototype.setStateData=function(a,b,c){d.Assert.isNotUndefined(this._stateConfig[a],
'state "'+a+'" not defined');this._stateConfig[a].data[b]=c};f.prototype.defineTransition=function(a,b,c){d.Assert.isNotUndefined(this._stateConfig[a],'state "'+a+'" not defined');d.Assert.isNotUndefined(this._stateConfig[b],'state "'+b+'" not defined');this._stateConfig[a][b]=c};f.prototype.init=function(){this._currentState=this._defaultState;this.dispatchEvent(new d.event.Event(f.INIT,!1,new a(this._currentState)))};f.prototype.getCurrentState=function(){return this._currentState};f.prototype.changeState=
function(c){var e=this,g,m;d.Assert.isNotUndefined(this._stateConfig[c]);g=this._currentState;m=this._stateConfig[c][c]||b.getInstance();this._currentTransition&&this._currentTransition.cancel();m.reset();m.execute(g,c,function(){e._currentTransition=null;e._currentState=c;e.dispatchEvent(new d.event.Event(f.CHANGE,!1,new a(e._currentState)))});this._currentTransition=m};f.INIT="state.init";f.CHANGE="state.change";return f}(d.event.EventDispatcher);g.StateMachine=c;var a=function(){return function(a){this.state=
a}}();g.StateEventData=a;var b=function(){function a(){this._canceled=!1}a.getInstance=function(){a.instance||(a.instance=new a);return a.instance};a.prototype.reset=function(){this._canceled=!1};a.prototype.cancel=function(){this._canceled=!0};a.prototype.execute=function(a,b,c){this._canceled||c()};return a}();g.EmptyTransition=b})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=d.utils.StateMachine,a=function(a){function e(){a.apply(this,arguments);this._stateMachine=new d.utils.StateMachine}__extends(e,a);Object.defineProperty(e.prototype,"spriteAtlas",{get:function(){return this._spriteAtlas},set:function(a){this._spriteAtlas=a},enumerable:!0,configurable:!0});e.prototype.listRequiredComponents=function(){return[d.component.SpriteRenderer]};e.prototype.init=function(){var d=this;this._stateMachine.addListener(c.INIT,function(a){return d.onStateChange(a)});
this._stateMachine.addListener(c.CHANGE,function(a){return d.onStateChange(a)});this._spriteRenderer=this.gameObject.renderer;a.prototype.init.call(this)};e.prototype.getStateSpriteName=function(a){return this._stateMachine.getStateData(a,"spriteName")};e.prototype.setStateSpriteName=function(a,b){this._stateMachine.setStateData(a,"spriteName",b)};e.prototype.onStateChange=function(a){this._spriteRenderer.sprite=this._spriteAtlas.getSprite(this.getStateSpriteName(a.data.state))};return e}(d.Component);
g.StateWidget=a})(d.ui||(d.ui={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(a){function b(){a.call(this);this._stateMachine.defineState(b.STATE_NORMAL,!0);this._stateMachine.defineState(b.STATE_DISABLED);this._stateMachine.defineState(b.STATE_PRESSED)}__extends(b,a);Object.defineProperty(b.prototype,"normalSpriteName",{get:function(){return this.getStateSpriteName(b.STATE_NORMAL)},set:function(a){this.setStateSpriteName(b.STATE_NORMAL,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"disabledSpriteName",{get:function(){return this.getStateSpriteName(b.STATE_DISABLED)},
set:function(a){this.setStateSpriteName(b.STATE_DISABLED,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"pressedSpriteName",{get:function(){return this.getStateSpriteName(b.STATE_PRESSED)},set:function(a){this.setStateSpriteName(b.STATE_PRESSED,a)},enumerable:!0,configurable:!0});b.prototype.init=function(){var b=this;this.gameObject.addListener("touch",function(a){return b.onTouch(a)});this.gameObject.addListener("release",function(a){return b.onRelease(a)});this.gameObject.addListener("tap",
function(a){return b.onTap(a)});this._stateMachine.init();a.prototype.init.call(this)};b.prototype.destroy=function(){this._stateMachine.clearAllListeners();a.prototype.destroy.call(this)};b.prototype.isEnabled=function(){return this._stateMachine.getCurrentState()!==b.STATE_DISABLED};b.prototype.setEnabled=function(a){void 0===a&&(a=!0);this._stateMachine.changeState(a?b.STATE_NORMAL:b.STATE_DISABLED);this._gameObject.touchable=a};b.prototype.onTouch=function(a){this._stateMachine.changeState(b.STATE_PRESSED)};
b.prototype.onRelease=function(a){this._stateMachine.changeState(b.STATE_NORMAL)};b.prototype.onTap=function(a){};b.STATE_NORMAL="normal";b.STATE_DISABLED="disabled";b.STATE_PRESSED="pressed";return b}(d.StateWidget);d.Button=c})(d.ui||(d.ui={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(a){function b(){a.call(this);this._stateMachine.defineState(b.STATE_UNCHECKED,!0);this._stateMachine.defineState(b.STATE_DISABLED);this._stateMachine.defineState(b.STATE_CHECKED)}__extends(b,a);Object.defineProperty(b.prototype,"uncheckedSpriteName",{get:function(){return this.getStateSpriteName(b.STATE_UNCHECKED)},set:function(a){this.setStateSpriteName(b.STATE_UNCHECKED,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"disabledSpriteName",
{get:function(){return this.getStateSpriteName(b.STATE_DISABLED)},set:function(a){this.setStateSpriteName(b.STATE_DISABLED,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"checkedSpriteName",{get:function(){return this.getStateSpriteName(b.STATE_CHECKED)},set:function(a){this.setStateSpriteName(b.STATE_CHECKED,a)},enumerable:!0,configurable:!0});b.prototype.init=function(){var b=this;this._gameObject.addListener("tap",function(a){return b.onTap(a)});this._stateMachine.init();
a.prototype.init.call(this)};b.prototype.destroy=function(){this._stateMachine.clearAllListeners();a.prototype.destroy.call(this)};b.prototype.isEnabled=function(){return this._stateMachine.getCurrentState()!==b.STATE_DISABLED};b.prototype.setEnabled=function(a){void 0===a&&(a=!0);this._stateMachine.changeState(a?b.STATE_UNCHECKED:b.STATE_DISABLED);this._gameObject.touchable=a};b.prototype.onTap=function(a){this._stateMachine.getCurrentState()===b.STATE_CHECKED?this._stateMachine.changeState(b.STATE_UNCHECKED):
this._stateMachine.changeState(b.STATE_CHECKED)};b.STATE_UNCHECKED="unchecked";b.STATE_CHECKED="checked";b.STATE_DISABLED="disabled";return b}(d.StateWidget);d.CheckBox=c})(d.ui||(d.ui={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(){}a.get=function(a){-1>a&&(a=-1);1<a&&(a=1);return function(c){return 0==a?c:0>a?c*(c*-a+1+a):c*((2-c)*a+(1-a))}};a.getPowIn=function(a){return function(c){return Math.pow(c,a)}};a.getPowOut=function(a){return function(c){return 1-Math.pow(1-c,a)}};a.getPowInOut=function(a){return function(c){return 1>(c*=2)?.5*Math.pow(c,a):1-.5*Math.abs(Math.pow(2-c,a))}};a.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};a.sineOut=function(a){return Math.sin(a*
Math.PI/2)};a.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)};a.getBackIn=function(a){return function(c){return c*c*((a+1)*c-a)}};a.getBackOut=function(a){return function(c){c-=1;return c*c*((a+1)*c+a)+1}};a.getBackInOut=function(a){a*=1.525;return function(c){return 1>(c*=2)?.5*c*c*((a+1)*c-a):.5*((c-=2)*c*((a+1)*c+a)+2)}};a.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};a.circOut=function(a){return Math.sqrt(1-a*a)};a.circInOut=function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-
(a-=2)*a)+1)};a.bounceIn=function(b){return 1-a.bounceOut(1-b)};a.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};a.bounceInOut=function(b){return.5>b?.5*a.bounceIn(2*b):.5*a.bounceOut(2*b-1)+.5};a.getElasticIn=function(a,c){var d=2*Math.PI;return function(g){if(0==g||1==g)return g;var s=c/d*Math.asin(1/a);return-(a*Math.pow(2,10*(g-=1))*Math.sin((g-s)*d/c))}};a.getElasticOut=function(a,
c){var d=2*Math.PI;return function(g){if(0==g||1==g)return g;var s=c/d*Math.asin(1/a);return a*Math.pow(2,-10*g)*Math.sin((g-s)*d/c)+1}};a.getElasticInOut=function(a,c){var d=2*Math.PI;return function(g){var s=c/d*Math.asin(1/a);return 1>(g*=2)?-.5*a*Math.pow(2,10*(g-=1))*Math.sin((g-s)*d/c):a*Math.pow(2,-10*(g-=1))*Math.sin((g-s)*d/c)*.5+1}};a.linear=function(a){return a};a.expoIn=function(a){return 0==a?0:Math.pow(2,10*(a-1))-.001};a.expoOut=function(a){return 1==a?1:-Math.pow(2,-10*a)+1};a.expoInOut=
function(a){a/=.5;return a=1>a?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*(a-1))+2)};a.getByKey=function(b){return a[a.keyMap[b]]};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.backIn=a.getBackIn(1.7);a.backOut=a.getBackOut(1.7);
a.backInOut=a.getBackInOut(1.7);a.elasticIn=a.getElasticIn(1,.3);a.elasticOut=a.getElasticOut(1,.3);a.elasticInOut=a.getElasticInOut(1,.3*1.5);a.keyMap={0:"linear",1:"sineIn",2:"sineOut",3:"sineInOut",4:"quadIn",5:"quadOut",6:"quadInOut",7:"cubicIn",8:"cubicOut",9:"cubicInOut",10:"quartIn",11:"quartOut",12:"quartInOut",13:"quintIn",14:"quintOut",15:"quintInOut",16:"expoIn",17:"expoOut",18:"expoInOut",19:"circIn",20:"circOut",21:"circInOut",22:"elasticIn",23:"elasticOut",24:"elasticInOut",25:"backIn",
26:"backOut",27:"backInOut",28:"bounceIn",29:"bounceOut",30:"bounceInOut"};return a}();d.Ease=c})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(a){function b(){a.call(this,this);this._display=null}__extends(b,a);b.prototype.dispose=function(){this._display&&(this._display.destroy(),this._display.removeMe());a.prototype.dispose.call(this);this._display=null};b.prototype._updateDisplay=function(a){this._display=a};b.prototype._getDisplayIndex=function(){return-1};b.prototype._addDisplayToContainer=function(a,b){this._display&&a&&a.addChild(this._display)};b.prototype._removeDisplayFromContainer=function(){this._display&&
this._display.parent&&this._display.parent.removeChild(this._display)};b.prototype._updateTransform=function(){var a;this._display&&(a=this._display.transform,a.__local_matrix=this._globalTransformMatrix,a.dirty=!0)};b.prototype._updateDisplayVisible=function(a){this._display&&this._parent&&(this._display.visible=this._parent._visible&&this._visible&&a)};b.prototype._updateDisplayColor=function(b,c,d,g,k,m,p,n){a.prototype._updateDisplayColor.call(this,b,c,d,g,k,m,p,n);this._display&&(b=this._display.renderer)&&
(b.alpha=k)};b.prototype._updateDisplayBlendMode=function(a){};return b}(dragonBones.Slot);d.WSlot=c})(d.DragonBones||(d.DragonBones={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){function c(a){var c=a.lastIndexOf("/");return-1!==c?a.substr(c+1,a.length):a}var a=function(a){function e(){a.apply(this,arguments)}__extends(e,a);e.prototype.dispose=function(){};e.prototype.getRegion=function(a){a=this.getSprite(a).frame;return new dragonBones.Rectangle(a.x,a.y,a.width,a.height)};e.prototype._loadSpriteAtlas=function(a){var b=this;d.utils.Ajax.request({url:this._metaSrc,contentType:"json",success:function(d){var e=d.imagePath,g=c(b._metaSrc);b._imageSrc=
b._metaSrc.replace(new RegExp(g+"$"),e);b._loadImage(function(c,e){if(c)a&&a(c);else{var g=b._parseData(d);b.name=g.name;a&&a(null,e,g)}})},error:function(c){a("Fail to load sprite: "+b._metaSrc+", "+c.code+":"+c.message)}})};e.prototype._parseData=function(a){var b={name:a.name,frames:{}};a.SubTexture.forEach(function(a){b.frames[a.name]={frame:a}});return b};return e}(d.assets.SpriteAtlas);g.WTextureAtlas=a})(d.DragonBones||(d.DragonBones={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(g){var c=function(a){function b(){a.call(this,this)}__extends(b,a);b.prototype._generateArmature=function(){var a=new d.GameObject;a.init();return new dragonBones.Armature(a)};b.prototype._generateSlot=function(){return new g.WSlot};b.prototype._generateDisplay=function(a,b,c,g){var k=new d.GameObject,m=new d.component.SpriteRenderer;m.sprite=a.getSprite(b);m.spriteOffset={x:c/m.sprite.frame.width,y:g/m.sprite.frame.height};k.addComponent(m);k.init();return k};return b}(dragonBones.BaseFactory);
g.WFactory=c})(d.DragonBones||(d.DragonBones={}))})(WOZLLA||(WOZLLA={}));
