(function(d,f){function c(){b.READY||(r.determineEventTypes(),t.each(b.gestures,function(a){w.register(a)}),r.onTouch(b.DOCUMENT,l,w.detect),r.onTouch(b.DOCUMENT,q,w.detect),b.READY=!0)}var b=function y(a,e){return new y.Instance(a,e||{})};b.VERSION="1.1.3";b.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};b.DOCUMENT=document;b.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;
b.HAS_TOUCHEVENTS="ontouchstart"in d;b.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);b.NO_MOUSEEVENTS=b.HAS_TOUCHEVENTS&&b.IS_MOBILE||b.HAS_POINTEREVENTS;b.CALCULATE_INTERVAL=25;var a={},e=b.DIRECTION_DOWN="down",g=b.DIRECTION_LEFT="left",h=b.DIRECTION_UP="up",s=b.DIRECTION_RIGHT="right",k=b.POINTER_MOUSE="mouse",p=b.POINTER_TOUCH="touch",m=b.POINTER_PEN="pen",n=b.EVENT_START="start",l=b.EVENT_MOVE="move",q=b.EVENT_END="end",u=b.EVENT_RELEASE="release",v=b.EVENT_TOUCH=
"touch";b.READY=!1;b.plugins=b.plugins||{};b.gestures=b.gestures||{};var t=b.utils={extend:function(a,e,b){for(var g in e)!e.hasOwnProperty(g)||a[g]!==f&&b||(a[g]=e[g]);return a},on:function(a,e,b){a.addEventListener(e,b,!1)},off:function(a,e,b){a.removeEventListener(e,b,!1)},each:function(a,e,b){var g,h;if("forEach"in a)a.forEach(e,b);else if(a.length!==f)for(g=0,h=a.length;g<h&&!1!==e.call(b,a[g],g,a);g++);else for(g in a)if(a.hasOwnProperty(g)&&!1===e.call(b,a[g],g,a))break},inStr:function(a,e){return-1<
a.indexOf(e)},inArray:function(a,e){if(a.indexOf){var b=a.indexOf(e);return-1===b?!1:b}for(var b=0,g=a.length;b<g;b++)if(a[b]===e)return b;return!1},toArray:function(a){return Array.prototype.slice.call(a,0)},hasParent:function(a,e){for(;a;){if(a==e)return!0;a=a.parentNode}return!1},getCenter:function(a){var e=[],b=[],g=[],h=[],c=Math.min,d=Math.max;if(1===a.length)return{pageX:a[0].pageX,pageY:a[0].pageY,clientX:a[0].clientX,clientY:a[0].clientY};t.each(a,function(a){e.push(a.pageX);b.push(a.pageY);
g.push(a.clientX);h.push(a.clientY)});return{pageX:(c.apply(Math,e)+d.apply(Math,e))/2,pageY:(c.apply(Math,b)+d.apply(Math,b))/2,clientX:(c.apply(Math,g)+d.apply(Math,g))/2,clientY:(c.apply(Math,h)+d.apply(Math,h))/2}},getVelocity:function(a,e,b){return{x:Math.abs(e/a)||0,y:Math.abs(b/a)||0}},getAngle:function(a,e){return 180*Math.atan2(e.clientY-a.clientY,e.clientX-a.clientX)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.clientX-b.clientX),d=Math.abs(a.clientY-b.clientY);return c>=d?0<a.clientX-
b.clientX?g:s:0<a.clientY-b.clientY?h:e},getDistance:function(a,e){var b=e.clientX-a.clientX,g=e.clientY-a.clientY;return Math.sqrt(b*b+g*g)},getScale:function(a,e){return 2<=a.length&&2<=e.length?this.getDistance(e[0],e[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,e){return 2<=a.length&&2<=e.length?this.getAngle(e[1],e[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==h||a==e},setPrefixedCss:function(a,e,b,g){var h=["","Webkit","Moz","O","ms"];e=t.toCamelCase(e);for(var c=
0;c<h.length;c++){var d=e;h[c]&&(d=h[c]+d.slice(0,1).toUpperCase()+d.slice(1));if(d in a.style){a.style[d]=(null==g||g)&&b||"";break}}},toggleBehavior:function(a,e,b){if(e&&a&&a.style){t.each(e,function(e,g){t.setPrefixedCss(a,g,e,b)});var g=b&&function(){return!1};"none"==e.userSelect&&(a.onselectstart=g);"none"==e.userDrag&&(a.ondragstart=g)}},toCamelCase:function(a){return a.replace(/[_-]([a-z])/g,function(a){return a[1].toUpperCase()})}},r=b.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,
on:function(a,e,b,g){e=e.split(" ");t.each(e,function(e){t.on(a,e,b);g&&g(e)})},off:function(a,e,b,g){e=e.split(" ");t.each(e,function(e){t.off(a,e,b);g&&g(e)})},onTouch:function(e,g,h){var c=this,d=function(a){var d=a.type.toLowerCase(),s=b.HAS_POINTEREVENTS,d=t.inStr(d,"mouse"),k;d&&c.preventMouseEvents||(d&&g==n&&0===a.button?(c.preventMouseEvents=!1,c.shouldDetect=!0):s&&g==n?c.shouldDetect=1===a.buttons||x.matchType(p,a):d||g!=n||(c.preventMouseEvents=!0,c.shouldDetect=!0),s&&g!=q&&x.updatePointer(g,
a),c.shouldDetect&&(k=c.doDetect.call(c,a,g,e,h)),k==q&&(c.preventMouseEvents=!1,c.shouldDetect=!1,x.reset()),s&&g==q&&x.updatePointer(g,a))};this.on(e,a[g],d);return d},doDetect:function(a,e,b,g){var h=this.getTouchList(a,e),c=e,d=h.trigger,s=h.length;e==n?d=v:e==q&&(d=u,s=h.length-(a.changedTouches?a.changedTouches.length:1));0<s&&this.started&&(c=l);this.started=!0;a=this.collectEventData(b,c,h,a);e!=q&&g.call(w,a);d&&(a.changedLength=s,a.eventType=d,g.call(w,a),a.eventType=c,delete a.changedLength);
c==q&&(g.call(w,a),this.started=!1);return c},determineEventTypes:function(){var e;e=b.HAS_POINTEREVENTS?d.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:b.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"];a[n]=e[0];a[l]=e[1];a[q]=e[2];return a},getTouchList:function(a,e){if(b.HAS_POINTEREVENTS)return x.getTouchList();
if(a.touches){if(e==l)return a.touches;var g=[],h=[].concat(t.toArray(a.touches),t.toArray(a.changedTouches)),c=[];t.each(h,function(a){!1===t.inArray(g,a.identifier)&&c.push(a);g.push(a.identifier)});return c}a.identifier=1;return[a]},collectEventData:function(a,e,b,g){a=p;t.inStr(g.type,"mouse")||x.matchType(k,g)?a=k:x.matchType(m,g)&&(a=m);return{center:t.getCenter(b),timeStamp:Date.now(),target:g.target,touches:b,eventType:e,pointerType:a,srcEvent:g,preventDefault:function(){var a=this.srcEvent;
a.preventManipulation&&a.preventManipulation();a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return w.stopDetect()}}}},x=b.PointerEvent={pointers:{},getTouchList:function(){var a=[];t.each(this.pointers,function(e){a.push(e)});return a},updatePointer:function(a,e){a==q?delete this.pointers[e.pointerId]:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e)},matchType:function(a,e){if(!e.pointerType)return!1;var b=e.pointerType,
g={};g[k]=b===(e.MSPOINTER_TYPE_MOUSE||k);g[p]=b===(e.MSPOINTER_TYPE_TOUCH||p);g[m]=b===(e.MSPOINTER_TYPE_PEN||m);return g[a]},reset:function(){this.pointers={}}},w=b.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,e){this.current||(this.stopped=!1,this.current={inst:a,startEvent:t.extend({},e),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(e))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);var e=
this.current.inst,b=e.options;t.each(this.gestures,function(g){!this.stopped&&e.enabled&&b[g.name]&&g.handler.call(g,a,e)},this);this.current&&(this.current.lastEvent=a);a.eventType==q&&this.stopDetect();return a}},stopDetect:function(){this.previous=t.extend({},this.current);this.current=null;this.stopped=!0},getCalculatedData:function(a,e,g,h,c){var d=this.current,s=!1,k=d.lastCalcEvent,p=d.lastCalcData;k&&a.timeStamp-k.timeStamp>b.CALCULATE_INTERVAL&&(e=k.center,g=a.timeStamp-k.timeStamp,h=a.center.clientX-
k.center.clientX,c=a.center.clientY-k.center.clientY,s=!0);if(a.eventType==v||a.eventType==u)d.futureCalcEvent=a;if(!d.lastCalcEvent||s)p.velocity=t.getVelocity(g,h,c),p.angle=t.getAngle(e,a.center),p.direction=t.getDirection(e,a.center),d.lastCalcEvent=d.futureCalcEvent||a,d.futureCalcEvent=a;a.velocityX=p.velocity.x;a.velocityY=p.velocity.y;a.interimAngle=p.angle;a.interimDirection=p.direction},extendEventData:function(a){var e=this.current,b=e.startEvent,e=e.lastEvent||b;if(a.eventType==v||a.eventType==
u)b.touches=[],t.each(a.touches,function(a){b.touches.push({clientX:a.clientX,clientY:a.clientY})});var g=a.timeStamp-b.timeStamp,h=a.center.clientX-b.center.clientX,c=a.center.clientY-b.center.clientY;this.getCalculatedData(a,e.center,g,h,c);t.extend(a,{startEvent:b,deltaTime:g,deltaX:h,deltaY:c,distance:t.getDistance(b.center,a.center),angle:t.getAngle(b.center,a.center),direction:t.getDirection(b.center,a.center),scale:t.getScale(b.touches,a.touches),rotation:t.getRotation(b.touches,a.touches)});
return a},register:function(a){var e=a.defaults||{};e[a.name]===f&&(e[a.name]=!0);t.extend(b.defaults,e,!0);a.index=a.index||1E3;this.gestures.push(a);this.gestures.sort(function(a,e){return a.index<e.index?-1:a.index>e.index?1:0});return this.gestures}};b.Instance=function(a,e){var g=this;c();this.element=a;this.enabled=!0;t.each(e,function(a,b){delete e[b];e[t.toCamelCase(b)]=a});this.options=t.extend(t.extend({},b.defaults),e||{});this.options.behavior&&t.toggleBehavior(this.element,this.options.behavior,
!0);this.eventStartHandler=r.onTouch(a,n,function(a){g.enabled&&a.eventType==n?w.startDetect(g,a):a.eventType==v&&w.detect(a)});this.eventHandlers=[]};b.Instance.prototype={on:function(a,e){var b=this;r.on(b.element,a,e,function(a){b.eventHandlers.push({gesture:a,handler:e})});return b},off:function(a,e){var b=this;r.off(b.element,a,e,function(a){a=t.inArray({gesture:a,handler:e});!1!==a&&b.eventHandlers.splice(a,1)});return b},trigger:function(a,e){e||(e={});var g=b.DOCUMENT.createEvent("Event");
g.initEvent(a,!0,!0);g.gesture=e;var h=this.element;t.hasParent(e.target,h)&&(h=e.target);navigator.isCocoonJS?this.eventHandlers.forEach(function(e){a===e.gesture&&e.handler(g)}):h.dispatchEvent(g);return this},enable:function(a){this.enabled=a;return this},dispose:function(){var e,b;t.toggleBehavior(this.element,this.options.behavior,!1);for(e=-1;b=this.eventHandlers[++e];)t.off(this.element,b.gesture,b.handler);this.eventHandlers=[];r.off(this.element,a[n],this.eventStartHandler);return null}};
(function(a){var c=!1;b.gestures.Drag={name:a,index:50,handler:function(b,d){var k=w.current;if(!(0<d.options.dragMaxTouches&&b.touches.length>d.options.dragMaxTouches))switch(b.eventType){case n:c=!1;break;case l:if(b.distance<d.options.dragMinDistance&&k.name!=a)break;var p=k.startEvent.center;if(k.name!=a&&(k.name=a,d.options.dragDistanceCorrection&&0<b.distance)){var f=Math.abs(d.options.dragMinDistance/b.distance);p.pageX+=b.deltaX*f;p.pageY+=b.deltaY*f;p.clientX+=b.deltaX*f;p.clientY+=b.deltaY*
f;b=w.extendEventData(b)}if(k.lastEvent.dragLockToAxis||d.options.dragLockToAxis&&d.options.dragLockMinDistance<=b.distance)b.dragLockToAxis=!0;k=k.lastEvent.direction;b.dragLockToAxis&&k!==b.direction&&(t.isVertical(k)?b.direction=0>b.deltaY?h:e:b.direction=0>b.deltaX?g:s);c||(d.trigger(a+"start",b),c=!0);d.trigger(a,b);d.trigger(a+b.direction,b);k=t.isVertical(b.direction);(d.options.dragBlockVertical&&k||d.options.dragBlockHorizontal&&!k)&&b.preventDefault();break;case u:c&&b.changedLength<=d.options.dragMaxTouches&&
(d.trigger(a+"end",b),c=!1);break;case q:c=!1}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}})("drag");b.gestures.Gesture={name:"gesture",index:1337,handler:function(a,e){e.trigger(this.name,a)}};(function(a){var e;b.gestures.Hold={name:a,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(b,g){var h=g.options,c=w.current;switch(b.eventType){case n:clearTimeout(e);c.name=
a;e=setTimeout(function(){c&&c.name==a&&g.trigger(a,b)},h.holdTimeout);break;case l:b.distance>h.holdThreshold&&clearTimeout(e);break;case u:clearTimeout(e)}}}})("hold");b.gestures.Release={name:"release",index:Infinity,handler:function(a,e){a.eventType==u&&e.trigger(this.name,a)}};b.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(a,e){if(a.eventType==u){var b=a.touches.length,g=e.options;b<g.swipeMinTouches||
b>g.swipeMaxTouches||!(a.velocityX>g.swipeVelocityX||a.velocityY>g.swipeVelocityY)||(e.trigger(this.name,a),e.trigger(this.name+a.direction,a))}}};(function(a){var e=!1;b.gestures.Tap={name:a,index:100,handler:function(b,g){var h=g.options,c=w.current,d=w.previous,s,k;switch(b.eventType){case n:e=!1;break;case l:e=e||b.distance>h.tapMaxDistance;break;case q:!t.inStr(b.srcEvent.type,"cancel")&&b.deltaTime<h.tapMaxTime&&!e&&(s=d&&d.lastEvent&&b.timeStamp-d.lastEvent.timeStamp,k=!1,d&&d.name==a&&s&&
s<h.doubleTapInterval&&b.distance<h.doubleTapDistance&&(g.trigger("doubletap",b),k=!0),!k||h.tapAlways)&&(c.name=a,g.trigger(c.name,b))}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}})("tap");b.gestures.Touch={name:"touch",index:-Infinity,defaults:{preventDefault:!1,preventMouse:!1},handler:function(a,e){e.options.preventMouse&&a.pointerType==k?a.stopDetect():(e.options.preventDefault&&a.preventDefault(),a.eventType==v&&e.trigger("touch",a))}};
(function(a){var e=!1;b.gestures.Transform={name:a,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:function(b,g){switch(b.eventType){case n:e=!1;break;case l:if(2>b.touches.length)break;var h=Math.abs(1-b.scale),c=Math.abs(b.rotation);if(h<g.options.transformMinScale&&c<g.options.transformMinRotation)break;w.current.name=a;e||(g.trigger(a+"start",b),e=!0);g.trigger(a,b);c>g.options.transformMinRotation&&g.trigger("rotate",b);h>g.options.transformMinScale&&(g.trigger("pinch",
b),g.trigger("pinch"+(1>b.scale?"in":"out"),b));break;case u:e&&2>b.changedLength&&(g.trigger(a+"end",b),e=!1)}}}})("transform");"function"==typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:d.Hammer=b})(window);var dragonBones;
(function(d){var f=function(){function c(b){this._animationStateCount=0;this._armature=b;this._animationList=[];this._animationStateList=[];this._timeScale=1;this._isPlaying=!1;this.tweenEnabled=!0}c.prototype.dispose=function(){if(this._armature){for(var b=this._animationStateList.length;b--;)d.AnimationState._returnObject(this._animationStateList[b]);this._animationList.length=0;this._animationStateList.length=0;this._animationStateList=this._animationList=this._animationDataList=this._armature=
null}};c.prototype.gotoAndPlay=function(b,a,e,g,h,s,k,p,f){void 0===a&&(a=-1);void 0===e&&(e=-1);void 0===g&&(g=NaN);void 0===h&&(h=0);void 0===s&&(s=null);void 0===k&&(k=c.SAME_LAYER_AND_GROUP);void 0===p&&(p=!0);void 0===f&&(f=!0);if(!this._animationDataList)return null;for(var n=this._animationDataList.length,l;n--;)if(this._animationDataList[n].name==b){l=this._animationDataList[n];break}if(!l)return null;this._isFading=this._isPlaying=!0;a=0>a?0>l.fadeTime?.3:l.fadeTime:a;e=0>e?0>l.scale?1:l.scale:
1E3*e/l.duration;g=isNaN(g)?l.playTimes:g;switch(k){case c.NONE:break;case c.SAME_LAYER:for(n=this._animationStateList.length;n--;)k=this._animationStateList[n],k.layer==h&&k.fadeOut(a,p);break;case c.SAME_GROUP:for(n=this._animationStateList.length;n--;)k=this._animationStateList[n],k.group==s&&k.fadeOut(a,p);break;case c.ALL:for(n=this._animationStateList.length;n--;)k=this._animationStateList[n],k.fadeOut(a,p);break;default:for(n=this._animationStateList.length;n--;)k=this._animationStateList[n],
k.layer==h&&k.group==s&&k.fadeOut(a,p)}this._lastAnimationState=d.AnimationState._borrowObject();this._lastAnimationState._layer=h;this._lastAnimationState._group=s;this._lastAnimationState.autoTween=this.tweenEnabled;this._lastAnimationState._fadeIn(this._armature,l,a,1/e,g,f);this.addState(this._lastAnimationState);g=this._armature.getSlots(!1);for(n=g.length;n--;)h=g[n],h.childArmature&&h.childArmature.animation.gotoAndPlay(b,a);return this._lastAnimationState};c.prototype.gotoAndStop=function(b,
a,e,g,h,d,k,p){void 0===e&&(e=-1);void 0===g&&(g=0);void 0===h&&(h=-1);void 0===d&&(d=0);void 0===k&&(k=null);void 0===p&&(p=c.ALL);var f=this.getState(b,d);f||(f=this.gotoAndPlay(b,g,h,NaN,d,k,p));0<=e?f.setCurrentTime(f.totalTime*e):f.setCurrentTime(a);f.stop();return f};c.prototype.play=function(){this._animationDataList&&0!=this._animationDataList.length&&(this._lastAnimationState?this._isPlaying?this.gotoAndPlay(this._lastAnimationState.name):this._isPlaying=!0:this.gotoAndPlay(this._animationDataList[0].name))};
c.prototype.stop=function(){this._isPlaying=!1};c.prototype.getState=function(b,a){void 0===a&&(a=0);for(var e=this._animationStateList.length;e--;){var g=this._animationStateList[e];if(g.name==b&&g.layer==a)return g}return null};c.prototype.hasAnimation=function(b){for(var a=this._animationDataList.length;a--;)if(this._animationDataList[a].name==b)return!0;return!1};c.prototype._advanceTime=function(b){if(this._isPlaying){var a=!1;b*=this._timeScale;for(var e=this._animationStateList.length;e--;){var g=
this._animationStateList[e];g._advanceTime(b)?this.removeState(g):1!=g.fadeState&&(a=!0)}this._isFading=a}};c.prototype._updateAnimationStates=function(){for(var b=this._animationStateList.length;b--;)this._animationStateList[b]._updateTimelineStates()};c.prototype.addState=function(b){0>this._animationStateList.indexOf(b)&&(this._animationStateList.unshift(b),this._animationStateCount=this._animationStateList.length)};c.prototype.removeState=function(b){var a=this._animationStateList.indexOf(b);
0<=a&&(this._animationStateList.splice(a,1),d.AnimationState._returnObject(b),this._lastAnimationState==b&&(this._lastAnimationState=0<this._animationStateList.length?this._animationStateList[0]:null),this._animationStateCount=this._animationStateList.length)};Object.defineProperty(c.prototype,"movementList",{get:function(){return this._animationList},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"movementID",{get:function(){return this.lastAnimationName},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lastAnimationName",{get:function(){return this._lastAnimationState?this._lastAnimationState.name:null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"animationList",{get:function(){return this._animationList},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isPlaying",{get:function(){return this._isPlaying&&
!this.isComplete},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isComplete",{get:function(){if(this._lastAnimationState){if(!this._lastAnimationState.isComplete)return!1;for(var b=this._animationStateList.length;b--;)if(!this._animationStateList[b].isComplete)return!1}return!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeScale",{get:function(){return this._timeScale},set:function(b){if(isNaN(b)||0>b)b=1;this._timeScale=b},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"animationDataList",{get:function(){return this._animationDataList},set:function(b){this._animationDataList=b;this._animationList.length=0;for(var a in this._animationDataList)this._animationList[this._animationList.length]=this._animationDataList[a].name},enumerable:!0,configurable:!0});c.NONE="none";c.SAME_LAYER="sameLayer";c.SAME_GROUP="sameGroup";c.SAME_LAYER_AND_GROUP="sameLayerAndGroup";c.ALL="all";return c}();d.Animation=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this._playTimes=this._fadeState=this._currentTime=this._totalTime=this._currentPlayTimes=this._currentFrameDuration=this._currentFramePosition=this._currentFrameIndex=this._layer=0;this._timelineStateList=[];this._boneMasks=[]}c._borrowObject=function(){return 0==c._pool.length?new c:c._pool.pop()};c._returnObject=function(b){b.clear();0>c._pool.indexOf(b)&&(c._pool[c._pool.length]=b)};c._clear=function(){for(var b=c._pool.length;b--;)c._pool[b].clear();
c._pool.length=0;d.TimelineState._clear()};c.prototype.clear=function(){for(var b=this._timelineStateList.length;b--;)d.TimelineState._returnObject(this._timelineStateList[b]);this._timelineStateList.length=0;this._boneMasks.length=0;this._clip=this._armature=null};c.prototype.containsBoneMask=function(b){return 0==this._boneMasks.length||0<=this._boneMasks.indexOf(b)};c.prototype.addBoneMask=function(b,a){void 0===a&&(a=!0);this.addBoneToBoneMask(e.name);if(a){var e=this._armature.getBone(b);if(e)for(var g=
this._armature.getBones(!1),h=g.length;h--;)e.contains(g[h])&&this.addBoneToBoneMask(e.name)}this._updateTimelineStates();return this};c.prototype.removeBoneMask=function(b,a){void 0===a&&(a=!0);this.removeBoneFromBoneMask(b);if(a){var e=this._armature.getBone(b);if(e)for(var g=this._armature.getBones(!1),h=g.length;h--;)e.contains(g[h])&&this.removeBoneFromBoneMask(e.name)}this._updateTimelineStates();return this};c.prototype.removeAllMixingTransform=function(){this._boneMasks.length=0;this._updateTimelineStates();
return this};c.prototype.addBoneToBoneMask=function(b){this._clip.getTimeline(b)&&0>this._boneMasks.indexOf(b)&&this._boneMasks.push(b)};c.prototype.removeBoneFromBoneMask=function(b){b=this._boneMasks.indexOf(b);0<=b&&this._boneMasks.splice(b,1)};c.prototype._updateTimelineStates=function(){for(var b,a=this._timelineStateList.length;a--;)b=this._timelineStateList[a],this._armature.getBone(b.name)||this.removeTimelineState(b);if(0<this._boneMasks.length){for(a=this._timelineStateList.length;a--;)b=
this._timelineStateList[a],0>this._boneMasks.indexOf(b.name)&&this.removeTimelineState(b);for(var e in this._boneMasks)this.addTimelineState(this._boneMasks[e])}else for(e in this._clip.timelineList)this.addTimelineState(this._clip.timelineList[e].name)};c.prototype.addTimelineState=function(b){var a=this._armature.getBone(b);if(a){for(var e in this._timelineStateList)if(this._timelineStateList[e].name==b)return;e=d.TimelineState._borrowObject();e._fadeIn(a,this,this._clip.getTimeline(b));this._timelineStateList.push(e)}};
c.prototype.removeTimelineState=function(b){var a=this._timelineStateList.indexOf(b);this._timelineStateList.splice(a,1);d.TimelineState._returnObject(b)};c.prototype.play=function(){this._isPlaying=!0;return this};c.prototype.stop=function(){this._isPlaying=!1;return this};c.prototype._fadeIn=function(b,a,e,g,h,c){this._armature=b;this._clip=a;this._pausePlayheadInFade=c;this._name=this._clip.name;this._totalTime=this._clip.duration;this.autoTween=this._clip.autoTween;this.setTimeScale(g);this.setPlayTimes(h);
this._isComplete=!1;this._currentPlayTimes=this._currentFrameIndex=-1;2>Math.round(this._totalTime*this._clip.frameRate*.001)||Infinity==g?this._currentTime=this._totalTime:this._currentTime=-1;this._time=0;this._boneMasks.length=0;this._isFadeOut=!1;this._fadeWeight=0;this._fadeTotalWeight=1;this._fadeState=-1;this._fadeBeginTime=this._fadeCurrentTime=0;this._fadeTotalTime=e*this._timeScale;this.lastFrameAutoTween=this.displayControl=this._isPlaying=!0;this.additiveBlending=!1;this.weight=1;this.fadeOutTime=
e;this._updateTimelineStates();return this};c.prototype.fadeOut=function(b,a){if(!this._armature)return null;if(isNaN(b)||0>b)b=0;this._pausePlayheadInFade=a;if(this._isFadeOut){if(b>this._fadeTotalTime/this._timeScale-(this._fadeCurrentTime-this._fadeBeginTime))return this}else for(var e in this._timelineStateList)this._timelineStateList[e]._fadeOut();this._isFadeOut=!0;this._fadeTotalWeight=this._fadeWeight;this._fadeState=-1;this._fadeBeginTime=this._fadeCurrentTime;this._fadeTotalTime=0<=this._fadeTotalWeight?
b*this._timeScale:0;this.displayControl=!1;return this};c.prototype._advanceTime=function(b){b*=this._timeScale;this.advanceFadeTime(b);this._fadeWeight&&this.advanceTimelinesTime(b);return this._isFadeOut&&1==this._fadeState};c.prototype.advanceFadeTime=function(b){var a=!1,e=!1;if(0<=this._fadeBeginTime){var g=this._fadeState;this._fadeCurrentTime+=0>b?-b:b;if(this._fadeCurrentTime>=this._fadeBeginTime+this._fadeTotalTime){if(1==this._fadeWeight||0==this._fadeWeight)g=1,this._pausePlayheadInFade&&
(this._pausePlayheadInFade=!1,this._currentTime=-1);this._fadeWeight=this._isFadeOut?0:1}else this._fadeCurrentTime>=this._fadeBeginTime?(g=0,this._fadeWeight=(this._fadeCurrentTime-this._fadeBeginTime)/this._fadeTotalTime*this._fadeTotalWeight,this._isFadeOut&&(this._fadeWeight=this._fadeTotalWeight-this._fadeWeight)):(g=-1,this._fadeWeight=this._isFadeOut?1:0);this._fadeState!=g&&(-1==this._fadeState&&(a=!0),1==g&&(e=!0),this._fadeState=g)}a&&(this._isFadeOut?this._armature.hasEventListener(d.AnimationEvent.FADE_OUT)&&
(b=new d.AnimationEvent(d.AnimationEvent.FADE_OUT),b.animationState=this,this._armature._eventList.push(b)):(this.hideBones(),this._armature.hasEventListener(d.AnimationEvent.FADE_IN)&&(b=new d.AnimationEvent(d.AnimationEvent.FADE_IN),b.animationState=this,this._armature._eventList.push(b))));e&&(this._isFadeOut?this._armature.hasEventListener(d.AnimationEvent.FADE_OUT_COMPLETE)&&(b=new d.AnimationEvent(d.AnimationEvent.FADE_OUT_COMPLETE),b.animationState=this,this._armature._eventList.push(b)):this._armature.hasEventListener(d.AnimationEvent.FADE_IN_COMPLETE)&&
(b=new d.AnimationEvent(d.AnimationEvent.FADE_IN_COMPLETE),b.animationState=this,this._armature._eventList.push(b)))};c.prototype.advanceTimelinesTime=function(b){this._isPlaying&&!this._pausePlayheadInFade&&(this._time+=b);var a=!1,e=b=!1,g=!1,h=0,c=1E3*this._time;0==this._playTimes?(g=!1,h=Math.ceil(Math.abs(c)/this._totalTime)||1,c=0<=c?c-Math.floor(c/this._totalTime)*this._totalTime:c-Math.ceil(c/this._totalTime)*this._totalTime,0>c&&(c+=this._totalTime)):(h=this._playTimes*this._totalTime,c>=
h?(c=h,g=!0):c<=-h?(c=-h,g=!0):g=!1,0>c&&(c+=h),h=Math.ceil(c/this._totalTime)||1,c=0<=c?c-Math.floor(c/this._totalTime)*this._totalTime:c-Math.ceil(c/this._totalTime)*this._totalTime,g&&(c=this._totalTime));this._isComplete=g;var k=1E3*this._time/this._totalTime,p;for(p in this._timelineStateList){var f=this._timelineStateList[p];f._update(k);this._isComplete=f._isComplete&&this._isComplete}this._currentTime!=c&&(this._currentPlayTimes!=h&&(0<this._currentPlayTimes&&1<h&&(e=!0),this._currentPlayTimes=
h),0>this._currentTime&&(a=!0),this._isComplete&&(b=!0),this._currentTime=c,this.updateMainTimeline(g));a&&this._armature.hasEventListener(d.AnimationEvent.START)&&(p=new d.AnimationEvent(d.AnimationEvent.START),p.animationState=this,this._armature._eventList.push(p));b?(this._armature.hasEventListener(d.AnimationEvent.COMPLETE)&&(p=new d.AnimationEvent(d.AnimationEvent.COMPLETE),p.animationState=this,this._armature._eventList.push(p)),this.autoFadeOut&&this.fadeOut(this.fadeOutTime,!0)):e&&this._armature.hasEventListener(d.AnimationEvent.LOOP_COMPLETE)&&
(p=new d.AnimationEvent(d.AnimationEvent.LOOP_COMPLETE),p.animationState=this,this._armature._eventList.push(p))};c.prototype.updateMainTimeline=function(b){var a=this._clip.frameList;if(0<a.length){for(var e,g,h=0,c=this._clip.frameList.length;h<c;++h){if(0>this._currentFrameIndex)this._currentFrameIndex=0;else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){if(this._currentFrameIndex++,this._currentFrameIndex>=a.length)if(b){this._currentFrameIndex--;
break}else this._currentFrameIndex=0}else break;g=a[this._currentFrameIndex];e&&this._armature._arriveAtFrame(e,null,this,!0);this._currentFrameDuration=g.duration;this._currentFramePosition=g.position;e=g}g&&this._armature._arriveAtFrame(g,null,this,!1)}};c.prototype.hideBones=function(){for(var b in this._clip.hideTimelineNameMap){var a=this._armature.getBone(this._clip.hideTimelineNameMap[b]);a&&a._hideSlots()}};c.prototype.setAdditiveBlending=function(b){this.additiveBlending=b;return this};c.prototype.setAutoFadeOut=
function(b,a){void 0===a&&(a=-1);this.autoFadeOut=b;0<=a&&(this.fadeOutTime=a*this._timeScale);return this};c.prototype.setWeight=function(b){if(isNaN(b)||0>b)b=1;this.weight=b;return this};c.prototype.setFrameTween=function(b,a){this.autoTween=b;this.lastFrameAutoTween=a;return this};c.prototype.setCurrentTime=function(b){if(0>b||isNaN(b))b=0;this._time=b;this._currentTime=1E3*this._time;return this};c.prototype.setTimeScale=function(b){if(isNaN(b)||Infinity==b)b=1;this._timeScale=b;return this};
c.prototype.setPlayTimes=function(b){void 0===b&&(b=0);2>Math.round(.001*this._totalTime*this._clip.frameRate)?this._playTimes=0>b?-1:1:this._playTimes=0>b?-b:b;this.autoFadeOut=0>b?!0:!1;return this};Object.defineProperty(c.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"group",{get:function(){return this._group},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"clip",{get:function(){return this._clip},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isComplete",{get:function(){return this._isComplete},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isPlaying",{get:function(){return this._isPlaying&&!this._isComplete},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"currentPlayTimes",{get:function(){return 0>this._currentPlayTimes?0:this._currentPlayTimes},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"totalTime",{get:function(){return.001*this._totalTime},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"currentTime",{get:function(){return 0>this._currentTime?0:.001*this._currentTime},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fadeWeight",{get:function(){return this._fadeWeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fadeState",{get:function(){return this._fadeState},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fadeTotalTime",{get:function(){return this._fadeTotalTime},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeScale",{get:function(){return this._timeScale},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"playTimes",{get:function(){return this._playTimes},enumerable:!0,configurable:!0});c._pool=[];return c}();d.AnimationState=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this._updateMode=this._currentFrameDuration=this._currentFramePosition=this._currentFrameIndex=this._currentTime=this._totalTime=0;this._transform=new d.DBTransform;this._pivot=new d.Point;this._durationTransform=new d.DBTransform;this._durationPivot=new d.Point;this._durationColor=new d.ColorTransform}c._borrowObject=function(){return 0==c._pool.length?new c:c._pool.pop()};c._returnObject=function(b){0>c._pool.indexOf(b)&&(c._pool[c._pool.length]=b);b.clear()};
c._clear=function(){for(var b=c._pool.length;b--;)c._pool[b].clear();c._pool.length=0};c.prototype.clear=function(){this._bone&&(this._bone._removeState(this),this._bone=null);this._originPivot=this._originTransform=this._timelineData=this._animationState=this._animation=this._armature=null};c.prototype._fadeIn=function(b,a,e){this._bone=b;this._armature=this._bone.armature;this._animation=this._armature.animation;this._animationState=a;this._timelineData=e;this._originTransform=this._timelineData.originTransform;
this._originPivot=this._timelineData.originPivot;this.name=e.name;this._totalTime=this._timelineData.duration;this._rawAnimationScale=this._animationState.clip.scale;this._tweenColor=this._tweenScale=this._tweenTransform=this._blendEnabled=this._isComplete=!1;this._currentTime=this._currentFrameIndex=-1;this._tweenEasing=NaN;this._weight=1;this._transform.x=0;this._transform.y=0;this._transform.scaleX=1;this._transform.scaleY=1;this._transform.skewX=0;this._transform.skewY=0;this._pivot.x=0;this._pivot.y=
0;this._durationTransform.x=0;this._durationTransform.y=0;this._durationTransform.scaleX=1;this._durationTransform.scaleY=1;this._durationTransform.skewX=0;this._durationTransform.skewY=0;this._durationPivot.x=0;this._durationPivot.y=0;switch(this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1}this._bone._addState(this)};c.prototype._fadeOut=function(){this._transform.skewX=d.TransformUtil.formatRadian(this._transform.skewX);
this._transform.skewY=d.TransformUtil.formatRadian(this._transform.skewY)};c.prototype._update=function(b){-1==this._updateMode?this.updateMultipleFrame(b):1==this._updateMode&&(this._updateMode=0,this.updateSingleFrame())};c.prototype.updateMultipleFrame=function(b){var a=0;b/=this._timelineData.scale;b+=this._timelineData.offset;b*=this._totalTime;a=this._animationState.playTimes;0==a?(this._isComplete=!1,a=Math.ceil(Math.abs(b)/this._totalTime)||1,b=0<=b?b-Math.floor(b/this._totalTime)*this._totalTime:
b-Math.ceil(b/this._totalTime)*this._totalTime,0>b&&(b+=this._totalTime)):(a*=this._totalTime,b>=a?(b=a,this._isComplete=!0):b<=-a?(b=-a,this._isComplete=!0):this._isComplete=!1,0>b&&(b+=a),a=Math.ceil(b/this._totalTime)||1,b=this._isComplete?this._totalTime:0<=b?b-Math.floor(b/this._totalTime)*this._totalTime:b-Math.ceil(b/this._totalTime)*this._totalTime);if(this._currentTime!=b){this._currentTime=b;b=this._timelineData.frameList;for(var e,g,h=0,c=this._timelineData.frameList.length;h<c;++h){if(0>
this._currentFrameIndex)this._currentFrameIndex=0;else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){if(this._currentFrameIndex++,this._currentFrameIndex>=b.length)if(this._isComplete){this._currentFrameIndex--;break}else this._currentFrameIndex=0}else break;g=b[this._currentFrameIndex];e&&this._bone._arriveAtFrame(e,this,this._animationState,!0);this._currentFrameDuration=g.duration;this._currentFramePosition=g.position;
e=g}g&&(this._bone._arriveAtFrame(g,this,this._animationState,!1),(this._blendEnabled=0<=g.displayIndex)?this.updateToNextFrame(a):(this._tweenEasing=NaN,this._tweenColor=this._tweenScale=this._tweenTransform=!1));this._blendEnabled&&this.updateTween()}};c.prototype.updateToNextFrame=function(b){void 0===b&&(b=0);var a=this._currentFrameIndex+1;a>=this._timelineData.frameList.length&&(a=0);var e=this._timelineData.frameList[this._currentFrameIndex],g=this._timelineData.frameList[a],h=!1;0==a&&(!this._animationState.lastFrameAutoTween||
this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&.999999<((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+b-this._timelineData.offset)*this._timelineData.scale)?(this._tweenEasing=NaN,h=!1):0>e.displayIndex||0>g.displayIndex?(this._tweenEasing=NaN,h=!1):this._animationState.autoTween?(this._tweenEasing=this._animationState.clip.tweenEasing,isNaN(this._tweenEasing)?(this._tweenEasing=e.tweenEasing,isNaN(this._tweenEasing)?
h=!1:(10==this._tweenEasing&&(this._tweenEasing=0),h=!0)):h=!0):(this._tweenEasing=e.tweenEasing,isNaN(this._tweenEasing)||10==this._tweenEasing?(this._tweenEasing=NaN,h=!1):h=!0);h?(this._durationTransform.x=g.transform.x-e.transform.x,this._durationTransform.y=g.transform.y-e.transform.y,this._durationTransform.skewX=g.transform.skewX-e.transform.skewX,this._durationTransform.skewY=g.transform.skewY-e.transform.skewY,this._durationTransform.scaleX=g.transform.scaleX-e.transform.scaleX+g.scaleOffset.x,
this._durationTransform.scaleY=g.transform.scaleY-e.transform.scaleY+g.scaleOffset.y,0==a&&(this._durationTransform.skewX=d.TransformUtil.formatRadian(this._durationTransform.skewX),this._durationTransform.skewY=d.TransformUtil.formatRadian(this._durationTransform.skewY)),this._durationPivot.x=g.pivot.x-e.pivot.x,this._durationPivot.y=g.pivot.y-e.pivot.y,this._durationTransform.x||this._durationTransform.y||this._durationTransform.skewX||this._durationTransform.skewY||this._durationTransform.scaleX||
this._durationTransform.scaleY||this._durationPivot.x||this._durationPivot.y?(this._tweenTransform=!0,this._tweenScale=e.tweenScale):this._tweenScale=this._tweenTransform=!1,e.color&&g.color?(this._durationColor.alphaOffset=g.color.alphaOffset-e.color.alphaOffset,this._durationColor.redOffset=g.color.redOffset-e.color.redOffset,this._durationColor.greenOffset=g.color.greenOffset-e.color.greenOffset,this._durationColor.blueOffset=g.color.blueOffset-e.color.blueOffset,this._durationColor.alphaMultiplier=
g.color.alphaMultiplier-e.color.alphaMultiplier,this._durationColor.redMultiplier=g.color.redMultiplier-e.color.redMultiplier,this._durationColor.greenMultiplier=g.color.greenMultiplier-e.color.greenMultiplier,this._durationColor.blueMultiplier=g.color.blueMultiplier-e.color.blueMultiplier,this._tweenColor=this._durationColor.alphaOffset||this._durationColor.redOffset||this._durationColor.greenOffset||this._durationColor.blueOffset||this._durationColor.alphaMultiplier||this._durationColor.redMultiplier||
this._durationColor.greenMultiplier||this._durationColor.blueMultiplier?!0:!1):e.color?(this._tweenColor=!0,this._durationColor.alphaOffset=-e.color.alphaOffset,this._durationColor.redOffset=-e.color.redOffset,this._durationColor.greenOffset=-e.color.greenOffset,this._durationColor.blueOffset=-e.color.blueOffset,this._durationColor.alphaMultiplier=1-e.color.alphaMultiplier,this._durationColor.redMultiplier=1-e.color.redMultiplier,this._durationColor.greenMultiplier=1-e.color.greenMultiplier,this._durationColor.blueMultiplier=
1-e.color.blueMultiplier):g.color?(this._tweenColor=!0,this._durationColor.alphaOffset=g.color.alphaOffset,this._durationColor.redOffset=g.color.redOffset,this._durationColor.greenOffset=g.color.greenOffset,this._durationColor.blueOffset=g.color.blueOffset,this._durationColor.alphaMultiplier=g.color.alphaMultiplier-1,this._durationColor.redMultiplier=g.color.redMultiplier-1,this._durationColor.greenMultiplier=g.color.greenMultiplier-1,this._durationColor.blueMultiplier=g.color.blueMultiplier-1):this._tweenColor=
!1):this._tweenColor=this._tweenScale=this._tweenTransform=!1;this._tweenTransform?this._tweenScale||(this._animationState.additiveBlending?(this._transform.scaleX=e.transform.scaleX,this._transform.scaleY=e.transform.scaleY):(this._transform.scaleX=this._originTransform.scaleX*e.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*e.transform.scaleY)):(this._animationState.additiveBlending?(this._transform.x=e.transform.x,this._transform.y=e.transform.y,this._transform.skewX=e.transform.skewX,
this._transform.skewY=e.transform.skewY,this._transform.scaleX=e.transform.scaleX,this._transform.scaleY=e.transform.scaleY,this._pivot.x=e.pivot.x,this._pivot.y=e.pivot.y):(this._transform.x=this._originTransform.x+e.transform.x,this._transform.y=this._originTransform.y+e.transform.y,this._transform.skewX=this._originTransform.skewX+e.transform.skewX,this._transform.skewY=this._originTransform.skewY+e.transform.skewY,this._transform.scaleX=this._originTransform.scaleX*e.transform.scaleX,this._transform.scaleY=
this._originTransform.scaleY*e.transform.scaleY,this._pivot.x=this._originPivot.x+e.pivot.x,this._pivot.y=this._originPivot.y+e.pivot.y),this._bone.invalidUpdate());!this._tweenColor&&this._animationState.displayControl&&(e.color?this._bone._updateColor(e.color.alphaOffset,e.color.redOffset,e.color.greenOffset,e.color.blueOffset,e.color.alphaMultiplier,e.color.redMultiplier,e.color.greenMultiplier,e.color.blueMultiplier,!0):this._bone._isColorChanged&&this._bone._updateColor(0,0,0,0,1,1,1,1,!1))};
c.prototype.updateTween=function(){var b=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;this._tweenEasing&&(b=d.MathUtil.getEaseValue(b,this._tweenEasing));var a=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenTransform){var e=a.transform,g=a.pivot;this._animationState.additiveBlending?(this._transform.x=e.x+this._durationTransform.x*b,this._transform.y=e.y+this._durationTransform.y*b,this._transform.skewX=e.skewX+this._durationTransform.skewX*b,this._transform.skewY=
e.skewY+this._durationTransform.skewY*b,this._tweenScale&&(this._transform.scaleX=e.scaleX+this._durationTransform.scaleX*b,this._transform.scaleY=e.scaleY+this._durationTransform.scaleY*b),this._pivot.x=g.x+this._durationPivot.x*b,this._pivot.y=g.y+this._durationPivot.y*b):(this._transform.x=this._originTransform.x+e.x+this._durationTransform.x*b,this._transform.y=this._originTransform.y+e.y+this._durationTransform.y*b,this._transform.skewX=this._originTransform.skewX+e.skewX+this._durationTransform.skewX*
b,this._transform.skewY=this._originTransform.skewY+e.skewY+this._durationTransform.skewY*b,this._tweenScale&&(this._transform.scaleX=this._originTransform.scaleX*e.scaleX+this._durationTransform.scaleX*b,this._transform.scaleY=this._originTransform.scaleY*e.scaleY+this._durationTransform.scaleY*b),this._pivot.x=this._originPivot.x+g.x+this._durationPivot.x*b,this._pivot.y=this._originPivot.y+g.y+this._durationPivot.y*b);this._bone.invalidUpdate()}this._tweenColor&&this._animationState.displayControl&&
(a.color?this._bone._updateColor(a.color.alphaOffset+this._durationColor.alphaOffset*b,a.color.redOffset+this._durationColor.redOffset*b,a.color.greenOffset+this._durationColor.greenOffset*b,a.color.blueOffset+this._durationColor.blueOffset*b,a.color.alphaMultiplier+this._durationColor.alphaMultiplier*b,a.color.redMultiplier+this._durationColor.redMultiplier*b,a.color.greenMultiplier+this._durationColor.greenMultiplier*b,a.color.blueMultiplier+this._durationColor.blueMultiplier*b,!0):this._bone._updateColor(this._durationColor.alphaOffset*
b,this._durationColor.redOffset*b,this._durationColor.greenOffset*b,this._durationColor.blueOffset*b,1+this._durationColor.alphaMultiplier*b,1+this._durationColor.redMultiplier*b,1+this._durationColor.greenMultiplier*b,1+this._durationColor.blueMultiplier*b,!0))};c.prototype.updateSingleFrame=function(){var b=this._timelineData.frameList[0];this._bone._arriveAtFrame(b,this,this._animationState,!1);this._isComplete=!0;this._tweenEasing=NaN;this._tweenColor=this._tweenScale=this._tweenTransform=!1;
if(this._blendEnabled=0<=b.displayIndex)this._animationState.additiveBlending?(this._transform.x=b.transform.x,this._transform.y=b.transform.y,this._transform.skewX=b.transform.skewX,this._transform.skewY=b.transform.skewY,this._transform.scaleX=b.transform.scaleX,this._transform.scaleY=b.transform.scaleY,this._pivot.x=b.pivot.x,this._pivot.y=b.pivot.y):(this._transform.x=this._originTransform.x+b.transform.x,this._transform.y=this._originTransform.y+b.transform.y,this._transform.skewX=this._originTransform.skewX+
b.transform.skewX,this._transform.skewY=this._originTransform.skewY+b.transform.skewY,this._transform.scaleX=this._originTransform.scaleX*b.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*b.transform.scaleY,this._pivot.x=this._originPivot.x+b.pivot.x,this._pivot.y=this._originPivot.y+b.pivot.y),this._bone.invalidUpdate(),this._animationState.displayControl&&(b.color?this._bone._updateColor(b.color.alphaOffset,b.color.redOffset,b.color.greenOffset,b.color.blueOffset,b.color.alphaMultiplier,
b.color.redMultiplier,b.color.greenMultiplier,b.color.blueMultiplier,!0):this._bone._isColorChanged&&this._bone._updateColor(0,0,0,0,1,1,1,1,!1))};c.HALF_PI=.5*Math.PI;c.DOUBLE_PI=2*Math.PI;c._pool=[];return c}();d.TimelineState=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(b,a){void 0===b&&(b=-1);void 0===a&&(a=1);this._time=0<=b?b:.001*(new Date).getTime();this._timeScale=isNaN(a)?1:a;this._animatableList=[]}Object.defineProperty(c.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeScale",{get:function(){return this._timeScale},set:function(b){if(isNaN(b)||0>b)b=1;this._timeScale=b},enumerable:!0,configurable:!0});c.prototype.contains=function(b){return 0<=
this._animatableList.indexOf(b)};c.prototype.add=function(b){b&&-1==this._animatableList.indexOf(b)&&this._animatableList.push(b)};c.prototype.remove=function(b){b=this._animatableList.indexOf(b);0<=b&&(this._animatableList[b]=null)};c.prototype.clear=function(){this._animatableList.length=0};c.prototype.advanceTime=function(b){void 0===b&&(b=-1);0>b&&(b=(new Date).getTime()-this._time);b*=this._timeScale;this._time+=b;var a=this._animatableList.length;if(0!=a){for(var e=0,g=0;g<a;g++){var h=this._animatableList[g];
h&&(e!=g&&(this._animatableList[e]=h,this._animatableList[g]=null),h.advanceTime(b),e++)}if(e!=g){for(a=this._animatableList.length;g<a;)this._animatableList[e++]=this._animatableList[g++];this._animatableList.length=e}}};c.clock=new c;return c}();d.WorldClock=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){}c.prototype.hasEventListener=function(b){return this._listenersMap&&this._listenersMap[b]?!0:!1};c.prototype.addEventListener=function(b,a){if(b&&a){this._listenersMap||(this._listenersMap={});var e=this._listenersMap[b];e&&this.removeEventListener(b,a);e?e.push(a):this._listenersMap[b]=[a]}};c.prototype.removeEventListener=function(b,a){if(this._listenersMap&&b&&a){var e=this._listenersMap[b];if(e)for(var g=e.length,h=0;h<g;h++)e[h]==a&&(1==g?(e.length=
0,delete this._listenersMap[b]):e.splice(h,1))}};c.prototype.removeAllEventListeners=function(b){b?delete this._listenersMap[b]:this._listenersMap=null};c.prototype.dispatchEvent=function(b){if(b){var a=this._listenersMap[b.type];if(a){b.target=this;for(var e=a.concat(),a=a.length,g=0;g<a;g++)e[g](b)}}};return c}();d.EventDispatcher=f})(dragonBones||(dragonBones={}));
var __extends=this.__extends||function(d,f){function c(){this.constructor=d}for(var b in f)f.hasOwnProperty(b)&&(d[b]=f[b]);c.prototype=f.prototype;d.prototype=new c};
(function(d){var f=function(c){function b(a){c.call(this);this._display=a;this._animation=new d.Animation(this);this._slotsZOrderChanged=!1;this._slotList=[];this._boneList=[];this._eventList=[];this._lockDispose=this._delayDispose=!1;this._armatureData=null}__extends(b,c);Object.defineProperty(b.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0});
b.prototype.getDisplay=function(){return this._display};Object.defineProperty(b.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._delayDispose=!0;if(this._animation&&!this._lockDispose){this.userData=null;this._animation.dispose();for(var a=this._slotList.length;a--;)this._slotList[a].dispose();for(a=this._boneList.length;a--;)this._boneList[a].dispose();this._eventList=this._boneList=this._slotList=this._animation=this._armatureData=
null}};b.prototype.invalidUpdate=function(a){void 0===a&&(a=null);if(a)(a=this.getBone(a))&&a.invalidUpdate();else for(a=this._boneList.length;a--;)this._boneList[a].invalidUpdate()};b.prototype.advanceTime=function(a){this._lockDispose=!0;this._animation._advanceTime(a);a*=this._animation.timeScale;for(var e=this._animation._isFading,b=this._boneList.length;b--;)this._boneList[b]._update(e);for(b=this._slotList.length;b--;)e=this._slotList[b],e._update(),e._isShowDisplay&&(e=e.childArmature)&&e.advanceTime(a);
this._slotsZOrderChanged&&(this.updateSlotsZOrder(),this.hasEventListener(d.ArmatureEvent.Z_ORDER_UPDATED)&&this.dispatchEvent(new d.ArmatureEvent(d.ArmatureEvent.Z_ORDER_UPDATED)));if(0<this._eventList.length){for(var h in this._eventList)this.dispatchEvent(this._eventList[h]);this._eventList.length=0}this._lockDispose=!1;this._delayDispose&&this.dispose()};b.prototype.getSlots=function(a){void 0===a&&(a=!0);return a?this._slotList.concat():this._slotList};b.prototype.getSlot=function(a){for(var e=
this._slotList.length,b=0;b<e;b++){var h=this._slotList[b];if(h.name==a)return h}return null};b.prototype.getSlotByDisplay=function(a){if(a)for(var e=this._slotList.length,b=0;b<e;b++){var h=this._slotList[b];if(h.display==a)return h}return null};b.prototype.addSlot=function(a,e){var b=this.getBone(e);if(b)b.addSlot(a);else throw Error();};b.prototype.removeSlot=function(a){if(!a||a.armature!=this)throw Error();a.parent.removeSlot(a)};b.prototype.removeSlotByName=function(a){(a=this.getSlot(a))&&
this.removeSlot(a);return a};b.prototype.getBones=function(a){void 0===a&&(a=!0);return a?this._boneList.concat():this._boneList};b.prototype.getBone=function(a){for(var e=this._boneList.length,b=0;b<e;b++){var h=this._boneList[b];if(h.name==a)return h}return null};b.prototype.getBoneByDisplay=function(a){return(a=this.getSlotByDisplay(a))?a.parent:null};b.prototype.addBone=function(a,e,b){void 0===e&&(e=null);void 0===b&&(b=!1);var h;if(e&&(h=this.getBone(e),!h))throw Error();h?h.addChildBone(a,
b):(a.parent&&a.parent.removeChildBone(a,b),a._setArmature(this),b||this._updateAnimationAfterBoneListChanged())};b.prototype.removeBone=function(a,e){void 0===e&&(e=!1);if(!a||a.armature!=this)throw Error();a.parent?a.parent.removeChildBone(a,e):(a._setArmature(null),e||this._updateAnimationAfterBoneListChanged(!1))};b.prototype.removeBoneByName=function(a){(a=this.getBone(a))&&this.removeBone(a);return a};b.prototype._addBoneToBoneList=function(a){0>this._boneList.indexOf(a)&&(this._boneList[this._boneList.length]=
a)};b.prototype._removeBoneFromBoneList=function(a){a=this._boneList.indexOf(a);0<=a&&this._boneList.splice(a,1)};b.prototype._addSlotToSlotList=function(a){0>this._slotList.indexOf(a)&&(this._slotList[this._slotList.length]=a)};b.prototype._removeSlotFromSlotList=function(a){a=this._slotList.indexOf(a);0<=a&&this._slotList.splice(a,1)};b.prototype.updateSlotsZOrder=function(){this._slotList.sort(this.sortSlot);for(var a=this._slotList.length;a--;){var e=this._slotList[a];e._isShowDisplay&&e._addDisplayToContainer(this._display)}this._slotsZOrderChanged=
!1};b.prototype._updateAnimationAfterBoneListChanged=function(a){void 0===a&&(a=!0);a&&this.sortBoneList();this._animation._updateAnimationStates()};b.prototype.sortBoneList=function(){var a=this._boneList.length;if(0!=a){for(var e=[];a--;){for(var b=0,h=this._boneList[a],c=h;c;)b++,c=c.parent;e[a]=[b,h]}e.sort(d.ArmatureData.sortBoneDataHelpArrayDescending);for(a=e.length;a--;)this._boneList[a]=e[a][1];e.length=0}};b.prototype._arriveAtFrame=function(a,e,b,h){a.event&&this.hasEventListener(d.FrameEvent.ANIMATION_FRAME_EVENT)&&
(e=new d.FrameEvent(d.FrameEvent.ANIMATION_FRAME_EVENT),e.animationState=b,e.frameLabel=a.event,this._eventList.push(e));a.action&&b.displayControl&&this.animation.gotoAndPlay(a.action)};b.prototype.sortSlot=function(a,e){return a.zOrder<e.zOrder?1:-1};return b}(d.EventDispatcher);d.Armature=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0}c.prototype.invert=function(){var b=this.a,a=this.b,e=this.c,g=this.d,h=this.tx,c=b*g-a*e;this.a=g/c;this.b=-a/c;this.c=-e/c;this.d=b/c;this.tx=(e*this.ty-g*h)/c;this.ty=-(b*this.ty-a*h)/c};c.prototype.concat=function(b){var a=b.a,e=b.b,g=b.c,h=b.d,c=this.tx,d=this.ty;if(1!=a||0!=e||0!=g||1!=h){var p=this.a,f=this.b,n=this.c,l=this.d;this.a=p*a+f*g;this.b=p*e+f*h;this.c=n*a+l*g;this.d=n*e+l*h}this.tx=c*
a+d*g+b.tx;this.ty=c*e+d*h+b.ty};return c}();d.Matrix=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this.skewY=this.skewX=this.y=this.x=0;this.scaleY=this.scaleX=1}Object.defineProperty(c.prototype,"rotation",{get:function(){return this.skewX},set:function(b){this.skewX=this.skewY=b},enumerable:!0,configurable:!0});c.prototype.copy=function(b){this.x=b.x;this.y=b.y;this.skewX=b.skewX;this.skewY=b.skewY;this.scaleX=b.scaleX;this.scaleY=b.scaleY};c.prototype.toString=function(){return"x:"+this.x+" y:"+this.y+" skewX:"+this.skewX+" skewY:"+this.skewY+" scaleX:"+
this.scaleX+" scaleY:"+this.scaleY};return c}();d.DBTransform=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this._globalTransformMatrix=new d.Matrix;this._global=new d.DBTransform;this._origin=new d.DBTransform;this._offset=new d.DBTransform;this._offset.scaleX=this._offset.scaleY=1;this._visible=!0;this.userData=this._parent=this._armature=null;this.inheritTranslation=this.inheritScale=this.inheritRotation=!0}Object.defineProperty(c.prototype,"global",{get:function(){return this._global},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"origin",
{get:function(){return this._origin},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0});c.prototype._setArmature=function(b){this._armature=b};Object.defineProperty(c.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});c.prototype._setParent=function(b){this._parent=
b};c.prototype.dispose=function(){this._parent=this._armature=this._offset=this._origin=this._global=this._globalTransformMatrix=this.userData=null};c.prototype._calculateRelativeParentTransform=function(){};c.prototype._calculateParentTransform=function(){if(this.parent&&(this.inheritTranslation||this.inheritRotation||this.inheritScale)){var b=this._parent._globalTransformForChild,a=this._parent._globalTransformMatrixForChild;this.inheritTranslation&&this.inheritRotation&&this.inheritScale||(b=c._tempParentGlobalTransform,
b.copy(this._parent._globalTransformForChild),this.inheritTranslation||(b.x=0,b.y=0),this.inheritScale||(b.scaleX=1,b.scaleY=1),this.inheritRotation||(b.skewX=0,b.skewY=0),a=c._tempParentGlobalTransformMatrix,d.TransformUtil.transformToMatrix(b,a,!0));return{parentGlobalTransform:b,parentGlobalTransformMatrix:a}}return null};c.prototype._updateGlobal=function(){this._calculateRelativeParentTransform();d.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix,!0);var b=this._calculateParentTransform();
b&&(this._globalTransformMatrix.concat(b.parentGlobalTransformMatrix),d.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,0<=this._global.scaleX*b.parentGlobalTransform.scaleX,0<=this._global.scaleY*b.parentGlobalTransform.scaleY));return b};c._tempParentGlobalTransformMatrix=new d.Matrix;c._tempParentGlobalTransform=new d.DBTransform;return c}();d.DBObject=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(c){function b(){c.call(this);this.applyOffsetRotationToChild=this.applyOffsetTranslationToChild=!0;this.applyOffsetScaleToChild=!1;this._needUpdate=0;this._tween=new d.DBTransform;this._tweenPivot=new d.Point;this._tween.scaleX=this._tween.scaleY=1;this._boneList=[];this._slotList=[];this._timelineStateList=[];this._needUpdate=2;this._isColorChanged=!1}__extends(b,c);b.initWithBoneData=function(a){var e=new b;e.name=a.name;e.inheritRotation=a.inheritRotation;e.inheritScale=
a.inheritScale;e.origin.copy(a.transform);return e};b.prototype.dispose=function(){if(this._boneList){c.prototype.dispose.call(this);for(var a=this._boneList.length;a--;)this._boneList[a].dispose();for(a=this._slotList.length;a--;)this._slotList[a].dispose();this._timelineStateList=this._slotList=this._boneList=this._tweenPivot=this._tween=null}};b.prototype.contains=function(a){if(!a)throw Error();if(a==this)return!1;for(;a!=this&&null!=a;)a=a.parent;return a==this};b.prototype.addChildBone=function(a,
e){void 0===e&&(e=!1);if(!a)throw Error();if(a==this||a.contains(this))throw Error("An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)");a.parent!=this&&(a.parent&&a.parent.removeChildBone(a,e),this._boneList[this._boneList.length]=a,a._setParent(this),a._setArmature(this._armature),this._armature&&!e&&this._armature._updateAnimationAfterBoneListChanged())};b.prototype.removeChildBone=function(a,e){void 0===e&&(e=!1);if(!a)throw Error();var b=this._boneList.indexOf(a);
if(0>b)throw Error();this._boneList.splice(b,1);a._setParent(null);a._setArmature(null);this._armature&&!e&&this._armature._updateAnimationAfterBoneListChanged(!1)};b.prototype.addSlot=function(a){if(!a)throw Error();a.parent&&a.parent.removeSlot(a);this._slotList[this._slotList.length]=a;a._setParent(this);a.setArmature(this._armature)};b.prototype.removeSlot=function(a){if(!a)throw Error();var e=this._slotList.indexOf(a);if(0>e)throw Error();this._slotList.splice(e,1);a._setParent(null);a.setArmature(null)};
b.prototype._setArmature=function(a){if(this._armature!=a){this._armature&&(this._armature._removeBoneFromBoneList(this),this._armature._updateAnimationAfterBoneListChanged(!1));(this._armature=a)&&this._armature._addBoneToBoneList(this);for(a=this._boneList.length;a--;)this._boneList[a]._setArmature(this._armature);for(a=this._slotList.length;a--;)this._slotList[a].setArmature(this._armature)}};b.prototype.getBones=function(a){void 0===a&&(a=!0);return a?this._boneList.concat():this._boneList};b.prototype.getSlots=
function(a){void 0===a&&(a=!0);return a?this._slotList.concat():this._slotList};b.prototype.invalidUpdate=function(){this._needUpdate=2};b.prototype._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._tween.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._tween.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._tween.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._tween.skewY+this._offset.skewY;
this._global.x=this._origin.x+this._tween.x+this._offset.x;this._global.y=this._origin.y+this._tween.y+this._offset.y};b.prototype._update=function(a){void 0===a&&(a=!1);this._needUpdate--;if(a||0<this._needUpdate||this._parent&&0<this._parent._needUpdate){this._needUpdate=1;this.blendingTimeline();var e=this._updateGlobal();a=e?e.parentGlobalTransform:null;var e=e?e.parentGlobalTransformMatrix:null,b=0!=this._offset.scaleX||0!=this._offset.scaleY,h=0!=this._offset.skewX||0!=this._offset.skewY;!(0==
this._offset.x&&0==this._offset.y||this.applyOffsetTranslationToChild)||b&&!this.applyOffsetScaleToChild||h&&!this.applyOffsetRotationToChild?(this._tempGlobalTransformForChild||(this._tempGlobalTransformForChild=new d.DBTransform),this._globalTransformForChild=this._tempGlobalTransformForChild,this._tempGlobalTransformMatrixForChild||(this._tempGlobalTransformMatrixForChild=new d.Matrix),this._globalTransformMatrixForChild=this._tempGlobalTransformMatrixForChild,this._globalTransformForChild.x=this._origin.x+
this._tween.x,this._globalTransformForChild.y=this._origin.y+this._tween.y,this._globalTransformForChild.scaleX=this._origin.scaleX*this._tween.scaleX,this._globalTransformForChild.scaleY=this._origin.scaleY*this._tween.scaleY,this._globalTransformForChild.skewX=this._origin.skewX+this._tween.skewX,this._globalTransformForChild.skewY=this._origin.skewY+this._tween.skewY,this.applyOffsetTranslationToChild&&(this._globalTransformForChild.x+=this._offset.x,this._globalTransformForChild.y+=this._offset.y),
this.applyOffsetScaleToChild&&(this._globalTransformForChild.scaleX*=this._offset.scaleX,this._globalTransformForChild.scaleY*=this._offset.scaleY),this.applyOffsetRotationToChild&&(this._globalTransformForChild.skewX+=this._offset.skewX,this._globalTransformForChild.skewY+=this._offset.skewY),d.TransformUtil.transformToMatrix(this._globalTransformForChild,this._globalTransformMatrixForChild,!0),e&&(this._globalTransformMatrixForChild.concat(e),d.TransformUtil.matrixToTransform(this._globalTransformMatrixForChild,
this._globalTransformForChild,0<=this._globalTransformForChild.scaleX*a.scaleX,0<=this._globalTransformForChild.scaleY*a.scaleY))):(this._globalTransformForChild=this._global,this._globalTransformMatrixForChild=this._globalTransformMatrix)}};b.prototype._updateColor=function(a,e,b,h,c,d,p,f,n){for(var l=this._slotList.length,q=0;q<l;q++)this._slotList[q]._updateDisplayColor(a,e,b,h,c,d,p,f);this._isColorChanged=n};b.prototype._hideSlots=function(){for(var a=this._slotList.length,e=0;e<a;e++)this._slotList[e]._changeDisplay(-1)};
b.prototype._arriveAtFrame=function(a,e,b,h){if(b.displayControl&&(!this.displayController||this.displayController==b.name)&&b.containsBoneMask(this.name)){h=a.displayIndex;for(var c=this._slotList.length,k=0;k<c;k++)e=this._slotList[k],e._changeDisplay(h),e._updateDisplayVisible(a.visible),0<=h&&!isNaN(a.zOrder)&&a.zOrder!=e._tweenZOrder&&(e._tweenZOrder=a.zOrder,this._armature._slotsZOrderChanged=!0);a.event&&this._armature.hasEventListener(d.FrameEvent.BONE_FRAME_EVENT)&&(e=new d.FrameEvent(d.FrameEvent.BONE_FRAME_EVENT),
e.bone=this,e.animationState=b,e.frameLabel=a.event,this._armature._eventList.push(e));if(a.action)for(b=this._slotList.length,h=0;h<b;h++)e=this._slotList[h],(e=e.childArmature)&&e.animation.gotoAndPlay(a.action)}};b.prototype._addState=function(a){0>this._timelineStateList.indexOf(a)&&(this._timelineStateList.push(a),this._timelineStateList.sort(this.sortState))};b.prototype._removeState=function(a){a=this._timelineStateList.indexOf(a);0<=a&&this._timelineStateList.splice(a,1)};b.prototype.blendingTimeline=
function(){var a,e,b,h=this._timelineStateList.length;if(1==h)a=this._timelineStateList[0],b=a._animationState.weight*a._animationState.fadeWeight,a._weight=b,e=a._transform,a=a._pivot,this._tween.x=e.x*b,this._tween.y=e.y*b,this._tween.skewX=e.skewX*b,this._tween.skewY=e.skewY*b,this._tween.scaleX=1+(e.scaleX-1)*b,this._tween.scaleY=1+(e.scaleY-1)*b,this._tweenPivot.x=a.x*b,this._tweenPivot.y=a.y*b;else if(1<h){var c=0,d=0,p=0,f=0,n=0,l=0,q=0,u=0,v=1,t=0,r=this._timelineStateList[h-1]._animationState.layer;
for(e=0;h--;){a=this._timelineStateList[h];e=a._animationState.layer;if(r!=e)if(t>=v){a._weight=0;break}else v-=t;r=e;b=a._animationState.weight*a._animationState.fadeWeight*v;(a._weight=b)&&a._blendEnabled&&(e=a._transform,a=a._pivot,c+=e.x*b,d+=e.y*b,p+=e.skewX*b,f+=e.skewY*b,n+=(e.scaleX-1)*b,l+=(e.scaleY-1)*b,q+=a.x*b,u+=a.y*b,t+=b)}this._tween.x=c;this._tween.y=d;this._tween.skewX=p;this._tween.skewY=f;this._tween.scaleX=n;this._tween.scaleY=l;this._tweenPivot.x=q;this._tweenPivot.y=u}};b.prototype.sortState=
function(a,e){return a._animationState.layer<e._animationState.layer?-1:1};Object.defineProperty(b.prototype,"childArmature",{get:function(){return this.slot?this.slot.childArmature:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"display",{get:function(){return this.slot?this.slot.display:null},set:function(a){this.slot&&(this.slot.display=a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"node",{get:function(){return this._offset},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"visible",{set:function(a){if(this._visible!=a){this._visible=a;a=this._slotList.length;for(var e=0;e<a;e++)this._slotList[e]._updateDisplayVisible(this._visible)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"slot",{get:function(){return 0<this._slotList.length?this._slotList[0]:null},enumerable:!0,configurable:!0});return b}(d.DBObject);d.Bone=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(c){function b(a){c.call(this);this._currentDisplayIndex=0;if(a!=this)throw Error("Abstract class can not be instantiated!");this._displayList=[];this._currentDisplayIndex=-1;this._offsetZOrder=this._tweenZOrder=this._originZOrder=0;this._isShowDisplay=!1;this._colorTransform=new d.ColorTransform;this._currentDisplay=this._displayDataList=null;this.inheritScale=this.inheritRotation=!0}__extends(b,c);b.prototype.initWithSlotData=function(a){this.name=a.name;this.blendMode=
a.blendMode;this._originZOrder=a.zOrder;this._displayDataList=a.displayDataList};b.prototype.dispose=function(){this._displayList&&(c.prototype.dispose.call(this),this._displayList.length=0,this._currentDisplay=this._displayList=this._displayDataList=null)};b.prototype.setArmature=function(a){this._armature!=a&&(this._armature&&this._armature._removeSlotFromSlotList(this),(this._armature=a)?(this._armature._addSlotToSlotList(this),this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)):
this._removeDisplayFromContainer())};b.prototype._update=function(){0>=this._parent._needUpdate||(this._updateGlobal(),this._updateTransform())};b.prototype._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._offset.skewY;this._global.x=this._origin.x+this._offset.x+this._parent._tweenPivot.x;
this._global.y=this._origin.y+this._offset.y+this._parent._tweenPivot.y};b.prototype.updateChildArmatureAnimation=function(){this.childArmature&&(this._isShowDisplay?this._armature&&this._armature.animation.lastAnimationState&&this.childArmature.animation.hasAnimation(this._armature.animation.lastAnimationState.name)?this.childArmature.animation.gotoAndPlay(this._armature.animation.lastAnimationState.name):this.childArmature.animation.play():(this.childArmature.animation.stop(),this.childArmature.animation._lastAnimationState=
null))};b.prototype._changeDisplay=function(a){void 0===a&&(a=0);if(0>a)this._isShowDisplay&&(this._isShowDisplay=!1,this._removeDisplayFromContainer(),this.updateChildArmatureAnimation());else if(0<this._displayList.length){var e=this._displayList.length;a>=e&&(a=e-1);this._currentDisplayIndex!=a?(this._isShowDisplay=!0,this._currentDisplayIndex=a,this._updateSlotDisplay(),this.updateChildArmatureAnimation(),this._displayDataList&&0<this._displayDataList.length&&this._currentDisplayIndex<this._displayDataList.length&&
this._origin.copy(this._displayDataList[this._currentDisplayIndex].transform)):this._isShowDisplay||(this._isShowDisplay=!0,this._armature&&(this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)),this.updateChildArmatureAnimation())}};b.prototype._updateSlotDisplay=function(){var a=-1;this._currentDisplay&&(a=this._getDisplayIndex(),this._removeDisplayFromContainer());var e=this._displayList[this._currentDisplayIndex];this._currentDisplay=e?e instanceof d.Armature?
e.display:e:null;this._updateDisplay(this._currentDisplay);this._currentDisplay&&(this._armature&&this._isShowDisplay&&(0>a?(this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)):this._addDisplayToContainer(this._armature.display,a)),this._updateDisplayBlendMode(this._blendMode),this._updateDisplayColor(this._colorTransform.alphaOffset,this._colorTransform.redOffset,this._colorTransform.greenOffset,this._colorTransform.blueOffset,this._colorTransform.alphaMultiplier,
this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier),this._updateDisplayVisible(this._visible))};Object.defineProperty(b.prototype,"visible",{set:function(a){this._visible!=a&&(this._visible=a,this._updateDisplayVisible(this._visible))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"displayList",{get:function(){return this._displayList},set:function(a){if(!a)throw Error();0>this._currentDisplayIndex&&(this._currentDisplayIndex=
0);for(var e=this._displayList.length=a.length;e--;)this._displayList[e]=a[e];a=this._currentDisplayIndex;this._currentDisplayIndex=-1;this._changeDisplay(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"display",{get:function(){return this._currentDisplay},set:function(a){0>this._currentDisplayIndex&&(this._currentDisplayIndex=0);this._displayList[this._currentDisplayIndex]!=a&&(this._displayList[this._currentDisplayIndex]=a,this._updateSlotDisplay(),this.updateChildArmatureAnimation(),
this._updateTransform())},enumerable:!0,configurable:!0});b.prototype.getDisplay=function(){return this.display};b.prototype.setDisplay=function(a){this.display=a};Object.defineProperty(b.prototype,"childArmature",{get:function(){return this._displayList[this._currentDisplayIndex]instanceof d.Armature?this._displayList[this._currentDisplayIndex]:null},set:function(a){this.display=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"zOrder",{get:function(){return this._originZOrder+
this._tweenZOrder+this._offsetZOrder},set:function(a){this.zOrder!=a&&(this._offsetZOrder=a-this._originZOrder-this._tweenZOrder,this._armature&&(this._armature._slotsZOrderChanged=!0))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"blendMode",{get:function(){return this._blendMode},set:function(a){this._blendMode!=a&&(this._blendMode=a,this._updateDisplayBlendMode(this._blendMode))},enumerable:!0,configurable:!0});b.prototype._updateDisplay=function(a){throw Error("Abstract method needs to be implemented in subclass!");
};b.prototype._getDisplayIndex=function(){throw Error("Abstract method needs to be implemented in subclass!");};b.prototype._addDisplayToContainer=function(a,e){throw Error("Abstract method needs to be implemented in subclass!");};b.prototype._removeDisplayFromContainer=function(){throw Error("Abstract method needs to be implemented in subclass!");};b.prototype._updateTransform=function(){throw Error("Abstract method needs to be implemented in subclass!");};b.prototype._updateDisplayVisible=function(a){throw Error("Abstract method needs to be implemented in subclass!");
};b.prototype._updateDisplayColor=function(a,e,b,h,c,d,p,f){this._colorTransform.alphaOffset=a;this._colorTransform.redOffset=e;this._colorTransform.greenOffset=b;this._colorTransform.blueOffset=h;this._colorTransform.alphaMultiplier=c;this._colorTransform.redMultiplier=d;this._colorTransform.greenMultiplier=p;this._colorTransform.blueMultiplier=f};b.prototype._updateDisplayBlendMode=function(a){throw Error("Abstract method needs to be implemented in subclass!");};return b}(d.DBObject);d.Slot=f})(dragonBones||
(dragonBones={}));(function(d){var f=function(){function c(){}c.DATA_VERSION="2.3";c.PARENT_COORDINATE_DATA_VERSION="3.0";return c}();d.DragonBones=f})(dragonBones||(dragonBones={}));(function(d){var f=function(){return function(c){this.type=c}}();d.Event=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(c){function b(a,e){c.call(this,a)}__extends(b,c);Object.defineProperty(b,"MOVEMENT_CHANGE",{get:function(){return b.FADE_IN},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"movementID",{get:function(){return this.animationName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"armature",{get:function(){return this.target},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"animationName",{get:function(){return this.animationState.name},
enumerable:!0,configurable:!0});b.FADE_IN="fadeIn";b.FADE_OUT="fadeOut";b.START="start";b.COMPLETE="complete";b.LOOP_COMPLETE="loopComplete";b.FADE_IN_COMPLETE="fadeInComplete";b.FADE_OUT_COMPLETE="fadeOutComplete";return b}(d.Event);d.AnimationEvent=f})(dragonBones||(dragonBones={}));(function(d){var f=function(c){function b(a){c.call(this,a)}__extends(b,c);b.Z_ORDER_UPDATED="zOrderUpdated";return b}(d.Event);d.ArmatureEvent=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(c){function b(a,e){c.call(this,a)}__extends(b,c);Object.defineProperty(b,"MOVEMENT_FRAME_EVENT",{get:function(){return b.ANIMATION_FRAME_EVENT},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"armature",{get:function(){return this.target},enumerable:!0,configurable:!0});b.ANIMATION_FRAME_EVENT="animationFrameEvent";b.BONE_FRAME_EVENT="boneFrameEvent";return b}(d.Event);d.FrameEvent=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(c){function b(a){c.call(this);this.dragonBonesDataDic={};this.textureAtlasDic={};if(a!=this)throw Error("Abstract class can not be instantiated!");}__extends(b,c);b.prototype.dispose=function(a){void 0===a&&(a=!0);if(a){for(var e in this.dragonBonesDataDic)this.dragonBonesDataDic[e].dispose(),delete this.dragonBonesDataDic[e];for(var b in this.textureAtlasDic)this.textureAtlasDic[b].dispose(),delete this.textureAtlasDic[b]}this.textureAtlasDic=this.dragonBonesDataDic=null};
b.prototype.getDragonBonesData=function(a){return this.dragonBonesDataDic[a]};b.prototype.getSkeletonData=function(a){return this.getDragonBonesData(a)};b.prototype.addDragonBonesData=function(a,e){void 0===e&&(e=null);if(!a)throw Error();e=e||a.name;if(!e)throw Error("Unnamed data!");if(this.dragonBonesDataDic[e])throw Error();this.dragonBonesDataDic[e]=a};b.prototype.addSkeletonData=function(a,e){void 0===e&&(e=null);this.addDragonBonesData(a,e)};b.prototype.removeDragonBonesData=function(a){delete this.dragonBonesDataDic[a]};
b.prototype.removeSkeletonData=function(a){delete this.dragonBonesDataDic[a]};b.prototype.getTextureAtlas=function(a){return this.textureAtlasDic[a]};b.prototype.addTextureAtlas=function(a,e){void 0===e&&(e=null);if(!a)throw Error();!e&&a.hasOwnProperty("name")&&(e=a.name);if(!e)throw Error("Unnamed data!");if(this.textureAtlasDic[e])throw Error();this.textureAtlasDic[e]=a};b.prototype.removeTextureAtlas=function(a){delete this.textureAtlasDic[a]};b.prototype.getTextureDisplay=function(a,e,b,h){void 0===
e&&(e=null);void 0===b&&(b=NaN);void 0===h&&(h=NaN);var c;if(e)c=this.textureAtlasDic[e];else for(e in this.textureAtlasDic){c=this.textureAtlasDic[e];if(c.getRegion(a))break;c=null}if(!c)return null;if(isNaN(b)||isNaN(h))if(e=(e=this.dragonBonesDataDic[e])?e:this.findFirstDragonBonesData())if(e=e.getDisplayDataByName(a))b=e.pivot.x,h=e.pivot.y;return this._generateDisplay(c,a,b,h)};b.prototype.buildArmature=function(a,e,b,h){void 0===e&&(e=null);void 0===b&&(b=null);void 0===h&&(h=null);var c={};
this.fillBuildArmatureDataPackageArmatureInfo(a,e,c)&&this.fillBuildArmatureDataPackageTextureInfo(b,c);a=c.armatureData;e=c.textureAtlas;return a&&e?this.buildArmatureUsingArmatureDataFromTextureAtlas(c.dragonBonesData,a,e,h):null};b.prototype.buildArmatureUsingArmatureDataFromTextureAtlas=function(a,e,b,h){void 0===h&&(h=null);var c=this._generateArmature();c.name=e.name;c.__dragonBonesData=a;c._armatureData=e;c.animation.animationDataList=e.animationDataList;this._buildBones(c);this._buildSlots(c,
h,b);c.advanceTime(0);return c};b.prototype.copyAnimationsToArmature=function(a,e,b,h){void 0===b&&(b=null);void 0===h&&(h=!0);var c={};if(!this.fillBuildArmatureDataPackageArmatureInfo(e,b,c))return!1;e=c.armatureData;a.animation.animationDataList=e.animationDataList;e=e.getSkinData("");var k;a=a.getSlots(!1);for(var p,f=0,n,l=a.length,q=0;q<l;q++){b=a[q];p=b.displayList;for(var f=p.length,u=0;u<f;u++)n=p[u],n instanceof d.Armature&&(k=e.getSlotData(b.name),k=k.displayDataList[u],k.type==d.DisplayData.ARMATURE&&
this.copyAnimationsToArmature(n,k.name,c.dragonBonesDataName,h))}return!0};b.prototype.fillBuildArmatureDataPackageArmatureInfo=function(a,e,b){if(e)b.dragonBonesDataName=e,b.dragonBonesData=this.dragonBonesDataDic[e],b.armatureData=b.dragonBonesData.getArmatureDataByName(a);else for(e in this.dragonBonesDataDic)if(b.dragonBonesData=this.dragonBonesDataDic[e],b.armatureData=b.dragonBonesData.getArmatureDataByName(a),b.armatureData)return b.dragonBonesDataName=e,!0;return!1};b.prototype.fillBuildArmatureDataPackageTextureInfo=
function(a,e){e.textureAtlas=this.textureAtlasDic[a?a:e.dragonBonesDataName]};b.prototype.findFirstDragonBonesData=function(){for(var a in this.dragonBonesDataDic){var e=this.dragonBonesDataDic[a];if(e)return e}return null};b.prototype.findFirstTextureAtlas=function(){for(var a in this.textureAtlasDic){var e=this.textureAtlasDic[a];if(e)return e}return null};b.prototype._buildBones=function(a){for(var e=a.armatureData.boneDataList,b,h,c=0;c<e.length;c++)b=e[c],h=d.Bone.initWithBoneData(b),(b=b.parent)&&
null==a.armatureData.getBoneData(b)&&(b=null),a.addBone(h,b,!0);a._updateAnimationAfterBoneListChanged()};b.prototype._buildSlots=function(a,e,b){var h=a.armatureData.getSkinData(e);if(h)for(var c=[],h=h.slotDataList,k,p,f,n=0;n<h.length;n++)if(k=h[n],f=a.getBone(k.parent)){p=this._generateSlot();p.initWithSlotData(k);f.addSlot(p);for(f=k.displayDataList.length;f--;){var l=k.displayDataList[f];switch(l.type){case d.DisplayData.ARMATURE:l=this.buildArmatureUsingArmatureDataFromTextureAtlas(a.__dragonBonesData,
a.__dragonBonesData.getArmatureDataByName(l.name),b,e);c[f]=l;break;default:c[f]=this._generateDisplay(b,l.name,l.pivot.x,l.pivot.y)}}for(var q in c)if(k=c[q],k instanceof d.Armature&&(k=k.display),k.hasOwnProperty("name"))try{k.name=p.name}catch(u){}p.displayList=c;p._changeDisplay(0)}};b.prototype._generateArmature=function(){return null};b.prototype._generateSlot=function(){return null};b.prototype._generateDisplay=function(a,e,b,h){return null};b._helpMatrix=new d.Matrix;return b}(d.EventDispatcher);
d.BaseFactory=f})(dragonBones||(dragonBones={}));(function(d){var f=function(){function c(b,a){void 0===b&&(b=0);void 0===a&&(a=0);this.x=b;this.y=a}c.prototype.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};return c}();d.Point=f})(dragonBones||(dragonBones={}));(function(d){var f=function(){return function(c,b,a,e){void 0===c&&(c=0);void 0===b&&(b=0);void 0===a&&(a=0);void 0===e&&(e=0);this.x=c;this.y=b;this.width=a;this.height=e}}();d.Rectangle=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this.duration=0;this._frameList=[];this.duration=0;this.scale=1}c.prototype.dispose=function(){for(var b=this._frameList.length;b--;)this._frameList[b].dispose();this._frameList=null};c.prototype.addFrame=function(b){if(!b)throw Error();if(0>this._frameList.indexOf(b))this._frameList[this._frameList.length]=b;else throw Error();};Object.defineProperty(c.prototype,"frameList",{get:function(){return this._frameList},enumerable:!0,configurable:!0});return c}();
d.Timeline=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(c){function b(){c.call(this);this.playTimes=this.fadeTime=this.lastFrameDuration=this.playTimes=this.frameRate=0;this.autoTween=!0;this.tweenEasing=NaN;this.hideTimelineNameMap=[];this._timelineList=[]}__extends(b,c);Object.defineProperty(b.prototype,"timelineList",{get:function(){return this._timelineList},enumerable:!0,configurable:!0});b.prototype.dispose=function(){c.prototype.dispose.call(this);this.hideTimelineNameMap=null;for(var a in this._timelineList)this._timelineList[a].dispose();
this._timelineList=null};b.prototype.getTimeline=function(a){for(var e=this._timelineList.length;e--;)if(this._timelineList[e].name==a)return this._timelineList[e];return null};b.prototype.addTimeline=function(a){if(!a)throw Error();0>this._timelineList.indexOf(a)&&(this._timelineList[this._timelineList.length]=a)};return b}(d.Timeline);d.AnimationData=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this._boneDataList=[];this._skinDataList=[];this._animationDataList=[]}c.sortBoneDataHelpArray=function(b,a){return b[0]>a[0]?1:-1};c.sortBoneDataHelpArrayDescending=function(b,a){return b[0]>a[0]?-1:1};c.prototype.dispose=function(){for(var b=this._boneDataList.length;b--;)this._boneDataList[b].dispose();for(b=this._skinDataList.length;b--;)this._skinDataList[b].dispose();for(b=this._animationDataList.length;b--;)this._animationDataList[b].dispose();this._animationDataList=
this._skinDataList=this._boneDataList=null};c.prototype.getBoneData=function(b){for(var a=this._boneDataList.length;a--;)if(this._boneDataList[a].name==b)return this._boneDataList[a];return null};c.prototype.getSkinData=function(b){if(!b&&0<this._skinDataList.length)return this._skinDataList[0];for(var a=this._skinDataList.length;a--;)if(this._skinDataList[a].name==b)return this._skinDataList[a];return null};c.prototype.getAnimationData=function(b){for(var a=this._animationDataList.length;a--;)if(this._animationDataList[a].name==
b)return this._animationDataList[a];return null};c.prototype.addBoneData=function(b){if(!b)throw Error();if(0>this._boneDataList.indexOf(b))this._boneDataList[this._boneDataList.length]=b;else throw Error();};c.prototype.addSkinData=function(b){if(!b)throw Error();if(0>this._skinDataList.indexOf(b))this._skinDataList[this._skinDataList.length]=b;else throw Error();};c.prototype.addAnimationData=function(b){if(!b)throw Error();0>this._animationDataList.indexOf(b)&&(this._animationDataList[this._animationDataList.length]=
b)};c.prototype.sortBoneDataList=function(){var b=this._boneDataList.length;if(0!=b){for(var a=[];b--;){for(var e=this._boneDataList[b],g=0,h=e;h;)g++,h=this.getBoneData(h.parent);a[b]=[g,e]}a.sort(c.sortBoneDataHelpArray);for(b=a.length;b--;)this._boneDataList[b]=a[b][1]}};Object.defineProperty(c.prototype,"boneDataList",{get:function(){return this._boneDataList},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"skinDataList",{get:function(){return this._skinDataList},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"animationDataList",{get:function(){return this._animationDataList},enumerable:!0,configurable:!0});return c}();d.ArmatureData=f})(dragonBones||(dragonBones={}));(function(d){var f=function(){function c(){this.length=0;this.global=new d.DBTransform;this.transform=new d.DBTransform;this.inheritRotation=!0;this.inheritScale=!1}c.prototype.dispose=function(){this.transform=this.global=null};return c}();d.BoneData=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){return function(){this.alphaMultiplier=1;this.alphaOffset=0;this.blueMultiplier=1;this.blueOffset=0;this.greenMultiplier=1;this.greenOffset=0;this.redMultiplier=1;this.redOffset=0}}();d.ColorTransform=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this.transform=new d.DBTransform;this.pivot=new d.Point}c.prototype.dispose=function(){this.pivot=this.transform=null};c.ARMATURE="armature";c.IMAGE="image";return c}();d.DisplayData=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this._armatureDataList=[];this._displayDataDictionary={}}c.prototype.dispose=function(){for(var b in this._armatureDataList)this._armatureDataList[b].dispose();this._armatureDataList=null;this.removeAllDisplayData();this._displayDataDictionary=null};Object.defineProperty(c.prototype,"armatureDataList",{get:function(){return this._armatureDataList},enumerable:!0,configurable:!0});c.prototype.getArmatureDataByName=function(b){for(var a=this._armatureDataList.length;a--;)if(this._armatureDataList[a].name==
b)return this._armatureDataList[a];return null};c.prototype.addArmatureData=function(b){if(!b)throw Error();if(0>this._armatureDataList.indexOf(b))this._armatureDataList[this._armatureDataList.length]=b;else throw Error();};c.prototype.removeArmatureData=function(b){b=this._armatureDataList.indexOf(b);0<=b&&this._armatureDataList.splice(b,1)};c.prototype.removeArmatureDataByName=function(b){for(var a=this._armatureDataList.length;a--;)this._armatureDataList[a].name==b&&this._armatureDataList.splice(a,
1)};c.prototype.getDisplayDataByName=function(b){return this._displayDataDictionary[b]};c.prototype.addDisplayData=function(b){this._displayDataDictionary[b.name]=b};c.prototype.removeDisplayDataByName=function(b){delete this._displayDataDictionary[b]};c.prototype.removeAllDisplayData=function(){for(var b in this._displayDataDictionary)delete this._displayDataDictionary[b]};return c}();d.DragonBonesData=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this.duration=this.position=this.duration=this.position=0}c.prototype.dispose=function(){};return c}();d.Frame=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this._slotDataList=[]}c.prototype.dispose=function(){for(var b=this._slotDataList.length;b--;)this._slotDataList[b].dispose();this._slotDataList=null};c.prototype.getSlotData=function(b){for(var a=this._slotDataList.length;a--;)if(this._slotDataList[a].name==b)return this._slotDataList[a];return null};c.prototype.addSlotData=function(b){if(!b)throw Error();if(0>this._slotDataList.indexOf(b))this._slotDataList[this._slotDataList.length]=b;else throw Error();
};Object.defineProperty(c.prototype,"slotDataList",{get:function(){return this._slotDataList},enumerable:!0,configurable:!0});return c}();d.SkinData=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){this._displayDataList=[];this.zOrder=0}c.prototype.dispose=function(){for(var b=this._displayDataList.length;b--;)this._displayDataList[b].dispose();this._displayDataList=null};c.prototype.addDisplayData=function(b){if(!b)throw Error();if(0>this._displayDataList.indexOf(b))this._displayDataList[this._displayDataList.length]=b;else throw Error();};c.prototype.getDisplayData=function(b){for(var a=this._displayDataList.length;a--;)if(this._displayDataList[a].name==
b)return this._displayDataList[a];return null};Object.defineProperty(c.prototype,"displayDataList",{get:function(){return this._displayDataList},enumerable:!0,configurable:!0});return c}();d.SlotData=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(c){function b(){c.call(this);this.displayIndex=this.tweenRotate=0;this.tweenEasing=10;this.tweenRotate=0;this.tweenScale=!0;this.displayIndex=0;this.visible=!0;this.zOrder=NaN;this.global=new d.DBTransform;this.transform=new d.DBTransform;this.pivot=new d.Point;this.scaleOffset=new d.Point}__extends(b,c);b.prototype.dispose=function(){c.prototype.dispose.call(this);this.color=this.scaleOffset=this.pivot=this.transform=this.global=null};return b}(d.Frame);d.TransformFrame=
f})(dragonBones||(dragonBones={}));(function(d){var f=function(c){function b(){c.call(this);this.originTransform=new d.DBTransform;this.originTransform.scaleX=1;this.originTransform.scaleY=1;this.originPivot=new d.Point;this.offset=0}__extends(b,c);b.prototype.dispose=function(){c.prototype.dispose.call(this);this.originPivot=this.originTransform=null};return b}(d.Timeline);d.TransformTimeline=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){}c.parseTextureAtlasData=function(b,a){void 0===a&&(a=1);var e={},g,h=b[d.ConstValues.SUB_TEXTURE],s;for(s in h){var k=h[s],f=k[d.ConstValues.A_NAME],m=new d.Rectangle;m.x=c.getNumber(k,d.ConstValues.A_X,0)/a;m.y=c.getNumber(k,d.ConstValues.A_Y,0)/a;m.width=c.getNumber(k,d.ConstValues.A_WIDTH,0)/a;m.height=c.getNumber(k,d.ConstValues.A_HEIGHT,0)/a;var n="true"==k[d.ConstValues.A_ROTATED],l=c.getNumber(k,d.ConstValues.A_FRAME_WIDTH,0)/a,q=c.getNumber(k,d.ConstValues.A_FRAME_HEIGHT,
0)/a;0<l&&0<q?(g=new d.Rectangle,g.x=c.getNumber(k,d.ConstValues.A_FRAME_X,0)/a,g.y=c.getNumber(k,d.ConstValues.A_FRAME_Y,0)/a,g.width=l,g.height=q):g=null;e[f]=new d.TextureData(m,g,n)}return e};c.parseDragonBonesData=function(b){if(!b)throw Error();var a=b[d.ConstValues.A_VERSION],a=a.toString();if(a.toString()!=d.DragonBones.DATA_VERSION&&a.toString()!=d.DragonBones.PARENT_COORDINATE_DATA_VERSION)throw Error("Nonsupport version!");var a=c.getNumber(b,d.ConstValues.A_FRAME_RATE,0)||0,e=new d.DragonBonesData;
e.name=b[d.ConstValues.A_NAME];e.isGlobal="0"==b[d.ConstValues.A_IS_GLOBAL]?!1:!0;c.tempDragonBonesData=e;var g=b[d.ConstValues.ARMATURE],h;for(h in g)e.addArmatureData(c.parseArmatureData(b[d.ConstValues.ARMATURE][h],a));c.tempDragonBonesData=null;return e};c.parseArmatureData=function(b,a){var e=new d.ArmatureData;e.name=b[d.ConstValues.A_NAME];var g=b[d.ConstValues.BONE],h;for(h in g)e.addBoneData(c.parseBoneData(g[h]));g=b[d.ConstValues.SKIN];for(h in g)e.addSkinData(c.parseSkinData(g[h]));c.tempDragonBonesData.isGlobal&&
d.DBDataUtil.transformArmatureData(e);e.sortBoneDataList();g=b[d.ConstValues.ANIMATION];for(h in g){var s=c.parseAnimationData(g[h],a);d.DBDataUtil.addHideTimeline(s,e);d.DBDataUtil.transformAnimationData(s,e,c.tempDragonBonesData.isGlobal);e.addAnimationData(s)}return e};c.parseBoneData=function(b){var a=new d.BoneData;a.name=b[d.ConstValues.A_NAME];a.parent=b[d.ConstValues.A_PARENT];a.length=Number(b[d.ConstValues.A_LENGTH])||0;a.inheritRotation=c.getBoolean(b,d.ConstValues.A_INHERIT_ROTATION,!0);
a.inheritScale=c.getBoolean(b,d.ConstValues.A_INHERIT_SCALE,!0);c.parseTransform(b[d.ConstValues.TRANSFORM],a.transform);c.tempDragonBonesData.isGlobal&&a.global.copy(a.transform);return a};c.parseSkinData=function(b){var a=new d.SkinData;a.name=b[d.ConstValues.A_NAME];b=b[d.ConstValues.SLOT];for(var e in b)a.addSlotData(c.parseSlotData(b[e]));return a};c.parseSlotData=function(b){var a=new d.SlotData;a.name=b[d.ConstValues.A_NAME];a.parent=b[d.ConstValues.A_PARENT];a.zOrder=b[d.ConstValues.A_Z_ORDER];
a.zOrder=c.getNumber(b,d.ConstValues.A_Z_ORDER,0)||0;a.blendMode=b[d.ConstValues.A_BLENDMODE];b=b[d.ConstValues.DISPLAY];for(var e in b)a.addDisplayData(c.parseDisplayData(b[e]));return a};c.parseDisplayData=function(b){var a=new d.DisplayData;a.name=b[d.ConstValues.A_NAME];a.type=b[d.ConstValues.A_TYPE];c.parseTransform(b[d.ConstValues.TRANSFORM],a.transform,a.pivot);null!=c.tempDragonBonesData&&c.tempDragonBonesData.addDisplayData(a);return a};c.parseAnimationData=function(b,a){var e=new d.AnimationData;
e.name=b[d.ConstValues.A_NAME];e.frameRate=a;e.duration=Math.round(1E3*(c.getNumber(b,d.ConstValues.A_DURATION,1)||1)/a);e.playTimes=c.getNumber(b,d.ConstValues.A_LOOP,1);e.playTimes=NaN!=e.playTimes?e.playTimes:1;e.fadeTime=c.getNumber(b,d.ConstValues.A_FADE_IN_TIME,0)||0;e.scale=c.getNumber(b,d.ConstValues.A_SCALE,1)||0;e.tweenEasing=c.getNumber(b,d.ConstValues.A_TWEEN_EASING,NaN);e.autoTween=c.getBoolean(b,d.ConstValues.A_AUTO_TWEEN,!0);var g=b[d.ConstValues.FRAME],h;for(h in g){var s=c.parseTransformFrame(g[h],
a);e.addFrame(s)}c.parseTimeline(b,e);g=e.duration;s=b[d.ConstValues.TIMELINE];for(h in s){var k=s[h],f=c.parseTransformTimeline(k,e.duration,a),f=c.parseTransformTimeline(k,e.duration,a),g=Math.min(g,f.frameList[f.frameList.length-1].duration);e.addTimeline(f)}0<e.frameList.length&&(g=Math.min(g,e.frameList[e.frameList.length-1].duration));e.lastFrameDuration=g;return e};c.parseTransformTimeline=function(b,a,e){var g=new d.TransformTimeline;g.name=b[d.ConstValues.A_NAME];g.scale=c.getNumber(b,d.ConstValues.A_SCALE,
1)||0;g.offset=c.getNumber(b,d.ConstValues.A_OFFSET,0)||0;g.originPivot.x=c.getNumber(b,d.ConstValues.A_PIVOT_X,0)||0;g.originPivot.y=c.getNumber(b,d.ConstValues.A_PIVOT_Y,0)||0;g.duration=a;a=b[d.ConstValues.FRAME];for(var h in a){var s=c.parseTransformFrame(a[h],e);g.addFrame(s)}c.parseTimeline(b,g);return g};c.parseTransformFrame=function(b,a){var e=new d.TransformFrame;c.parseFrame(b,e,a);e.visible=!c.getBoolean(b,d.ConstValues.A_HIDE,!1);e.tweenEasing=c.getNumber(b,d.ConstValues.A_TWEEN_EASING,
10)||10;e.tweenRotate=Math.floor(c.getNumber(b,d.ConstValues.A_TWEEN_ROTATE,0)||0);e.tweenScale=c.getBoolean(b,d.ConstValues.A_TWEEN_SCALE,!0);e.displayIndex=Math.floor(c.getNumber(b,d.ConstValues.A_DISPLAY_INDEX,0)||0);e.zOrder=c.getNumber(b,d.ConstValues.A_Z_ORDER,c.tempDragonBonesData.isGlobal?NaN:0);c.parseTransform(b[d.ConstValues.TRANSFORM],e.transform,e.pivot);c.tempDragonBonesData.isGlobal&&e.global.copy(e.transform);e.scaleOffset.x=c.getNumber(b,d.ConstValues.A_SCALE_X_OFFSET,0)||0;e.scaleOffset.y=
c.getNumber(b,d.ConstValues.A_SCALE_Y_OFFSET,0)||0;var g=b[d.ConstValues.COLOR_TRANSFORM];g&&(e.color=new d.ColorTransform,c.parseColorTransform(g,e.color));return e};c.parseTimeline=function(b,a){var e=0,g,h=a.frameList,c;for(c in h)g=h[c],g.position=e,e+=g.duration;g&&(g.duration=a.duration-g.position)};c.parseFrame=function(b,a,e){void 0===e&&(e=0);a.duration=Math.round(1E3*(b[d.ConstValues.A_DURATION]||1)/e);a.action=b[d.ConstValues.A_ACTION];a.event=b[d.ConstValues.A_EVENT];a.sound=b[d.ConstValues.A_SOUND]};
c.parseTransform=function(b,a,e){void 0===e&&(e=null);b&&(a&&(a.x=c.getNumber(b,d.ConstValues.A_X,0)||0,a.y=c.getNumber(b,d.ConstValues.A_Y,0)||0,a.skewX=c.getNumber(b,d.ConstValues.A_SKEW_X,0)*d.ConstValues.ANGLE_TO_RADIAN||0,a.skewY=c.getNumber(b,d.ConstValues.A_SKEW_Y,0)*d.ConstValues.ANGLE_TO_RADIAN||0,a.scaleX=c.getNumber(b,d.ConstValues.A_SCALE_X,1)||0,a.scaleY=c.getNumber(b,d.ConstValues.A_SCALE_Y,1)||0),e&&(e.x=c.getNumber(b,d.ConstValues.A_PIVOT_X,0)||0,e.y=c.getNumber(b,d.ConstValues.A_PIVOT_Y,
0)||0))};c.parseColorTransform=function(b,a){b&&a&&(a.alphaOffset=c.getNumber(b,d.ConstValues.A_ALPHA_OFFSET,0),a.redOffset=c.getNumber(b,d.ConstValues.A_RED_OFFSET,0),a.greenOffset=c.getNumber(b,d.ConstValues.A_GREEN_OFFSET,0),a.blueOffset=c.getNumber(b,d.ConstValues.A_BLUE_OFFSET,0),a.alphaMultiplier=.01*c.getNumber(b,d.ConstValues.A_ALPHA_MULTIPLIER,100),a.redMultiplier=.01*c.getNumber(b,d.ConstValues.A_RED_MULTIPLIER,100),a.greenMultiplier=.01*c.getNumber(b,d.ConstValues.A_GREEN_MULTIPLIER,100),
a.blueMultiplier=.01*c.getNumber(b,d.ConstValues.A_BLUE_MULTIPLIER,100))};c.getBoolean=function(b,a,e){if(b&&a in b)switch(String(b[a])){case "0":case "NaN":case "":case "false":case "null":case "undefined":return!1;default:return!0}return e};c.getNumber=function(b,a,e){if(b&&a in b)switch(String(b[a])){case "NaN":case "":case "false":case "null":case "undefined":return NaN;default:return Number(b[a])}return e};return c}();d.DataParser=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){return function(c,b,a){this.region=c;this.frame=b;this.rotated=a}}();d.TextureData=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){}c.ANGLE_TO_RADIAN=Math.PI/180;c.RADIAN_TO_ANGLE=180/Math.PI;c.DRAGON_BONES="dragonBones";c.ARMATURE="armature";c.SKIN="skin";c.BONE="bone";c.SLOT="slot";c.DISPLAY="display";c.ANIMATION="animation";c.TIMELINE="timeline";c.FRAME="frame";c.TRANSFORM="transform";c.COLOR_TRANSFORM="colorTransform";c.RECTANGLE="rectangle";c.ELLIPSE="ellipse";c.TEXTURE_ATLAS="TextureAtlas";c.SUB_TEXTURE="SubTexture";c.A_ROTATED="rotated";c.A_FRAME_X="frameX";c.A_FRAME_Y="frameY";
c.A_FRAME_WIDTH="frameWidth";c.A_FRAME_HEIGHT="frameHeight";c.A_VERSION="version";c.A_IMAGE_PATH="imagePath";c.A_FRAME_RATE="frameRate";c.A_NAME="name";c.A_IS_GLOBAL="isGlobal";c.A_PARENT="parent";c.A_LENGTH="length";c.A_TYPE="type";c.A_FADE_IN_TIME="fadeInTime";c.A_DURATION="duration";c.A_SCALE="scale";c.A_OFFSET="offset";c.A_LOOP="loop";c.A_EVENT="event";c.A_EVENT_PARAMETERS="eventParameters";c.A_SOUND="sound";c.A_ACTION="action";c.A_HIDE="hide";c.A_AUTO_TWEEN="autoTween";c.A_TWEEN_EASING="tweenEasing";
c.A_TWEEN_ROTATE="tweenRotate";c.A_TWEEN_SCALE="tweenScale";c.A_DISPLAY_INDEX="displayIndex";c.A_Z_ORDER="z";c.A_BLENDMODE="blendMode";c.A_WIDTH="width";c.A_HEIGHT="height";c.A_INHERIT_SCALE="inheritScale";c.A_INHERIT_ROTATION="inheritRotation";c.A_X="x";c.A_Y="y";c.A_SKEW_X="skX";c.A_SKEW_Y="skY";c.A_SCALE_X="scX";c.A_SCALE_Y="scY";c.A_PIVOT_X="pX";c.A_PIVOT_Y="pY";c.A_ALPHA_OFFSET="aO";c.A_RED_OFFSET="rO";c.A_GREEN_OFFSET="gO";c.A_BLUE_OFFSET="bO";c.A_ALPHA_MULTIPLIER="aM";c.A_RED_MULTIPLIER="rM";
c.A_GREEN_MULTIPLIER="gM";c.A_BLUE_MULTIPLIER="bM";c.A_SCALE_X_OFFSET="scXOffset";c.A_SCALE_Y_OFFSET="scYOffset";c.A_SCALE_MODE="scaleMode";c.A_FIXED_ROTATION="fixedRotation";return c}();d.ConstValues=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){}c.transformArmatureData=function(b){for(var a=b.boneDataList,e=a.length;e--;){var g=a[e];if(g.parent){var h=b.getBoneData(g.parent);h&&(g.transform.copy(g.global),d.TransformUtil.globalToLocal(g.transform,h.global))}}};c.transformArmatureDataAnimations=function(b){for(var a=b.animationDataList,e=a.length;e--;)c.transformAnimationData(a[e],b,!1)};c.transformRelativeAnimationData=function(b,a){};c.transformAnimationData=function(b,a,e){if(e){var g=a.getSkinData(null);
e=a.boneDataList;var h;g&&(h=g.slotDataList);for(g=0;g<e.length;g++){var s=e[g],k=b.getTimeline(s.name);if(k){var f=null;if(h)for(var m in h)if(f=h[m],f.parent==s.name)break;for(var n=k.frameList,l=null,q=null,u=null,v=n.length,t=0;t<v;t++){var r=n[t];c.setFrameTransform(b,a,s,r);r.transform.x-=s.transform.x;r.transform.y-=s.transform.y;r.transform.skewX-=s.transform.skewX;r.transform.skewY-=s.transform.skewY;r.transform.scaleX/=s.transform.scaleX;r.transform.scaleY/=s.transform.scaleY;!k.transformed&&
f&&(r.zOrder-=f.zOrder);l||(l=k.originTransform,l.copy(r.transform),l.skewX=d.TransformUtil.formatRadian(l.skewX),l.skewY=d.TransformUtil.formatRadian(l.skewY),q=k.originPivot,q.x=r.pivot.x,q.y=r.pivot.y);r.transform.x-=l.x;r.transform.y-=l.y;r.transform.skewX=d.TransformUtil.formatRadian(r.transform.skewX-l.skewX);r.transform.skewY=d.TransformUtil.formatRadian(r.transform.skewY-l.skewY);r.transform.scaleX/=l.scaleX;r.transform.scaleY/=l.scaleY;k.transformed||(r.pivot.x-=q.x,r.pivot.y-=q.y);if(u){var x=
r.transform.skewX-u.transform.skewX;u.tweenRotate?0<u.tweenRotate?(0>x&&(r.transform.skewX+=2*Math.PI,r.transform.skewY+=2*Math.PI),1<u.tweenRotate&&(r.transform.skewX+=2*Math.PI*(u.tweenRotate-1),r.transform.skewY+=2*Math.PI*(u.tweenRotate-1))):(0<x&&(r.transform.skewX-=2*Math.PI,r.transform.skewY-=2*Math.PI),1>u.tweenRotate&&(r.transform.skewX+=2*Math.PI*(u.tweenRotate+1),r.transform.skewY+=2*Math.PI*(u.tweenRotate+1))):(r.transform.skewX=u.transform.skewX+d.TransformUtil.formatRadian(r.transform.skewX-
u.transform.skewX),r.transform.skewY=u.transform.skewY+d.TransformUtil.formatRadian(r.transform.skewY-u.transform.skewY))}u=r}k.transformed=!0}}}else c.transformRelativeAnimationData(b,a)};c.setFrameTransform=function(b,a,e,g){g.transform.copy(g.global);if(e=a.getBoneData(e.parent)){var h=b.getTimeline(e.name);if(h){for(var s=[],k=[];h;)s.push(h),k.push(e),h=(e=a.getBoneData(e.parent))?b.getTimeline(e.name):null;b=s.length;var f;a=new d.Matrix;for(var m=new d.DBTransform,n=new d.Matrix;b--;)h=s[b],
e=k[b],c.getTimelineTransform(h,g.position,m,!f),f?(m.x+=h.originTransform.x+e.transform.x,m.y+=h.originTransform.y+e.transform.y,m.skewX+=h.originTransform.skewX+e.transform.skewX,m.skewY+=h.originTransform.skewY+e.transform.skewY,m.scaleX=m.scaleX*h.originTransform.scaleX*e.transform.scaleX,m.scaleY=m.scaleY*h.originTransform.scaleY*e.transform.scaleY,d.TransformUtil.transformToMatrix(m,n,!0),n.concat(a),d.TransformUtil.matrixToTransform(n,f,0<=m.scaleX*f.scaleX,0<=m.scaleY*f.scaleY)):(f=new d.DBTransform,
f.copy(m)),d.TransformUtil.transformToMatrix(f,a,!0);d.TransformUtil.globalToLocal(g.transform,f)}}};c.getTimelineTransform=function(b,a,e,g){for(var h=b.frameList,c=h.length;c--;)if(b=h[c],b.position<=a&&b.position+b.duration>a){if(c==h.length-1||a==b.position)e.copy(g?b.global:b.transform);else{var k=b.tweenEasing;a=(a-b.position)/b.duration;k&&10!=k&&(a=d.MathUtil.getEaseValue(a,k));h=h[c+1];b=g?b.global:b.transform;g=g?h.global:h.transform;e.x=b.x+(g.x-b.x)*a;e.y=b.y+(g.y-b.y)*a;e.skewX=d.TransformUtil.formatRadian(b.skewX+
(g.skewX-b.skewX)*a);e.skewY=d.TransformUtil.formatRadian(b.skewY+(g.skewY-b.skewY)*a);e.scaleX=b.scaleX+(g.scaleX-b.scaleX)*a;e.scaleY=b.scaleY+(g.scaleY-b.scaleY)*a}break}};c.addHideTimeline=function(b,a){for(var e=a.boneDataList,g=e.length;g--;){var h=e[g].name;b.getTimeline(h)||0>b.hideTimelineNameMap.indexOf(h)&&b.hideTimelineNameMap.push(h)}};return c}();d.DBDataUtil=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){}c.getEaseValue=function(b,a){var e=1;1<a?(e=.5*(1-Math.cos(b*Math.PI)),a-=1):0<a?e=1-Math.pow(1-b,2):0>a&&(a*=-1,e=Math.pow(b,2));return(e-b)*a+b};return c}();d.MathUtil=f})(dragonBones||(dragonBones={}));
(function(d){var f=function(){function c(){}c.globalToLocal=function(b,a){c.transformToMatrix(b,c._helpTransformMatrix,!0);c.transformToMatrix(a,c._helpParentTransformMatrix,!0);c._helpParentTransformMatrix.invert();c._helpTransformMatrix.concat(c._helpParentTransformMatrix);c.matrixToTransform(c._helpTransformMatrix,b,0<=b.scaleX*a.scaleX,0<=b.scaleY*a.scaleY)};c.transformToMatrix=function(b,a,e){void 0===e&&(e=!1);e?(a.a=b.scaleX*Math.cos(b.skewY),a.b=b.scaleX*Math.sin(b.skewY),a.c=-b.scaleY*Math.sin(b.skewX),
a.d=b.scaleY*Math.cos(b.skewX)):(a.a=Math.cos(b.skewY),a.b=Math.sin(b.skewY),a.c=-Math.sin(b.skewX),a.d=Math.cos(b.skewX));a.tx=b.x;a.ty=b.y};c.matrixToTransform=function(b,a,e,g){a.x=b.tx;a.y=b.ty;a.scaleX=Math.sqrt(b.a*b.a+b.b*b.b)*(e?1:-1);a.scaleY=Math.sqrt(b.d*b.d+b.c*b.c)*(g?1:-1);e=[];e[0]=Math.acos(b.d/a.scaleY);e[1]=-e[0];e[2]=Math.asin(-b.c/a.scaleY);e[3]=0<=e[2]?Math.PI-e[2]:e[2]-Math.PI;Number(e[0]).toFixed(4)==Number(e[2]).toFixed(4)||Number(e[0]).toFixed(4)==Number(e[3]).toFixed(4)?
a.skewX=e[0]:a.skewX=e[1];e=[];e[0]=Math.acos(b.a/a.scaleX);e[1]=-e[0];e[2]=Math.asin(b.b/a.scaleX);e[3]=0<=e[2]?Math.PI-e[2]:e[2]-Math.PI;Number(e[0]).toFixed(4)==Number(e[2]).toFixed(4)||Number(e[0]).toFixed(4)==Number(e[3]).toFixed(4)?a.skewY=e[0]:a.skewY=e[1]};c.formatRadian=function(b){b>Math.PI&&(b-=c.DOUBLE_PI);b<-Math.PI&&(b+=c.DOUBLE_PI);return b};c.HALF_PI=.5*Math.PI;c.DOUBLE_PI=2*Math.PI;c._helpTransformMatrix=new d.Matrix;c._helpParentTransformMatrix=new d.Matrix;return c}();d.TransformUtil=
f})(dragonBones||(dragonBones={}));var WOZLLA;
(function(d){(function(d){(function(b){b[b.CAPTURE=0]="CAPTURE";b[b.BUBBLE=1]="BUBBLE";b[b.TARGET=2]="TARGET"})(d.EventPhase||(d.EventPhase={}));var c=function(){function b(a,e,b,h){void 0===e&&(e=!1);void 0===b&&(b=null);void 0===h&&(h=!0);this._eventPhase=0;this._listenerRemove=this._propagationStoped=this._immediatePropagationStoped=!1;this._type=a;this._bubbles=e;this._data=b;this._canStopBubbles=h}Object.defineProperty(b.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bubbles",
{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canStopBubbles",{get:function(){return this._canStopBubbles},enumerable:!0,configurable:!0});b.prototype.isStopPropagation=function(){return this._propagationStoped};b.prototype.stopPropagation=function(){this._canStopBubbles&&(this._propagationStoped=!0)};b.prototype.isStopImmediatePropagation=function(){return this._immediatePropagationStoped};b.prototype.stopImmediatePropagation=function(){this._canStopBubbles&&
(this._propagationStoped=this._immediatePropagationStoped=!0)};b.prototype.removeCurrentListener=function(){this._listenerRemove=!0};return b}();d.Event=c})(d.event||(d.event={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(){this._listeners=[]}a.prototype.add=function(a){this._listeners.push(a)};a.prototype.remove=function(a,b){var h,c=this._listeners.length,d;for(h=0;h<c;h++)if(d=this._listeners[h],d===a)return b&&b!==d._EventDispatcher_scope||this._listeners.splice(h,1),!0;return!1};a.prototype.removeAt=function(a){return this._listeners.splice(a,1)};a.prototype.get=function(a){return this._listeners[a]};a.prototype.length=function(){return this._listeners.length};
a.prototype.clear=function(){this._listeners.length=0};return a}(),b=function(){function a(){this._captureDict={};this._bubbleDict={}}a.prototype.setBubbleParent=function(a){this._bubbleParent=a};a.prototype.hasListener=function(a,b){void 0===b&&(b=!1);return 0<this._getListenerList(a,b).length()};a.prototype.getListenerCount=function(a,b){return this._getListenerList(a,b).length()};a.prototype.addListener=function(a,b,h){void 0===h&&(h=!1);this._getListenerList(a,h).add(b)};a.prototype.addListenerScope=
function(a,b,h,c){void 0===c&&(c=!1);b._EventDispatcher_scope=h;this.addListener(a,b,c)};a.prototype.removeListener=function(a,b,h){void 0===h&&(h=!1);return this._getListenerList(a,h).remove(b)};a.prototype.removeListenerScope=function(a,b,h,c){void 0===c&&(c=!1);return this._getListenerList(a,c).remove(b,h)};a.prototype.clearListeners=function(a,b){this._getListenerList(a,b).clear()};a.prototype.clearAllListeners=function(){this._captureDict={};this._bubbleDict={}};a.prototype.dispatchEvent=function(a){var b,
h,c,d;a._target=this;if(a.bubbles){c=this._getAncients();h=c.length;for(b=h-1;0<=b;b--)if(d=c[b],d._dispatchEventInPhase(a,0))return;if(!this._dispatchEventInPhase(a,0)&&!this._dispatchEventInPhase(a,2))for(b=0;b<h&&(d=c[b],!d._dispatchEventInPhase(a,1));b++);}else this._dispatchEventInPhase(a,2)};a.prototype._dispatchEventInPhase=function(a,b){var h,c,d,f;a._eventPhase=b;a._listenerRemove=!1;a._currentTarget=this;f=this._getListenerList(a.type,0===b);h=f.length();if(0<h){for(h-=1;0<=h;h--)if(c=f.get(h),
(d=c._EventDispatcher_scope)?c.call(d,a):c(a),a._listenerRemove&&(a._listenerRemove=!1,f.removeAt(h)),a.isStopImmediatePropagation())return!0;if(a.isStopPropagation())return!0}return!1};a.prototype._getAncients=function(){for(var a=[],b=this;b._bubbleParent;)b=b._bubbleParent,a.push(b);return a};a.prototype._getListenerList=function(a,b){var h,d=b?this._captureDict:this._bubbleDict;h=d[a];h||(h=new c,d[a]=h);return h};return a}();d.EventDispatcher=b})(d.event||(d.event={}))})(WOZLLA||(WOZLLA={}));
__extends=this.__extends||function(d,f){function c(){this.constructor=d}for(var b in f)f.hasOwnProperty(b)&&(d[b]=f[b]);c.prototype=f.prototype;d.prototype=new c};
(function(d){(function(f){var c=function(b){function a(a){b.call(this);this._refCount=0;this._src=a}__extends(a,b);Object.defineProperty(a.prototype,"src",{get:function(){return this._src},enumerable:!0,configurable:!0});a.prototype.retain=function(){this._refCount++};a.prototype.release=function(a){void 0===a&&(a=!0);a&&0<this._refCount&&this._refCount--;0===this._refCount&&this.unload()};a.prototype.load=function(a,b){a()};a.prototype.unload=function(){var b=new d.event.Event(a.EVENT_UNLOAD,!1);
b.target=b.currentTarget=this;this.dispatchEvent(b)};a.EVENT_UNLOAD="unload";return a}(d.event.EventDispatcher);f.Asset=c})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(){this._loadedAssets={};this._loadingUnits={}}a.getInstance=function(){a.instance||(a.instance=new a);return a.instance};a.prototype.getAsset=function(a){return this._loadedAssets[a]};a.prototype.addAsset=function(a){var b=this;this._loadedAssets[a.src]=a;a.addListener(d.Asset.EVENT_UNLOAD,function(h){h.removeCurrentListener();b.removeAsset(a)})};a.prototype.removeAsset=function(a){delete this._loadedAssets[a.src]};a.prototype.loadAll=function(a){var b,
h,c;h=0;for(c=a.length;h<c;h++)b=a[h],this.load(b.src,b.AssetClass,b.callback)};a.prototype.load=function(a,g,h){var c=this,d,f;(d=this._loadedAssets[a])?h&&h():(f=this._loadingUnits[a])?f.addCallback(h,h):(d=new g(a),f=new b(a),f.addCallback(h,h),this._loadingUnits[a]=f,d.load(function(){delete c._loadingUnits[a];c.addAsset(d);f.complete(null,d)},function(b){console.log(b);delete c._loadingUnits[a];f.complete(b)}))};return a}();d.AssetLoader=c;var b=function(){function a(a){this.callbacks=[];this.src=
a}a.prototype.addCallback=function(a,b){this.callbacks.push({onSuccess:a,onError:b})};a.prototype.complete=function(a,b){this.callbacks.forEach(function(h){a?h.onError&&h.onError(a):h.onSuccess&&h.onSuccess(b)})};return a}()})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.ITexture||(d.ITexture={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IRenderer||(d.IRenderer={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(){this.values=new Float32Array(9);this.identity()}b.prototype.applyMatrix=function(a){this.values.set(a.values)};b.prototype.identity=function(){this.values[0]=1;this.values[1]=0;this.values[2]=0;this.values[3]=0;this.values[4]=1;this.values[5]=0;this.values[6]=0;this.values[7]=0;this.values[8]=1};b.prototype.invert=function(){var a=this.values[0],b=this.values[1],g=this.values[3],h=this.values[4],c=this.values[6],d=this.values[7],f=a*h-b*g;this.values[0]=
h/f;this.values[1]=-b/f;this.values[3]=-g/f;this.values[4]=a/f;this.values[6]=(g*d-h*c)/f;this.values[7]=-(a*d-b*c)/f};b.prototype.prepend=function(a,b,g,h,c,d){var f,m,n,l,q=this.values,u=q[6],v=q[7];if(1!=a||0!=b||0!=g||1!=h)f=q[0],m=q[1],n=q[3],l=q[4],q[0]=f*a+m*g,q[1]=f*b+m*h,q[3]=n*a+l*g,q[4]=n*b+l*h;q[6]=u*a+v*g+c;q[7]=u*b+v*h+d};b.prototype.append=function(a,b,g,h,c,d){var f,m,n,l,q=this.values;f=q[0];m=q[1];n=q[3];l=q[4];q[0]=a*f+b*n;q[1]=a*m+b*l;q[3]=g*f+h*n;q[4]=g*m+h*l;q[6]=c*f+d*n+q[6];
q[7]=c*m+d*l+q[7]};b.prototype.prependTransform=function(a,e,g,h,c,d,f,m,n){if(c%360){var l=c*b.DEG_TO_RAD;c=Math.cos(l);l=Math.sin(l)}else c=1,l=0;if(m||n)this.values[6]-=m,this.values[7]-=n;d||f?(d*=b.DEG_TO_RAD,f*=b.DEG_TO_RAD,this.prepend(c*g,l*g,-l*h,c*h,0,0),this.prepend(Math.cos(f),Math.sin(f),-Math.sin(d),Math.cos(d),a,e)):this.prepend(c*g,l*g,-l*h,c*h,a,e);return this};b.prototype.appendTransform=function(a,e,g,h,c,d,f,m,n){if(c%360){var l=c*b.DEG_TO_RAD;c=Math.cos(l);l=Math.sin(l)}else c=
1,l=0;d||f?(d*=b.DEG_TO_RAD,f*=b.DEG_TO_RAD,this.append(Math.cos(f),Math.sin(f),-Math.sin(d),Math.cos(d),a,e),this.append(c*g,l*g,-l*h,c*h,0,0)):this.append(c*g,l*g,-l*h,c*h,a,e);if(m||n)this.values[6]-=m*this.values[0]+n*this.values[3],this.values[7]-=m*this.values[1]+n*this.values[4];return this};b.DEG_TO_RAD=Math.PI/180;return b}();d.Matrix=c})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b,g){this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(a,b,g)}b.get=function(a,e,g,h){void 0===e&&(e=null);void 0===g&&(g=null);void 0===h&&(h=!1);h&&b.removeTweens(a);return new b(a,e,g)};b.removeTweens=function(a){if(a.tween_count){for(var e=
b._tweens,g=e.length-1;0<=g;g--)e[g]._target==a&&(e[g].paused=!0,e.splice(g,1));a.tween_count=0}};b.tick=function(a,e){void 0===e&&(e=!1);for(var g=b._tweens.concat(),h=g.length-1;0<=h;h--){var c=g[h];e&&!c.ignoreGlobalPause||c.paused||c.tick(c._useTicks?1:a)}};b._register=function(a,e){var g=a._target,h=b._tweens;if(e)g&&(g.tween_count=g.tween_count?g.tween_count+1:1),h.push(a);else for(g&&g.tween_count--,g=h.length;g--;)if(h[g]==a){h.splice(g,1);break}};b.removeAllTweens=function(){for(var a=b._tweens,
e=0,g=a.length;e<g;e++){var h=a[e];h.paused=!0;h._target.tweenjs_count=0}a.length=0};b.prototype.initialize=function(a,e,g){this._target=a;e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.override&&b.removeTweens(a));this.pluginData=g||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];e&&e.paused?this.paused=!0:b._register(this,!0);e&&null!=e.position&&this.setPosition(e.position,b.NONE)};b.prototype.setPosition=function(a,
b){void 0===b&&(b=1);0>a&&(a=0);var g=a,h=!1;g>=this.duration&&(this.loop?g%=this.duration:(g=this.duration,h=!0));if(g==this._prevPos)return h;var c=this._prevPos;this.position=this._prevPos=g;this._prevPosition=a;if(this._target)if(h)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var d=0,f=this._steps.length;d<f&&!(this._steps[d].t>g);d++);d=this._steps[d-1];this._updateTargetProps(d,(this._stepPosition=g-d.t)/d.d)}0!=b&&0<this._actions.length&&(this._useTicks?this._runActions(g,
g):1==b&&g<c?(c!=this.duration&&this._runActions(c,this.duration),this._runActions(0,g,!0)):this._runActions(c,g));h&&this.setPaused(!0);return h};b.prototype._runActions=function(a,b,g){void 0===g&&(g=!1);var h=a,c=b,d=-1,f=this._actions.length,m=1;a>b&&(h=b,c=a,d=f,f=m=-1);for(;(d+=m)!=f;){b=this._actions[d];var n=b.t;(n==c||n>h&&n<c||g&&n==a)&&b.f.apply(b.o,b.p)}};b.prototype._updateTargetProps=function(a,e){var g,h,c,d;if(a||1!=e){if(this.passive=!!a.v)return;a.e&&(e=a.e(e,0,1,1));g=a.p0;h=a.p1}else this.passive=
!1,g=h=this._curQueueProps;for(var f in this._initQueueProps){null==(c=g[f])&&(g[f]=c=this._initQueueProps[f]);null==(d=h[f])&&(h[f]=d=c);c=c==d||0==e||1==e||"number"!=typeof c?1==e?d:c:c+(d-c)*e;var m=!1;if(d=b._plugins[f])for(var n=0,l=d.length;n<l;n++){var q=d[n].tween(this,f,c,g,h,e,!!a&&g==h,!a);q==b.IGNORE?m=!0:c=q}m||(this._target[f]=c)}};b.prototype.setPaused=function(a){this.paused=a;b._register(this,!a);return this};b.prototype._cloneProps=function(a){var b={},g;for(g in a)b[g]=a[g];return b};
b.prototype._addStep=function(a){0<a.d&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d);return this};b.prototype._appendQueueProps=function(a){var e,g,h,c,d,f;for(f in a)if(void 0===this._initQueueProps[f]){g=this._target[f];if(e=b._plugins[f])for(h=0,c=e.length;h<c;h++)g=e[h].init(this,f,g);this._initQueueProps[f]=this._curQueueProps[f]=void 0===g?null:g}for(f in a){g=this._curQueueProps[f];if(e=b._plugins[f])for(d=d||{},h=0,c=e.length;h<c;h++)e[h].step&&e[h].step(this,f,g,a[f],d);this._curQueueProps[f]=
a[f]}d&&this._appendQueueProps(d);return this._curQueueProps};b.prototype._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};b.prototype._set=function(a,b){for(var g in a)b[g]=a[g]};b.prototype.wait=function(a,b){void 0===b&&(b=!1);if(null==a||0>=a)return this;var g=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:g,p1:g,v:b})};b.prototype.to=function(a,b,g){void 0===g&&(g=void 0);if(isNaN(b)||0>b)b=0;return this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),
e:g,p1:this._cloneProps(this._appendQueueProps(a))})};b.prototype.call=function(a,b,g){void 0===b&&(b=void 0);void 0===g&&(g=void 0);a||(a=function(){});return this._addAction({f:a,p:g?g:[this],o:b?b:this._target})};b.prototype.set=function(a,b){void 0===b&&(b=null);return this._addAction({f:this._set,o:this,p:[a,b?b:this._target]})};b.prototype.play=function(a){a||(a=this);return this.call(a.setPaused,[!1],a)};b.prototype.pause=function(a){a||(a=this);return this.call(a.setPaused,[!0],a)};b.prototype.tick=
function(a){this.paused||this.setPosition(this._prevPosition+a)};b.NONE=0;b.LOOP=1;b.REVERSE=2;b._tweens=[];b.IGNORE={};b._plugins={};b._inited=!1;return b}();d.Tween=c})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){var f=new d.math.Matrix,c=function(){function b(){this.worldMatrix=new d.math.Matrix;this.useGLCoords=!1;this._relative=!0;this._dirty=!1;this._values=Array(9);this.reset()}Object.defineProperty(b.prototype,"x",{get:function(){return this._values[0]},set:function(a){this._values[0]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"y",{get:function(){return this._values[1]},set:function(a){this._values[1]=a;this._dirty=!0},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"rotation",{get:function(){return this._values[4]},set:function(a){this._values[4]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scaleX",{get:function(){return this._values[5]},set:function(a){this._values[5]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scaleY",{get:function(){return this._values[6]},set:function(a){this._values[6]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"skewX",{get:function(){return this._values[7]},set:function(a){this._values[7]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"skewY",{get:function(){return this._values[8]},set:function(a){this._values[8]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"relative",{get:function(){return this._relative},set:function(a){this._relative=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dirty",
{get:function(){return this._dirty},set:function(a){this._dirty=a},enumerable:!0,configurable:!0});b.prototype.setPosition=function(a,b){this._values[0]=a;this._values[1]=b;this._dirty=!0};b.prototype.setAnchor=function(a,b){this._values[2]=a;this._values[3]=b;this._dirty=!0};b.prototype.setRotation=function(a){this._values[4]=a;this._dirty=!0};b.prototype.setScale=function(a,b){this._values[5]=a;this._values[6]=b;this._dirty=!0};b.prototype.setSkew=function(a,b){this._values[7]=a;this._values[8]=
b;this._dirty=!0};b.prototype.reset=function(){this._values[0]=0;this._values[1]=0;this._values[2]=0;this._values[3]=0;this._values[4]=0;this._values[5]=1;this._values[6]=1;this._values[7]=0;this._values[8]=0};b.prototype.set=function(a){"number"===typeof a.x&&(this._values[0]=a.x);"number"===typeof a.y&&(this._values[1]=a.y);"number"===typeof a.rotation&&(this._values[4]=a.rotation);"number"===typeof a.scaleX&&(this._values[5]=a.scaleX);"number"===typeof a.scaleY&&(this._values[6]=a.scaleY);"number"===
typeof a.skewX&&(this._values[7]=a.skewX);"number"===typeof a.skewY&&(this._values[8]=a.skewY);"undefined"!==typeof a.relative&&(this._relative=a.relative);this._dirty=!0};b.prototype.transform=function(a){void 0===a&&(a=null);var e,g,h=this.worldMatrix;g=this._values[0];var c=this._values[1];e=this._values[4];var d=this._values[5],f=this._values[6],m=this._values[7],n=this._values[8];this.useGLCoords&&(m+=180);a&&this._relative?h.applyMatrix(a.worldMatrix):this===a?h.identity():h.applyMatrix(a.worldMatrix);
this.__local_matrix?(g=this.__local_matrix,h.append(g.a,g.b,g.c,g.d,g.tx,g.ty)):(e%360?(e*=b.DEG_TO_RAD,a=Math.cos(e),e=Math.sin(e)):(a=1,e=0),m||n?(m*=b.DEG_TO_RAD,n*=b.DEG_TO_RAD,h.append(Math.cos(n),Math.sin(n),-Math.sin(m),Math.cos(m),g,c),h.append(a*d,e*d,-e*f,a*f,0,0)):h.append(a*d,e*d,-e*f,a*f,g,c));this._dirty=!1};b.prototype.updateWorldMatrix=function(){if(this._dirty){var a=this.worldMatrix;a?a.identity():a=new d.math.Matrix;for(var b=this;null!=b;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,
b.rotation,b.skewX,b.skewY,0,0),b=b.parent}};b.prototype.globalToLocal=function(a,b,g){void 0===g&&(g=!1);g&&this.updateWorldMatrix();f.applyMatrix(this.worldMatrix);f.invert();f.append(1,0,0,1,a,b);return{x:f.values[6],y:f.values[7]}};b.prototype.localToGlobal=function(a,b,g){void 0===g&&(g=!1);g&&this.updateWorldMatrix();f.applyMatrix(this.worldMatrix);f.append(1,0,0,1,a,b);return{x:f.values[6],y:f.values[7]}};b.prototype.tween=function(a){return d.utils.Tween.get(this,null,null,a)};b.prototype.clearTweens=
function(){return d.utils.Tween.removeTweens(this)};b.DEG_TO_RAD=Math.PI/180;return b}();d.Transform=c})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(c){function b(){c.apply(this,arguments);this._py=this._px=this._bottom=this._right=this._left=this._top=this._height=this._width=0;this._anchorMode=b.ANCHOR_CENTER|b.ANCHOR_MIDDLE}__extends(b,c);Object.defineProperty(b.prototype,"width",{get:function(){return this._width},set:function(a){this._width!==a&&(this._width=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._height},set:function(a){this._height!==
a&&(this._height=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"top",{get:function(){return this._top},set:function(a){this._top!==a&&(this._top=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"left",{get:function(){return this._left},set:function(a){this._left!==a&&(this._left=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"right",{get:function(){return this._right},set:function(a){this._right!==
a&&(this._right=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bottom",{get:function(){return this._bottom},set:function(a){this._bottom!==a&&(this._bottom=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"px",{get:function(){return this._px},set:function(a){this._px!==a&&(this._px=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"py",{get:function(){return this._py},set:function(a){this._py!==
a&&(this._py=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"anchorMode",{get:function(){return this._anchorMode},set:function(a){this._anchorMode!==a&&(this._anchorMode=a,this.dirty=!0)},enumerable:!0,configurable:!0});b.prototype.set=function(a){this._anchorMode=a.anchorMode;this._width=a.width||0;this._height=a.height||0;this._top=a.top||0;this._left=a.left||0;this._right=a.right||0;this._bottom=a.bottom||0;this._px=a.px||0;this._px=a.py||0;this.dirty=!0};b.prototype.transform=
function(a){void 0===a&&(a=null);var e,g;g=a&&this._relative&&a instanceof b?a:d.Director.getInstance().viewRectTransform;e=this._anchorMode;(e&b.ANCHOR_LEFT)===b.ANCHOR_LEFT?this.x=this._px:(e&b.ANCHOR_RIGHT)===b.ANCHOR_RIGHT?this.x=g._width+this._px:(e&b.ANCHOR_HORIZONTAL_STRENGTH)===b.ANCHOR_HORIZONTAL_STRENGTH?(this.x=this._left,this._width=g._width-this._left-this._right):this.x=g._width/2+this._px;(e&b.ANCHOR_TOP)===b.ANCHOR_TOP?this.y=this._py:(e&b.ANCHOR_BOTTOM)===b.ANCHOR_BOTTOM?this.y=g._height+
this._py:(e&b.ANCHOR_VERTICAL_STRENGTH)===b.ANCHOR_VERTICAL_STRENGTH?(this.y=this._top,this._height=g._height-this._top-this._bottom):this.y=g._height/2+this._py;c.prototype.transform.call(this,a)};b.ANCHOR_TOP=1;b.ANCHOR_MIDDLE=16;b.ANCHOR_BOTTOM=256;b.ANCHOR_VERTICAL_STRENGTH=4096;b.ANCHOR_LEFT=65536;b.ANCHOR_CENTER=1048576;b.ANCHOR_RIGHT=16777216;b.ANCHOR_HORIZONTAL_STRENGTH=268435456;return b}(d.Transform);d.RectTransform=f})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(){function c(){}c.isTrue=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);if(!0!==b)throw Error(a);};c.isFalse=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);if(!1!==b)throw Error(a);};c.isTypeof=function(b,a,e){void 0===e&&(e=c.DEFAULT_MESSAGE);if(typeof b!==a)throw Error(e);};c.isNotTypeof=function(b,a,e){void 0===e&&(e=c.DEFAULT_MESSAGE);if(typeof b===a)throw Error(e);};c.isString=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isTypeof(b,"string",a)};c.isObject=function(b,
a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isTypeof(b,"object",a)};c.isUndefined=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isTypeof(b,"undefined",a)};c.isNotUndefined=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isNotTypeof(b,"undefined",a)};c.isFunction=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isTypeof(b,"function",a)};c.DEFAULT_MESSAGE="Assertion Fail";return c}();d.Assert=f})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(c){function b(){c.apply(this,arguments)}__extends(b,c);Object.defineProperty(b.prototype,"gameObject",{get:function(){return this._gameObject},set:function(a){this._gameObject=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"transform",{get:function(){return this._gameObject.transform},enumerable:!0,configurable:!0});b.prototype.init=function(){};b.prototype.destroy=function(){};b.prototype.loadAssets=function(a){a&&a()};b.prototype.listRequiredComponents=
function(){return[]};b.getType=function(a){var b=this.ctorMap[a];d.Assert.isNotUndefined(b,"Can't found component: "+a);return b};b.getName=function(a){return a.componentName};b.register=function(a,e){d.Assert.isObject(e);d.Assert.isString(e.name);d.Assert.isUndefined(b.configMap[e.name]);b.ctorMap[e.name]=a;b.configMap[e.name]=e;a.componentName=e.name};b.unregister=function(a){d.Assert.isString(a);d.Assert.isNotUndefined(b.configMap[a]);delete b.ctorMap[a];delete b.configMap[a]};b.create=function(a){d.Assert.isString(a);
a=b.ctorMap[a];d.Assert.isFunction(a);return new a};b.getConfig=function(a){d.Assert.isNotUndefined(a);"function"===typeof a&&(a=b.getName(a));a=b.configMap[a];d.Assert.isNotUndefined(a);return a};b.ctorMap={};b.configMap={};return b}(d.event.EventDispatcher);d.Component=f})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.prototype.collideXY=function(a,b){return!1};b.prototype.collide=function(a){return!1};return b}(d.Component);d.Collider=f})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(a,b){return a.z-b.z},c={},b=function(a){function b(e){void 0===e&&(e=!1);a.call(this);this._visible=this._active=!0;this._loadingAssets=this._touchable=this._destroyed=this._initialized=!1;this._name="GameObject";this._children=[];this._components=[];this._transform=e?new d.RectTransform:new d.Transform;this._rectTransform=e?this._transform:null;this._z=0;this._behaviours=[]}__extends(b,a);b.getById=function(a){return c[a]};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},
set:function(a){var b=this._id;this._id=a;b&&delete c[b];c[a]=this},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._name},set:function(a){this._name=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rectTransform",{get:function(){return this._rectTransform},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"children",{get:function(){return this._children.slice(0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"childCount",{get:function(){return this._children.length},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"z",{get:function(){return this._z},set:function(a){this.setZ(a,!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"active",
{get:function(){return this._active},set:function(a){var b=this._active;this._active=a;!b&&a&&(this._transform.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"destroyed",{get:function(){return this._destroyed},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"touchable",{get:function(){return this._touchable},set:function(a){this._touchable=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"collider",{get:function(){return this._collider},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"behaviours",{get:function(){return this._behaviours.slice(0)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0});b.prototype.setZ=function(a,b){void 0===b&&(b=!0);this._z!==a&&(this._z=a,b&&this._children.sort(f))};b.prototype.addChild=function(a,b){void 0===b&&(b=!0);if(-1!==this._children.indexOf(a))return!1;a._parent&&a.removeMe();a.dispatchEvent(new d.CoreEvent("beforeadd",!0));this._children.push(a);b&&this._children.sort(f);a._parent=this;a._transform.dirty=!0;a.dispatchEvent(new d.CoreEvent("add",
!0));return!0};b.prototype.removeChild=function(a){var b=this._children.indexOf(a);return-1!==b?(a.dispatchEvent(new d.CoreEvent("beforeremove",!0,null,!1)),this._children.splice(b,1),a._parent=null,a.dispatchEvent(new d.CoreEvent("remove",!0,null,!1)),!0):!1};b.prototype.getChild=function(a){var b,e,c;e=0;for(c=this._children.length;e<c;e++)if(b=this._children[e],b._name===a)return b;return null};b.prototype.getChildren=function(a){var b,e,c,d=[];e=0;for(c=this._children.length;e<c;e++)b=this._children[e],
b._name===a&&d.push(b);return d};b.prototype.removeMe=function(){var a=this._parent;return a&&a.removeChild(this)};b.prototype.eachChild=function(a){this._children.forEach(a)};b.prototype.sortChildren=function(){this._children.sort(f)};b.prototype.getPath=function(a){void 0===a&&(a="/");for(var b=[],e=this;e;)b.unshift(e.name),e=e.parent;return b.join(a)};b.prototype.contains=function(a){if(a===this)return!0;for(;a=a.parent;)if(a===this)return!0;return!1};b.prototype.getComponent=function(a){var b,
e,c;if(0>=this._components.length)return null;e=0;for(c=this._components.length;e<c;e++)if(b=this._components[e],b instanceof a)return b;return null};b.prototype.hasComponent=function(a){var b,e,c;if(0>=this._components.length)return!1;e=0;for(c=this._components.length;e<c;e++)if(b=this._components[e],b instanceof a)return!0;return!1};b.prototype.getComponents=function(a){var b,e,c,d=[];if(0>=this._components.length)return d;e=0;for(c=this._components.length;e<c;e++)b=this._components[e],b instanceof
a&&d.push(b);return d};b.prototype.addComponent=function(a){if(-1!==this._components.indexOf(a))return!1;if(!this.checkComponentDependency(a))throw Error("Can't not add, because of dependency");a._gameObject&&a._gameObject.removeComponent(a);this._components.push(a);a._gameObject=this;a instanceof d.Behaviour?this._behaviours.push(a):a instanceof d.Renderer?this._renderer=a:a instanceof d.Collider?this._collider=a:a instanceof d.Mask&&(this._mask=a);return!0};b.prototype.removeComponent=function(a){var b,
e,c,f=this._components.indexOf(a);if(-1!==f){b=0;for(e=this._components.length;b<e;b++)if(c=this._components[b],c!==a&&this.checkComponentDependency(c))throw Error("Can't not remove, because of dependency");this._components.splice(f,1);a instanceof d.Behaviour?this._behaviours.splice(this._behaviours.indexOf(a),1):a instanceof d.Renderer?this._renderer=null:a instanceof d.Collider?this._collider=null:a instanceof d.Mask&&(this._mask=null);a._gameObject=null;return!0}return!1};b.prototype.init=function(){var a,
b;if(!this._initialized&&!this._destroyed){a=0;for(b=this._components.length;a<b;a++)this._components[a].init();a=0;for(b=this._children.length;a<b;a++)this._children[a].init();this._initialized=!0}};b.prototype.destroy=function(){var a,b;if(!this._destroyed&&this._initialized){a=0;for(b=this._components.length;a<b;a++)this._components[a].destroy();a=0;for(b=this._children.length;a<b;a++)this._children[a].destroy();this._id&&delete c[this._id];this.clearAllListeners();this._destroyed=!0}};b.prototype.update=
function(){var a,b,e;if(this._active){if(0<this._behaviours.length)for(a=0,b=this._behaviours.length;a<b;a++)e=this._behaviours[a],e.enabled&&e.update();if(0<this._children.length)for(a=0,b=this._children.length;a<b;a++)this._children[a].update()}};b.prototype.visit=function(a,c,d){var f;if(this._active&&this._initialized&&!this._destroyed)for(this._transform.dirty&&(d|=b.MASK_TRANSFORM_DIRTY),(d&b.MASK_TRANSFORM_DIRTY)==b.MASK_TRANSFORM_DIRTY&&this._transform.transform(c),this._visible||(d&=~b.MASK_VISIBLE),
(d&b.MASK_VISIBLE)===b.MASK_VISIBLE&&this.render(a,d),c=0,f=this._children.length;c<f;c++)this._children[c].visit(a,this._transform,d);else(d&b.MASK_TRANSFORM_DIRTY)===b.MASK_TRANSFORM_DIRTY&&(this._transform.dirty=!0)};b.prototype.render=function(a,b){this._mask&&this._mask.render(a,b);this._renderer&&this._renderer.render(a,b)};b.prototype.getUnderPoint=function(a,b,e){void 0===e&&(e=!1);var c,d;if(!this._active||!this._visible)return null;d=this._children;if(0<d.length)for(var f=d.length-1;0<=
f;f--)if(c=d[f],c=c.getUnderPoint(a,b,e))return c;if(!e||this._touchable)if(a=this.transform.globalToLocal(a,b),this.testHit(a.x,a.y))return this;return null};b.prototype.testHit=function(a,b){var e=this._collider;return e&&e.collideXY(a,b)};b.prototype.loadAssets=function(a){var b,e,c,d;if(!this._loadingAssets)if(c=this._components.length+this._children.length,0===c)a&&a();else{b=0;for(e=this._components.length;b<e;b++)d=this._components[b],d.loadAssets(function(){0===--c&&a&&a()});b=0;for(e=this._children.length;b<
e;b++)this._children[b].loadAssets(function(){0===--c&&a&&a()})}};b.prototype.query=function(a,c){var f,k,p,m,n;f=-1!==a.indexOf("[")&&-1!==a.indexOf("]");(p=-1!==a.indexOf(":"))&&f?(f=b.QUERY_FULL_REGEX.exec(a),k=f[1],p=f[2],m=f[3],n=f[4]):p&&!f?(f=b.QUERY_COMP_REGEX.exec(a),k=f[1],p=f[2],m=f[3]):!p&&f?(f=b.QUERY_OBJ_ATTR_REGEX.exec(a),p=f[1],n=f[2]):p=a;c&&(c.compExpr=k,c.objExpr=p,c.compName=m,c.attrName=n);if(p){f=this;k=p.split("/");p=0;for(var l=k.length;p<l&&k[p]&&(f=f.getChild(k[p]),f);p++);
}else f=this;f&&m&&(f=f.getComponent(d.Component.getType(m)));f&&c&&(c.target=f);f&&n&&(f=f[n]);return f};b.prototype.checkComponentDependency=function(a){for(var b=a.listRequiredComponents(),e=!0,c=0,d=b.length;c<d;c++)a=b[c],e=e&&this.hasComponent(a);return e};b.MASK_TRANSFORM_DIRTY=1;b.MASK_VISIBLE=16;b.QUERY_FULL_REGEX=/((.*?):(.*?))\[(.*?)\]$/;b.QUERY_COMP_REGEX=/((.*?):(.*?))$/;b.QUERY_OBJ_ATTR_REGEX=/(.*?)\[(.*?)\]$/;return b}(d.event.EventDispatcher);d.GameObject=b})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(c){function b(){c.call(this);this.name=this.id=b.ID;this._rootTransform=new d.Transform;this._viewRectTransform=new d.RectTransform;this._viewRectTransform.anchorMode=d.RectTransform.ANCHOR_TOP|d.RectTransform.ANCHOR_LEFT;this._viewRectTransform.width=d.Director.getInstance().renderer.viewport.width;this._viewRectTransform.height=d.Director.getInstance().renderer.viewport.height;this.init()}__extends(b,c);Object.defineProperty(b.prototype,"viewRectTransform",{get:function(){return this._viewRectTransform},
enumerable:!0,configurable:!0});b.prototype.visitStage=function(a){c.prototype.visit.call(this,a,this._rootTransform,d.GameObject.MASK_VISIBLE)};b.ID="WOZLLAStage";return b}(d.GameObject);d.Stage=f})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(){function c(){}c.update=function(b){var a=Date.now()+this._nowIncrease;this.now?(this.delta=(a-this.now)*b,this._nowIncrease+=this.delta*(b-1),this.now+=this.delta,this.measuredFPS=1E3/this.delta):(this.now=a,this.delta=1E3/60)};c.reset=function(){this.measuredFPS=this._nowIncrease=this.now=this.delta=0};c.delta=0;c.now=0;c.measuredFPS=0;c._nowIncrease=0;return c}();d.Time=f})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(){function c(){this._scheduleCount=0;this._schedules={};this._runScheduleCount=0}c.getInstance=function(){c.instance||(c.instance=new c);return c.instance};c.prototype.runSchedule=function(){var b,a;this._runScheduleCount=0;for(b in this._schedules)a=this._schedules[b],a.isFrame&&!a.paused?(a.frame--,0>a.frame&&(delete this._schedules[b],a.task.apply(a,a.args))):a.isTime&&!a.paused?(a.time-=d.Time.delta,0>a.time&&(delete this._schedules[b],a.task.apply(a,a.args))):a.isInterval&&
!a.paused?(a.time-=d.Time.delta,0>a.time&&(a.task.apply(a,a.args),a.time+=a.intervalTime)):a.isLoop&&!a.paused&&a.task.apply(a,a.args),this._runScheduleCount++};c.prototype.removeSchedule=function(b){delete this._schedules[b]};c.prototype.scheduleLoop=function(b,a){var e="Schedule_"+this._scheduleCount++;this._schedules[e]={task:b,args:a,isLoop:!0};return e};c.prototype.scheduleFrame=function(b,a,e){void 0===a&&(a=0);var c="Schedule_"+this._scheduleCount++;this._schedules[c]={task:b,frame:a,args:e,
isFrame:!0};return c};c.prototype.scheduleInterval=function(b,a,e){void 0===a&&(a=0);var c="Schedule_"+this._scheduleCount++;this._schedules[c]={task:b,intervalTime:a,time:a,args:e,isInterval:!0};return c};c.prototype.scheduleTime=function(b,a,e){void 0===a&&(a=0);var c="Schedule_"+this._scheduleCount++;this._schedules[c]={task:b,time:a||0,args:e,isTime:!0};return c};c.prototype.resumeSchedule=function(b){this._schedules[b].paused=!1};c.prototype.pauseSchedule=function(b){this._schedules[b].paused=
!0};return c}();d.Scheduler=f})(WOZLLA||(WOZLLA={}));
(function(d){function f(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var c=function(a){function b(e){a.call(this,e.type,e.bubbles,e.data);this.touchMoveDetection=!1;this.x=e.x;this.y=e.y;this.touch=e.touch;this.touchMoveDetection=e.touchMoveDetection;this.gesture=e.gesture;this.identifier=e.identifier}__extends(b,a);b.prototype.setTouchMoveDetection=function(a){this.touchMoveDetection=a};return b}(d.event.Event);d.GestureEvent=c;var b=function(){function a(b,
c){void 0===c&&(c=1);this.enabled=!0;this.canvasOffset=this.canvas=null;this.channelMap={};var h=this,s=window.navigator;h.canvas=b;h.canvasOffset=f(b);h.touchScale=c;Hammer(s.isCocoonJS?document:b,{transform:!1,doubletap:!1,hold:!1,rotate:!1,pinch:!1}).on(a.enabledGestures||"touch release tap swipe drag dragstart dragend",function(a){("release"===a.type||h.enabled)&&d.Scheduler.getInstance().scheduleFrame(function(){h.onGestureEvent(a)})})}a.setEanbledGestures=function(a){this.enabledGestures=a};
a.prototype.onGestureEvent=function(a){var b,c,f,k,p,m,n,l,q=a.type,u=d.Director.getInstance().stage,v=this.touchScale||1;if(n=a.gesture.srcEvent.changedTouches)for(k=n.length,f=0;f<k;f++)c=n[f],p=parseInt(c.identifier),b=c.pageX-this.canvasOffset.x,c=c.pageY-this.canvasOffset.y,b*=v,c*=v,"touch"===q&&(l=u.getUnderPoint(b,c,!0))&&(this.channelMap[p]=this.createDispatchChanel(l),delete this.channelMap[p-10]),(m=this.channelMap[p])&&m.onGestureEvent(a,l,b,c,p);else p=1,b=a.gesture.srcEvent.pageX-this.canvasOffset.x,
c=a.gesture.srcEvent.pageY-this.canvasOffset.y,b*=v,c*=v,"touch"===q&&((l=u.getUnderPoint(b,c,!0))?this.channelMap[p]=this.createDispatchChanel(l):delete this.channelMap[p]),(m=this.channelMap[p])&&m.onGestureEvent(a,l,b,c,p)};a.prototype.createDispatchChanel=function(a){var b=!0;return{onGestureEvent:function(h,f,k,p,m){var n=h.type,l=d.Director.getInstance().stage;switch(n){case "drag":if(!b){f=a;break}case "tap":case "release":f=l.getUnderPoint(k,p,!0)}if("tap"!==n||a===f)h=new c({x:k,y:p,type:n,
bubbles:!0,touch:f,gesture:h.gesture,identifier:m,touchMoveDetection:!1}),a.dispatchEvent(h),b=h.touchMoveDetection}}};return a}();d.Touch=b})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(){}b.getGLContext=function(a,b){var c,h=b||{},d={alpha:!0,antialias:!0,premultipliedAlpha:!1,stencil:!0},f;for(f in d)"undefined"===typeof h[f]&&(h[f]=d[f]);b=h;try{c=a.getContext("experimental-webgl",b)}catch(p){try{c=a.getContext("webgl",b)}catch(m){}}return c};b.compileShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log(a.getShaderInfoLog(b)),null)};
b.compileProgram=function(a,e,c){e=b.compileShader(a,a.VERTEX_SHADER,e);c=b.compileShader(a,a.FRAGMENT_SHADER,c);var h=a.createProgram();a.attachShader(h,e);a.attachShader(h,c);a.linkProgram(h);a.getProgramParameter(h,a.LINK_STATUS)||console.log("Could not initialise program");return{program:h,vertexShader:e,fragmentShader:c}};return b}();d.WebGLUtils=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){d=d.renderer||(d.renderer={});(d.ILayerManager||(d.ILayerManager={})).DEFAULT="default"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(){this._layerIndexMap={};this._sortedLayers=[];this.define(d.ILayerManager.DEFAULT,0)}b.prototype.define=function(a,b){var c=this;if(this._layerIndexMap[a])throw Error("Layer has been defined: "+a);this._layerIndexMap[a]=b;this._sortedLayers.push(a);this._sortedLayers.sort(function(a,b){return c.getZIndex(a)-c.getZIndex(b)})};b.prototype.undefine=function(a){this._sortedLayers.splice(this._sortedLayers.indexOf(a),1);delete this._layerIndexMap[a]};
b.prototype.getZIndex=function(a){return this._layerIndexMap[a]};b.prototype.getSortedLayers=function(){return this._sortedLayers.slice(0)};b.prototype._getSortedLayers=function(){return this._sortedLayers};return b}();d.LayerManager=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b){this._srcFactor=a;this._distFactor=b}Object.defineProperty(b.prototype,"srcFactor",{get:function(){return this._srcFactor},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"distFactor",{get:function(){return this._distFactor},enumerable:!0,configurable:!0});b.prototype.applyBlend=function(a){a.blendFunc(this._srcFactor,this._distFactor)};b.NORMAL=1;b.ADD=2;b.MULTIPLY=3;b.SCREEN=4;return b}();d.BlendType=c})(d.renderer||(d.renderer=
{}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b,c){this._id=a;this._shaderProgramId=b;this._blendType=c}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"shaderProgramId",{get:function(){return this._shaderProgramId},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"blendType",{get:function(){return this._blendType},enumerable:!0,configurable:!0});b.prototype.equals=function(a){return a.blendType===
this._blendType&&a.shaderProgramId===this._shaderProgramId};return b}();d.Material=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IMaterial||(d.IMaterial={})).DEFAULT="Builtin_default"})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IShaderProgram||(d.IShaderProgram={})).V2T2C1A1="Builtin_V2T2C1A1"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(){this._materialMap={};this._materialMap[d.IMaterial.DEFAULT]=this.createMaterial(d.IMaterial.DEFAULT,d.IShaderProgram.V2T2C1A1,d.BlendType.NORMAL)}b.prototype.createMaterial=function(a,b,c){b=new d.Material(a,b,c);return this._materialMap[a]=b};b.prototype.getMaterial=function(a){return this._materialMap[a]};b.prototype.deleteMaterial=function(a){delete this._materialMap[a.id]};b.prototype.clear=function(){this._materialMap={}};return b}();d.MaterialManager=
c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b,c){this._id=a;this._vertexShader=b;this._fragmentShader=c}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vertexShader",{get:function(){return this._vertexShader},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fragmentShader",{get:function(){return this._fragmentShader},enumerable:!0,configurable:!0});b.prototype.useProgram=function(a){a.useProgram(this._id)};
b.prototype.syncUniforms=function(a,b){};return b}();d.ShaderProgram=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){(function(c){var b=function(a){function b(e,c,d){a.call(this,e,c,d);this._locations={initialized:!1}}__extends(b,a);b.prototype.useProgram=function(b){a.prototype.useProgram.call(this,b);this._locations.initialized||(this._initLocaitions(b),this._locations.initialized=!0);this._activate(b)};b.prototype.syncUniforms=function(a,b){a.uniform2f(this._locations.projectionVector,b.projection.x,b.projection.y)};b.prototype._initLocaitions=function(a){var b=this._id;this._locations.uSampler=
a.getUniformLocation(b,"uSampler");this._locations.projectionVector=a.getUniformLocation(b,"projectionVector");this._locations.offsetVector=a.getUniformLocation(b,"offsetVector");this._locations.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this._locations.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this._locations.aColor=a.getAttribLocation(b,"aColor")};b.prototype._activate=function(a){a.activeTexture(a.TEXTURE0);var b=4*f.Quad.V2T2C1A1.strade;a.vertexAttribPointer(this._locations.aVertexPosition,
2,a.FLOAT,!1,b,0);a.vertexAttribPointer(this._locations.aTextureCoord,2,a.FLOAT,!1,b,8);a.vertexAttribPointer(this._locations.aColor,2,a.FLOAT,!1,b,16);a.enableVertexAttribArray(this._locations.aVertexPosition);a.enableVertexAttribArray(this._locations.aTextureCoord);a.enableVertexAttribArray(this._locations.aColor)};b.VERTEX_SOURCE="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\ngl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\nvTextureCoord = aTextureCoord;\nvec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;\nvColor = vec4(color * aColor.x, aColor.x);\n}";
b.FRAGMENT_SOURCE="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";return b}(d.renderer.ShaderProgram);c.V2T2C1A1=b})(f.shader||(f.shader={}))})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a){this._gl=a;this._shaderMap={};this._shaderMap[d.IShaderProgram.V2T2C1A1]=this.createShaderProgram(d.shader.V2T2C1A1.VERTEX_SOURCE,d.shader.V2T2C1A1.FRAGMENT_SOURCE,d.shader.V2T2C1A1)}b.prototype.getShaderProgram=function(a){return this._shaderMap[a]};b.prototype.createShaderProgram=function(a,b,c){void 0===c&&(c=d.ShaderProgram);a=d.WebGLUtils.compileProgram(this._gl,a,b);c=new c(a.program,a.vertexShader,a.fragmentShader);return this._shaderMap[c.id]=
c};b.prototype.deleteShaderProgram=function(a){this._gl.deleteProgram(a.id);this._gl.deleteShader(a.vertexShader);this._gl.deleteShader(a.fragmentShader);delete this._shaderMap[a.id]};b.prototype.clear=function(){for(var a in this._shaderMap)this.deleteShaderProgram(this._shaderMap[a])};return b}();d.ShaderManager=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b){this._id=a;this._descriptor=b}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0});b.prototype.bind=function(a){a.bindTexture(a.TEXTURE_2D,this._id)};return b}();d.Texture=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){function c(a){return 0===(a&a-1)}var b=function(){function a(a){this._gl=a;this._textureMap={}}a.prototype.getTexture=function(a){return this._textureMap[a]};a.prototype.generateTexture=function(a,b){var h,s;h=this._gl;var k=b||h.createTexture();h.bindTexture(h.TEXTURE_2D,k);h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR);c(a.width)&&c(a.height)?(h.texParameteri(h.TEXTURE_2D,
h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT)):(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE));switch(a.textureFormat){case 0:case 1:h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,a.source);break;case 2:switch(a.pixelFormat){case 5:s=d.WebGLExtension.getExtension(h,d.WebGLExtension.PVRTC);s=s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;break;case 4:s=d.WebGLExtension.getExtension(h,
d.WebGLExtension.PVRTC);s=s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;default:throw Error("Unsupported pixel format: "+a.pixelFormat);}h.compressedTexImage2D(h.TEXTURE_2D,0,s,a.width,a.height,0,a.source);break;default:throw Error("Unsupported texture format: "+a.textureFormat);}h=new d.Texture(k,a);return this._textureMap[k]=h};a.prototype.updateTexture=function(a){this.generateTexture(a.descriptor,a.id)};a.prototype.deleteTexture=function(a){this._gl.deleteTexture(a.id);delete this._textureMap[a.id]};
a.prototype.clear=function(){for(var a in this._textureMap)this.deleteTexture(this._textureMap[a])};return a}();d.TextureManager=b})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){function c(a,b){return a.globalZ===b.globalZ?a._addIndex-b._addIndex:a.globalZ-b.globalZ}var b=function(){function b(a,c){this._commandQueueMap={};this._blendModes={};this._uniforms={};this._gl=a;this._viewport=c;this._blendModes[d.BlendType.NORMAL]=new d.BlendType(a.ONE,a.ONE_MINUS_SRC_ALPHA);this._blendModes[d.BlendType.ADD]=new d.BlendType(a.SRC_ALPHA,a.DST_ALPHA);this._blendModes[d.BlendType.MULTIPLY]=new d.BlendType(a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA);this._blendModes[d.BlendType.SCREEN]=
new d.BlendType(a.SRC_ALPHA,a.ONE);this._layerManager=new d.LayerManager;this._materialManager=new d.MaterialManager;this._shaderManager=new d.ShaderManager(a);this._textureManager=new d.TextureManager(a);this._quadBatch=new e(a);this._uniforms.projection={x:c.width/2,y:-c.height/2};a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.enable(a.BLEND)}Object.defineProperty(b.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"materialManager",{get:function(){return this._materialManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"shaderManager",{get:function(){return this._shaderManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"textureManager",{get:function(){return this._textureManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"gl",{get:function(){return this._gl},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"viewport",{get:function(){return this._viewport},
enumerable:!0,configurable:!0});b.prototype.addCommand=function(b){var e=b.layer,c=this._commandQueueMap[e];c||(c=this._commandQueueMap[e]=new a(e));c.add(b)};b.prototype.render=function(){var a=this,b,e,c,g=this._gl;g.viewport(0,0,this._viewport.width,this._viewport.height);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);this._eachCommand(function(g){b?b instanceof d.CustomCommand?a.flush():g instanceof d.CustomCommand?a.flush():g.materialId!==c.id?a.flush():g.texture!==e&&a.flush():a.flush();
g instanceof d.CustomCommand?g.execute(a):(a._quadBatch.canFill(g.quad)||a.flush(),a._quadBatch.fillQuad(g.quad));a._usingMaterial=c=a._materialManager.getMaterial(g.materialId);a._usingTexture=e=g.texture;b=g});b&&(this.flush(),this._clearCommands(),this._usingMaterial=this._usingTexture=null)};b.prototype.flush=function(){var a,b;this._usingMaterial&&(a=this._gl,b=this._shaderManager.getShaderProgram(this._usingMaterial.shaderProgramId),b.useProgram(a),b.syncUniforms(a,this._uniforms),this._blendModes[this._usingMaterial.blendType].applyBlend(a),
this._usingTexture&&this._usingTexture.bind(a),this._quadBatch.flush(a))};b.prototype._clearCommands=function(){var a=this._commandQueueMap,b;for(b in a)a[b].clear()};b.prototype._eachCommand=function(a){var b,e,c,d,g,f,q,u=this._commandQueueMap,v=this._layerManager._getSortedLayers();b=0;for(e=v.length;b<e;b++)if(c=v[b],g=u[c]){f=g.negativeZQueue;if(0<f.length)for(c=0,d=f.length;c<d;c++)q=f[c],a(q);f=g.zeroZQueue;if(0<f.length)for(c=0,d=f.length;c<d;c++)q=f[c],a(q);f=g.positiveZQueue;if(0<f.length)for(c=
0,d=f.length;c<d;c++)q=f[c],a(q)}};b.MAX_QUAD_SIZE=500;return b}();d.Renderer=b;var a=function(){function a(b){this._addIndex=0;this.negativeZQueue=[];this.zeroZQueue=[];this.positiveZQueue=[];this.layer=b}a.prototype.add=function(a){a._addIndex=this._addIndex++;0===a.globalZ?this.zeroZQueue.push(a):0<a.globalZ?this.positiveZQueue.push(a):this.negativeZQueue.push(a)};a.prototype.clear=function(){var a,b,e;a=0;for(b=this.negativeZQueue.length;a<b;a++)e=this.negativeZQueue[a],e.isPoolable&&e.release();
a=0;for(b=this.zeroZQueue.length;a<b;a++)e=this.zeroZQueue[a],e.isPoolable&&e.release();a=0;for(b=this.positiveZQueue.length;a<b;a++)e=this.positiveZQueue[a],e.isPoolable&&e.release();this.negativeZQueue.length=0;this.zeroZQueue.length=0;this._addIndex=this.positiveZQueue.length=0};a.prototype.sort=function(){this.positiveZQueue.sort(c);this.negativeZQueue.sort(c)};return a}(),e=function(){function a(e){this._size=b.MAX_QUAD_SIZE;this._curBatchSize=this._curVertexIndex=0;this._gl=e;this._initBuffers()}
Object.defineProperty(a.prototype,"vertexBuffer",{get:function(){return this._vertexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});a.prototype.canFill=function(a){return this._curVertexIndex<this._size};a.prototype.fillQuad=function(a){var b,e,c=this._vertices;b=this._curVertexIndex;if(a.count===a.renderCount)c.set(a.storage,b);else{var d=0,g=a.renderOffset*a.type.size,f=a.renderCount*
a.type.size;for(e=a.storage;d<f;g++,d++)c[b+d]=e[g]}this._curVertexIndex+=a.renderCount*a.type.size;this._curBatchSize+=a.renderCount};a.prototype.flush=function(a){0!==this._curBatchSize&&(a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this._vertices,a.DYNAMIC_DRAW),a.drawElements(a.TRIANGLES,6*this._curBatchSize,a.UNSIGNED_SHORT,0),this._curBatchSize=this._curVertexIndex=0)};a.prototype._initBuffers=function(){var a,b,e=this._gl,c=6*this._size;this._vertices=new Float32Array(24*
this._size);this._indices=new Uint16Array(c);for(b=a=0;a<c;a+=6,b+=4)this._indices[a]=b,this._indices[a+1]=b+1,this._indices[a+2]=b+2,this._indices[a+3]=b,this._indices[a+4]=b+2,this._indices[a+5]=b+3;this._vertexBuffer=e.createBuffer();this._indexBuffer=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer);e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW);e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)};return a}()})(d.renderer||
(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){var f=window.requestAnimationFrame||window.msRequestAnimationFrame||function(b,a){void 0===a&&(a=1E3/62);setTimeout(b,a)},c=function(){function b(a,e){void 0===e&&(e={});this._paused=this._runing=!1;this._timeScale=1;b.instance=this;this._view="string"===typeof a?document.getElementById("canvas"):a;this._scheduler=d.Scheduler.getInstance();this._assetLoader=d.assets.AssetLoader.getInstance();this._touch=new d.Touch(a,e.touchScale);this._renderer=new d.renderer.Renderer(d.renderer.WebGLUtils.getGLContext(a,
e.renderer),{x:0,y:0,width:a.width,height:a.height});this._stage=new d.Stage}b.getInstance=function(){return b.instance};Object.defineProperty(b.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"touch",{get:function(){return this._touch},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scheduler",{get:function(){return this._scheduler},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"assetLoader",{get:function(){return this._assetLoader},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"viewRectTransform",{get:function(){return this._stage.viewRectTransform},enumerable:!0,configurable:!0});b.prototype.start=function(){var a=this,b;this._runing||(this._runing=!0,d.Time.reset(),b=function(){a._runing&&
f(b);a.runStep()},f(b))};b.prototype.stop=function(){this._runing=!1};b.prototype.runStep=function(a){void 0===a&&(a=this._timeScale);d.Time.update(a);this._stage.update();this._stage.visitStage(this._renderer);this._renderer.render();this._scheduler.runSchedule();d.utils.Tween.tick(d.Time.delta)};return b}();d.Director=c})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(a){function e(b){a.call(this,b)}__extends(e,a);Object.defineProperty(e.prototype,"glTexture",{get:function(){return this._glTexture},enumerable:!0,configurable:!0});e.prototype._generateTexture=function(a){var e=d.Director.getInstance().renderer;if(!e)throw Error("Director not initialized");this._glTexture=e.textureManager.generateTexture(new b(a))};e.prototype._generatePVRTexture=function(a){throw Error("Unsupported now");};return e}(f.Asset);f.GLTextureAsset=
c;var b=function(){function a(a){this._source=a;this._pixelFormat=this._textureFormat=0}Object.defineProperty(a.prototype,"width",{get:function(){return this._source.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._source.height},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureFormat",{get:function(){return this._textureFormat},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!0,configurable:!0});return a}();f.HTMLImageDescriptor=b;c=function(){function a(a,b){this._source=a;this._textureFormat=2;this._pixelFormat=b}Object.defineProperty(a.prototype,"width",{get:function(){return this._source.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._source.height},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureFormat",{get:function(){return this._textureFormat},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!0,configurable:!0});return a}();f.PVRDescriptor=c})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){function c(a,b){for(var e in b)"undefined"===typeof a[e]&&(a[e]=b[e]);return a}var b={json:function(a){return JSON.parse(a.responseText)},arraybuffer:function(a){return a.response}},a=function(){},e=function(){function e(){}e.request=function(d){void 0===d&&(d={});var f,k;d=c(d,{url:"",async:!0,method:"GET",contentType:"text",responseType:"text/plain",timeout:3E4,success:a,error:a});f=new XMLHttpRequest;f.responseType=d.responseType;f.onreadystatechange=function(){var e;
4===f.readyState&&(f.onreadystatechange=a,clearTimeout(k),e=b[d.contentType]||function(){return f.responseText},d.success(e(f)))};f.open(d.method,d.url,d.async);k=setTimeout(function(){f.onreadystatechange=a;f.abort();d.error({code:e.ERROR_TIMEOUT,message:"request timeout"})},d.timeout);f.send()};e.ERROR_TIMEOUT=1;e.ERROR_SERVER=2;return e}();d.Ajax=e})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){function c(a){var b=a,d;if(a&&"object"===typeof a)for(d in b="[object Array]"===Object.prototype.toString.call(a)?[]:{},a)b[d]=c(a[d]);return b}var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.cloneData=function(){return this._data?c(this._data):this._data};b.prototype.load=function(a,b){var e=this;d.utils.Ajax.request({url:this.src,contentType:"json",success:function(b){e._data=b;a()},error:function(a){b(a)}})};b.prototype.unload=function(){this._data=
null;a.prototype.unload.call(this)};return b}(f.Asset);f.JSONAsset=b})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){(function(c){var b=function(){function a(a){this.loading=!1;this.proxyTarget=a}a.prototype.setAssetSrc=function(a){this.newAssetSrc=a};a.prototype.loadAsset=function(a){var b=this;this.checkDirty()?this.loading||(this.loading=!0,this.asset&&this.asset.release(),this.asset=null,this.doLoad(function(c){c?c.src!==b.newAssetSrc?(c.retain(),c.release(),b.asset=null):(b.asset=c,b.asset.retain()):(b.asset=null,a&&a());b.loading=!1;b.proxyTarget.onAssetLoaded(c);a&&a()})):a&&a()};
a.prototype.onDestroy=function(){this.asset&&this.asset.release();this.asset=null};a.prototype.checkDirty=function(){return this.asset?this.newAssetSrc!==this.asset.src:!!this.newAssetSrc};a.prototype.doLoad=function(a){a(null)};return a}();c.AssetProxy=b})(d.proxy||(d.proxy={}))})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){(function(c){var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.getSprite=function(a){return this.asset?this.asset.getSprite(a):null};b.prototype.getFrameLength=function(){return this.asset?this.asset.getFrameLength():0};b.prototype.doLoad=function(a){var b=this.newAssetSrc;b?d.AssetLoader.getInstance().load(b,d.SpriteAtlas,function(){a(d.AssetLoader.getInstance().getAsset(b))}):a(null)};return b}(c.AssetProxy);c.SpriteAtlasProxy=b})(d.proxy||
(d.proxy={}))})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b,c){this._spriteAtlas=a;this._frame=b;this._name=c}Object.defineProperty(b.prototype,"spriteAtlas",{get:function(){return this._spriteAtlas},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});return b}();d.Sprite=c})(d.assets||(d.assets={}))})(WOZLLA||
(WOZLLA={}));
(function(d){(function(f){function c(a){var b=a.lastIndexOf("/");return-1!==b?a.substr(b+1,a.length):a}var b=/(\.png|\.jpg)$/i,a=function(a){function g(b){a.call(this,b);this._spriteCache={}}__extends(g,a);Object.defineProperty(g.prototype,"imageSrc",{get:function(){return this._imageSrc},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"metaSrc",{get:function(){return this._metaSrc},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"sourceImage",{get:function(){return this._sourceImage},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"spriteData",{get:function(){return this._spriteData},enumerable:!0,configurable:!0});g.prototype.getFrameLength=function(){var a;if(!this._spriteData)return 1;a=this._spriteData.frames;if("[object Array]"===Object.prototype.toString.call(a))return a.length;if(void 0==this._frameLengthCache){this._frameLengthCache=0;for(var b in a)this._frameLengthCache++}return this._frameLengthCache};g.prototype.getSprite=function(a){var b;return void 0==a?this._entireSprite:
(b=this._spriteCache[a])?b:this._spriteData?(b=this._spriteData.frames[a])?("undefined"===typeof b.frame.width&&(b.frame.width=b.frame.w,b.frame.height=b.frame.h),b=new f.Sprite(this,{x:b.frame.x,y:b.frame.y,width:b.frame.width,height:b.frame.height,offsetX:Math.ceil(b.spriteSourceSize?b.spriteSourceSize.x||0:0),offsetY:Math.ceil(b.spriteSourceSize?b.spriteSourceSize.y||0:0)},a),this._spriteCache[a]=b):null:null};g.prototype.load=function(a,e){var c=this;b.test(this.src)?(this._imageSrc=this.src,
this._loadImage(function(b,d){b?e&&e(b):(c._generateTexture(d),c._sourceImage=d,c._entireSprite=new f.Sprite(c,{x:0,y:0,width:d.width,height:d.height}),a&&a())})):(this._metaSrc=this.src,this._loadSpriteAtlas(function(b,d,g){b?e&&e(b):(c._sourceImage=d,c._generateTexture(d),c._entireSprite=new f.Sprite(c,{x:0,y:0,width:d.width,height:d.height}),c._spriteData=g,a&&a())}))};g.prototype._loadImage=function(a){var b=this,e=new Image;e.src=this._imageSrc;e.onload=function(){a&&a(null,e)};e.onerror=function(){a("Fail to load image: "+
b._imageSrc)}};g.prototype._loadSpriteAtlas=function(a){var b=this;d.utils.Ajax.request({url:b._metaSrc,contentType:"json",success:function(e){var d=e.meta.image,g=c(b._metaSrc);b._imageSrc=b._metaSrc.replace(new RegExp(g+"$"),d);b._loadImage(function(b,c){b?a&&a(b):a&&a(null,c,e)})},error:function(b){a("Fail to load sprite: "+this._metaSrc+", "+b.code+":"+b.message)}})};return g}(f.GLTextureAsset);f.SpriteAtlas=a})(d.assets||(d.assets={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d}Object.defineProperty(b.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bottom",{get:function(){return this.y+
this.height},enumerable:!0,configurable:!0});b.prototype.containsXY=function(a,b){return this.x<=a&&this.right>a&&this.y<=b&&this.bottom>b};b.prototype.toString=function(){return"Rectangle["+this.x+","+this.y+","+this.width+","+this.height+"]"};return b}();d.Rectangle=c})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.collideXY=function(a,b){return this.region&&this.region.containsXY(a,b)};a.prototype.collide=function(a){return!1};return a}(d.Collider);f.CircleCollider=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.collideXY=function(a,b){return!0};a.prototype.collide=function(a){return!1};return a}(d.Collider);f.MaskCollider=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.fromSpriteRenderer=function(a){var b=new d.component.RectCollider,c=a.sprite.frame;a=a.spriteOffset;b.region=new d.math.Rectangle(0-c.width*a.x,0-c.height*a.y,c.width,c.height);return b};a.prototype.collideXY=function(a,b){return this.region&&this.region.containsXY(a,b)};a.prototype.collide=function(a){return!1};return a}(d.Collider);f.RectCollider=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA=
{}));(function(d){(function(d){var c=function(){function b(a,b){this._globalZ=a;this._layer=b}Object.defineProperty(b.prototype,"globalZ",{get:function(){return this._globalZ},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});return b}();d.RenderCommandBase=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(b){function a(a,c){b.call(this,a,c)}__extends(a,b);a.prototype.execute=function(a){throw Error("abstract method");};return a}(d.RenderCommandBase);d.CustomCommand=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(e){function g(){e.apply(this,arguments);this.reverse=!1;this._endGlobalZ=this._startGlobalZ=0;this._maskLayer=d.renderer.ILayerManager.DEFAULT}__extends(g,e);g.prototype.setMaskRange=function(a,b,e){void 0===e&&(e=d.renderer.ILayerManager.DEFAULT);this._startGlobalZ=a;this._endGlobalZ=b;this._maskLayer=e};g.prototype.render=function(e,d){e.addCommand(new c(this._startGlobalZ,this._maskLayer));this.renderMask(e,d);e.addCommand(new b(this._startGlobalZ,this._maskLayer,this.reverse));
e.addCommand(new a(this._endGlobalZ,this._maskLayer))};g.prototype.renderMask=function(a,b){};return g}(d.Component);d.Mask=f;var c=function(a){function b(c,d){a.call(this,c,d)}__extends(b,a);b.prototype.execute=function(a){a=a.gl;a.enable(a.STENCIL_TEST);a.clear(a.STENCIL_BUFFER_BIT);a.colorMask(!1,!1,!1,!1);a.stencilFunc(a.ALWAYS,1,0);a.stencilOp(a.KEEP,a.KEEP,a.REPLACE)};return b}(d.renderer.CustomCommand),b=function(a){function b(c,d,g){a.call(this,c,d);this.reverse=g}__extends(b,a);b.prototype.execute=
function(a){a=a.gl;a.colorMask(!0,!0,!0,!0);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.stencilFunc(this.reverse?a.NOTEQUAL:a.EQUAL,1,255)};return b}(d.renderer.CustomCommand),a=function(a){function b(c,d){a.call(this,c,d)}__extends(b,a);b.prototype.execute=function(a){a.gl.disable(a.gl.STENCIL_TEST)};return b}(d.renderer.CustomCommand)})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.prototype.render=function(a,b){};return b}(d.Component);d.Renderer=f})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function a(a){this._info=a}Object.defineProperty(a.prototype,"size",{get:function(){return 4*this.strade},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"strade",{get:function(){return this._info[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexIndex",{get:function(){return this._info[1]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"texCoordIndex",{get:function(){return this._info[2]},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"alphaIndex",{get:function(){return this._info[3]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorIndex",{get:function(){return this._info[4]},enumerable:!0,configurable:!0});return a}();d.QuadType=c;var b=function(){function a(b,c){void 0===c&&(c=a.V2T2C1A1);this._count=b;this._type=c;this._storage=Array(c.size*b);this._renderOffset=0;this._renderCount=b}Object.defineProperty(a.prototype,"storage",{get:function(){return this._storage},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderOffset",{get:function(){return this._renderOffset},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderCount",{get:function(){return this._renderCount},enumerable:!0,configurable:!0});a.prototype.setRenderRange=
function(a,b){this._renderOffset=a;this._renderCount=b};a.prototype.setVertices=function(a,b,c,d,f,p,m,n,l){void 0===l&&(l=0);var q=this._type.strade;l=this._type.size*l+this._type.vertexIndex;this._storage[0+l]=a;this._storage[1+l]=b;this._storage[0+l+1*q]=c;this._storage[1+l+1*q]=d;this._storage[0+l+2*q]=f;this._storage[1+l+2*q]=p;this._storage[0+l+3*q]=m;this._storage[1+l+3*q]=n};a.prototype.setTexCoords=function(a,b,c,d,f,p,m,n,l){void 0===l&&(l=0);var q=this._type.strade;l=this._type.size*l+
this._type.texCoordIndex;this._storage[0+l]=a;this._storage[1+l]=b;this._storage[0+l+1*q]=c;this._storage[1+l+1*q]=d;this._storage[0+l+2*q]=f;this._storage[1+l+2*q]=p;this._storage[0+l+3*q]=m;this._storage[1+l+3*q]=n};a.prototype.setAlpha=function(a,b){void 0===b&&(b=0);var c=this._type.strade,d=this._type.size*b+this._type.alphaIndex;this._storage[d]=a;this._storage[d+1*c]=a;this._storage[d+2*c]=a;this._storage[d+3*c]=a};a.prototype.setColor=function(a,b){void 0===b&&(b=0);var c=this._type.strade,
d=this._type.size*b+this._type.colorIndex;this._storage[d]=a;this._storage[d+1*c]=a;this._storage[d+2*c]=a;this._storage[d+3*c]=a};a.V2T2C1A1=new c([6,0,2,4,5]);return a}();d.Quad=b})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b){this._minCount=a;this._factory=b;this._pool=[];for(var c=0;c<this._minCount;c++)this._pool.push(this._factory())}b.prototype.retain=function(){var a=this._pool.shift();return a?a:this._factory()};b.prototype.release=function(a){-1===this._pool.indexOf(a)&&this._pool.push(a)};return b}();d.ObjectPool=c})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c,b=function(a){function b(e,c){a.call(this,e,c);this.isPoolable=!0}__extends(b,a);b.init=function(a,b,e,d,f){var m=c.retain();m.initWith(a,b,e,d,f);return m};Object.defineProperty(b.prototype,"texture",{get:function(){return this._texture},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"materialId",{get:function(){return this._materialId},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"quad",{get:function(){return this._quad},enumerable:!0,
configurable:!0});b.prototype.initWith=function(a,b,e,c,d){this._globalZ=a;this._layer=b;this._texture=e;this._materialId=c;this._quad=d};b.prototype.release=function(){c.release(this)};return b}(f.RenderCommandBase);f.QuadCommand=b;c=new d.utils.ObjectPool(200,function(){return new b(0,f.ILayerManager.DEFAULT)})})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=d.renderer.QuadCommand,b=function(a){function b(){a.apply(this,arguments);this._quadLayer=d.renderer.ILayerManager.DEFAULT;this._quadMaterialId=d.renderer.IMaterial.DEFAULT;this._quadGlobalZ=0;this._quadAlpha=1;this._quadColor=16777215;this._quadColorDirty=this._quadAlphaDirty=this._quadVertexDirty=!0;this._textureUpdated=!1}__extends(b,a);b.prototype.setQuadRenderRange=function(a,b){this._quad.setRenderRange(a,b)};b.prototype.setQuadGlobalZ=function(a){this._quadGlobalZ=
a};b.prototype.setQuadLayer=function(a){this._quadLayer=a};b.prototype.setQuadMaterialId=function(a){this._quadMaterialId=a};b.prototype.setQuadAlpha=function(a){this._quadAlpha=a;this._quadAlphaDirty=!0};b.prototype.setQuadColor=function(a){this._quadColor=a;this._quadColorDirty=!0};b.prototype.setTexture=function(a){this._texture=a;this._textureUVS=null;this._textureUpdated=!0};b.prototype.setTextureFrame=function(a){this._textureFrame=a;this._textureUVS=null;this._textureUpdated=!0};b.prototype.setTextureOffset=
function(a){this._textureOffset=a;this._textureUpdated=!0};b.prototype.init=function(){this._initQuad();a.prototype.init.call(this)};b.prototype.render=function(a,b){this._texture&&((b&d.GameObject.MASK_TRANSFORM_DIRTY)===d.GameObject.MASK_TRANSFORM_DIRTY&&(this._quadVertexDirty=!0),this._textureUpdated&&this._updateQuad(),this._quadVertexDirty&&(this._updateQuadVertices(),this._quadVertexDirty=!1),this._quadAlphaDirty&&this._updateQuadAlpha(),this._quadColorDirty&&this._updateQuadColor(),a.addCommand(c.init(this._quadGlobalZ,
this._quadLayer,this._texture,this._quadMaterialId,this._quad)))};b.prototype._initQuad=function(){this._quad=new d.renderer.Quad(1)};b.prototype._getTextureFrame=function(){return this._textureFrame||{x:0,y:0,width:this._texture.descriptor.width,height:this._texture.descriptor.height}};b.prototype._getTextureOffset=function(){return this._textureOffset||{x:0,y:0}};b.prototype._getTextureUVS=function(){var a,b,e,c;if(this._textureUVS)return this._textureUVS;a=this._texture.descriptor.width;b=this._texture.descriptor.height;
e=this._textureFrame||{x:0,y:0,width:a,height:b};c={};c.x0=e.x/a;c.y0=e.y/b;c.x1=(e.x+e.width)/a;c.y1=e.y/b;c.x2=(e.x+e.width)/a;c.y2=(e.y+e.height)/b;c.x3=e.x/a;c.y3=(e.y+e.height)/b;return this._textureUVS=c};b.prototype._updateQuad=function(a){void 0===a&&(a=0);this._updateQuadVertices(a);this._updateQuadAlpha(a);this._updateQuadColor(a);this._textureUpdated=!1};b.prototype._updateQuadVertices=function(a){void 0===a&&(a=0);var b=this._getTextureUVS(),e=this._getTextureFrame(),c=this._getTextureOffset();
this._updateQuadVerticesByArgs(b,e,c,this._gameObject.transform.worldMatrix,a);this._quadVertexDirty=!1};b.prototype._updateQuadVerticesByArgs=function(a,b,e,c,d){void 0===d&&(d=0);var f=c.values[0],n=c.values[1],l=c.values[3],q=c.values[4],u=c.values[6];c=c.values[7];var v=-e.x*b.width,t=v+b.width;e=-e.y*b.height;b=e+b.height;this._quad.setVertices(f*v+l*e+u,q*e+n*v+c,f*t+l*e+u,q*e+n*t+c,f*t+l*b+u,q*b+n*t+c,f*v+l*b+u,q*b+n*v+c,d);this._quad.setTexCoords(a.x0,a.y0,a.x1,a.y1,a.x2,a.y2,a.x3,a.y3,d)};
b.prototype._clearQuadVertices=function(a){this._quad.setVertices(0,0,0,0,0,0,0,0);this._quad.setTexCoords(0,0,0,0,0,0,0,0)};b.prototype._updateQuadAlpha=function(a){void 0===a&&(a=0);this._quad.setAlpha(this._quadAlpha,a);this._quadAlphaDirty=!1};b.prototype._updateQuadColor=function(a){void 0===a&&(a=0);this._quad.setColor(this._quadColor,a);this._quadColorDirty=!1};return b}(d.Renderer);f.QuadRenderer=b})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(b){function a(){b.apply(this,arguments);this._helperGameObject=new d.GameObject}__extends(a,b);Object.defineProperty(a.prototype,"region",{get:function(){return this._region},set:function(a){this._region=a;this._helperGameObject.transform.setPosition(a.x,a.y);this._helperGameObject.transform.setScale(a.width,a.height)},enumerable:!0,configurable:!0});a.prototype.renderMask=function(a,b){this._region&&(this._maskQuadRenderer||this._initMaskQuadRenderer(a),this._helperGameObject.transform.dirty&&
(b|=d.GameObject.MASK_TRANSFORM_DIRTY),(b&d.GameObject.MASK_TRANSFORM_DIRTY)==d.GameObject.MASK_TRANSFORM_DIRTY&&this._helperGameObject.transform.transform(this.transform),this._maskQuadRenderer.setQuadGlobalZ(this._startGlobalZ),this._maskQuadRenderer.render(a,b))};a.prototype._initMaskQuadRenderer=function(a){var b=document.createElement("canvas"),c=b.getContext("2d");b.width=1;b.height=1;c.fillStyle="#FFFFFF";c.fillRect(0,0,b.width,b.height);b=new d.assets.HTMLImageDescriptor(b);a=a.textureManager.generateTexture(b);
this._maskQuadRenderer=new d.component.QuadRenderer;this._maskQuadRenderer.setTexture(a);this._helperGameObject.addComponent(this._maskQuadRenderer);this._helperGameObject.init()};return a}(d.Mask);f.RectMask=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(b){function a(){b.apply(this,arguments);this._canvasSize=new d.math.Size(0,0);this._sizeDirty=this._graphicsDirty=!0}__extends(a,b);Object.defineProperty(a.prototype,"canvasSize",{get:function(){return this._canvasSize},set:function(a){this._canvasSize=a;this._sizeDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"canvasWidth",{get:function(){return this._canvasSize.width},set:function(a){this._canvasSize.width=a;this._sizeDirty=!0},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"canvasHeight",{get:function(){return this._canvasSize.height},set:function(a){this._canvasSize.height=a;this._sizeDirty=!0},enumerable:!0,configurable:!0});a.prototype.destroy=function(){this.destroyCanvas();b.prototype.destroy.call(this)};a.prototype.draw=function(a){throw Error("abstract method");};a.prototype.render=function(a,c){this._canvas||this.initCanvas();this._canvas&&(this._sizeDirty&&this.updateCanvas(),this._graphicsDirty&&
(this.clearCanvas(),this.draw(this._context),this._graphicsDirty=!1,this.generateCanvasTexture(a)),this._glTexture&&b.prototype.render.call(this,a,c))};a.prototype.clearCanvas=function(){this._context.clearRect(0,0,this._canvasSize.width,this._canvasSize.height)};a.prototype.initCanvas=function(){0>=this._canvasSize.width||0>=this._canvasSize.height||(this._canvas=document.createElement("canvas"),this._canvas.width=this._canvasSize.width,this._canvas.height=this._canvasSize.height,this._context=this._canvas.getContext("2d"),
this._sizeDirty=!1,this._graphicsDirty=!0)};a.prototype.updateCanvas=function(){if(0>=this._canvasSize.width||0>=this._canvasSize.height)this.destroyCanvas(),this._graphicsDirty=!0;this._canvas.width=this._canvasSize.width;this._canvas.height=this._canvasSize.height;this._sizeDirty=!1;this._graphicsDirty=!0};a.prototype.destroyCanvas=function(){this._canvas&&this._canvas.dispose&&this._canvas.dispose();this._context&&this._context.dispose&&this._context.dispose();this._canvas=this._context=null};
a.prototype.generateCanvasTexture=function(a){this._glTexture?a.textureManager.updateTexture(this._glTexture):this._glTexture=a.textureManager.generateTexture(new d.assets.HTMLImageDescriptor(this._canvas));this.setTexture(this._glTexture)};return a}(f.QuadRenderer);f.CanvasRenderer=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(a){function e(){a.apply(this,arguments);this._primitiveStyle=new b}__extends(e,a);Object.defineProperty(e.prototype,"primitiveStyle",{get:function(){return this._primitiveStyle},set:function(a){this._primitiveStyle=a;this._graphicsDirty=!0},enumerable:!0,configurable:!0});e.prototype.render=function(b,e){var c;if(this._graphicsDirty||this._primitiveStyle.dirty)c=this.measurePrimitiveSize(),this.canvasWidth=c.width,this.canvasHeight=c.height,this._graphicsDirty=
!0,this._primitiveStyle.dirty=!1;a.prototype.render.call(this,b,e)};e.prototype.draw=function(a){a.save();this.applyPrimitiveStyle(a);this.drawPrimitive(a);a.restore()};e.prototype.applyPrimitiveStyle=function(a){this._primitiveStyle.stroke&&(a.lineWidth=this._primitiveStyle.strokeWidth,a.strokeStyle=this._primitiveStyle.strokeColor);this._primitiveStyle.fill&&(a.fillStyle=this._primitiveStyle.fillColor)};e.prototype.drawPrimitive=function(a){throw Error("abstract method");};e.prototype.measurePrimitiveSize=
function(){throw Error("abstract method");};return e}(d.CanvasRenderer);d.PrimitiveRenderer=c;var b=function(){function a(){this._stroke=this.dirty=!0;this._fill=!1;this._strokeColor="#000000";this._strokeWidth=1;this._fillColor="#FFFFFF"}Object.defineProperty(a.prototype,"stroke",{get:function(){return this._stroke},set:function(a){a!==this._stroke&&(this._stroke=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"strokeColor",{get:function(){return this._strokeColor},
set:function(a){a!==this._strokeColor&&(this._strokeColor=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(a){a!==this._strokeWidth&&(this._strokeWidth=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fill",{get:function(){return this._fill},set:function(a){a!==this._fill&&(this._fill=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"fillColor",{get:function(){return this._fillColor},set:function(a){a!==this._fillColor&&(this._fillColor=a,this.dirty=!0)},enumerable:!0,configurable:!0});return a}();d.PrimitiveStyle=b})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);Object.defineProperty(a.prototype,"circle",{get:function(){return this._circle},set:function(a){this._circle=a;this._graphicsDirty=!0},enumerable:!0,configurable:!0});a.prototype.drawPrimitive=function(a){var b=this._primitiveStyle,c=this._canvasSize.width/2,d=this._canvasSize.height/2;a.beginPath();a.arc(c,d,this._circle.radius,0,2*Math.PI);b.stroke&&a.stroke();b.fill&&a.fill()};a.prototype.measurePrimitiveSize=
function(){var a=this._primitiveStyle;return this._circle?{width:Math.ceil(2*this._circle.radius+(a.stroke?a.strokeWidth:0)),height:Math.ceil(2*this._circle.radius+(a.stroke?a.strokeWidth:0))}:{width:0,height:0}};a.prototype.generateCanvasTexture=function(a){var c={x:this._circle.centerX/this._circle.radius+.5,y:this._circle.centerY/this._circle.radius+.5};b.prototype.generateCanvasTexture.call(this,a);this.setTextureOffset(c)};return a}(d.PrimitiveRenderer);d.CircleRenderer=c})(d.component||(d.component=
{}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);Object.defineProperty(a.prototype,"rect",{get:function(){return this._rect},set:function(a){this._rect=a;this._graphicsDirty=!0},enumerable:!0,configurable:!0});a.prototype.drawPrimitive=function(a){var b=this._primitiveStyle;b.stroke?(a.rect(b.strokeWidth/2,b.strokeWidth/2,this._rect.width,this._rect.height),a.stroke()):a.rect(0,0,this._rect.width,this._rect.height);b.fill&&a.fill()};a.prototype.measurePrimitiveSize=
function(){var a=this._primitiveStyle;return this._rect?{width:Math.ceil(this._rect.width+(a.stroke?a.strokeWidth:0)),height:Math.ceil(this._rect.height+(a.stroke?a.strokeWidth:0))}:{width:0,height:0}};a.prototype.generateCanvasTexture=function(a){var c={x:-this._rect.x/this._rect.width,y:-this._rect.y/this._rect.height};b.prototype.generateCanvasTexture.call(this,a);this.setTextureOffset(c)};return a}(d.PrimitiveRenderer);d.RectRenderer=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(){function b(){}b.array2rect=function(a){return new d.math.Rectangle(a[0],a[1],a[2],a[3])};b.array2circle=function(a){return new d.math.Circle(a[0],a[1],a[2])};b.json2TextStyle=function(a){var b=new f.TextStyle,c;for(c in a)b[c]=a[c];return b};return b}();f.PropertyConverter=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(b){function a(){b.call(this);this._spriteProxy=new d.assets.proxy.SpriteAtlasProxy(this)}__extends(a,b);Object.defineProperty(a.prototype,"color",{get:function(){return this._quadColor},set:function(a){this.setQuadColor(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"alpha",{get:function(){return this._quadAlpha},set:function(a){this.setQuadAlpha(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"materialId",{get:function(){return this._quadMaterialId},
set:function(a){this.setQuadMaterialId(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderLayer",{get:function(){return this._quadLayer},set:function(a){this.setQuadLayer(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderOrder",{get:function(){return this._quadGlobalZ},set:function(a){this.setQuadGlobalZ(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sprite",{get:function(){return this._sprite},set:function(a){var b=this._sprite;
b!==a&&((this._sprite=a)?(this.setTextureFrame(a.frame),b&&b.spriteAtlas===a.spriteAtlas||this.setTexture(a.spriteAtlas.glTexture)):(this.setTexture(null),this.setTextureFrame(null)))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"spriteOffset",{get:function(){return this._getTextureOffset()},set:function(a){this.setTextureOffset(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"imageSrc",{get:function(){return this._spriteAtlasSrc},set:function(a){this.spriteAtlasSrc=
a;this.spriteName=null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"spriteAtlasSrc",{get:function(){return this._spriteAtlasSrc},set:function(a){this._spriteAtlasSrc=a;this._spriteProxy.setAssetSrc(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"spriteName",{get:function(){return this._spriteName},set:function(a){this._spriteName=a;this.sprite=this._spriteProxy.getSprite(a)},enumerable:!0,configurable:!0});a.prototype.destroy=function(){this._spriteProxy.onDestroy();
b.prototype.destroy.call(this)};a.prototype.onAssetLoaded=function(a){this.sprite=a?a.getSprite(this._spriteName):null};a.prototype.loadAssets=function(a){this._spriteProxy.loadAsset(a)};return a}(f.QuadRenderer);f.SpriteRenderer=c;d.Component.register(c,{name:"SpriteRenderer",properties:[{name:"color",type:"int",defaultValue:16777215},{name:"alpha",type:"int",defaultValue:1},{name:"spriteAtlasSrc",type:"string"},{name:"spriteName",type:"string"},{name:"imageSrc",type:"string"}]})})(d.component||
(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(b){function a(){b.apply(this,arguments);this._autoOffset=this._frameNumDirty=!0;this._playMode=a.MODE_NONLOOP;this._playing=!1}__extends(a,b);Object.defineProperty(a.prototype,"autoOffset",{get:function(){return this._autoOffset},set:function(a){this._autoOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"frameNum",{get:function(){return this._frameNum},set:function(a){a=Math.floor(a);this._frameNum!==a&&(this._frameNum=a,this._frameNumDirty=
!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},set:function(a){this._duration=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"playMode",{get:function(){return this._playMode},set:function(a){this._playMode=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"frameLength",{get:function(){return this._spriteProxy.getFrameLength()},enumerable:!0,configurable:!0});a.prototype.play=function(a){void 0===
a&&(a=this._duration);0>=this.frameLength||(this._duration=a,this._playing=!0,this._frameNum=0,this._playTween&&this._playTween.setPaused(!0),this._playTween=d.utils.Tween.get(this).to({frameNum:this.frameLength},a))};a.prototype.pause=function(){this._playing&&(this._playTween.setPaused(!0),this._playing=!1)};a.prototype.resume=function(){!this._playing&&this._playTween&&(this._playTween.setPaused(!1),this._playing=!0)};a.prototype.stop=function(){if(this._playing||this._playTween)this._playTween.setPaused(!1),
this._playTween=null};a.prototype.render=function(a,c){this._frameNumDirty&&(this._frameNumDirty=!1,this.updateAnimationFrame());b.prototype.render.call(this,a,c)};a.prototype.updateAnimationFrame=function(){var b;b=this.frameLength;0===b?this.sprite=null:(this._frameNum>=b&&(this._playMode===a.MODE_LOOP?this.play():(this._frameNum=b-1,this.dispatchEvent(new d.event.Event("animationend")),this.stop())),this.sprite=this._spriteProxy.getSprite(this._frameNum),b=this.sprite.frame,this._autoOffset&&(this.spriteOffset=
{x:-b.offsetX/b.width||0,y:-b.offsetY/b.height||0}),this.dispatchEvent(new d.event.Event("framechanged",!1,{frame:this._frameNum})))};a.MODE_LOOP="loop";a.MODE_NONLOOP="nonloop";return a}(f.SpriteRenderer);f.AnimationRenderer=c})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=d.renderer.QuadCommand,b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);Object.defineProperty(b.prototype,"renderRegion",{get:function(){return this._renderRegion},set:function(a){this._renderRegion=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"patch",{get:function(){return this._patch},set:function(a){this._patch=a;this._quadVertexDirty=!0},enumerable:!0,configurable:!0});b.prototype._initQuad=function(){this._quad=new d.renderer.Quad(9)};
b.prototype._updateNinePatchQuads=function(){this._updateNinePatchQuadVertices();this._updateNinePatchQuadAlpha();this._updateNinePatchQuadColor();this._textureUpdated=!1};b.prototype._updateNinePatchQuadVertices=function(){for(var a=new d.Transform,b=this._getTextureFrame(),e,c={x:0,y:0},f=this._patch||new d.math.Rectangle(0,0,b.width,b.height),m=this._renderRegion||f,b=[{frame:{x:b.x,y:b.y,width:f.left,height:f.top},pos:{x:m.x,y:m.y},size:{width:1,height:1}},{frame:{x:b.x+f.left,y:b.y,width:f.width,
height:f.top},pos:{x:m.x+f.left,y:m.y},size:{width:(m.width-(f.right-f.width))/f.width,height:1}},{frame:{x:b.x+f.right,y:b.y,width:b.width-f.right,height:f.top},pos:{x:m.right,y:m.y},size:{width:1,height:1}},{frame:{x:b.x,y:b.y+f.top,width:f.left,height:f.height},pos:{x:m.x,y:m.y+f.top},size:{width:1,height:(m.height-(f.bottom-f.height))/f.height}},{frame:{x:b.x+f.left,y:b.y+f.top,width:f.width,height:f.height},pos:{x:m.x+f.left,y:m.y+f.top},size:{width:(m.width-(f.right-f.width))/f.width,height:(m.height-
(f.bottom-f.height))/f.height}},{frame:{x:b.x+f.right,y:b.y+f.top,width:b.width-f.right,height:f.height},pos:{x:m.right,y:m.y+f.top},size:{width:1,height:(m.height-(f.bottom-f.height))/f.height}},{frame:{x:b.x,y:b.y+f.bottom,width:b.width-f.right,height:b.height-f.bottom},pos:{x:m.x,y:m.bottom},size:{width:1,height:1}},{frame:{x:b.x+f.left,y:b.y+f.bottom,width:f.width,height:b.height-f.bottom},pos:{x:m.x+f.left,y:m.bottom},size:{width:(m.width-(f.right-f.width))/f.width,height:1}},{frame:{x:b.x+f.right,
y:b.y+f.bottom,width:b.width-f.right,height:b.height-f.bottom},pos:{x:m.right,y:m.bottom},size:{width:1,height:1}}],f=0;9>f;f++)if(m=b[f],0<m.frame.width&&0<m.frame.height){e=m.frame;var n=this._texture,l=n.descriptor.width,n=n.descriptor.height,q={};q.x0=e.x/l;q.y0=e.y/n;q.x1=(e.x+e.width)/l;q.y1=e.y/n;q.x2=(e.x+e.width)/l;q.y2=(e.y+e.height)/n;q.x3=e.x/l;q.y3=(e.y+e.height)/n;e=q;a.set(this.gameObject.transform);a.x+=m.pos.x;a.y+=m.pos.y;a.setScale(m.size.width,m.size.height);a.updateWorldMatrix();
this._updateQuadVerticesByArgs(e,m.frame,c,a.worldMatrix,f)}else this._clearQuadVertices(f);this._quadVertexDirty=!1};b.prototype._updateNinePatchQuadAlpha=function(){for(var a=0;9>a;a++)this._updateQuadAlpha(a);this._quadAlphaDirty=!1};b.prototype._updateNinePatchQuadColor=function(){for(var a=0;9>a;a++)this._updateQuadColor(a);this._quadColorDirty=!1};b.prototype.render=function(a,b){this._texture&&((b&d.GameObject.MASK_TRANSFORM_DIRTY)===d.GameObject.MASK_TRANSFORM_DIRTY&&(this._quadVertexDirty=
!0),this._textureUpdated&&this._updateNinePatchQuads(),this._quadVertexDirty&&(this._updateNinePatchQuadVertices(),this._quadVertexDirty=!1),this._quadAlphaDirty&&this._updateNinePatchQuadAlpha(),this._quadColorDirty&&this._updateNinePatchQuadColor(),a.addCommand(c.init(this._quadGlobalZ,this._quadLayer,this._texture,this._quadMaterialId,this._quad)))};return b}(f.SpriteRenderer);f.NinePatchRenderer=b;d.Component.register(b,{name:"NinePatchRenderer",properties:[{name:"patch",type:"rect",defaultValue:[0,
0,0,0],convert:f.PropertyConverter.array2rect},{name:"renderRegion",type:"rect",defaultValue:[0,0,0,0],convert:f.PropertyConverter.array2rect},{group:"SpriteRenderer",properties:d.Component.getConfig("SpriteRenderer").properties}]})})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=document.createElement("canvas");c.width=1;c.height=1;var b=c.getContext("2d"),c=function(e){function c(){e.apply(this,arguments);this._textDirty=!0;this._textStyle=new a}__extends(c,e);c.measureText=function(a,e){var c,d,g;b.font=a.font;c=Math.ceil(b.measureText(e).width);d=Math.ceil(1.2*b.measureText("M").width);if(a.shadow||a.stroke)g=Math.max(a.strokeWidth,Math.abs(a.shadowOffsetX),Math.abs(a.shadowOffsetY)),c+=2*g,d+=2*g+4;c=Math.ceil(c);d=Math.ceil(d);0!==c%2&&
(c+=1);0!==d%2&&(d+=1);return{width:c,height:d}};Object.defineProperty(c.prototype,"text",{get:function(){return this._text},set:function(a){"string"!==typeof a&&(a+="");a!==this._text&&(this._text=a,this._textDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textStyle",{get:function(){return this._textStyle},set:function(a){this._textStyle=a;this._textDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textWidth",{get:function(){return this._canvasSize.width},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textHeight",{get:function(){return this._canvasSize.height},enumerable:!0,configurable:!0});c.prototype.render=function(a,b){var c;if(this._textDirty||this._textStyle.dirty)c=this.measureTextSize(),this.canvasWidth=c.width,this.canvasHeight=c.height,this._textDirty=this._textStyle.dirty=!1,this._graphicsDirty=!0;e.prototype.render.call(this,a,b)};c.prototype.draw=function(a){this.drawText(a,this._canvasSize.width,this._canvasSize.height)};
c.prototype.drawText=function(a,b,e){a.save();a.font=this._textStyle.font;a.textAlign="center";a.textBaseline="middle";this._textStyle.shadow&&(0<this._textStyle.shadowOffsetX||0<this._textStyle.shadowOffsetY)&&(a.fillStyle=this._textStyle.shadowColor,a.fillText(this._text,b/2+this._textStyle.shadowOffsetX,e/2+this._textStyle.shadowOffsetY));this._textStyle.stroke&&0<this._textStyle.strokeWidth&&(a.strokeStyle=this._textStyle.strokeColor,a.lineWidth=this._textStyle.strokeWidth,a.strokeText(this._text,
b/2,e/2));a.fillStyle=this._textStyle.color;a.fillText(this._text,b/2,e/2);a.restore()};c.prototype.measureTextSize=function(){return this._text?c.measureText(this._textStyle,this._text):{width:0,height:0}};c.prototype.generateCanvasTexture=function(b){var c={x:0,y:0};e.prototype.generateCanvasTexture.call(this,b);this._textStyle.align===a.CENTER?c.x=.5:this._textStyle.align===a.END&&(c.x=1);this._textStyle.baseline===a.MIDDLE?c.y=.5:this._textStyle.baseline===a.BOTTOM&&(c.y=1);this.setTextureOffset(c)};
return c}(f.CanvasRenderer);f.TextRenderer=c;var a=function(){function a(){this.dirty=!0;this._font="normal 24px Arial";this._color="#000000";this._shadow=!1;this._shadowColor="#000000";this._shadowOffsetY=this._shadowOffsetX=0;this._stroke=!1;this._strokeColor="#000000";this._strokeWidth=0;this._align=a.START;this._baseline=a.TOP}Object.defineProperty(a.prototype,"font",{get:function(){return this._font},set:function(a){a!==this._font&&(this._font=a,this.dirty=!0)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"color",{get:function(){return this._color},set:function(a){a!==this._color&&(this._color=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"shadow",{get:function(){return this._shadow},set:function(a){a!==this._shadow&&(this._shadow=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(a){this._shadowColor=a;this.dirty=!0},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"shadowOffsetX",{get:function(){return this._shadowOffsetX},set:function(a){a!==this._shadowOffsetX&&(this._shadowOffsetX=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"shadowOffsetY",{get:function(){return this._shadowOffsetY},set:function(a){a!==this._shadowOffsetY&&(this._shadowOffsetY=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"stroke",{get:function(){return this._stroke},
set:function(a){a!==this._stroke&&(this._stroke=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(a){a!==this._strokeColor&&(this._strokeColor=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(a){a!==this._strokeWidth&&(this._strokeWidth=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"align",{get:function(){return this._align},set:function(a){a!==this._align&&(this._align=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseline",{get:function(){return this._baseline},set:function(a){a!==this._baseline&&(this._baseline=a,this.dirty=!0)},enumerable:!0,configurable:!0});a.START="start";a.CENTER="center";a.END="end";a.TOP="top";a.MIDDLE="middle";a.BOTTOM="bottom";return a}();f.TextStyle=a;d.Component.register(c,{name:"TextRenderer",properties:[{name:"text",
type:"string"},{name:"style",type:"object",convert:f.PropertyConverter.json2TextStyle}]})})(d.component||(d.component={}))})(WOZLLA||(WOZLLA={}));(function(d){var f=function(c){function b(){c.apply(this,arguments);this.enabled=!0}__extends(b,c);b.prototype.update=function(){};return b}(d.Component);d.Behaviour=f})(WOZLLA||(WOZLLA={}));
(function(d){var f=function(c){function b(a,b,d,h){void 0===b&&(b=!1);void 0===d&&(d=null);void 0===h&&(h=!0);c.call(this,a,b,d,h)}__extends(b,c);return b}(d.event.Event);d.CoreEvent=f})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){function c(a,b){b()}var b=function(){function a(){this.doInit=this.doLoad=!1}a.prototype.instantiateWithSrc=function(a,b){void 0===b&&(b=c);this.src=a;this.newCallback=b;return this};a.prototype.instantiateWithJSON=function(a,b){void 0===b&&(b=c);this.data=a;this.newCallback=b;return this};a.prototype.load=function(a){void 0===a&&(a=c);this.doLoad=!0;this.loadCallback=a;return this};a.prototype.init=function(){this.doLoad?this.doInit=!0:this.err="JSONXBuilder: init must after load";
return this};a.prototype.build=function(a){var b=this;this._loadJSONData(function(){b._checkError(a)||b._newGameObjectTree(function(){b._checkError(a)||(b.doLoad?b.newCallback(b.root,function(){b._loadAssets(function(){b._checkError(a)||(b.doInit&&b._init(),a(b.err,b.root))})}):a(b.err,b.root))})})};a.prototype._checkError=function(a){return this.err?(a(this.err,null),!0):!1};a.prototype._loadJSONData=function(a){var b=this;this.src&&!this.data?d.utils.Ajax.request({url:this.src,contentType:"json",
success:function(c){b.data=c;a&&a()},error:function(c){b.err=c;a&&a()}}):a&&a()};a.prototype._newGameObjectTree=function(a){var b=this;this._newGameObject(this.data.root,function(c){b.root=c;a&&a()})};a.prototype._newGameObject=function(a,b){var c=this,f=new d.GameObject(a.rect);f.id=a.id;f.name=a.name;f.active=a.active;f.visible=a.visible;f.touchable=a.touchable;f.transform.set(a.transform);var k=a.components;k&&0<k.length&&k.forEach(function(a){f.addComponent(c._newComponent(a,f))});var p=0,m=a.children;
m&&0!==m.length?m.forEach(function(a){a.reference?c._newReferenceObject(a,function(a){a&&f.addChild(a);p++;p===m.length&&b(f)}):c._newGameObject(a,function(a){f.addChild(a);p++;p===m.length&&b(f)})}):b(f)};a.prototype._newReferenceObject=function(b,c){var d=this;(new a).instantiateWithSrc(b.reference).build(function(a,f){a?d.err=a:f&&(f.name=b.name,f.id=b.id,f.active=b.active,f.visible=b.visible,f.touchable=b.touchable,f.transform.set(b.transform));c(f)})};a.prototype._newComponent=function(a,b){var c=
d.Component.create(a.name),f=d.Component.getConfig(a.name);c.gameObject=b;this._applyComponentProperties(c,f.properties,a);return c};a.prototype._applyComponentProperties=function(a,b,c){var f=this;b&&0<b.length&&b.forEach(function(b){if(b.group)f._applyComponentProperties(a,b.properties,c);else if(b.extend)(b=d.Component.getConfig(b.extend))&&f._applyComponentProperties(a,b.properties,c);else{var g=c.properties[b.name],g="undefined"===typeof g?b.defaultValue:g;b.convert&&(g=b.convert(g));a[b.name]=
g}})};a.prototype._loadAssets=function(a){this.root.loadAssets(a)};a.prototype._init=function(){this.root.init()};return a}();f.JSONXBuilder=b})(d.jsonx||(d.jsonx={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b,c){this.centerX=a;this.centerY=b;this.radius=c}b.prototype.containsXY=function(a,b){return Math.pow(a-this.centerX,2)+Math.pow(b-this.centerY,2)<=this.radius};b.prototype.toString=function(){return"Circle["+this.centerX+","+this.centerY+","+this.radius+"]"};return b}();d.Circle=c})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){(function(c){c.rectIntersect=function(b,a){return b.x<a.x+a.width&&a.x<b.x+b.width&&b.y<a.y+a.height&&a.y<b.y+b.height};c.rectIntersect2=function(b,a,c,d,f,s,k,p){return b<=f+k&&f<=b+c&&a<=s+p&&s<=a+d}})(d.MathUtils||(d.MathUtils={}))})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(a,b){this.width=a;this.height=b}b.prototype.toString=function(){return"Size["+this.width+","+this.height+"]"};return b}();d.Size=c})(d.math||(d.math={}))})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IMaterialManager||(d.IMaterialManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.IShaderManager||(d.IShaderManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){(function(c){c[c.PNG=0]="PNG";c[c.JPEG=1]="JPEG";c[c.PVR=2]="PVR"})(d.TextureFormat||(d.TextureFormat={}));(function(c){c[c.RGBA8888=0]="RGBA8888";c[c.RGBA4444=1]="RGBA4444";c[c.RGB888=2]="RGB888";c[c.RGB565=3]="RGB565";c[c.PVRTC4=4]="PVRTC4";c[c.PVRTC2=5]="PVRTC2"})(d.PixelFormat||(d.PixelFormat={}))})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));(function(d){d=d.renderer||(d.renderer={});(d.ITextureManager||(d.ITextureManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(){}b.getExtension=function(a,c,d){void 0===d&&(d=!0);a=a.getExtension(c)||a.getExtension(a,b.VENDOR_WEBKIT+c);if(null!=a)return a;if(d)throw Error("Unsupported extension: "+c);};b.VENDOR_WEBKIT="WEBKIT_";b.PVRTC="WEBGL_compressed_texture_pvrtc";b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842;b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843;return b}();d.WebGLExtension=c})(d.renderer||(d.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(c){function g(){c.apply(this,arguments);this._stateConfig={}}__extends(g,c);g.prototype.defineState=function(a,b){void 0===b&&(b=!1);d.Assert.isUndefined(this._stateConfig[a],'state "'+a+'" has been defined');this._stateConfig[a]={data:{}};b&&(this._defaultState=a)};g.prototype.getStateData=function(a,b){d.Assert.isNotUndefined(this._stateConfig[a],'state "'+a+'" not defined');return this._stateConfig[a].data[b]};g.prototype.setStateData=function(a,b,c){d.Assert.isNotUndefined(this._stateConfig[a],
'state "'+a+'" not defined');this._stateConfig[a].data[b]=c};g.prototype.defineTransition=function(a,b,c){d.Assert.isNotUndefined(this._stateConfig[a],'state "'+a+'" not defined');d.Assert.isNotUndefined(this._stateConfig[b],'state "'+b+'" not defined');this._stateConfig[a][b]=c};g.prototype.init=function(){this._currentState=this._defaultState;this.dispatchEvent(new d.event.Event(g.INIT,!1,new b(this._currentState)))};g.prototype.getCurrentState=function(){return this._currentState};g.prototype.changeState=
function(c){var e=this,f,p;d.Assert.isNotUndefined(this._stateConfig[c]);f=this._currentState;p=this._stateConfig[c][c]||a.getInstance();this._currentTransition&&this._currentTransition.cancel();p.reset();p.execute(f,c,function(){e._currentTransition=null;e._currentState=c;e.dispatchEvent(new d.event.Event(g.CHANGE,!1,new b(e._currentState)))});this._currentTransition=p};g.INIT="state.init";g.CHANGE="state.change";return g}(d.event.EventDispatcher);f.StateMachine=c;var b=function(){return function(a){this.state=
a}}();f.StateEventData=b;var a=function(){function a(){this._canceled=!1}a.getInstance=function(){a.instance||(a.instance=new a);return a.instance};a.prototype.reset=function(){this._canceled=!1};a.prototype.cancel=function(){this._canceled=!0};a.prototype.execute=function(a,b,c){this._canceled||c()};return a}();f.EmptyTransition=a})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=d.utils.StateMachine,b=function(a){function b(){a.call(this);this._stateMachine=new d.utils.StateMachine;this.initStates()}__extends(b,a);b.prototype.init=function(){var b=this;this._stateMachine.addListener(c.INIT,function(a){return b.onStateChange(a)});this._stateMachine.addListener(c.CHANGE,function(a){return b.onStateChange(a)});this._stateMachine.init();a.prototype.init.call(this)};b.prototype.initStates=function(){};b.prototype.getStateSpriteName=function(a){return this._stateMachine.getStateData(a,
"spriteName")};b.prototype.setStateSpriteName=function(a,b){this._stateMachine.setStateData(a,"spriteName",b)};b.prototype.onStateChange=function(a){this.spriteName=this.getStateSpriteName(a.data.state)};return b}(d.component.SpriteRenderer);f.StateWidget=b})(d.ui||(d.ui={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);Object.defineProperty(a.prototype,"normalSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_NORMAL)},set:function(b){this.setStateSpriteName(a.STATE_NORMAL,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"disabledSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_DISABLED)},set:function(b){this.setStateSpriteName(a.STATE_DISABLED,b)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"pressedSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_PRESSED)},set:function(b){this.setStateSpriteName(a.STATE_PRESSED,b)},enumerable:!0,configurable:!0});a.prototype.init=function(){var a=this;this.gameObject.addListener("touch",function(b){return a.onTouch(b)});this.gameObject.addListener("release",function(b){return a.onRelease(b)});this.gameObject.addListener("tap",function(b){return a.onTap(b)});b.prototype.init.call(this)};a.prototype.destroy=
function(){this._stateMachine.clearAllListeners();b.prototype.destroy.call(this)};a.prototype.isEnabled=function(){return this._stateMachine.getCurrentState()!==a.STATE_DISABLED};a.prototype.setEnabled=function(b){void 0===b&&(b=!0);this._stateMachine.changeState(b?a.STATE_NORMAL:a.STATE_DISABLED);this._gameObject.touchable=b};a.prototype.initStates=function(){this._stateMachine.defineState(a.STATE_NORMAL,!0);this._stateMachine.defineState(a.STATE_DISABLED);this._stateMachine.defineState(a.STATE_PRESSED)};
a.prototype.onTouch=function(b){this._stateMachine.changeState(a.STATE_PRESSED)};a.prototype.onRelease=function(b){this._stateMachine.changeState(a.STATE_NORMAL)};a.prototype.onTap=function(a){};a.STATE_NORMAL="normal";a.STATE_DISABLED="disabled";a.STATE_PRESSED="pressed";return a}(d.StateWidget);d.Button=c})(d.ui||(d.ui={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);Object.defineProperty(a.prototype,"uncheckedSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_UNCHECKED)},set:function(b){this.setStateSpriteName(a.STATE_UNCHECKED,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"disabledSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_DISABLED)},set:function(b){this.setStateSpriteName(a.STATE_DISABLED,b)},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"checkedSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_CHECKED)},set:function(b){this.setStateSpriteName(a.STATE_CHECKED,b)},enumerable:!0,configurable:!0});a.prototype.init=function(){var a=this;this._gameObject.addListener("tap",function(b){return a.onTap(b)});b.prototype.init.call(this)};a.prototype.destroy=function(){this._stateMachine.clearAllListeners();b.prototype.destroy.call(this)};a.prototype.isEnabled=function(){return this._stateMachine.getCurrentState()!==
a.STATE_DISABLED};a.prototype.setEnabled=function(b){void 0===b&&(b=!0);this._stateMachine.changeState(b?a.STATE_UNCHECKED:a.STATE_DISABLED);this._gameObject.touchable=b};a.prototype.initStates=function(){this._stateMachine.defineState(a.STATE_UNCHECKED,!0);this._stateMachine.defineState(a.STATE_DISABLED);this._stateMachine.defineState(a.STATE_CHECKED)};a.prototype.onTap=function(b){this._stateMachine.getCurrentState()===a.STATE_CHECKED?this._stateMachine.changeState(a.STATE_UNCHECKED):this._stateMachine.changeState(a.STATE_CHECKED)};
a.STATE_UNCHECKED="unchecked";a.STATE_CHECKED="checked";a.STATE_DISABLED="disabled";return a}(d.StateWidget);d.CheckBox=c})(d.ui||(d.ui={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(){function b(){}b.get=function(a){-1>a&&(a=-1);1<a&&(a=1);return function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}};b.getPowIn=function(a){return function(b){return Math.pow(b,a)}};b.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}};b.getPowInOut=function(a){return function(b){return 1>(b*=2)?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}};b.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};b.sineOut=function(a){return Math.sin(a*
Math.PI/2)};b.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)};b.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}};b.getBackOut=function(a){return function(b){b-=1;return b*b*((a+1)*b+a)+1}};b.getBackInOut=function(a){a*=1.525;return function(b){return 1>(b*=2)?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}};b.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};b.circOut=function(a){return Math.sqrt(1-a*a)};b.circInOut=function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-
(a-=2)*a)+1)};b.bounceIn=function(a){return 1-b.bounceOut(1-a)};b.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};b.bounceInOut=function(a){return.5>a?.5*b.bounceIn(2*a):.5*b.bounceOut(2*a-1)+.5};b.getElasticIn=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var f=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-f)*c/b))}};b.getElasticOut=function(a,
b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var f=b/c*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-f)*c/b)+1}};b.getElasticInOut=function(a,b){var c=2*Math.PI;return function(d){var f=b/c*Math.asin(1/a);return 1>(d*=2)?-.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-f)*c/b):a*Math.pow(2,-10*(d-=1))*Math.sin((d-f)*c/b)*.5+1}};b.linear=function(a){return a};b.expoIn=function(a){return 0==a?0:Math.pow(2,10*(a-1))-.001};b.expoOut=function(a){return 1==a?1:-Math.pow(2,-10*a)+1};b.expoInOut=
function(a){a/=.5;return a=1>a?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*(a-1))+2)};b.getByKey=function(a){return b[b.keyMap[a]]};b.quadIn=b.getPowIn(2);b.quadOut=b.getPowOut(2);b.quadInOut=b.getPowInOut(2);b.cubicIn=b.getPowIn(3);b.cubicOut=b.getPowOut(3);b.cubicInOut=b.getPowInOut(3);b.quartIn=b.getPowIn(4);b.quartOut=b.getPowOut(4);b.quartInOut=b.getPowInOut(4);b.quintIn=b.getPowIn(5);b.quintOut=b.getPowOut(5);b.quintInOut=b.getPowInOut(5);b.backIn=b.getBackIn(1.7);b.backOut=b.getBackOut(1.7);
b.backInOut=b.getBackInOut(1.7);b.elasticIn=b.getElasticIn(1,.3);b.elasticOut=b.getElasticOut(1,.3);b.elasticInOut=b.getElasticInOut(1,.3*1.5);b.keyMap={0:"linear",1:"sineIn",2:"sineOut",3:"sineInOut",4:"quadIn",5:"quadOut",6:"quadInOut",7:"cubicIn",8:"cubicOut",9:"cubicInOut",10:"quartIn",11:"quartOut",12:"quartInOut",13:"quintIn",14:"quintOut",15:"quintInOut",16:"expoIn",17:"expoOut",18:"expoInOut",19:"circIn",20:"circOut",21:"circInOut",22:"elasticIn",23:"elasticOut",24:"elasticInOut",25:"backIn",
26:"backOut",27:"backInOut",28:"bounceIn",29:"bounceOut",30:"bounceInOut"};return b}();d.Ease=c})(d.utils||(d.utils={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);Object.defineProperty(a.prototype,"skeletonSrc",{get:function(){return this._skeletonSrc},set:function(a){this._skeletonSrc=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureSrc",{get:function(){return this._textureSrc},set:function(a){this._textureSrc=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"armatureName",{get:function(){return this._armatureName},
set:function(a){this._armatureName=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0});a.prototype.init=function(){this.initArmature();b.prototype.init.call(this)};a.prototype.destroy=function(){this._skeletonJSONAsset&&this._skeletonJSONAsset.release();this._skeletonJSONAsset=null;this._wTextureAtlas&&this._wTextureAtlas.release();this._wTextureAtlas=null;this._armature&&this._armature.dispose();this._armature=
null;this._factory&&this._factory.dispose();this._container&&(this._container.destroy(),this._container.removeMe(),this._container=null);b.prototype.destroy.call(this)};a.prototype.render=function(a,b){this._container.visit(a,this.transform,b)};a.prototype.loadAssets=function(a){var b=this,c;this._skeletonSrc&&this._textureSrc&&this._armatureName?(c=d.Director.getInstance().assetLoader,c.load(this._skeletonSrc,d.assets.JSONAsset,function(){var d=c.getAsset(b._skeletonSrc);d?(d.retain(),c.load(b._textureSrc,
f.WTextureAtlas,function(){var f=c.getAsset(b._textureSrc);f?(f.retain(),b._skeletonJSONAsset=d,b._wTextureAtlas=f):d.release();a()})):a()})):a()};a.prototype.initArmature=function(){var a,b,c;this._skeletonJSONAsset&&this._wTextureAtlas&&this._armatureName&&(b=new f.WFactory,a=this._skeletonJSONAsset.cloneData(),b.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(a),a.name),b.addTextureAtlas(this._wTextureAtlas,this._wTextureAtlas.name),a=b.buildArmature(this._armatureName),c=a.getDisplay(),
dragonBones.WorldClock.clock.add(a),f.setupWorldClock(),this._container=c,this._factory=b,this._armature=a)};return a}(d.Renderer);f.SkeletonRenderer=c})(d.DragonBones||(d.DragonBones={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(d){var c=function(b){function a(){b.call(this,this);this._display=null}__extends(a,b);a.prototype.dispose=function(){this._display&&(this._display.destroy(),this._display.removeMe());b.prototype.dispose.call(this);this._display=null};a.prototype._updateDisplay=function(a){this._display=a};a.prototype._getDisplayIndex=function(){return-1};a.prototype._addDisplayToContainer=function(a,b){this._display&&a&&a.addChild(this._display)};a.prototype._removeDisplayFromContainer=function(){this._display&&
this._display.parent&&this._display.parent.removeChild(this._display)};a.prototype._updateTransform=function(){var a;this._display&&(a=this._display.transform,a.__local_matrix=this._globalTransformMatrix,a.dirty=!0)};a.prototype._updateDisplayVisible=function(a){this._display&&this._parent&&(this._display.visible=this._parent._visible&&this._visible&&a)};a.prototype._updateDisplayColor=function(a,c,d,f,k,p,m,n){b.prototype._updateDisplayColor.call(this,a,c,d,f,k,p,m,n);this._display&&(a=this._display.renderer)&&
(a.alpha=k)};a.prototype._updateDisplayBlendMode=function(a){};return a}(dragonBones.Slot);d.WSlot=c})(d.DragonBones||(d.DragonBones={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){function c(a){var b=a.lastIndexOf("/");return-1!==b?a.substr(b+1,a.length):a}var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.dispose=function(){};b.prototype.getRegion=function(a){a=this.getSprite(a).frame;return new dragonBones.Rectangle(a.x,a.y,a.width,a.height)};b.prototype._loadSpriteAtlas=function(a){var b=this;d.utils.Ajax.request({url:this._metaSrc,contentType:"json",success:function(d){var e=d.imagePath,f=c(b._metaSrc);b._imageSrc=
b._metaSrc.replace(new RegExp(f+"$"),e);b._loadImage(function(c,e){if(c)a&&a(c);else{var f=b._parseData(d);b.name=f.name;a&&a(null,e,f)}})},error:function(c){a("Fail to load sprite: "+b._metaSrc+", "+c.code+":"+c.message)}})};b.prototype._parseData=function(a){var b={name:a.name,frames:{}};a.SubTexture.forEach(function(a){b.frames[a.name]={frame:a}});return b};return b}(d.assets.SpriteAtlas);f.WTextureAtlas=b})(d.DragonBones||(d.DragonBones={}))})(WOZLLA||(WOZLLA={}));
(function(d){(function(f){var c=!1;f.setupWorldClock=function(){c||(c=!0,d.Director.getInstance().scheduler.scheduleLoop(function(){dragonBones.WorldClock.clock.advanceTime(1/60)}))};var b=function(a){function b(){a.call(this,this)}__extends(b,a);b.prototype._generateArmature=function(){var a=new d.GameObject;a.init();return new dragonBones.Armature(a)};b.prototype._generateSlot=function(){return new f.WSlot};b.prototype._generateDisplay=function(a,b,c,e){var f=new d.GameObject,m=new d.component.SpriteRenderer;
m.sprite=a.getSprite(b);m.spriteOffset={x:c/m.sprite.frame.width,y:e/m.sprite.frame.height};f.addComponent(m);f.init();return f};return b}(dragonBones.BaseFactory);f.WFactory=b})(d.DragonBones||(d.DragonBones={}))})(WOZLLA||(WOZLLA={}));
