(function(c,f){function e(){b.READY||(r.determineEventTypes(),q.each(b.gestures,function(a){w.register(a)}),r.onTouch(b.DOCUMENT,m,w.detect),r.onTouch(b.DOCUMENT,p,w.detect),b.READY=!0)}var b=function y(a,d){return new y.Instance(a,d||{})};b.VERSION="1.1.3";b.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};b.DOCUMENT=document;b.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;
b.HAS_TOUCHEVENTS="ontouchstart"in c;b.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);b.NO_MOUSEEVENTS=b.HAS_TOUCHEVENTS&&b.IS_MOBILE||b.HAS_POINTEREVENTS;b.CALCULATE_INTERVAL=25;var a={},d=b.DIRECTION_DOWN="down",h=b.DIRECTION_LEFT="left",g=b.DIRECTION_UP="up",t=b.DIRECTION_RIGHT="right",u=b.POINTER_MOUSE="mouse",k=b.POINTER_TOUCH="touch",l=b.POINTER_PEN="pen",n=b.EVENT_START="start",m=b.EVENT_MOVE="move",p=b.EVENT_END="end",s=b.EVENT_RELEASE="release",v=b.EVENT_TOUCH=
"touch";b.READY=!1;b.plugins=b.plugins||{};b.gestures=b.gestures||{};var q=b.utils={extend:function(a,d,b){for(var h in d)!d.hasOwnProperty(h)||a[h]!==f&&b||(a[h]=d[h]);return a},on:function(a,d,b){a.addEventListener(d,b,!1)},off:function(a,d,b){a.removeEventListener(d,b,!1)},each:function(a,d,b){var h,g;if("forEach"in a)a.forEach(d,b);else if(a.length!==f)for(h=0,g=a.length;h<g&&!1!==d.call(b,a[h],h,a);h++);else for(h in a)if(a.hasOwnProperty(h)&&!1===d.call(b,a[h],h,a))break},inStr:function(a,d){return-1<
a.indexOf(d)},inArray:function(a,d){if(a.indexOf){var b=a.indexOf(d);return-1===b?!1:b}for(var b=0,h=a.length;b<h;b++)if(a[b]===d)return b;return!1},toArray:function(a){return Array.prototype.slice.call(a,0)},hasParent:function(a,d){for(;a;){if(a==d)return!0;a=a.parentNode}return!1},getCenter:function(a){var d=[],b=[],h=[],g=[],c=Math.min,e=Math.max;if(1===a.length)return{pageX:a[0].pageX,pageY:a[0].pageY,clientX:a[0].clientX,clientY:a[0].clientY};q.each(a,function(a){d.push(a.pageX);b.push(a.pageY);
h.push(a.clientX);g.push(a.clientY)});return{pageX:(c.apply(Math,d)+e.apply(Math,d))/2,pageY:(c.apply(Math,b)+e.apply(Math,b))/2,clientX:(c.apply(Math,h)+e.apply(Math,h))/2,clientY:(c.apply(Math,g)+e.apply(Math,g))/2}},getVelocity:function(a,d,b){return{x:Math.abs(d/a)||0,y:Math.abs(b/a)||0}},getAngle:function(a,d){return 180*Math.atan2(d.clientY-a.clientY,d.clientX-a.clientX)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.clientX-b.clientX),e=Math.abs(a.clientY-b.clientY);return c>=e?0<a.clientX-
b.clientX?h:t:0<a.clientY-b.clientY?g:d},getDistance:function(a,d){var b=d.clientX-a.clientX,h=d.clientY-a.clientY;return Math.sqrt(b*b+h*h)},getScale:function(a,d){return 2<=a.length&&2<=d.length?this.getDistance(d[0],d[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,d){return 2<=a.length&&2<=d.length?this.getAngle(d[1],d[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==g||a==d},setPrefixedCss:function(a,d,b,h){var g=["","Webkit","Moz","O","ms"];d=q.toCamelCase(d);for(var c=
0;c<g.length;c++){var e=d;g[c]&&(e=g[c]+e.slice(0,1).toUpperCase()+e.slice(1));if(e in a.style){a.style[e]=(null==h||h)&&b||"";break}}},toggleBehavior:function(a,d,b){if(d&&a&&a.style){q.each(d,function(d,h){q.setPrefixedCss(a,h,d,b)});var h=b&&function(){return!1};"none"==d.userSelect&&(a.onselectstart=h);"none"==d.userDrag&&(a.ondragstart=h)}},toCamelCase:function(a){return a.replace(/[_-]([a-z])/g,function(a){return a[1].toUpperCase()})}},r=b.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,
on:function(a,d,b,h){d=d.split(" ");q.each(d,function(d){q.on(a,d,b);h&&h(d)})},off:function(a,d,b,h){d=d.split(" ");q.each(d,function(d){q.off(a,d,b);h&&h(d)})},onTouch:function(d,h,g){var c=this,e=function(a){var e=a.type.toLowerCase(),t=b.HAS_POINTEREVENTS,e=q.inStr(e,"mouse"),f;e&&c.preventMouseEvents||(e&&h==n&&0===a.button?(c.preventMouseEvents=!1,c.shouldDetect=!0):t&&h==n?c.shouldDetect=1===a.buttons||x.matchType(k,a):e||h!=n||(c.preventMouseEvents=!0,c.shouldDetect=!0),t&&h!=p&&x.updatePointer(h,
a),c.shouldDetect&&(f=c.doDetect.call(c,a,h,d,g)),f==p&&(c.preventMouseEvents=!1,c.shouldDetect=!1,x.reset()),t&&h==p&&x.updatePointer(h,a))};this.on(d,a[h],e);return e},doDetect:function(a,d,b,h){var g=this.getTouchList(a,d),c=d,e=g.trigger,t=g.length;d==n?e=v:d==p&&(e=s,t=g.length-(a.changedTouches?a.changedTouches.length:1));0<t&&this.started&&(c=m);this.started=!0;a=this.collectEventData(b,c,g,a);d!=p&&h.call(w,a);e&&(a.changedLength=t,a.eventType=e,h.call(w,a),a.eventType=c,delete a.changedLength);
c==p&&(h.call(w,a),this.started=!1);return c},determineEventTypes:function(){var d;d=b.HAS_POINTEREVENTS?c.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:b.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"];a[n]=d[0];a[m]=d[1];a[p]=d[2];return a},getTouchList:function(a,d){if(b.HAS_POINTEREVENTS)return x.getTouchList();
if(a.touches){if(d==m)return a.touches;var h=[],g=[].concat(q.toArray(a.touches),q.toArray(a.changedTouches)),c=[];q.each(g,function(a){!1===q.inArray(h,a.identifier)&&c.push(a);h.push(a.identifier)});return c}a.identifier=1;return[a]},collectEventData:function(a,d,b,h){a=k;q.inStr(h.type,"mouse")||x.matchType(u,h)?a=u:x.matchType(l,h)&&(a=l);return{center:q.getCenter(b),timeStamp:Date.now(),target:h.target,touches:b,eventType:d,pointerType:a,srcEvent:h,preventDefault:function(){var a=this.srcEvent;
a.preventManipulation&&a.preventManipulation();a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return w.stopDetect()}}}},x=b.PointerEvent={pointers:{},getTouchList:function(){var a=[];q.each(this.pointers,function(d){a.push(d)});return a},updatePointer:function(a,d){a==p?delete this.pointers[d.pointerId]:(d.identifier=d.pointerId,this.pointers[d.pointerId]=d)},matchType:function(a,d){if(!d.pointerType)return!1;var b=d.pointerType,
h={};h[u]=b===(d.MSPOINTER_TYPE_MOUSE||u);h[k]=b===(d.MSPOINTER_TYPE_TOUCH||k);h[l]=b===(d.MSPOINTER_TYPE_PEN||l);return h[a]},reset:function(){this.pointers={}}},w=b.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,d){this.current||(this.stopped=!1,this.current={inst:a,startEvent:q.extend({},d),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(d))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);var d=
this.current.inst,b=d.options;q.each(this.gestures,function(h){!this.stopped&&d.enabled&&b[h.name]&&h.handler.call(h,a,d)},this);this.current&&(this.current.lastEvent=a);a.eventType==p&&this.stopDetect();return a}},stopDetect:function(){this.previous=q.extend({},this.current);this.current=null;this.stopped=!0},getCalculatedData:function(a,d,h,g,c){var e=this.current,t=!1,f=e.lastCalcEvent,u=e.lastCalcData;f&&a.timeStamp-f.timeStamp>b.CALCULATE_INTERVAL&&(d=f.center,h=a.timeStamp-f.timeStamp,g=a.center.clientX-
f.center.clientX,c=a.center.clientY-f.center.clientY,t=!0);if(a.eventType==v||a.eventType==s)e.futureCalcEvent=a;if(!e.lastCalcEvent||t)u.velocity=q.getVelocity(h,g,c),u.angle=q.getAngle(d,a.center),u.direction=q.getDirection(d,a.center),e.lastCalcEvent=e.futureCalcEvent||a,e.futureCalcEvent=a;a.velocityX=u.velocity.x;a.velocityY=u.velocity.y;a.interimAngle=u.angle;a.interimDirection=u.direction},extendEventData:function(a){var d=this.current,b=d.startEvent,d=d.lastEvent||b;if(a.eventType==v||a.eventType==
s)b.touches=[],q.each(a.touches,function(a){b.touches.push({clientX:a.clientX,clientY:a.clientY})});var h=a.timeStamp-b.timeStamp,g=a.center.clientX-b.center.clientX,c=a.center.clientY-b.center.clientY;this.getCalculatedData(a,d.center,h,g,c);q.extend(a,{startEvent:b,deltaTime:h,deltaX:g,deltaY:c,distance:q.getDistance(b.center,a.center),angle:q.getAngle(b.center,a.center),direction:q.getDirection(b.center,a.center),scale:q.getScale(b.touches,a.touches),rotation:q.getRotation(b.touches,a.touches)});
return a},register:function(a){var d=a.defaults||{};d[a.name]===f&&(d[a.name]=!0);q.extend(b.defaults,d,!0);a.index=a.index||1E3;this.gestures.push(a);this.gestures.sort(function(a,d){return a.index<d.index?-1:a.index>d.index?1:0});return this.gestures}};b.Instance=function(a,d){var h=this;e();this.element=a;this.enabled=!0;q.each(d,function(a,b){delete d[b];d[q.toCamelCase(b)]=a});this.options=q.extend(q.extend({},b.defaults),d||{});this.options.behavior&&q.toggleBehavior(this.element,this.options.behavior,
!0);this.eventStartHandler=r.onTouch(a,n,function(a){h.enabled&&a.eventType==n?w.startDetect(h,a):a.eventType==v&&w.detect(a)});this.eventHandlers=[]};b.Instance.prototype={on:function(a,d){var b=this;r.on(b.element,a,d,function(a){b.eventHandlers.push({gesture:a,handler:d})});return b},off:function(a,d){var b=this;r.off(b.element,a,d,function(a){a=q.inArray({gesture:a,handler:d});!1!==a&&b.eventHandlers.splice(a,1)});return b},trigger:function(a,d){d||(d={});var h=b.DOCUMENT.createEvent("Event");
h.initEvent(a,!0,!0);h.gesture=d;var g=this.element;q.hasParent(d.target,g)&&(g=d.target);navigator.isCocoonJS?this.eventHandlers.forEach(function(d){a===d.gesture&&d.handler(h)}):g.dispatchEvent(h);return this},enable:function(a){this.enabled=a;return this},dispose:function(){var d,b;q.toggleBehavior(this.element,this.options.behavior,!1);for(d=-1;b=this.eventHandlers[++d];)q.off(this.element,b.gesture,b.handler);this.eventHandlers=[];r.off(this.element,a[n],this.eventStartHandler);return null}};
(function(a){var c=!1;b.gestures.Drag={name:a,index:50,handler:function(b,e){var f=w.current;if(!(0<e.options.dragMaxTouches&&b.touches.length>e.options.dragMaxTouches))switch(b.eventType){case n:c=!1;break;case m:if(b.distance<e.options.dragMinDistance&&f.name!=a)break;var u=f.startEvent.center;if(f.name!=a&&(f.name=a,e.options.dragDistanceCorrection&&0<b.distance)){var k=Math.abs(e.options.dragMinDistance/b.distance);u.pageX+=b.deltaX*k;u.pageY+=b.deltaY*k;u.clientX+=b.deltaX*k;u.clientY+=b.deltaY*
k;b=w.extendEventData(b)}if(f.lastEvent.dragLockToAxis||e.options.dragLockToAxis&&e.options.dragLockMinDistance<=b.distance)b.dragLockToAxis=!0;f=f.lastEvent.direction;b.dragLockToAxis&&f!==b.direction&&(q.isVertical(f)?b.direction=0>b.deltaY?g:d:b.direction=0>b.deltaX?h:t);c||(e.trigger(a+"start",b),c=!0);e.trigger(a,b);e.trigger(a+b.direction,b);f=q.isVertical(b.direction);(e.options.dragBlockVertical&&f||e.options.dragBlockHorizontal&&!f)&&b.preventDefault();break;case s:c&&b.changedLength<=e.options.dragMaxTouches&&
(e.trigger(a+"end",b),c=!1);break;case p:c=!1}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}})("drag");b.gestures.Gesture={name:"gesture",index:1337,handler:function(a,d){d.trigger(this.name,a)}};(function(a){var d;b.gestures.Hold={name:a,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(b,h){var g=h.options,c=w.current;switch(b.eventType){case n:clearTimeout(d);c.name=
a;d=setTimeout(function(){c&&c.name==a&&h.trigger(a,b)},g.holdTimeout);break;case m:b.distance>g.holdThreshold&&clearTimeout(d);break;case s:clearTimeout(d)}}}})("hold");b.gestures.Release={name:"release",index:Infinity,handler:function(a,d){a.eventType==s&&d.trigger(this.name,a)}};b.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(a,d){if(a.eventType==s){var b=a.touches.length,h=d.options;b<h.swipeMinTouches||
b>h.swipeMaxTouches||!(a.velocityX>h.swipeVelocityX||a.velocityY>h.swipeVelocityY)||(d.trigger(this.name,a),d.trigger(this.name+a.direction,a))}}};(function(a){var d=!1;b.gestures.Tap={name:a,index:100,handler:function(b,h){var g=h.options,c=w.current,e=w.previous,t,f;switch(b.eventType){case n:d=!1;break;case m:d=d||b.distance>g.tapMaxDistance;break;case p:!q.inStr(b.srcEvent.type,"cancel")&&b.deltaTime<g.tapMaxTime&&!d&&(t=e&&e.lastEvent&&b.timeStamp-e.lastEvent.timeStamp,f=!1,e&&e.name==a&&t&&
t<g.doubleTapInterval&&b.distance<g.doubleTapDistance&&(h.trigger("doubletap",b),f=!0),!f||g.tapAlways)&&(c.name=a,h.trigger(c.name,b))}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}})("tap");b.gestures.Touch={name:"touch",index:-Infinity,defaults:{preventDefault:!1,preventMouse:!1},handler:function(a,d){d.options.preventMouse&&a.pointerType==u?a.stopDetect():(d.options.preventDefault&&a.preventDefault(),a.eventType==v&&d.trigger("touch",a))}};
(function(a){var d=!1;b.gestures.Transform={name:a,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:function(b,h){switch(b.eventType){case n:d=!1;break;case m:if(2>b.touches.length)break;var g=Math.abs(1-b.scale),c=Math.abs(b.rotation);if(g<h.options.transformMinScale&&c<h.options.transformMinRotation)break;w.current.name=a;d||(h.trigger(a+"start",b),d=!0);h.trigger(a,b);c>h.options.transformMinRotation&&h.trigger("rotate",b);g>h.options.transformMinScale&&(h.trigger("pinch",
b),h.trigger("pinch"+(1>b.scale?"in":"out"),b));break;case s:d&&2>b.changedLength&&(h.trigger(a+"end",b),d=!1)}}}})("transform");"function"==typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:c.Hammer=b})(window);var dragonBones;
(function(c){var f=function(){function e(b){this._animationStateCount=0;this._armature=b;this._animationList=[];this._animationStateList=[];this._timeScale=1;this._isPlaying=!1;this.tweenEnabled=!0}e.prototype.dispose=function(){if(this._armature){for(var b=this._animationStateList.length;b--;)c.AnimationState._returnObject(this._animationStateList[b]);this._animationList.length=0;this._animationStateList.length=0;this._animationStateList=this._animationList=this._animationDataList=this._armature=
null}};e.prototype.gotoAndPlay=function(b,a,d,h,g,t,f,k,l){void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===h&&(h=NaN);void 0===g&&(g=0);void 0===t&&(t=null);void 0===f&&(f=e.SAME_LAYER_AND_GROUP);void 0===k&&(k=!0);void 0===l&&(l=!0);if(!this._animationDataList)return null;for(var n=this._animationDataList.length,m;n--;)if(this._animationDataList[n].name==b){m=this._animationDataList[n];break}if(!m)return null;this._isFading=this._isPlaying=!0;a=0>a?0>m.fadeTime?.3:m.fadeTime:a;d=0>d?0>m.scale?1:m.scale:
1E3*d/m.duration;h=isNaN(h)?m.playTimes:h;switch(f){case e.NONE:break;case e.SAME_LAYER:for(n=this._animationStateList.length;n--;)f=this._animationStateList[n],f.layer==g&&f.fadeOut(a,k);break;case e.SAME_GROUP:for(n=this._animationStateList.length;n--;)f=this._animationStateList[n],f.group==t&&f.fadeOut(a,k);break;case e.ALL:for(n=this._animationStateList.length;n--;)f=this._animationStateList[n],f.fadeOut(a,k);break;default:for(n=this._animationStateList.length;n--;)f=this._animationStateList[n],
f.layer==g&&f.group==t&&f.fadeOut(a,k)}this._lastAnimationState=c.AnimationState._borrowObject();this._lastAnimationState._layer=g;this._lastAnimationState._group=t;this._lastAnimationState.autoTween=this.tweenEnabled;this._lastAnimationState._fadeIn(this._armature,m,a,1/d,h,l);this.addState(this._lastAnimationState);h=this._armature.getSlots(!1);for(n=h.length;n--;)g=h[n],g.childArmature&&g.childArmature.animation.gotoAndPlay(b,a);return this._lastAnimationState};e.prototype.gotoAndStop=function(b,
a,d,h,g,c,f,k){void 0===d&&(d=-1);void 0===h&&(h=0);void 0===g&&(g=-1);void 0===c&&(c=0);void 0===f&&(f=null);void 0===k&&(k=e.ALL);var l=this.getState(b,c);l||(l=this.gotoAndPlay(b,h,g,NaN,c,f,k));0<=d?l.setCurrentTime(l.totalTime*d):l.setCurrentTime(a);l.stop();return l};e.prototype.play=function(){this._animationDataList&&0!=this._animationDataList.length&&(this._lastAnimationState?this._isPlaying?this.gotoAndPlay(this._lastAnimationState.name):this._isPlaying=!0:this.gotoAndPlay(this._animationDataList[0].name))};
e.prototype.stop=function(){this._isPlaying=!1};e.prototype.getState=function(b,a){void 0===a&&(a=0);for(var d=this._animationStateList.length;d--;){var h=this._animationStateList[d];if(h.name==b&&h.layer==a)return h}return null};e.prototype.hasAnimation=function(b){for(var a=this._animationDataList.length;a--;)if(this._animationDataList[a].name==b)return!0;return!1};e.prototype._advanceTime=function(b){if(this._isPlaying){var a=!1;b*=this._timeScale;for(var d=this._animationStateList.length;d--;){var h=
this._animationStateList[d];h._advanceTime(b)?this.removeState(h):1!=h.fadeState&&(a=!0)}this._isFading=a}};e.prototype._updateAnimationStates=function(){for(var b=this._animationStateList.length;b--;)this._animationStateList[b]._updateTimelineStates()};e.prototype.addState=function(b){0>this._animationStateList.indexOf(b)&&(this._animationStateList.unshift(b),this._animationStateCount=this._animationStateList.length)};e.prototype.removeState=function(b){var a=this._animationStateList.indexOf(b);
0<=a&&(this._animationStateList.splice(a,1),c.AnimationState._returnObject(b),this._lastAnimationState==b&&(this._lastAnimationState=0<this._animationStateList.length?this._animationStateList[0]:null),this._animationStateCount=this._animationStateList.length)};Object.defineProperty(e.prototype,"movementList",{get:function(){return this._animationList},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"movementID",{get:function(){return this.lastAnimationName},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"lastAnimationName",{get:function(){return this._lastAnimationState?this._lastAnimationState.name:null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"animationList",{get:function(){return this._animationList},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying&&
!this.isComplete},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isComplete",{get:function(){if(this._lastAnimationState){if(!this._lastAnimationState.isComplete)return!1;for(var b=this._animationStateList.length;b--;)if(!this._animationStateList[b].isComplete)return!1}return!0},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},set:function(b){if(isNaN(b)||0>b)b=1;this._timeScale=b},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"animationDataList",{get:function(){return this._animationDataList},set:function(b){this._animationDataList=b;this._animationList.length=0;for(var a in this._animationDataList)this._animationList[this._animationList.length]=this._animationDataList[a].name},enumerable:!0,configurable:!0});e.NONE="none";e.SAME_LAYER="sameLayer";e.SAME_GROUP="sameGroup";e.SAME_LAYER_AND_GROUP="sameLayerAndGroup";e.ALL="all";return e}();c.Animation=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function e(){this._playTimes=this._fadeState=this._currentTime=this._totalTime=this._currentPlayTimes=this._currentFrameDuration=this._currentFramePosition=this._currentFrameIndex=this._layer=0;this._timelineStateList=[];this._boneMasks=[]}e._borrowObject=function(){return 0==e._pool.length?new e:e._pool.pop()};e._returnObject=function(b){b.clear();0>e._pool.indexOf(b)&&(e._pool[e._pool.length]=b)};e._clear=function(){for(var b=e._pool.length;b--;)e._pool[b].clear();
e._pool.length=0;c.TimelineState._clear()};e.prototype.clear=function(){for(var b=this._timelineStateList.length;b--;)c.TimelineState._returnObject(this._timelineStateList[b]);this._timelineStateList.length=0;this._boneMasks.length=0;this._clip=this._armature=null};e.prototype.containsBoneMask=function(b){return 0==this._boneMasks.length||0<=this._boneMasks.indexOf(b)};e.prototype.addBoneMask=function(b,a){void 0===a&&(a=!0);this.addBoneToBoneMask(d.name);if(a){var d=this._armature.getBone(b);if(d)for(var h=
this._armature.getBones(!1),g=h.length;g--;)d.contains(h[g])&&this.addBoneToBoneMask(d.name)}this._updateTimelineStates();return this};e.prototype.removeBoneMask=function(b,a){void 0===a&&(a=!0);this.removeBoneFromBoneMask(b);if(a){var d=this._armature.getBone(b);if(d)for(var h=this._armature.getBones(!1),g=h.length;g--;)d.contains(h[g])&&this.removeBoneFromBoneMask(d.name)}this._updateTimelineStates();return this};e.prototype.removeAllMixingTransform=function(){this._boneMasks.length=0;this._updateTimelineStates();
return this};e.prototype.addBoneToBoneMask=function(b){this._clip.getTimeline(b)&&0>this._boneMasks.indexOf(b)&&this._boneMasks.push(b)};e.prototype.removeBoneFromBoneMask=function(b){b=this._boneMasks.indexOf(b);0<=b&&this._boneMasks.splice(b,1)};e.prototype._updateTimelineStates=function(){for(var b,a=this._timelineStateList.length;a--;)b=this._timelineStateList[a],this._armature.getBone(b.name)||this.removeTimelineState(b);if(0<this._boneMasks.length){for(a=this._timelineStateList.length;a--;)b=
this._timelineStateList[a],0>this._boneMasks.indexOf(b.name)&&this.removeTimelineState(b);for(var d in this._boneMasks)this.addTimelineState(this._boneMasks[d])}else for(d in this._clip.timelineList)this.addTimelineState(this._clip.timelineList[d].name)};e.prototype.addTimelineState=function(b){var a=this._armature.getBone(b);if(a){for(var d in this._timelineStateList)if(this._timelineStateList[d].name==b)return;d=c.TimelineState._borrowObject();d._fadeIn(a,this,this._clip.getTimeline(b));this._timelineStateList.push(d)}};
e.prototype.removeTimelineState=function(b){var a=this._timelineStateList.indexOf(b);this._timelineStateList.splice(a,1);c.TimelineState._returnObject(b)};e.prototype.play=function(){this._isPlaying=!0;return this};e.prototype.stop=function(){this._isPlaying=!1;return this};e.prototype._fadeIn=function(b,a,d,h,g,c){this._armature=b;this._clip=a;this._pausePlayheadInFade=c;this._name=this._clip.name;this._totalTime=this._clip.duration;this.autoTween=this._clip.autoTween;this.setTimeScale(h);this.setPlayTimes(g);
this._isComplete=!1;this._currentPlayTimes=this._currentFrameIndex=-1;2>Math.round(this._totalTime*this._clip.frameRate*.001)||Infinity==h?this._currentTime=this._totalTime:this._currentTime=-1;this._time=0;this._boneMasks.length=0;this._isFadeOut=!1;this._fadeWeight=0;this._fadeTotalWeight=1;this._fadeState=-1;this._fadeBeginTime=this._fadeCurrentTime=0;this._fadeTotalTime=d*this._timeScale;this.lastFrameAutoTween=this.displayControl=this._isPlaying=!0;this.additiveBlending=!1;this.weight=1;this.fadeOutTime=
d;this._updateTimelineStates();return this};e.prototype.fadeOut=function(b,a){if(!this._armature)return null;if(isNaN(b)||0>b)b=0;this._pausePlayheadInFade=a;if(this._isFadeOut){if(b>this._fadeTotalTime/this._timeScale-(this._fadeCurrentTime-this._fadeBeginTime))return this}else for(var d in this._timelineStateList)this._timelineStateList[d]._fadeOut();this._isFadeOut=!0;this._fadeTotalWeight=this._fadeWeight;this._fadeState=-1;this._fadeBeginTime=this._fadeCurrentTime;this._fadeTotalTime=0<=this._fadeTotalWeight?
b*this._timeScale:0;this.displayControl=!1;return this};e.prototype._advanceTime=function(b){b*=this._timeScale;this.advanceFadeTime(b);this._fadeWeight&&this.advanceTimelinesTime(b);return this._isFadeOut&&1==this._fadeState};e.prototype.advanceFadeTime=function(b){var a=!1,d=!1;if(0<=this._fadeBeginTime){var h=this._fadeState;this._fadeCurrentTime+=0>b?-b:b;if(this._fadeCurrentTime>=this._fadeBeginTime+this._fadeTotalTime){if(1==this._fadeWeight||0==this._fadeWeight)h=1,this._pausePlayheadInFade&&
(this._pausePlayheadInFade=!1,this._currentTime=-1);this._fadeWeight=this._isFadeOut?0:1}else this._fadeCurrentTime>=this._fadeBeginTime?(h=0,this._fadeWeight=(this._fadeCurrentTime-this._fadeBeginTime)/this._fadeTotalTime*this._fadeTotalWeight,this._isFadeOut&&(this._fadeWeight=this._fadeTotalWeight-this._fadeWeight)):(h=-1,this._fadeWeight=this._isFadeOut?1:0);this._fadeState!=h&&(-1==this._fadeState&&(a=!0),1==h&&(d=!0),this._fadeState=h)}a&&(this._isFadeOut?this._armature.hasEventListener(c.AnimationEvent.FADE_OUT)&&
(b=new c.AnimationEvent(c.AnimationEvent.FADE_OUT),b.animationState=this,this._armature._eventList.push(b)):(this.hideBones(),this._armature.hasEventListener(c.AnimationEvent.FADE_IN)&&(b=new c.AnimationEvent(c.AnimationEvent.FADE_IN),b.animationState=this,this._armature._eventList.push(b))));d&&(this._isFadeOut?this._armature.hasEventListener(c.AnimationEvent.FADE_OUT_COMPLETE)&&(b=new c.AnimationEvent(c.AnimationEvent.FADE_OUT_COMPLETE),b.animationState=this,this._armature._eventList.push(b)):this._armature.hasEventListener(c.AnimationEvent.FADE_IN_COMPLETE)&&
(b=new c.AnimationEvent(c.AnimationEvent.FADE_IN_COMPLETE),b.animationState=this,this._armature._eventList.push(b)))};e.prototype.advanceTimelinesTime=function(b){this._isPlaying&&!this._pausePlayheadInFade&&(this._time+=b);var a=!1,d=b=!1,h=!1,g=0,e=1E3*this._time;0==this._playTimes?(h=!1,g=Math.ceil(Math.abs(e)/this._totalTime)||1,e=0<=e?e-Math.floor(e/this._totalTime)*this._totalTime:e-Math.ceil(e/this._totalTime)*this._totalTime,0>e&&(e+=this._totalTime)):(g=this._playTimes*this._totalTime,e>=
g?(e=g,h=!0):e<=-g?(e=-g,h=!0):h=!1,0>e&&(e+=g),g=Math.ceil(e/this._totalTime)||1,e=0<=e?e-Math.floor(e/this._totalTime)*this._totalTime:e-Math.ceil(e/this._totalTime)*this._totalTime,h&&(e=this._totalTime));this._isComplete=h;var f=1E3*this._time/this._totalTime,k;for(k in this._timelineStateList){var l=this._timelineStateList[k];l._update(f);this._isComplete=l._isComplete&&this._isComplete}this._currentTime!=e&&(this._currentPlayTimes!=g&&(0<this._currentPlayTimes&&1<g&&(d=!0),this._currentPlayTimes=
g),0>this._currentTime&&(a=!0),this._isComplete&&(b=!0),this._currentTime=e,this.updateMainTimeline(h));a&&this._armature.hasEventListener(c.AnimationEvent.START)&&(k=new c.AnimationEvent(c.AnimationEvent.START),k.animationState=this,this._armature._eventList.push(k));b?(this._armature.hasEventListener(c.AnimationEvent.COMPLETE)&&(k=new c.AnimationEvent(c.AnimationEvent.COMPLETE),k.animationState=this,this._armature._eventList.push(k)),this.autoFadeOut&&this.fadeOut(this.fadeOutTime,!0)):d&&this._armature.hasEventListener(c.AnimationEvent.LOOP_COMPLETE)&&
(k=new c.AnimationEvent(c.AnimationEvent.LOOP_COMPLETE),k.animationState=this,this._armature._eventList.push(k))};e.prototype.updateMainTimeline=function(b){var a=this._clip.frameList;if(0<a.length){for(var d,h,g=0,c=this._clip.frameList.length;g<c;++g){if(0>this._currentFrameIndex)this._currentFrameIndex=0;else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){if(this._currentFrameIndex++,this._currentFrameIndex>=a.length)if(b){this._currentFrameIndex--;
break}else this._currentFrameIndex=0}else break;h=a[this._currentFrameIndex];d&&this._armature._arriveAtFrame(d,null,this,!0);this._currentFrameDuration=h.duration;this._currentFramePosition=h.position;d=h}h&&this._armature._arriveAtFrame(h,null,this,!1)}};e.prototype.hideBones=function(){for(var b in this._clip.hideTimelineNameMap){var a=this._armature.getBone(this._clip.hideTimelineNameMap[b]);a&&a._hideSlots()}};e.prototype.setAdditiveBlending=function(b){this.additiveBlending=b;return this};e.prototype.setAutoFadeOut=
function(b,a){void 0===a&&(a=-1);this.autoFadeOut=b;0<=a&&(this.fadeOutTime=a*this._timeScale);return this};e.prototype.setWeight=function(b){if(isNaN(b)||0>b)b=1;this.weight=b;return this};e.prototype.setFrameTween=function(b,a){this.autoTween=b;this.lastFrameAutoTween=a;return this};e.prototype.setCurrentTime=function(b){if(0>b||isNaN(b))b=0;this._time=b;this._currentTime=1E3*this._time;return this};e.prototype.setTimeScale=function(b){if(isNaN(b)||Infinity==b)b=1;this._timeScale=b;return this};
e.prototype.setPlayTimes=function(b){void 0===b&&(b=0);2>Math.round(.001*this._totalTime*this._clip.frameRate)?this._playTimes=0>b?-1:1:this._playTimes=0>b?-b:b;this.autoFadeOut=0>b?!0:!1;return this};Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"group",{get:function(){return this._group},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"clip",{get:function(){return this._clip},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._isComplete},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying&&!this._isComplete},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"currentPlayTimes",{get:function(){return 0>this._currentPlayTimes?0:this._currentPlayTimes},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"totalTime",{get:function(){return.001*this._totalTime},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"currentTime",{get:function(){return 0>this._currentTime?0:.001*this._currentTime},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"fadeWeight",{get:function(){return this._fadeWeight},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"fadeState",{get:function(){return this._fadeState},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"fadeTotalTime",{get:function(){return this._fadeTotalTime},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"playTimes",{get:function(){return this._playTimes},enumerable:!0,configurable:!0});e._pool=[];return e}();c.AnimationState=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function e(){this._updateMode=this._currentFrameDuration=this._currentFramePosition=this._currentFrameIndex=this._currentTime=this._totalTime=0;this._transform=new c.DBTransform;this._pivot=new c.Point;this._durationTransform=new c.DBTransform;this._durationPivot=new c.Point;this._durationColor=new c.ColorTransform}e._borrowObject=function(){return 0==e._pool.length?new e:e._pool.pop()};e._returnObject=function(b){0>e._pool.indexOf(b)&&(e._pool[e._pool.length]=b);b.clear()};
e._clear=function(){for(var b=e._pool.length;b--;)e._pool[b].clear();e._pool.length=0};e.prototype.clear=function(){this._bone&&(this._bone._removeState(this),this._bone=null);this._originPivot=this._originTransform=this._timelineData=this._animationState=this._animation=this._armature=null};e.prototype._fadeIn=function(b,a,d){this._bone=b;this._armature=this._bone.armature;this._animation=this._armature.animation;this._animationState=a;this._timelineData=d;this._originTransform=this._timelineData.originTransform;
this._originPivot=this._timelineData.originPivot;this.name=d.name;this._totalTime=this._timelineData.duration;this._rawAnimationScale=this._animationState.clip.scale;this._tweenColor=this._tweenScale=this._tweenTransform=this._blendEnabled=this._isComplete=!1;this._currentTime=this._currentFrameIndex=-1;this._tweenEasing=NaN;this._weight=1;this._transform.x=0;this._transform.y=0;this._transform.scaleX=1;this._transform.scaleY=1;this._transform.skewX=0;this._transform.skewY=0;this._pivot.x=0;this._pivot.y=
0;this._durationTransform.x=0;this._durationTransform.y=0;this._durationTransform.scaleX=1;this._durationTransform.scaleY=1;this._durationTransform.skewX=0;this._durationTransform.skewY=0;this._durationPivot.x=0;this._durationPivot.y=0;switch(this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1}this._bone._addState(this)};e.prototype._fadeOut=function(){this._transform.skewX=c.TransformUtil.formatRadian(this._transform.skewX);
this._transform.skewY=c.TransformUtil.formatRadian(this._transform.skewY)};e.prototype._update=function(b){-1==this._updateMode?this.updateMultipleFrame(b):1==this._updateMode&&(this._updateMode=0,this.updateSingleFrame())};e.prototype.updateMultipleFrame=function(b){var a=0;b/=this._timelineData.scale;b+=this._timelineData.offset;b*=this._totalTime;a=this._animationState.playTimes;0==a?(this._isComplete=!1,a=Math.ceil(Math.abs(b)/this._totalTime)||1,b=0<=b?b-Math.floor(b/this._totalTime)*this._totalTime:
b-Math.ceil(b/this._totalTime)*this._totalTime,0>b&&(b+=this._totalTime)):(a*=this._totalTime,b>=a?(b=a,this._isComplete=!0):b<=-a?(b=-a,this._isComplete=!0):this._isComplete=!1,0>b&&(b+=a),a=Math.ceil(b/this._totalTime)||1,b=this._isComplete?this._totalTime:0<=b?b-Math.floor(b/this._totalTime)*this._totalTime:b-Math.ceil(b/this._totalTime)*this._totalTime);if(this._currentTime!=b){this._currentTime=b;b=this._timelineData.frameList;for(var d,h,g=0,c=this._timelineData.frameList.length;g<c;++g){if(0>
this._currentFrameIndex)this._currentFrameIndex=0;else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){if(this._currentFrameIndex++,this._currentFrameIndex>=b.length)if(this._isComplete){this._currentFrameIndex--;break}else this._currentFrameIndex=0}else break;h=b[this._currentFrameIndex];d&&this._bone._arriveAtFrame(d,this,this._animationState,!0);this._currentFrameDuration=h.duration;this._currentFramePosition=h.position;
d=h}h&&(this._bone._arriveAtFrame(h,this,this._animationState,!1),(this._blendEnabled=0<=h.displayIndex)?this.updateToNextFrame(a):(this._tweenEasing=NaN,this._tweenColor=this._tweenScale=this._tweenTransform=!1));this._blendEnabled&&this.updateTween()}};e.prototype.updateToNextFrame=function(b){void 0===b&&(b=0);var a=this._currentFrameIndex+1;a>=this._timelineData.frameList.length&&(a=0);var d=this._timelineData.frameList[this._currentFrameIndex],h=this._timelineData.frameList[a],g=!1;0==a&&(!this._animationState.lastFrameAutoTween||
this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&.999999<((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+b-this._timelineData.offset)*this._timelineData.scale)?(this._tweenEasing=NaN,g=!1):0>d.displayIndex||0>h.displayIndex?(this._tweenEasing=NaN,g=!1):this._animationState.autoTween?(this._tweenEasing=this._animationState.clip.tweenEasing,isNaN(this._tweenEasing)?(this._tweenEasing=d.tweenEasing,isNaN(this._tweenEasing)?
g=!1:(10==this._tweenEasing&&(this._tweenEasing=0),g=!0)):g=!0):(this._tweenEasing=d.tweenEasing,isNaN(this._tweenEasing)||10==this._tweenEasing?(this._tweenEasing=NaN,g=!1):g=!0);g?(this._durationTransform.x=h.transform.x-d.transform.x,this._durationTransform.y=h.transform.y-d.transform.y,this._durationTransform.skewX=h.transform.skewX-d.transform.skewX,this._durationTransform.skewY=h.transform.skewY-d.transform.skewY,this._durationTransform.scaleX=h.transform.scaleX-d.transform.scaleX+h.scaleOffset.x,
this._durationTransform.scaleY=h.transform.scaleY-d.transform.scaleY+h.scaleOffset.y,0==a&&(this._durationTransform.skewX=c.TransformUtil.formatRadian(this._durationTransform.skewX),this._durationTransform.skewY=c.TransformUtil.formatRadian(this._durationTransform.skewY)),this._durationPivot.x=h.pivot.x-d.pivot.x,this._durationPivot.y=h.pivot.y-d.pivot.y,this._durationTransform.x||this._durationTransform.y||this._durationTransform.skewX||this._durationTransform.skewY||this._durationTransform.scaleX||
this._durationTransform.scaleY||this._durationPivot.x||this._durationPivot.y?(this._tweenTransform=!0,this._tweenScale=d.tweenScale):this._tweenScale=this._tweenTransform=!1,d.color&&h.color?(this._durationColor.alphaOffset=h.color.alphaOffset-d.color.alphaOffset,this._durationColor.redOffset=h.color.redOffset-d.color.redOffset,this._durationColor.greenOffset=h.color.greenOffset-d.color.greenOffset,this._durationColor.blueOffset=h.color.blueOffset-d.color.blueOffset,this._durationColor.alphaMultiplier=
h.color.alphaMultiplier-d.color.alphaMultiplier,this._durationColor.redMultiplier=h.color.redMultiplier-d.color.redMultiplier,this._durationColor.greenMultiplier=h.color.greenMultiplier-d.color.greenMultiplier,this._durationColor.blueMultiplier=h.color.blueMultiplier-d.color.blueMultiplier,this._tweenColor=this._durationColor.alphaOffset||this._durationColor.redOffset||this._durationColor.greenOffset||this._durationColor.blueOffset||this._durationColor.alphaMultiplier||this._durationColor.redMultiplier||
this._durationColor.greenMultiplier||this._durationColor.blueMultiplier?!0:!1):d.color?(this._tweenColor=!0,this._durationColor.alphaOffset=-d.color.alphaOffset,this._durationColor.redOffset=-d.color.redOffset,this._durationColor.greenOffset=-d.color.greenOffset,this._durationColor.blueOffset=-d.color.blueOffset,this._durationColor.alphaMultiplier=1-d.color.alphaMultiplier,this._durationColor.redMultiplier=1-d.color.redMultiplier,this._durationColor.greenMultiplier=1-d.color.greenMultiplier,this._durationColor.blueMultiplier=
1-d.color.blueMultiplier):h.color?(this._tweenColor=!0,this._durationColor.alphaOffset=h.color.alphaOffset,this._durationColor.redOffset=h.color.redOffset,this._durationColor.greenOffset=h.color.greenOffset,this._durationColor.blueOffset=h.color.blueOffset,this._durationColor.alphaMultiplier=h.color.alphaMultiplier-1,this._durationColor.redMultiplier=h.color.redMultiplier-1,this._durationColor.greenMultiplier=h.color.greenMultiplier-1,this._durationColor.blueMultiplier=h.color.blueMultiplier-1):this._tweenColor=
!1):this._tweenColor=this._tweenScale=this._tweenTransform=!1;this._tweenTransform?this._tweenScale||(this._animationState.additiveBlending?(this._transform.scaleX=d.transform.scaleX,this._transform.scaleY=d.transform.scaleY):(this._transform.scaleX=this._originTransform.scaleX*d.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*d.transform.scaleY)):(this._animationState.additiveBlending?(this._transform.x=d.transform.x,this._transform.y=d.transform.y,this._transform.skewX=d.transform.skewX,
this._transform.skewY=d.transform.skewY,this._transform.scaleX=d.transform.scaleX,this._transform.scaleY=d.transform.scaleY,this._pivot.x=d.pivot.x,this._pivot.y=d.pivot.y):(this._transform.x=this._originTransform.x+d.transform.x,this._transform.y=this._originTransform.y+d.transform.y,this._transform.skewX=this._originTransform.skewX+d.transform.skewX,this._transform.skewY=this._originTransform.skewY+d.transform.skewY,this._transform.scaleX=this._originTransform.scaleX*d.transform.scaleX,this._transform.scaleY=
this._originTransform.scaleY*d.transform.scaleY,this._pivot.x=this._originPivot.x+d.pivot.x,this._pivot.y=this._originPivot.y+d.pivot.y),this._bone.invalidUpdate());!this._tweenColor&&this._animationState.displayControl&&(d.color?this._bone._updateColor(d.color.alphaOffset,d.color.redOffset,d.color.greenOffset,d.color.blueOffset,d.color.alphaMultiplier,d.color.redMultiplier,d.color.greenMultiplier,d.color.blueMultiplier,!0):this._bone._isColorChanged&&this._bone._updateColor(0,0,0,0,1,1,1,1,!1))};
e.prototype.updateTween=function(){var b=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;this._tweenEasing&&(b=c.MathUtil.getEaseValue(b,this._tweenEasing));var a=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenTransform){var d=a.transform,h=a.pivot;this._animationState.additiveBlending?(this._transform.x=d.x+this._durationTransform.x*b,this._transform.y=d.y+this._durationTransform.y*b,this._transform.skewX=d.skewX+this._durationTransform.skewX*b,this._transform.skewY=
d.skewY+this._durationTransform.skewY*b,this._tweenScale&&(this._transform.scaleX=d.scaleX+this._durationTransform.scaleX*b,this._transform.scaleY=d.scaleY+this._durationTransform.scaleY*b),this._pivot.x=h.x+this._durationPivot.x*b,this._pivot.y=h.y+this._durationPivot.y*b):(this._transform.x=this._originTransform.x+d.x+this._durationTransform.x*b,this._transform.y=this._originTransform.y+d.y+this._durationTransform.y*b,this._transform.skewX=this._originTransform.skewX+d.skewX+this._durationTransform.skewX*
b,this._transform.skewY=this._originTransform.skewY+d.skewY+this._durationTransform.skewY*b,this._tweenScale&&(this._transform.scaleX=this._originTransform.scaleX*d.scaleX+this._durationTransform.scaleX*b,this._transform.scaleY=this._originTransform.scaleY*d.scaleY+this._durationTransform.scaleY*b),this._pivot.x=this._originPivot.x+h.x+this._durationPivot.x*b,this._pivot.y=this._originPivot.y+h.y+this._durationPivot.y*b);this._bone.invalidUpdate()}this._tweenColor&&this._animationState.displayControl&&
(a.color?this._bone._updateColor(a.color.alphaOffset+this._durationColor.alphaOffset*b,a.color.redOffset+this._durationColor.redOffset*b,a.color.greenOffset+this._durationColor.greenOffset*b,a.color.blueOffset+this._durationColor.blueOffset*b,a.color.alphaMultiplier+this._durationColor.alphaMultiplier*b,a.color.redMultiplier+this._durationColor.redMultiplier*b,a.color.greenMultiplier+this._durationColor.greenMultiplier*b,a.color.blueMultiplier+this._durationColor.blueMultiplier*b,!0):this._bone._updateColor(this._durationColor.alphaOffset*
b,this._durationColor.redOffset*b,this._durationColor.greenOffset*b,this._durationColor.blueOffset*b,1+this._durationColor.alphaMultiplier*b,1+this._durationColor.redMultiplier*b,1+this._durationColor.greenMultiplier*b,1+this._durationColor.blueMultiplier*b,!0))};e.prototype.updateSingleFrame=function(){var b=this._timelineData.frameList[0];this._bone._arriveAtFrame(b,this,this._animationState,!1);this._isComplete=!0;this._tweenEasing=NaN;this._tweenColor=this._tweenScale=this._tweenTransform=!1;
if(this._blendEnabled=0<=b.displayIndex)this._animationState.additiveBlending?(this._transform.x=b.transform.x,this._transform.y=b.transform.y,this._transform.skewX=b.transform.skewX,this._transform.skewY=b.transform.skewY,this._transform.scaleX=b.transform.scaleX,this._transform.scaleY=b.transform.scaleY,this._pivot.x=b.pivot.x,this._pivot.y=b.pivot.y):(this._transform.x=this._originTransform.x+b.transform.x,this._transform.y=this._originTransform.y+b.transform.y,this._transform.skewX=this._originTransform.skewX+
b.transform.skewX,this._transform.skewY=this._originTransform.skewY+b.transform.skewY,this._transform.scaleX=this._originTransform.scaleX*b.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*b.transform.scaleY,this._pivot.x=this._originPivot.x+b.pivot.x,this._pivot.y=this._originPivot.y+b.pivot.y),this._bone.invalidUpdate(),this._animationState.displayControl&&(b.color?this._bone._updateColor(b.color.alphaOffset,b.color.redOffset,b.color.greenOffset,b.color.blueOffset,b.color.alphaMultiplier,
b.color.redMultiplier,b.color.greenMultiplier,b.color.blueMultiplier,!0):this._bone._isColorChanged&&this._bone._updateColor(0,0,0,0,1,1,1,1,!1))};e.HALF_PI=.5*Math.PI;e.DOUBLE_PI=2*Math.PI;e._pool=[];return e}();c.TimelineState=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(b,a){void 0===b&&(b=-1);void 0===a&&(a=1);this._time=0<=b?b:.001*(new Date).getTime();this._timeScale=isNaN(a)?1:a;this._animatableList=[]}Object.defineProperty(c.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeScale",{get:function(){return this._timeScale},set:function(b){if(isNaN(b)||0>b)b=1;this._timeScale=b},enumerable:!0,configurable:!0});c.prototype.contains=function(b){return 0<=
this._animatableList.indexOf(b)};c.prototype.add=function(b){b&&-1==this._animatableList.indexOf(b)&&this._animatableList.push(b)};c.prototype.remove=function(b){b=this._animatableList.indexOf(b);0<=b&&(this._animatableList[b]=null)};c.prototype.clear=function(){this._animatableList.length=0};c.prototype.advanceTime=function(b){void 0===b&&(b=-1);0>b&&(b=(new Date).getTime()-this._time);b*=this._timeScale;this._time+=b;var a=this._animatableList.length;if(0!=a){for(var d=0,h=0;h<a;h++){var g=this._animatableList[h];
g&&(d!=h&&(this._animatableList[d]=g,this._animatableList[h]=null),g.advanceTime(b),d++)}if(d!=h){for(a=this._animatableList.length;h<a;)this._animatableList[d++]=this._animatableList[h++];this._animatableList.length=d}}};c.clock=new c;return c}();c.WorldClock=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){}c.prototype.hasEventListener=function(b){return this._listenersMap&&this._listenersMap[b]?!0:!1};c.prototype.addEventListener=function(b,a){if(b&&a){this._listenersMap||(this._listenersMap={});var d=this._listenersMap[b];d&&this.removeEventListener(b,a);d?d.push(a):this._listenersMap[b]=[a]}};c.prototype.removeEventListener=function(b,a){if(this._listenersMap&&b&&a){var d=this._listenersMap[b];if(d)for(var h=d.length,g=0;g<h;g++)d[g]==a&&(1==h?(d.length=
0,delete this._listenersMap[b]):d.splice(g,1))}};c.prototype.removeAllEventListeners=function(b){b?delete this._listenersMap[b]:this._listenersMap=null};c.prototype.dispatchEvent=function(b){if(b){var a=this._listenersMap[b.type];if(a){b.target=this;for(var d=a.concat(),a=a.length,h=0;h<a;h++)d[h](b)}}};return c}();c.EventDispatcher=f})(dragonBones||(dragonBones={}));
var __extends=this.__extends||function(c,f){function e(){this.constructor=c}for(var b in f)f.hasOwnProperty(b)&&(c[b]=f[b]);e.prototype=f.prototype;c.prototype=new e};
(function(c){var f=function(e){function b(a){e.call(this);this._display=a;this._animation=new c.Animation(this);this._slotsZOrderChanged=!1;this._slotList=[];this._boneList=[];this._eventList=[];this._lockDispose=this._delayDispose=!1;this._armatureData=null}__extends(b,e);Object.defineProperty(b.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0});
b.prototype.getDisplay=function(){return this._display};Object.defineProperty(b.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._delayDispose=!0;if(this._animation&&!this._lockDispose){this.userData=null;this._animation.dispose();for(var a=this._slotList.length;a--;)this._slotList[a].dispose();for(a=this._boneList.length;a--;)this._boneList[a].dispose();this._eventList=this._boneList=this._slotList=this._animation=this._armatureData=
null}};b.prototype.invalidUpdate=function(a){void 0===a&&(a=null);if(a)(a=this.getBone(a))&&a.invalidUpdate();else for(a=this._boneList.length;a--;)this._boneList[a].invalidUpdate()};b.prototype.advanceTime=function(a){this._lockDispose=!0;this._animation._advanceTime(a);a*=this._animation.timeScale;for(var d=this._animation._isFading,b=this._boneList.length;b--;)this._boneList[b]._update(d);for(b=this._slotList.length;b--;)d=this._slotList[b],d._update(),d._isShowDisplay&&(d=d.childArmature)&&d.advanceTime(a);
this._slotsZOrderChanged&&(this.updateSlotsZOrder(),this.hasEventListener(c.ArmatureEvent.Z_ORDER_UPDATED)&&this.dispatchEvent(new c.ArmatureEvent(c.ArmatureEvent.Z_ORDER_UPDATED)));if(0<this._eventList.length){for(var g in this._eventList)this.dispatchEvent(this._eventList[g]);this._eventList.length=0}this._lockDispose=!1;this._delayDispose&&this.dispose()};b.prototype.getSlots=function(a){void 0===a&&(a=!0);return a?this._slotList.concat():this._slotList};b.prototype.getSlot=function(a){for(var d=
this._slotList.length,b=0;b<d;b++){var g=this._slotList[b];if(g.name==a)return g}return null};b.prototype.getSlotByDisplay=function(a){if(a)for(var d=this._slotList.length,b=0;b<d;b++){var g=this._slotList[b];if(g.display==a)return g}return null};b.prototype.addSlot=function(a,d){var b=this.getBone(d);if(b)b.addSlot(a);else throw Error();};b.prototype.removeSlot=function(a){if(!a||a.armature!=this)throw Error();a.parent.removeSlot(a)};b.prototype.removeSlotByName=function(a){(a=this.getSlot(a))&&
this.removeSlot(a);return a};b.prototype.getBones=function(a){void 0===a&&(a=!0);return a?this._boneList.concat():this._boneList};b.prototype.getBone=function(a){for(var d=this._boneList.length,b=0;b<d;b++){var g=this._boneList[b];if(g.name==a)return g}return null};b.prototype.getBoneByDisplay=function(a){return(a=this.getSlotByDisplay(a))?a.parent:null};b.prototype.addBone=function(a,d,b){void 0===d&&(d=null);void 0===b&&(b=!1);var g;if(d&&(g=this.getBone(d),!g))throw Error();g?g.addChildBone(a,
b):(a.parent&&a.parent.removeChildBone(a,b),a._setArmature(this),b||this._updateAnimationAfterBoneListChanged())};b.prototype.removeBone=function(a,d){void 0===d&&(d=!1);if(!a||a.armature!=this)throw Error();a.parent?a.parent.removeChildBone(a,d):(a._setArmature(null),d||this._updateAnimationAfterBoneListChanged(!1))};b.prototype.removeBoneByName=function(a){(a=this.getBone(a))&&this.removeBone(a);return a};b.prototype._addBoneToBoneList=function(a){0>this._boneList.indexOf(a)&&(this._boneList[this._boneList.length]=
a)};b.prototype._removeBoneFromBoneList=function(a){a=this._boneList.indexOf(a);0<=a&&this._boneList.splice(a,1)};b.prototype._addSlotToSlotList=function(a){0>this._slotList.indexOf(a)&&(this._slotList[this._slotList.length]=a)};b.prototype._removeSlotFromSlotList=function(a){a=this._slotList.indexOf(a);0<=a&&this._slotList.splice(a,1)};b.prototype.updateSlotsZOrder=function(){this._slotList.sort(this.sortSlot);for(var a=this._slotList.length;a--;){var d=this._slotList[a];d._isShowDisplay&&d._addDisplayToContainer(this._display)}this._slotsZOrderChanged=
!1};b.prototype._updateAnimationAfterBoneListChanged=function(a){void 0===a&&(a=!0);a&&this.sortBoneList();this._animation._updateAnimationStates()};b.prototype.sortBoneList=function(){var a=this._boneList.length;if(0!=a){for(var d=[];a--;){for(var b=0,g=this._boneList[a],e=g;e;)b++,e=e.parent;d[a]=[b,g]}d.sort(c.ArmatureData.sortBoneDataHelpArrayDescending);for(a=d.length;a--;)this._boneList[a]=d[a][1];d.length=0}};b.prototype._arriveAtFrame=function(a,d,b,g){a.event&&this.hasEventListener(c.FrameEvent.ANIMATION_FRAME_EVENT)&&
(d=new c.FrameEvent(c.FrameEvent.ANIMATION_FRAME_EVENT),d.animationState=b,d.frameLabel=a.event,this._eventList.push(d));a.action&&b.displayControl&&this.animation.gotoAndPlay(a.action)};b.prototype.sortSlot=function(a,d){return a.zOrder<d.zOrder?1:-1};return b}(c.EventDispatcher);c.Armature=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0}c.prototype.invert=function(){var b=this.a,a=this.b,d=this.c,h=this.d,g=this.tx,c=b*h-a*d;this.a=h/c;this.b=-a/c;this.c=-d/c;this.d=b/c;this.tx=(d*this.ty-h*g)/c;this.ty=-(b*this.ty-a*g)/c};c.prototype.concat=function(b){var a=b.a,d=b.b,h=b.c,g=b.d,c=this.tx,e=this.ty;if(1!=a||0!=d||0!=h||1!=g){var f=this.a,l=this.b,n=this.c,m=this.d;this.a=f*a+l*h;this.b=f*d+l*g;this.c=n*a+m*h;this.d=n*d+m*g}this.tx=c*
a+e*h+b.tx;this.ty=c*d+e*g+b.ty};return c}();c.Matrix=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){this.skewY=this.skewX=this.y=this.x=0;this.scaleY=this.scaleX=1}Object.defineProperty(c.prototype,"rotation",{get:function(){return this.skewX},set:function(b){this.skewX=this.skewY=b},enumerable:!0,configurable:!0});c.prototype.copy=function(b){this.x=b.x;this.y=b.y;this.skewX=b.skewX;this.skewY=b.skewY;this.scaleX=b.scaleX;this.scaleY=b.scaleY};c.prototype.toString=function(){return"x:"+this.x+" y:"+this.y+" skewX:"+this.skewX+" skewY:"+this.skewY+" scaleX:"+
this.scaleX+" scaleY:"+this.scaleY};return c}();c.DBTransform=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function e(){this._globalTransformMatrix=new c.Matrix;this._global=new c.DBTransform;this._origin=new c.DBTransform;this._offset=new c.DBTransform;this._offset.scaleX=this._offset.scaleY=1;this._visible=!0;this.userData=this._parent=this._armature=null;this.inheritTranslation=this.inheritScale=this.inheritRotation=!0}Object.defineProperty(e.prototype,"global",{get:function(){return this._global},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"origin",
{get:function(){return this._origin},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0});e.prototype._setArmature=function(b){this._armature=b};Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});e.prototype._setParent=function(b){this._parent=
b};e.prototype.dispose=function(){this._parent=this._armature=this._offset=this._origin=this._global=this._globalTransformMatrix=this.userData=null};e.prototype._calculateRelativeParentTransform=function(){};e.prototype._calculateParentTransform=function(){if(this.parent&&(this.inheritTranslation||this.inheritRotation||this.inheritScale)){var b=this._parent._globalTransformForChild,a=this._parent._globalTransformMatrixForChild;this.inheritTranslation&&this.inheritRotation&&this.inheritScale||(b=e._tempParentGlobalTransform,
b.copy(this._parent._globalTransformForChild),this.inheritTranslation||(b.x=0,b.y=0),this.inheritScale||(b.scaleX=1,b.scaleY=1),this.inheritRotation||(b.skewX=0,b.skewY=0),a=e._tempParentGlobalTransformMatrix,c.TransformUtil.transformToMatrix(b,a,!0));return{parentGlobalTransform:b,parentGlobalTransformMatrix:a}}return null};e.prototype._updateGlobal=function(){this._calculateRelativeParentTransform();c.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix,!0);var b=this._calculateParentTransform();
b&&(this._globalTransformMatrix.concat(b.parentGlobalTransformMatrix),c.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,0<=this._global.scaleX*b.parentGlobalTransform.scaleX,0<=this._global.scaleY*b.parentGlobalTransform.scaleY));return b};e._tempParentGlobalTransformMatrix=new c.Matrix;e._tempParentGlobalTransform=new c.DBTransform;return e}();c.DBObject=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(e){function b(){e.call(this);this.applyOffsetRotationToChild=this.applyOffsetTranslationToChild=!0;this.applyOffsetScaleToChild=!1;this._needUpdate=0;this._tween=new c.DBTransform;this._tweenPivot=new c.Point;this._tween.scaleX=this._tween.scaleY=1;this._boneList=[];this._slotList=[];this._timelineStateList=[];this._needUpdate=2;this._isColorChanged=!1}__extends(b,e);b.initWithBoneData=function(a){var d=new b;d.name=a.name;d.inheritRotation=a.inheritRotation;d.inheritScale=
a.inheritScale;d.origin.copy(a.transform);return d};b.prototype.dispose=function(){if(this._boneList){e.prototype.dispose.call(this);for(var a=this._boneList.length;a--;)this._boneList[a].dispose();for(a=this._slotList.length;a--;)this._slotList[a].dispose();this._timelineStateList=this._slotList=this._boneList=this._tweenPivot=this._tween=null}};b.prototype.contains=function(a){if(!a)throw Error();if(a==this)return!1;for(;a!=this&&null!=a;)a=a.parent;return a==this};b.prototype.addChildBone=function(a,
d){void 0===d&&(d=!1);if(!a)throw Error();if(a==this||a.contains(this))throw Error("An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)");a.parent!=this&&(a.parent&&a.parent.removeChildBone(a,d),this._boneList[this._boneList.length]=a,a._setParent(this),a._setArmature(this._armature),this._armature&&!d&&this._armature._updateAnimationAfterBoneListChanged())};b.prototype.removeChildBone=function(a,d){void 0===d&&(d=!1);if(!a)throw Error();var b=this._boneList.indexOf(a);
if(0>b)throw Error();this._boneList.splice(b,1);a._setParent(null);a._setArmature(null);this._armature&&!d&&this._armature._updateAnimationAfterBoneListChanged(!1)};b.prototype.addSlot=function(a){if(!a)throw Error();a.parent&&a.parent.removeSlot(a);this._slotList[this._slotList.length]=a;a._setParent(this);a.setArmature(this._armature)};b.prototype.removeSlot=function(a){if(!a)throw Error();var d=this._slotList.indexOf(a);if(0>d)throw Error();this._slotList.splice(d,1);a._setParent(null);a.setArmature(null)};
b.prototype._setArmature=function(a){if(this._armature!=a){this._armature&&(this._armature._removeBoneFromBoneList(this),this._armature._updateAnimationAfterBoneListChanged(!1));(this._armature=a)&&this._armature._addBoneToBoneList(this);for(a=this._boneList.length;a--;)this._boneList[a]._setArmature(this._armature);for(a=this._slotList.length;a--;)this._slotList[a].setArmature(this._armature)}};b.prototype.getBones=function(a){void 0===a&&(a=!0);return a?this._boneList.concat():this._boneList};b.prototype.getSlots=
function(a){void 0===a&&(a=!0);return a?this._slotList.concat():this._slotList};b.prototype.invalidUpdate=function(){this._needUpdate=2};b.prototype._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._tween.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._tween.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._tween.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._tween.skewY+this._offset.skewY;
this._global.x=this._origin.x+this._tween.x+this._offset.x;this._global.y=this._origin.y+this._tween.y+this._offset.y};b.prototype._update=function(a){void 0===a&&(a=!1);this._needUpdate--;if(a||0<this._needUpdate||this._parent&&0<this._parent._needUpdate){this._needUpdate=1;this.blendingTimeline();var d=this._updateGlobal();a=d?d.parentGlobalTransform:null;var d=d?d.parentGlobalTransformMatrix:null,b=0!=this._offset.scaleX||0!=this._offset.scaleY,g=0!=this._offset.skewX||0!=this._offset.skewY;!(0==
this._offset.x&&0==this._offset.y||this.applyOffsetTranslationToChild)||b&&!this.applyOffsetScaleToChild||g&&!this.applyOffsetRotationToChild?(this._tempGlobalTransformForChild||(this._tempGlobalTransformForChild=new c.DBTransform),this._globalTransformForChild=this._tempGlobalTransformForChild,this._tempGlobalTransformMatrixForChild||(this._tempGlobalTransformMatrixForChild=new c.Matrix),this._globalTransformMatrixForChild=this._tempGlobalTransformMatrixForChild,this._globalTransformForChild.x=this._origin.x+
this._tween.x,this._globalTransformForChild.y=this._origin.y+this._tween.y,this._globalTransformForChild.scaleX=this._origin.scaleX*this._tween.scaleX,this._globalTransformForChild.scaleY=this._origin.scaleY*this._tween.scaleY,this._globalTransformForChild.skewX=this._origin.skewX+this._tween.skewX,this._globalTransformForChild.skewY=this._origin.skewY+this._tween.skewY,this.applyOffsetTranslationToChild&&(this._globalTransformForChild.x+=this._offset.x,this._globalTransformForChild.y+=this._offset.y),
this.applyOffsetScaleToChild&&(this._globalTransformForChild.scaleX*=this._offset.scaleX,this._globalTransformForChild.scaleY*=this._offset.scaleY),this.applyOffsetRotationToChild&&(this._globalTransformForChild.skewX+=this._offset.skewX,this._globalTransformForChild.skewY+=this._offset.skewY),c.TransformUtil.transformToMatrix(this._globalTransformForChild,this._globalTransformMatrixForChild,!0),d&&(this._globalTransformMatrixForChild.concat(d),c.TransformUtil.matrixToTransform(this._globalTransformMatrixForChild,
this._globalTransformForChild,0<=this._globalTransformForChild.scaleX*a.scaleX,0<=this._globalTransformForChild.scaleY*a.scaleY))):(this._globalTransformForChild=this._global,this._globalTransformMatrixForChild=this._globalTransformMatrix)}};b.prototype._updateColor=function(a,d,b,g,c,e,f,l,n){for(var m=this._slotList.length,p=0;p<m;p++)this._slotList[p]._updateDisplayColor(a,d,b,g,c,e,f,l);this._isColorChanged=n};b.prototype._hideSlots=function(){for(var a=this._slotList.length,d=0;d<a;d++)this._slotList[d]._changeDisplay(-1)};
b.prototype._arriveAtFrame=function(a,d,b,g){if(b.displayControl&&(!this.displayController||this.displayController==b.name)&&b.containsBoneMask(this.name)){g=a.displayIndex;for(var e=this._slotList.length,f=0;f<e;f++)d=this._slotList[f],d._changeDisplay(g),d._updateDisplayVisible(a.visible),0<=g&&!isNaN(a.zOrder)&&a.zOrder!=d._tweenZOrder&&(d._tweenZOrder=a.zOrder,this._armature._slotsZOrderChanged=!0);a.event&&this._armature.hasEventListener(c.FrameEvent.BONE_FRAME_EVENT)&&(d=new c.FrameEvent(c.FrameEvent.BONE_FRAME_EVENT),
d.bone=this,d.animationState=b,d.frameLabel=a.event,this._armature._eventList.push(d));if(a.action)for(b=this._slotList.length,g=0;g<b;g++)d=this._slotList[g],(d=d.childArmature)&&d.animation.gotoAndPlay(a.action)}};b.prototype._addState=function(a){0>this._timelineStateList.indexOf(a)&&(this._timelineStateList.push(a),this._timelineStateList.sort(this.sortState))};b.prototype._removeState=function(a){a=this._timelineStateList.indexOf(a);0<=a&&this._timelineStateList.splice(a,1)};b.prototype.blendingTimeline=
function(){var a,d,b,g=this._timelineStateList.length;if(1==g)a=this._timelineStateList[0],b=a._animationState.weight*a._animationState.fadeWeight,a._weight=b,d=a._transform,a=a._pivot,this._tween.x=d.x*b,this._tween.y=d.y*b,this._tween.skewX=d.skewX*b,this._tween.skewY=d.skewY*b,this._tween.scaleX=1+(d.scaleX-1)*b,this._tween.scaleY=1+(d.scaleY-1)*b,this._tweenPivot.x=a.x*b,this._tweenPivot.y=a.y*b;else if(1<g){var c=0,e=0,f=0,l=0,n=0,m=0,p=0,s=0,v=1,q=0,r=this._timelineStateList[g-1]._animationState.layer;
for(d=0;g--;){a=this._timelineStateList[g];d=a._animationState.layer;if(r!=d)if(q>=v){a._weight=0;break}else v-=q;r=d;b=a._animationState.weight*a._animationState.fadeWeight*v;(a._weight=b)&&a._blendEnabled&&(d=a._transform,a=a._pivot,c+=d.x*b,e+=d.y*b,f+=d.skewX*b,l+=d.skewY*b,n+=(d.scaleX-1)*b,m+=(d.scaleY-1)*b,p+=a.x*b,s+=a.y*b,q+=b)}this._tween.x=c;this._tween.y=e;this._tween.skewX=f;this._tween.skewY=l;this._tween.scaleX=n;this._tween.scaleY=m;this._tweenPivot.x=p;this._tweenPivot.y=s}};b.prototype.sortState=
function(a,d){return a._animationState.layer<d._animationState.layer?-1:1};Object.defineProperty(b.prototype,"childArmature",{get:function(){return this.slot?this.slot.childArmature:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"display",{get:function(){return this.slot?this.slot.display:null},set:function(a){this.slot&&(this.slot.display=a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"node",{get:function(){return this._offset},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"visible",{set:function(a){if(this._visible!=a){this._visible=a;a=this._slotList.length;for(var d=0;d<a;d++)this._slotList[d]._updateDisplayVisible(this._visible)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"slot",{get:function(){return 0<this._slotList.length?this._slotList[0]:null},enumerable:!0,configurable:!0});return b}(c.DBObject);c.Bone=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(e){function b(a){e.call(this);this._currentDisplayIndex=0;if(a!=this)throw Error("Abstract class can not be instantiated!");this._displayList=[];this._currentDisplayIndex=-1;this._offsetZOrder=this._tweenZOrder=this._originZOrder=0;this._isShowDisplay=!1;this._colorTransform=new c.ColorTransform;this._currentDisplay=this._displayDataList=null;this.inheritScale=this.inheritRotation=!0}__extends(b,e);b.prototype.initWithSlotData=function(a){this.name=a.name;this.blendMode=
a.blendMode;this._originZOrder=a.zOrder;this._displayDataList=a.displayDataList};b.prototype.dispose=function(){this._displayList&&(e.prototype.dispose.call(this),this._displayList.length=0,this._currentDisplay=this._displayList=this._displayDataList=null)};b.prototype.setArmature=function(a){this._armature!=a&&(this._armature&&this._armature._removeSlotFromSlotList(this),(this._armature=a)?(this._armature._addSlotToSlotList(this),this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)):
this._removeDisplayFromContainer())};b.prototype._update=function(){0>=this._parent._needUpdate||(this._updateGlobal(),this._updateTransform())};b.prototype._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._offset.skewY;this._global.x=this._origin.x+this._offset.x+this._parent._tweenPivot.x;
this._global.y=this._origin.y+this._offset.y+this._parent._tweenPivot.y};b.prototype.updateChildArmatureAnimation=function(){this.childArmature&&(this._isShowDisplay?this._armature&&this._armature.animation.lastAnimationState&&this.childArmature.animation.hasAnimation(this._armature.animation.lastAnimationState.name)?this.childArmature.animation.gotoAndPlay(this._armature.animation.lastAnimationState.name):this.childArmature.animation.play():(this.childArmature.animation.stop(),this.childArmature.animation._lastAnimationState=
null))};b.prototype._changeDisplay=function(a){void 0===a&&(a=0);if(0>a)this._isShowDisplay&&(this._isShowDisplay=!1,this._removeDisplayFromContainer(),this.updateChildArmatureAnimation());else if(0<this._displayList.length){var d=this._displayList.length;a>=d&&(a=d-1);this._currentDisplayIndex!=a?(this._isShowDisplay=!0,this._currentDisplayIndex=a,this._updateSlotDisplay(),this.updateChildArmatureAnimation(),this._displayDataList&&0<this._displayDataList.length&&this._currentDisplayIndex<this._displayDataList.length&&
this._origin.copy(this._displayDataList[this._currentDisplayIndex].transform)):this._isShowDisplay||(this._isShowDisplay=!0,this._armature&&(this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)),this.updateChildArmatureAnimation())}};b.prototype._updateSlotDisplay=function(){var a=-1;this._currentDisplay&&(a=this._getDisplayIndex(),this._removeDisplayFromContainer());var d=this._displayList[this._currentDisplayIndex];this._currentDisplay=d?d instanceof c.Armature?
d.display:d:null;this._updateDisplay(this._currentDisplay);this._currentDisplay&&(this._armature&&this._isShowDisplay&&(0>a?(this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)):this._addDisplayToContainer(this._armature.display,a)),this._updateDisplayBlendMode(this._blendMode),this._updateDisplayColor(this._colorTransform.alphaOffset,this._colorTransform.redOffset,this._colorTransform.greenOffset,this._colorTransform.blueOffset,this._colorTransform.alphaMultiplier,
this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier),this._updateDisplayVisible(this._visible))};Object.defineProperty(b.prototype,"visible",{set:function(a){this._visible!=a&&(this._visible=a,this._updateDisplayVisible(this._visible))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"displayList",{get:function(){return this._displayList},set:function(a){if(!a)throw Error();0>this._currentDisplayIndex&&(this._currentDisplayIndex=
0);for(var d=this._displayList.length=a.length;d--;)this._displayList[d]=a[d];a=this._currentDisplayIndex;this._currentDisplayIndex=-1;this._changeDisplay(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"display",{get:function(){return this._currentDisplay},set:function(a){0>this._currentDisplayIndex&&(this._currentDisplayIndex=0);this._displayList[this._currentDisplayIndex]!=a&&(this._displayList[this._currentDisplayIndex]=a,this._updateSlotDisplay(),this.updateChildArmatureAnimation(),
this._updateTransform())},enumerable:!0,configurable:!0});b.prototype.getDisplay=function(){return this.display};b.prototype.setDisplay=function(a){this.display=a};Object.defineProperty(b.prototype,"childArmature",{get:function(){return this._displayList[this._currentDisplayIndex]instanceof c.Armature?this._displayList[this._currentDisplayIndex]:null},set:function(a){this.display=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"zOrder",{get:function(){return this._originZOrder+
this._tweenZOrder+this._offsetZOrder},set:function(a){this.zOrder!=a&&(this._offsetZOrder=a-this._originZOrder-this._tweenZOrder,this._armature&&(this._armature._slotsZOrderChanged=!0))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"blendMode",{get:function(){return this._blendMode},set:function(a){this._blendMode!=a&&(this._blendMode=a,this._updateDisplayBlendMode(this._blendMode))},enumerable:!0,configurable:!0});b.prototype._updateDisplay=function(a){throw Error("Abstract method needs to be implemented in subclass!");
};b.prototype._getDisplayIndex=function(){throw Error("Abstract method needs to be implemented in subclass!");};b.prototype._addDisplayToContainer=function(a,d){throw Error("Abstract method needs to be implemented in subclass!");};b.prototype._removeDisplayFromContainer=function(){throw Error("Abstract method needs to be implemented in subclass!");};b.prototype._updateTransform=function(){throw Error("Abstract method needs to be implemented in subclass!");};b.prototype._updateDisplayVisible=function(a){throw Error("Abstract method needs to be implemented in subclass!");
};b.prototype._updateDisplayColor=function(a,d,b,g,c,e,f,l){this._colorTransform.alphaOffset=a;this._colorTransform.redOffset=d;this._colorTransform.greenOffset=b;this._colorTransform.blueOffset=g;this._colorTransform.alphaMultiplier=c;this._colorTransform.redMultiplier=e;this._colorTransform.greenMultiplier=f;this._colorTransform.blueMultiplier=l};b.prototype._updateDisplayBlendMode=function(a){throw Error("Abstract method needs to be implemented in subclass!");};return b}(c.DBObject);c.Slot=f})(dragonBones||
(dragonBones={}));(function(c){var f=function(){function c(){}c.DATA_VERSION="2.3";c.PARENT_COORDINATE_DATA_VERSION="3.0";return c}();c.DragonBones=f})(dragonBones||(dragonBones={}));(function(c){var f=function(){return function(c){this.type=c}}();c.Event=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(c){function b(a,d){c.call(this,a)}__extends(b,c);Object.defineProperty(b,"MOVEMENT_CHANGE",{get:function(){return b.FADE_IN},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"movementID",{get:function(){return this.animationName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"armature",{get:function(){return this.target},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"animationName",{get:function(){return this.animationState.name},
enumerable:!0,configurable:!0});b.FADE_IN="fadeIn";b.FADE_OUT="fadeOut";b.START="start";b.COMPLETE="complete";b.LOOP_COMPLETE="loopComplete";b.FADE_IN_COMPLETE="fadeInComplete";b.FADE_OUT_COMPLETE="fadeOutComplete";return b}(c.Event);c.AnimationEvent=f})(dragonBones||(dragonBones={}));(function(c){var f=function(c){function b(a){c.call(this,a)}__extends(b,c);b.Z_ORDER_UPDATED="zOrderUpdated";return b}(c.Event);c.ArmatureEvent=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(c){function b(a,d){c.call(this,a)}__extends(b,c);Object.defineProperty(b,"MOVEMENT_FRAME_EVENT",{get:function(){return b.ANIMATION_FRAME_EVENT},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"armature",{get:function(){return this.target},enumerable:!0,configurable:!0});b.ANIMATION_FRAME_EVENT="animationFrameEvent";b.BONE_FRAME_EVENT="boneFrameEvent";return b}(c.Event);c.FrameEvent=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(e){function b(a){e.call(this);this.dragonBonesDataDic={};this.textureAtlasDic={};if(a!=this)throw Error("Abstract class can not be instantiated!");}__extends(b,e);b.prototype.dispose=function(a){void 0===a&&(a=!0);if(a){for(var d in this.dragonBonesDataDic)this.dragonBonesDataDic[d].dispose(),delete this.dragonBonesDataDic[d];for(var b in this.textureAtlasDic)this.textureAtlasDic[b].dispose(),delete this.textureAtlasDic[b]}this.textureAtlasDic=this.dragonBonesDataDic=null};
b.prototype.getDragonBonesData=function(a){return this.dragonBonesDataDic[a]};b.prototype.getSkeletonData=function(a){return this.getDragonBonesData(a)};b.prototype.addDragonBonesData=function(a,d){void 0===d&&(d=null);if(!a)throw Error();d=d||a.name;if(!d)throw Error("Unnamed data!");if(this.dragonBonesDataDic[d])throw Error();this.dragonBonesDataDic[d]=a};b.prototype.addSkeletonData=function(a,d){void 0===d&&(d=null);this.addDragonBonesData(a,d)};b.prototype.removeDragonBonesData=function(a){delete this.dragonBonesDataDic[a]};
b.prototype.removeSkeletonData=function(a){delete this.dragonBonesDataDic[a]};b.prototype.getTextureAtlas=function(a){return this.textureAtlasDic[a]};b.prototype.addTextureAtlas=function(a,d){void 0===d&&(d=null);if(!a)throw Error();!d&&a.hasOwnProperty("name")&&(d=a.name);if(!d)throw Error("Unnamed data!");if(this.textureAtlasDic[d])throw Error();this.textureAtlasDic[d]=a};b.prototype.removeTextureAtlas=function(a){delete this.textureAtlasDic[a]};b.prototype.getTextureDisplay=function(a,d,b,g){void 0===
d&&(d=null);void 0===b&&(b=NaN);void 0===g&&(g=NaN);var c;if(d)c=this.textureAtlasDic[d];else for(d in this.textureAtlasDic){c=this.textureAtlasDic[d];if(c.getRegion(a))break;c=null}if(!c)return null;if(isNaN(b)||isNaN(g))if(d=(d=this.dragonBonesDataDic[d])?d:this.findFirstDragonBonesData())if(d=d.getDisplayDataByName(a))b=d.pivot.x,g=d.pivot.y;return this._generateDisplay(c,a,b,g)};b.prototype.buildArmature=function(a,d,b,g){void 0===d&&(d=null);void 0===b&&(b=null);void 0===g&&(g=null);var c={};
this.fillBuildArmatureDataPackageArmatureInfo(a,d,c)&&this.fillBuildArmatureDataPackageTextureInfo(b,c);a=c.armatureData;d=c.textureAtlas;return a&&d?this.buildArmatureUsingArmatureDataFromTextureAtlas(c.dragonBonesData,a,d,g):null};b.prototype.buildArmatureUsingArmatureDataFromTextureAtlas=function(a,d,b,g){void 0===g&&(g=null);var c=this._generateArmature();c.name=d.name;c.__dragonBonesData=a;c._armatureData=d;c.animation.animationDataList=d.animationDataList;this._buildBones(c);this._buildSlots(c,
g,b);c.advanceTime(0);return c};b.prototype.copyAnimationsToArmature=function(a,d,b,g){void 0===b&&(b=null);void 0===g&&(g=!0);var e={};if(!this.fillBuildArmatureDataPackageArmatureInfo(d,b,e))return!1;d=e.armatureData;a.animation.animationDataList=d.animationDataList;d=d.getSkinData("");var f;a=a.getSlots(!1);for(var k,l=0,n,m=a.length,p=0;p<m;p++){b=a[p];k=b.displayList;for(var l=k.length,s=0;s<l;s++)n=k[s],n instanceof c.Armature&&(f=d.getSlotData(b.name),f=f.displayDataList[s],f.type==c.DisplayData.ARMATURE&&
this.copyAnimationsToArmature(n,f.name,e.dragonBonesDataName,g))}return!0};b.prototype.fillBuildArmatureDataPackageArmatureInfo=function(a,d,b){if(d)b.dragonBonesDataName=d,b.dragonBonesData=this.dragonBonesDataDic[d],b.armatureData=b.dragonBonesData.getArmatureDataByName(a);else for(d in this.dragonBonesDataDic)if(b.dragonBonesData=this.dragonBonesDataDic[d],b.armatureData=b.dragonBonesData.getArmatureDataByName(a),b.armatureData)return b.dragonBonesDataName=d,!0;return!1};b.prototype.fillBuildArmatureDataPackageTextureInfo=
function(a,d){d.textureAtlas=this.textureAtlasDic[a?a:d.dragonBonesDataName]};b.prototype.findFirstDragonBonesData=function(){for(var a in this.dragonBonesDataDic){var d=this.dragonBonesDataDic[a];if(d)return d}return null};b.prototype.findFirstTextureAtlas=function(){for(var a in this.textureAtlasDic){var d=this.textureAtlasDic[a];if(d)return d}return null};b.prototype._buildBones=function(a){for(var d=a.armatureData.boneDataList,b,g,e=0;e<d.length;e++)b=d[e],g=c.Bone.initWithBoneData(b),(b=b.parent)&&
null==a.armatureData.getBoneData(b)&&(b=null),a.addBone(g,b,!0);a._updateAnimationAfterBoneListChanged()};b.prototype._buildSlots=function(a,d,b){var g=a.armatureData.getSkinData(d);if(g)for(var e=[],g=g.slotDataList,f,k,l,n=0;n<g.length;n++)if(f=g[n],l=a.getBone(f.parent)){k=this._generateSlot();k.initWithSlotData(f);l.addSlot(k);for(l=f.displayDataList.length;l--;){var m=f.displayDataList[l];switch(m.type){case c.DisplayData.ARMATURE:m=this.buildArmatureUsingArmatureDataFromTextureAtlas(a.__dragonBonesData,
a.__dragonBonesData.getArmatureDataByName(m.name),b,d);e[l]=m;break;default:e[l]=this._generateDisplay(b,m.name,m.pivot.x,m.pivot.y)}}for(var p in e)if(f=e[p],f instanceof c.Armature&&(f=f.display),f.hasOwnProperty("name"))try{f.name=k.name}catch(s){}k.displayList=e;k._changeDisplay(0)}};b.prototype._generateArmature=function(){return null};b.prototype._generateSlot=function(){return null};b.prototype._generateDisplay=function(a,d,b,g){return null};b._helpMatrix=new c.Matrix;return b}(c.EventDispatcher);
c.BaseFactory=f})(dragonBones||(dragonBones={}));(function(c){var f=function(){function c(b,a){void 0===b&&(b=0);void 0===a&&(a=0);this.x=b;this.y=a}c.prototype.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};return c}();c.Point=f})(dragonBones||(dragonBones={}));(function(c){var f=function(){return function(c,b,a,d){void 0===c&&(c=0);void 0===b&&(b=0);void 0===a&&(a=0);void 0===d&&(d=0);this.x=c;this.y=b;this.width=a;this.height=d}}();c.Rectangle=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){this.duration=0;this._frameList=[];this.duration=0;this.scale=1}c.prototype.dispose=function(){for(var b=this._frameList.length;b--;)this._frameList[b].dispose();this._frameList=null};c.prototype.addFrame=function(b){if(!b)throw Error();if(0>this._frameList.indexOf(b))this._frameList[this._frameList.length]=b;else throw Error();};Object.defineProperty(c.prototype,"frameList",{get:function(){return this._frameList},enumerable:!0,configurable:!0});return c}();
c.Timeline=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(c){function b(){c.call(this);this.playTimes=this.fadeTime=this.lastFrameDuration=this.playTimes=this.frameRate=0;this.autoTween=!0;this.tweenEasing=NaN;this.hideTimelineNameMap=[];this._timelineList=[]}__extends(b,c);Object.defineProperty(b.prototype,"timelineList",{get:function(){return this._timelineList},enumerable:!0,configurable:!0});b.prototype.dispose=function(){c.prototype.dispose.call(this);this.hideTimelineNameMap=null;for(var a in this._timelineList)this._timelineList[a].dispose();
this._timelineList=null};b.prototype.getTimeline=function(a){for(var d=this._timelineList.length;d--;)if(this._timelineList[d].name==a)return this._timelineList[d];return null};b.prototype.addTimeline=function(a){if(!a)throw Error();0>this._timelineList.indexOf(a)&&(this._timelineList[this._timelineList.length]=a)};return b}(c.Timeline);c.AnimationData=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){this._boneDataList=[];this._skinDataList=[];this._animationDataList=[]}c.sortBoneDataHelpArray=function(b,a){return b[0]>a[0]?1:-1};c.sortBoneDataHelpArrayDescending=function(b,a){return b[0]>a[0]?-1:1};c.prototype.dispose=function(){for(var b=this._boneDataList.length;b--;)this._boneDataList[b].dispose();for(b=this._skinDataList.length;b--;)this._skinDataList[b].dispose();for(b=this._animationDataList.length;b--;)this._animationDataList[b].dispose();this._animationDataList=
this._skinDataList=this._boneDataList=null};c.prototype.getBoneData=function(b){for(var a=this._boneDataList.length;a--;)if(this._boneDataList[a].name==b)return this._boneDataList[a];return null};c.prototype.getSkinData=function(b){if(!b&&0<this._skinDataList.length)return this._skinDataList[0];for(var a=this._skinDataList.length;a--;)if(this._skinDataList[a].name==b)return this._skinDataList[a];return null};c.prototype.getAnimationData=function(b){for(var a=this._animationDataList.length;a--;)if(this._animationDataList[a].name==
b)return this._animationDataList[a];return null};c.prototype.addBoneData=function(b){if(!b)throw Error();if(0>this._boneDataList.indexOf(b))this._boneDataList[this._boneDataList.length]=b;else throw Error();};c.prototype.addSkinData=function(b){if(!b)throw Error();if(0>this._skinDataList.indexOf(b))this._skinDataList[this._skinDataList.length]=b;else throw Error();};c.prototype.addAnimationData=function(b){if(!b)throw Error();0>this._animationDataList.indexOf(b)&&(this._animationDataList[this._animationDataList.length]=
b)};c.prototype.sortBoneDataList=function(){var b=this._boneDataList.length;if(0!=b){for(var a=[];b--;){for(var d=this._boneDataList[b],h=0,g=d;g;)h++,g=this.getBoneData(g.parent);a[b]=[h,d]}a.sort(c.sortBoneDataHelpArray);for(b=a.length;b--;)this._boneDataList[b]=a[b][1]}};Object.defineProperty(c.prototype,"boneDataList",{get:function(){return this._boneDataList},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"skinDataList",{get:function(){return this._skinDataList},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"animationDataList",{get:function(){return this._animationDataList},enumerable:!0,configurable:!0});return c}();c.ArmatureData=f})(dragonBones||(dragonBones={}));(function(c){var f=function(){function e(){this.length=0;this.global=new c.DBTransform;this.transform=new c.DBTransform;this.inheritRotation=!0;this.inheritScale=!1}e.prototype.dispose=function(){this.transform=this.global=null};return e}();c.BoneData=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){return function(){this.alphaMultiplier=1;this.alphaOffset=0;this.blueMultiplier=1;this.blueOffset=0;this.greenMultiplier=1;this.greenOffset=0;this.redMultiplier=1;this.redOffset=0}}();c.ColorTransform=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function e(){this.transform=new c.DBTransform;this.pivot=new c.Point}e.prototype.dispose=function(){this.pivot=this.transform=null};e.ARMATURE="armature";e.IMAGE="image";return e}();c.DisplayData=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){this._armatureDataList=[];this._displayDataDictionary={}}c.prototype.dispose=function(){for(var b in this._armatureDataList)this._armatureDataList[b].dispose();this._armatureDataList=null;this.removeAllDisplayData();this._displayDataDictionary=null};Object.defineProperty(c.prototype,"armatureDataList",{get:function(){return this._armatureDataList},enumerable:!0,configurable:!0});c.prototype.getArmatureDataByName=function(b){for(var a=this._armatureDataList.length;a--;)if(this._armatureDataList[a].name==
b)return this._armatureDataList[a];return null};c.prototype.addArmatureData=function(b){if(!b)throw Error();if(0>this._armatureDataList.indexOf(b))this._armatureDataList[this._armatureDataList.length]=b;else throw Error();};c.prototype.removeArmatureData=function(b){b=this._armatureDataList.indexOf(b);0<=b&&this._armatureDataList.splice(b,1)};c.prototype.removeArmatureDataByName=function(b){for(var a=this._armatureDataList.length;a--;)this._armatureDataList[a].name==b&&this._armatureDataList.splice(a,
1)};c.prototype.getDisplayDataByName=function(b){return this._displayDataDictionary[b]};c.prototype.addDisplayData=function(b){this._displayDataDictionary[b.name]=b};c.prototype.removeDisplayDataByName=function(b){delete this._displayDataDictionary[b]};c.prototype.removeAllDisplayData=function(){for(var b in this._displayDataDictionary)delete this._displayDataDictionary[b]};return c}();c.DragonBonesData=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){this.duration=this.position=this.duration=this.position=0}c.prototype.dispose=function(){};return c}();c.Frame=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){this._slotDataList=[]}c.prototype.dispose=function(){for(var b=this._slotDataList.length;b--;)this._slotDataList[b].dispose();this._slotDataList=null};c.prototype.getSlotData=function(b){for(var a=this._slotDataList.length;a--;)if(this._slotDataList[a].name==b)return this._slotDataList[a];return null};c.prototype.addSlotData=function(b){if(!b)throw Error();if(0>this._slotDataList.indexOf(b))this._slotDataList[this._slotDataList.length]=b;else throw Error();
};Object.defineProperty(c.prototype,"slotDataList",{get:function(){return this._slotDataList},enumerable:!0,configurable:!0});return c}();c.SkinData=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){this._displayDataList=[];this.zOrder=0}c.prototype.dispose=function(){for(var b=this._displayDataList.length;b--;)this._displayDataList[b].dispose();this._displayDataList=null};c.prototype.addDisplayData=function(b){if(!b)throw Error();if(0>this._displayDataList.indexOf(b))this._displayDataList[this._displayDataList.length]=b;else throw Error();};c.prototype.getDisplayData=function(b){for(var a=this._displayDataList.length;a--;)if(this._displayDataList[a].name==
b)return this._displayDataList[a];return null};Object.defineProperty(c.prototype,"displayDataList",{get:function(){return this._displayDataList},enumerable:!0,configurable:!0});return c}();c.SlotData=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(e){function b(){e.call(this);this.displayIndex=this.tweenRotate=0;this.tweenEasing=10;this.tweenRotate=0;this.tweenScale=!0;this.displayIndex=0;this.visible=!0;this.zOrder=NaN;this.global=new c.DBTransform;this.transform=new c.DBTransform;this.pivot=new c.Point;this.scaleOffset=new c.Point}__extends(b,e);b.prototype.dispose=function(){e.prototype.dispose.call(this);this.color=this.scaleOffset=this.pivot=this.transform=this.global=null};return b}(c.Frame);c.TransformFrame=
f})(dragonBones||(dragonBones={}));(function(c){var f=function(e){function b(){e.call(this);this.originTransform=new c.DBTransform;this.originTransform.scaleX=1;this.originTransform.scaleY=1;this.originPivot=new c.Point;this.offset=0}__extends(b,e);b.prototype.dispose=function(){e.prototype.dispose.call(this);this.originPivot=this.originTransform=null};return b}(c.Timeline);c.TransformTimeline=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function e(){}e.parseTextureAtlasData=function(b,a){void 0===a&&(a=1);var d={},h,g=b[c.ConstValues.SUB_TEXTURE],t;for(t in g){var f=g[t],k=f[c.ConstValues.A_NAME],l=new c.Rectangle;l.x=e.getNumber(f,c.ConstValues.A_X,0)/a;l.y=e.getNumber(f,c.ConstValues.A_Y,0)/a;l.width=e.getNumber(f,c.ConstValues.A_WIDTH,0)/a;l.height=e.getNumber(f,c.ConstValues.A_HEIGHT,0)/a;var n="true"==f[c.ConstValues.A_ROTATED],m=e.getNumber(f,c.ConstValues.A_FRAME_WIDTH,0)/a,p=e.getNumber(f,c.ConstValues.A_FRAME_HEIGHT,
0)/a;0<m&&0<p?(h=new c.Rectangle,h.x=e.getNumber(f,c.ConstValues.A_FRAME_X,0)/a,h.y=e.getNumber(f,c.ConstValues.A_FRAME_Y,0)/a,h.width=m,h.height=p):h=null;d[k]=new c.TextureData(l,h,n)}return d};e.parseDragonBonesData=function(b){if(!b)throw Error();var a=b[c.ConstValues.A_VERSION],a=a.toString();if(a.toString()!=c.DragonBones.DATA_VERSION&&a.toString()!=c.DragonBones.PARENT_COORDINATE_DATA_VERSION)throw Error("Nonsupport version!");var a=e.getNumber(b,c.ConstValues.A_FRAME_RATE,0)||0,d=new c.DragonBonesData;
d.name=b[c.ConstValues.A_NAME];d.isGlobal="0"==b[c.ConstValues.A_IS_GLOBAL]?!1:!0;e.tempDragonBonesData=d;var h=b[c.ConstValues.ARMATURE],g;for(g in h)d.addArmatureData(e.parseArmatureData(b[c.ConstValues.ARMATURE][g],a));e.tempDragonBonesData=null;return d};e.parseArmatureData=function(b,a){var d=new c.ArmatureData;d.name=b[c.ConstValues.A_NAME];var h=b[c.ConstValues.BONE],g;for(g in h)d.addBoneData(e.parseBoneData(h[g]));h=b[c.ConstValues.SKIN];for(g in h)d.addSkinData(e.parseSkinData(h[g]));e.tempDragonBonesData.isGlobal&&
c.DBDataUtil.transformArmatureData(d);d.sortBoneDataList();h=b[c.ConstValues.ANIMATION];for(g in h){var t=e.parseAnimationData(h[g],a);c.DBDataUtil.addHideTimeline(t,d);c.DBDataUtil.transformAnimationData(t,d,e.tempDragonBonesData.isGlobal);d.addAnimationData(t)}return d};e.parseBoneData=function(b){var a=new c.BoneData;a.name=b[c.ConstValues.A_NAME];a.parent=b[c.ConstValues.A_PARENT];a.length=Number(b[c.ConstValues.A_LENGTH])||0;a.inheritRotation=e.getBoolean(b,c.ConstValues.A_INHERIT_ROTATION,!0);
a.inheritScale=e.getBoolean(b,c.ConstValues.A_INHERIT_SCALE,!0);e.parseTransform(b[c.ConstValues.TRANSFORM],a.transform);e.tempDragonBonesData.isGlobal&&a.global.copy(a.transform);return a};e.parseSkinData=function(b){var a=new c.SkinData;a.name=b[c.ConstValues.A_NAME];b=b[c.ConstValues.SLOT];for(var d in b)a.addSlotData(e.parseSlotData(b[d]));return a};e.parseSlotData=function(b){var a=new c.SlotData;a.name=b[c.ConstValues.A_NAME];a.parent=b[c.ConstValues.A_PARENT];a.zOrder=b[c.ConstValues.A_Z_ORDER];
a.zOrder=e.getNumber(b,c.ConstValues.A_Z_ORDER,0)||0;a.blendMode=b[c.ConstValues.A_BLENDMODE];b=b[c.ConstValues.DISPLAY];for(var d in b)a.addDisplayData(e.parseDisplayData(b[d]));return a};e.parseDisplayData=function(b){var a=new c.DisplayData;a.name=b[c.ConstValues.A_NAME];a.type=b[c.ConstValues.A_TYPE];e.parseTransform(b[c.ConstValues.TRANSFORM],a.transform,a.pivot);null!=e.tempDragonBonesData&&e.tempDragonBonesData.addDisplayData(a);return a};e.parseAnimationData=function(b,a){var d=new c.AnimationData;
d.name=b[c.ConstValues.A_NAME];d.frameRate=a;d.duration=Math.round(1E3*(e.getNumber(b,c.ConstValues.A_DURATION,1)||1)/a);d.playTimes=e.getNumber(b,c.ConstValues.A_LOOP,1);d.playTimes=NaN!=d.playTimes?d.playTimes:1;d.fadeTime=e.getNumber(b,c.ConstValues.A_FADE_IN_TIME,0)||0;d.scale=e.getNumber(b,c.ConstValues.A_SCALE,1)||0;d.tweenEasing=e.getNumber(b,c.ConstValues.A_TWEEN_EASING,NaN);d.autoTween=e.getBoolean(b,c.ConstValues.A_AUTO_TWEEN,!0);var h=b[c.ConstValues.FRAME],g;for(g in h){var t=e.parseTransformFrame(h[g],
a);d.addFrame(t)}e.parseTimeline(b,d);h=d.duration;t=b[c.ConstValues.TIMELINE];for(g in t){var f=t[g],k=e.parseTransformTimeline(f,d.duration,a),k=e.parseTransformTimeline(f,d.duration,a),h=Math.min(h,k.frameList[k.frameList.length-1].duration);d.addTimeline(k)}0<d.frameList.length&&(h=Math.min(h,d.frameList[d.frameList.length-1].duration));d.lastFrameDuration=h;return d};e.parseTransformTimeline=function(b,a,d){var h=new c.TransformTimeline;h.name=b[c.ConstValues.A_NAME];h.scale=e.getNumber(b,c.ConstValues.A_SCALE,
1)||0;h.offset=e.getNumber(b,c.ConstValues.A_OFFSET,0)||0;h.originPivot.x=e.getNumber(b,c.ConstValues.A_PIVOT_X,0)||0;h.originPivot.y=e.getNumber(b,c.ConstValues.A_PIVOT_Y,0)||0;h.duration=a;a=b[c.ConstValues.FRAME];for(var g in a){var t=e.parseTransformFrame(a[g],d);h.addFrame(t)}e.parseTimeline(b,h);return h};e.parseTransformFrame=function(b,a){var d=new c.TransformFrame;e.parseFrame(b,d,a);d.visible=!e.getBoolean(b,c.ConstValues.A_HIDE,!1);d.tweenEasing=e.getNumber(b,c.ConstValues.A_TWEEN_EASING,
10)||10;d.tweenRotate=Math.floor(e.getNumber(b,c.ConstValues.A_TWEEN_ROTATE,0)||0);d.tweenScale=e.getBoolean(b,c.ConstValues.A_TWEEN_SCALE,!0);d.displayIndex=Math.floor(e.getNumber(b,c.ConstValues.A_DISPLAY_INDEX,0)||0);d.zOrder=e.getNumber(b,c.ConstValues.A_Z_ORDER,e.tempDragonBonesData.isGlobal?NaN:0);e.parseTransform(b[c.ConstValues.TRANSFORM],d.transform,d.pivot);e.tempDragonBonesData.isGlobal&&d.global.copy(d.transform);d.scaleOffset.x=e.getNumber(b,c.ConstValues.A_SCALE_X_OFFSET,0)||0;d.scaleOffset.y=
e.getNumber(b,c.ConstValues.A_SCALE_Y_OFFSET,0)||0;var h=b[c.ConstValues.COLOR_TRANSFORM];h&&(d.color=new c.ColorTransform,e.parseColorTransform(h,d.color));return d};e.parseTimeline=function(b,a){var d=0,h,g=a.frameList,c;for(c in g)h=g[c],h.position=d,d+=h.duration;h&&(h.duration=a.duration-h.position)};e.parseFrame=function(b,a,d){void 0===d&&(d=0);a.duration=Math.round(1E3*(b[c.ConstValues.A_DURATION]||1)/d);a.action=b[c.ConstValues.A_ACTION];a.event=b[c.ConstValues.A_EVENT];a.sound=b[c.ConstValues.A_SOUND]};
e.parseTransform=function(b,a,d){void 0===d&&(d=null);b&&(a&&(a.x=e.getNumber(b,c.ConstValues.A_X,0)||0,a.y=e.getNumber(b,c.ConstValues.A_Y,0)||0,a.skewX=e.getNumber(b,c.ConstValues.A_SKEW_X,0)*c.ConstValues.ANGLE_TO_RADIAN||0,a.skewY=e.getNumber(b,c.ConstValues.A_SKEW_Y,0)*c.ConstValues.ANGLE_TO_RADIAN||0,a.scaleX=e.getNumber(b,c.ConstValues.A_SCALE_X,1)||0,a.scaleY=e.getNumber(b,c.ConstValues.A_SCALE_Y,1)||0),d&&(d.x=e.getNumber(b,c.ConstValues.A_PIVOT_X,0)||0,d.y=e.getNumber(b,c.ConstValues.A_PIVOT_Y,
0)||0))};e.parseColorTransform=function(b,a){b&&a&&(a.alphaOffset=e.getNumber(b,c.ConstValues.A_ALPHA_OFFSET,0),a.redOffset=e.getNumber(b,c.ConstValues.A_RED_OFFSET,0),a.greenOffset=e.getNumber(b,c.ConstValues.A_GREEN_OFFSET,0),a.blueOffset=e.getNumber(b,c.ConstValues.A_BLUE_OFFSET,0),a.alphaMultiplier=.01*e.getNumber(b,c.ConstValues.A_ALPHA_MULTIPLIER,100),a.redMultiplier=.01*e.getNumber(b,c.ConstValues.A_RED_MULTIPLIER,100),a.greenMultiplier=.01*e.getNumber(b,c.ConstValues.A_GREEN_MULTIPLIER,100),
a.blueMultiplier=.01*e.getNumber(b,c.ConstValues.A_BLUE_MULTIPLIER,100))};e.getBoolean=function(b,a,d){if(b&&a in b)switch(String(b[a])){case "0":case "NaN":case "":case "false":case "null":case "undefined":return!1;default:return!0}return d};e.getNumber=function(b,a,d){if(b&&a in b)switch(String(b[a])){case "NaN":case "":case "false":case "null":case "undefined":return NaN;default:return Number(b[a])}return d};return e}();c.DataParser=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){return function(c,b,a){this.region=c;this.frame=b;this.rotated=a}}();c.TextureData=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){}c.ANGLE_TO_RADIAN=Math.PI/180;c.RADIAN_TO_ANGLE=180/Math.PI;c.DRAGON_BONES="dragonBones";c.ARMATURE="armature";c.SKIN="skin";c.BONE="bone";c.SLOT="slot";c.DISPLAY="display";c.ANIMATION="animation";c.TIMELINE="timeline";c.FRAME="frame";c.TRANSFORM="transform";c.COLOR_TRANSFORM="colorTransform";c.RECTANGLE="rectangle";c.ELLIPSE="ellipse";c.TEXTURE_ATLAS="TextureAtlas";c.SUB_TEXTURE="SubTexture";c.A_ROTATED="rotated";c.A_FRAME_X="frameX";c.A_FRAME_Y="frameY";
c.A_FRAME_WIDTH="frameWidth";c.A_FRAME_HEIGHT="frameHeight";c.A_VERSION="version";c.A_IMAGE_PATH="imagePath";c.A_FRAME_RATE="frameRate";c.A_NAME="name";c.A_IS_GLOBAL="isGlobal";c.A_PARENT="parent";c.A_LENGTH="length";c.A_TYPE="type";c.A_FADE_IN_TIME="fadeInTime";c.A_DURATION="duration";c.A_SCALE="scale";c.A_OFFSET="offset";c.A_LOOP="loop";c.A_EVENT="event";c.A_EVENT_PARAMETERS="eventParameters";c.A_SOUND="sound";c.A_ACTION="action";c.A_HIDE="hide";c.A_AUTO_TWEEN="autoTween";c.A_TWEEN_EASING="tweenEasing";
c.A_TWEEN_ROTATE="tweenRotate";c.A_TWEEN_SCALE="tweenScale";c.A_DISPLAY_INDEX="displayIndex";c.A_Z_ORDER="z";c.A_BLENDMODE="blendMode";c.A_WIDTH="width";c.A_HEIGHT="height";c.A_INHERIT_SCALE="inheritScale";c.A_INHERIT_ROTATION="inheritRotation";c.A_X="x";c.A_Y="y";c.A_SKEW_X="skX";c.A_SKEW_Y="skY";c.A_SCALE_X="scX";c.A_SCALE_Y="scY";c.A_PIVOT_X="pX";c.A_PIVOT_Y="pY";c.A_ALPHA_OFFSET="aO";c.A_RED_OFFSET="rO";c.A_GREEN_OFFSET="gO";c.A_BLUE_OFFSET="bO";c.A_ALPHA_MULTIPLIER="aM";c.A_RED_MULTIPLIER="rM";
c.A_GREEN_MULTIPLIER="gM";c.A_BLUE_MULTIPLIER="bM";c.A_SCALE_X_OFFSET="scXOffset";c.A_SCALE_Y_OFFSET="scYOffset";c.A_SCALE_MODE="scaleMode";c.A_FIXED_ROTATION="fixedRotation";return c}();c.ConstValues=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function e(){}e.transformArmatureData=function(b){for(var a=b.boneDataList,d=a.length;d--;){var h=a[d];if(h.parent){var g=b.getBoneData(h.parent);g&&(h.transform.copy(h.global),c.TransformUtil.globalToLocal(h.transform,g.global))}}};e.transformArmatureDataAnimations=function(b){for(var a=b.animationDataList,d=a.length;d--;)e.transformAnimationData(a[d],b,!1)};e.transformRelativeAnimationData=function(b,a){};e.transformAnimationData=function(b,a,d){if(d){var h=a.getSkinData(null);
d=a.boneDataList;var g;h&&(g=h.slotDataList);for(h=0;h<d.length;h++){var t=d[h],f=b.getTimeline(t.name);if(f){var k=null;if(g)for(var l in g)if(k=g[l],k.parent==t.name)break;for(var n=f.frameList,m=null,p=null,s=null,v=n.length,q=0;q<v;q++){var r=n[q];e.setFrameTransform(b,a,t,r);r.transform.x-=t.transform.x;r.transform.y-=t.transform.y;r.transform.skewX-=t.transform.skewX;r.transform.skewY-=t.transform.skewY;r.transform.scaleX/=t.transform.scaleX;r.transform.scaleY/=t.transform.scaleY;!f.transformed&&
k&&(r.zOrder-=k.zOrder);m||(m=f.originTransform,m.copy(r.transform),m.skewX=c.TransformUtil.formatRadian(m.skewX),m.skewY=c.TransformUtil.formatRadian(m.skewY),p=f.originPivot,p.x=r.pivot.x,p.y=r.pivot.y);r.transform.x-=m.x;r.transform.y-=m.y;r.transform.skewX=c.TransformUtil.formatRadian(r.transform.skewX-m.skewX);r.transform.skewY=c.TransformUtil.formatRadian(r.transform.skewY-m.skewY);r.transform.scaleX/=m.scaleX;r.transform.scaleY/=m.scaleY;f.transformed||(r.pivot.x-=p.x,r.pivot.y-=p.y);if(s){var x=
r.transform.skewX-s.transform.skewX;s.tweenRotate?0<s.tweenRotate?(0>x&&(r.transform.skewX+=2*Math.PI,r.transform.skewY+=2*Math.PI),1<s.tweenRotate&&(r.transform.skewX+=2*Math.PI*(s.tweenRotate-1),r.transform.skewY+=2*Math.PI*(s.tweenRotate-1))):(0<x&&(r.transform.skewX-=2*Math.PI,r.transform.skewY-=2*Math.PI),1>s.tweenRotate&&(r.transform.skewX+=2*Math.PI*(s.tweenRotate+1),r.transform.skewY+=2*Math.PI*(s.tweenRotate+1))):(r.transform.skewX=s.transform.skewX+c.TransformUtil.formatRadian(r.transform.skewX-
s.transform.skewX),r.transform.skewY=s.transform.skewY+c.TransformUtil.formatRadian(r.transform.skewY-s.transform.skewY))}s=r}f.transformed=!0}}}else e.transformRelativeAnimationData(b,a)};e.setFrameTransform=function(b,a,d,h){h.transform.copy(h.global);if(d=a.getBoneData(d.parent)){var g=b.getTimeline(d.name);if(g){for(var t=[],f=[];g;)t.push(g),f.push(d),g=(d=a.getBoneData(d.parent))?b.getTimeline(d.name):null;b=t.length;var k;a=new c.Matrix;for(var l=new c.DBTransform,n=new c.Matrix;b--;)g=t[b],
d=f[b],e.getTimelineTransform(g,h.position,l,!k),k?(l.x+=g.originTransform.x+d.transform.x,l.y+=g.originTransform.y+d.transform.y,l.skewX+=g.originTransform.skewX+d.transform.skewX,l.skewY+=g.originTransform.skewY+d.transform.skewY,l.scaleX=l.scaleX*g.originTransform.scaleX*d.transform.scaleX,l.scaleY=l.scaleY*g.originTransform.scaleY*d.transform.scaleY,c.TransformUtil.transformToMatrix(l,n,!0),n.concat(a),c.TransformUtil.matrixToTransform(n,k,0<=l.scaleX*k.scaleX,0<=l.scaleY*k.scaleY)):(k=new c.DBTransform,
k.copy(l)),c.TransformUtil.transformToMatrix(k,a,!0);c.TransformUtil.globalToLocal(h.transform,k)}}};e.getTimelineTransform=function(b,a,d,h){for(var g=b.frameList,e=g.length;e--;)if(b=g[e],b.position<=a&&b.position+b.duration>a){if(e==g.length-1||a==b.position)d.copy(h?b.global:b.transform);else{var f=b.tweenEasing;a=(a-b.position)/b.duration;f&&10!=f&&(a=c.MathUtil.getEaseValue(a,f));g=g[e+1];b=h?b.global:b.transform;h=h?g.global:g.transform;d.x=b.x+(h.x-b.x)*a;d.y=b.y+(h.y-b.y)*a;d.skewX=c.TransformUtil.formatRadian(b.skewX+
(h.skewX-b.skewX)*a);d.skewY=c.TransformUtil.formatRadian(b.skewY+(h.skewY-b.skewY)*a);d.scaleX=b.scaleX+(h.scaleX-b.scaleX)*a;d.scaleY=b.scaleY+(h.scaleY-b.scaleY)*a}break}};e.addHideTimeline=function(b,a){for(var d=a.boneDataList,h=d.length;h--;){var g=d[h].name;b.getTimeline(g)||0>b.hideTimelineNameMap.indexOf(g)&&b.hideTimelineNameMap.push(g)}};return e}();c.DBDataUtil=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function c(){}c.getEaseValue=function(b,a){var d=1;1<a?(d=.5*(1-Math.cos(b*Math.PI)),a-=1):0<a?d=1-Math.pow(1-b,2):0>a&&(a*=-1,d=Math.pow(b,2));return(d-b)*a+b};return c}();c.MathUtil=f})(dragonBones||(dragonBones={}));
(function(c){var f=function(){function e(){}e.globalToLocal=function(b,a){e.transformToMatrix(b,e._helpTransformMatrix,!0);e.transformToMatrix(a,e._helpParentTransformMatrix,!0);e._helpParentTransformMatrix.invert();e._helpTransformMatrix.concat(e._helpParentTransformMatrix);e.matrixToTransform(e._helpTransformMatrix,b,0<=b.scaleX*a.scaleX,0<=b.scaleY*a.scaleY)};e.transformToMatrix=function(b,a,d){void 0===d&&(d=!1);d?(a.a=b.scaleX*Math.cos(b.skewY),a.b=b.scaleX*Math.sin(b.skewY),a.c=-b.scaleY*Math.sin(b.skewX),
a.d=b.scaleY*Math.cos(b.skewX)):(a.a=Math.cos(b.skewY),a.b=Math.sin(b.skewY),a.c=-Math.sin(b.skewX),a.d=Math.cos(b.skewX));a.tx=b.x;a.ty=b.y};e.matrixToTransform=function(b,a,d,h){a.x=b.tx;a.y=b.ty;a.scaleX=Math.sqrt(b.a*b.a+b.b*b.b)*(d?1:-1);a.scaleY=Math.sqrt(b.d*b.d+b.c*b.c)*(h?1:-1);d=[];d[0]=Math.acos(b.d/a.scaleY);d[1]=-d[0];d[2]=Math.asin(-b.c/a.scaleY);d[3]=0<=d[2]?Math.PI-d[2]:d[2]-Math.PI;Number(d[0]).toFixed(4)==Number(d[2]).toFixed(4)||Number(d[0]).toFixed(4)==Number(d[3]).toFixed(4)?
a.skewX=d[0]:a.skewX=d[1];d=[];d[0]=Math.acos(b.a/a.scaleX);d[1]=-d[0];d[2]=Math.asin(b.b/a.scaleX);d[3]=0<=d[2]?Math.PI-d[2]:d[2]-Math.PI;Number(d[0]).toFixed(4)==Number(d[2]).toFixed(4)||Number(d[0]).toFixed(4)==Number(d[3]).toFixed(4)?a.skewY=d[0]:a.skewY=d[1]};e.formatRadian=function(b){b>Math.PI&&(b-=e.DOUBLE_PI);b<-Math.PI&&(b+=e.DOUBLE_PI);return b};e.HALF_PI=.5*Math.PI;e.DOUBLE_PI=2*Math.PI;e._helpTransformMatrix=new c.Matrix;e._helpParentTransformMatrix=new c.Matrix;return e}();c.TransformUtil=
f})(dragonBones||(dragonBones={}));this.createjs=this.createjs||{};
(function(){function c(){this._oldStrokeDash=this._strokeDash=this._oldStrokeStyle=this._strokeStyle=this._stroke=this.command=null;this._strokeIgnoreScale=!1;this._fill=null;this._instructions=[];this._commitIndex=0;this._activeInstructions=[];this._dirty=!1;this._storeIndex=0;this.clear()}var f=c.prototype;c.getRGB=function(a,d,b,g){null!=a&&null==b&&(g=d,b=a&255,d=a>>8&255,a=a>>16&255);return null==g?"rgb("+a+","+d+","+b+")":"rgba("+a+","+d+","+b+","+g+")"};c.getHSL=function(a,d,b,g){return null==
g?"hsl("+a%360+","+d+"%,"+b+"%)":"hsla("+a%360+","+d+"%,"+b+"%,"+g+")"};c.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};c.STROKE_CAPS_MAP=["butt","round","square"];c.STROKE_JOINTS_MAP=["miter","round","bevel"];var e=createjs.createCanvas?
createjs.createCanvas():document.createElement("canvas");e.getContext&&(c._ctx=e.getContext("2d"),e.width=e.height=1);f.getInstructions=function(){this._updateInstructions();return this._instructions};try{Object.defineProperties(f,{instructions:{get:f.getInstructions}})}catch(b){}f.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)};f.draw=function(a,d){this._updateInstructions();for(var b=this._instructions,g=this._storeIndex,c=b.length;g<c;g++)b[g].exec(a,d)};
f.drawAsPath=function(a){this._updateInstructions();for(var d,b=this._instructions,g=this._storeIndex,c=b.length;g<c;g++)!1!==(d=b[g]).path&&d.exec(a)};f.moveTo=function(a,d){return this.append(new c.MoveTo(a,d),!0)};f.lineTo=function(a,d){return this.append(new c.LineTo(a,d))};f.arcTo=function(a,d,b,g,e){return this.append(new c.ArcTo(a,d,b,g,e))};f.arc=function(a,d,b,g,e,f){return this.append(new c.Arc(a,d,b,g,e,f))};f.quadraticCurveTo=function(a,d,b,g){return this.append(new c.QuadraticCurveTo(a,
d,b,g))};f.bezierCurveTo=function(a,d,b,g,e,f){return this.append(new c.BezierCurveTo(a,d,b,g,e,f))};f.rect=function(a,d,b,g){return this.append(new c.Rect(a,d,b,g))};f.closePath=function(){return this._activeInstructions.length?this.append(new c.ClosePath):this};f.clear=function(){this._instructions.length=this._activeInstructions.length=this._commitIndex=0;this._strokeStyle=this._stroke=this._fill=this._strokeDash=null;this._dirty=this._strokeIgnoreScale=!1;return this};f.beginFill=function(a){return this._setFill(a?
new c.Fill(a):null)};f.beginLinearGradientFill=function(a,d,b,g,e,f){return this._setFill((new c.Fill).linearGradient(a,d,b,g,e,f))};f.beginRadialGradientFill=function(a,d,b,g,e,f,k,l){return this._setFill((new c.Fill).radialGradient(a,d,b,g,e,f,k,l))};f.beginBitmapFill=function(a,d,b){return this._setFill((new c.Fill(null,b)).bitmap(a,d))};f.endFill=function(){return this.beginFill()};f.setStrokeStyle=function(a,d,b,g,e){this._updateInstructions(!0);this._strokeStyle=this.command=new c.StrokeStyle(a,
d,b,g,e);this._stroke&&(this._stroke.ignoreScale=e);this._strokeIgnoreScale=e;return this};f.setStrokeDash=function(a,d){this._updateInstructions(!0);this._strokeDash=this.command=new c.StrokeDash(a,d);return this};f.beginStroke=function(a){return this._setStroke(a?new c.Stroke(a):null)};f.beginLinearGradientStroke=function(a,d,b,g,e,f){return this._setStroke((new c.Stroke).linearGradient(a,d,b,g,e,f))};f.beginRadialGradientStroke=function(a,d,b,g,e,f,k,l){return this._setStroke((new c.Stroke).radialGradient(a,
d,b,g,e,f,k,l))};f.beginBitmapStroke=function(a,d){return this._setStroke((new c.Stroke).bitmap(a,d))};f.endStroke=function(){return this.beginStroke()};f.curveTo=f.quadraticCurveTo;f.drawRect=f.rect;f.drawRoundRect=function(a,d,b,g,c){return this.drawRoundRectComplex(a,d,b,g,c,c,c,c)};f.drawRoundRectComplex=function(a,d,b,g,e,f,k,l){return this.append(new c.RoundRect(a,d,b,g,e,f,k,l))};f.drawCircle=function(a,d,b){return this.append(new c.Circle(a,d,b))};f.drawEllipse=function(a,d,b,g){return this.append(new c.Ellipse(a,
d,b,g))};f.drawPolyStar=function(a,d,b,g,e,f){return this.append(new c.PolyStar(a,d,b,g,e,f))};f.append=function(a,d){this._activeInstructions.push(a);this.command=a;d||(this._dirty=!0);return this};f.decodePath=function(a){for(var d=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],b=[2,2,4,6,0],g=0,e=a.length,f=[],k=0,l=0,n=c.BASE_64;g<e;){var m=a.charAt(g),p=n[m],s=p>>3,v=d[s];if(!v||p&3)throw"bad path data (@"+g+"): "+m;m=b[s];s||(k=l=0);f.length=0;g++;p=(p>>2&
1)+2;for(s=0;s<m;s++){var q=n[a.charAt(g)],r=q>>5?-1:1,q=(q&31)<<6|n[a.charAt(g+1)];3==p&&(q=q<<6|n[a.charAt(g+2)]);q=r*q/10;s%2?k=q+=k:l=q+=l;f[s]=q;g+=p}v.apply(this,f)}return this};f.store=function(){this._updateInstructions(!0);this._storeIndex=this._instructions.length;return this};f.unstore=function(){this._storeIndex=0;return this};f.clone=function(){var a=new c;a.command=this.command;a._stroke=this._stroke;a._strokeStyle=this._strokeStyle;a._strokeDash=this._strokeDash;a._strokeIgnoreScale=
this._strokeIgnoreScale;a._fill=this._fill;a._instructions=this._instructions.slice();a._commitIndex=this._commitIndex;a._activeInstructions=this._activeInstructions.slice();a._dirty=this._dirty;a._storeIndex=this._storeIndex;return a};f.toString=function(){return"[Graphics]"};f.mt=f.moveTo;f.lt=f.lineTo;f.at=f.arcTo;f.bt=f.bezierCurveTo;f.qt=f.quadraticCurveTo;f.a=f.arc;f.r=f.rect;f.cp=f.closePath;f.c=f.clear;f.f=f.beginFill;f.lf=f.beginLinearGradientFill;f.rf=f.beginRadialGradientFill;f.bf=f.beginBitmapFill;
f.ef=f.endFill;f.ss=f.setStrokeStyle;f.sd=f.setStrokeDash;f.s=f.beginStroke;f.ls=f.beginLinearGradientStroke;f.rs=f.beginRadialGradientStroke;f.bs=f.beginBitmapStroke;f.es=f.endStroke;f.dr=f.drawRect;f.rr=f.drawRoundRect;f.rc=f.drawRoundRectComplex;f.dc=f.drawCircle;f.de=f.drawEllipse;f.dp=f.drawPolyStar;f.p=f.decodePath;f._updateInstructions=function(a){var d=this._instructions,b=this._activeInstructions,g=this._commitIndex;if(this._dirty&&b.length){d.length=g;d.push(c.beginCmd);var g=b.length,e=
d.length;d.length=e+g;for(var f=0;f<g;f++)d[f+e]=b[f];this._fill&&d.push(this._fill);this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,d.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,d.push(this._strokeStyle)),d.push(this._stroke));this._dirty=!1}a&&(b.length=0,this._commitIndex=d.length)};f._setFill=function(a){this._updateInstructions(!0);this.command=this._fill=a;return this};f._setStroke=function(a){this._updateInstructions(!0);
if(this.command=this._stroke=a)a.ignoreScale=this._strokeIgnoreScale;return this};(c.LineTo=function(a,d){this.x=a;this.y=d}).prototype.exec=function(a){a.lineTo(this.x,this.y)};(c.MoveTo=function(a,d){this.x=a;this.y=d}).prototype.exec=function(a){a.moveTo(this.x,this.y)};(c.ArcTo=function(a,d,b,g,c){this.x1=a;this.y1=d;this.x2=b;this.y2=g;this.radius=c}).prototype.exec=function(a){a.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)};(c.Arc=function(a,b,h,g,c,e){this.x=a;this.y=b;this.radius=h;
this.startAngle=g;this.endAngle=c;this.anticlockwise=!!e}).prototype.exec=function(a){a.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)};(c.QuadraticCurveTo=function(a,b,h,g){this.cpx=a;this.cpy=b;this.x=h;this.y=g}).prototype.exec=function(a){a.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)};(c.BezierCurveTo=function(a,b,h,g,c,e){this.cp1x=a;this.cp1y=b;this.cp2x=h;this.cp2y=g;this.x=c;this.y=e}).prototype.exec=function(a){a.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,
this.cp2y,this.x,this.y)};(c.Rect=function(a,b,h,g){this.x=a;this.y=b;this.w=h;this.h=g}).prototype.exec=function(a){a.rect(this.x,this.y,this.w,this.h)};(c.ClosePath=function(){}).prototype.exec=function(a){a.closePath()};(c.BeginPath=function(){}).prototype.exec=function(a){a.beginPath()};f=(c.Fill=function(a,b){this.style=a;this.matrix=b}).prototype;f.exec=function(a){if(this.style){a.fillStyle=this.style;var b=this.matrix;b&&(a.save(),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty));a.fill();b&&a.restore()}};
f.linearGradient=function(a,b,h,g,e,f){for(var k=this.style=c._ctx.createLinearGradient(h,g,e,f),l=0,n=a.length;l<n;l++)k.addColorStop(b[l],a[l]);k.props={colors:a,ratios:b,x0:h,y0:g,x1:e,y1:f,type:"linear"};return this};f.radialGradient=function(a,b,h,g,e,f,k,l){for(var n=this.style=c._ctx.createRadialGradient(h,g,e,f,k,l),m=0,p=a.length;m<p;m++)n.addColorStop(b[m],a[m]);n.props={colors:a,ratios:b,x0:h,y0:g,r0:e,x1:f,y1:k,r1:l,type:"radial"};return this};f.bitmap=function(a,b){(this.style=c._ctx.createPattern(a,
b||"")).props={image:a,repetition:b,type:"bitmap"};return this};f.path=!1;f=(c.Stroke=function(a,b){this.style=a;this.ignoreScale=b}).prototype;f.exec=function(a){this.style&&(a.strokeStyle=this.style,this.ignoreScale&&(a.save(),a.setTransform(1,0,0,1,0,0)),a.stroke(),this.ignoreScale&&a.restore())};f.linearGradient=c.Fill.prototype.linearGradient;f.radialGradient=c.Fill.prototype.radialGradient;f.bitmap=c.Fill.prototype.bitmap;f.path=!1;f=(c.StrokeStyle=function(a,b,h,g){this.width=a;this.caps=b;
this.joints=h;this.miterLimit=g}).prototype;f.exec=function(a){a.lineWidth=null==this.width?"1":this.width;a.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:c.STROKE_CAPS_MAP[this.caps];a.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:c.STROKE_JOINTS_MAP[this.joints];a.miterLimit=null==this.miterLimit?"10":this.miterLimit};f.path=!1;(c.StrokeDash=function(a,b){this.segments=a;this.offset=b||0}).prototype.exec=function(a){a.setLineDash&&(a.setLineDash(this.segments||c.StrokeDash.EMPTY_SEGMENTS),
a.lineDashOffset=this.offset||0)};c.StrokeDash.EMPTY_SEGMENTS=[];(c.RoundRect=function(a,b,h,g,c,e,f,l){this.x=a;this.y=b;this.w=h;this.h=g;this.radiusTL=c;this.radiusTR=e;this.radiusBR=f;this.radiusBL=l}).prototype.exec=function(a){var b=(n<m?n:m)/2,h=0,c=0,e=0,f=0,k=this.x,l=this.y,n=this.w,m=this.h,p=this.radiusTL,s=this.radiusTR,v=this.radiusBR,q=this.radiusBL;0>p&&(p*=h=-1);p>b&&(p=b);0>s&&(s*=c=-1);s>b&&(s=b);0>v&&(v*=e=-1);v>b&&(v=b);0>q&&(q*=f=-1);q>b&&(q=b);a.moveTo(k+n-s,l);a.arcTo(k+n+
s*c,l-s*c,k+n,l+s,s);a.lineTo(k+n,l+m-v);a.arcTo(k+n+v*e,l+m+v*e,k+n-v,l+m,v);a.lineTo(k+q,l+m);a.arcTo(k-q*f,l+m+q*f,k,l+m-q,q);a.lineTo(k,l+p);a.arcTo(k-p*h,l-p*h,k+p,l,p);a.closePath()};(c.Circle=function(a,b,h){this.x=a;this.y=b;this.radius=h}).prototype.exec=function(a){a.arc(this.x,this.y,this.radius,0,2*Math.PI)};(c.Ellipse=function(a,b,h,c){this.x=a;this.y=b;this.w=h;this.h=c}).prototype.exec=function(a){var b=this.x,h=this.y,c=this.w,e=this.h,f=c/2*.5522848,k=e/2*.5522848,l=b+c,n=h+e,c=b+
c/2,e=h+e/2;a.moveTo(b,e);a.bezierCurveTo(b,e-k,c-f,h,c,h);a.bezierCurveTo(c+f,h,l,e-k,l,e);a.bezierCurveTo(l,e+k,c+f,n,c,n);a.bezierCurveTo(c-f,n,b,e+k,b,e)};(c.PolyStar=function(a,b,h,c,e,f){this.x=a;this.y=b;this.radius=h;this.sides=c;this.pointSize=e;this.angle=f}).prototype.exec=function(a){var b=this.x,h=this.y,c=this.radius,e=(this.angle||0)/180*Math.PI,f=this.sides,k=1-(this.pointSize||0),l=Math.PI/f;a.moveTo(b+Math.cos(e)*c,h+Math.sin(e)*c);for(var n=0;n<f;n++)e+=l,1!=k&&a.lineTo(b+Math.cos(e)*
c*k,h+Math.sin(e)*c*k),e+=l,a.lineTo(b+Math.cos(e)*c,h+Math.sin(e)*c);a.closePath()};c.beginCmd=new c.BeginPath;createjs.Graphics=c})();var WOZLLA;
(function(c){(function(c){(function(b){b[b.CAPTURE=0]="CAPTURE";b[b.BUBBLE=1]="BUBBLE";b[b.TARGET=2]="TARGET"})(c.EventPhase||(c.EventPhase={}));var e=function(){function b(a,b,h,c){void 0===b&&(b=!1);void 0===h&&(h=null);void 0===c&&(c=!0);this._eventPhase=0;this._listenerRemove=this._propagationStoped=this._immediatePropagationStoped=!1;this._type=a;this._bubbles=b;this._data=h;this._canStopBubbles=c}Object.defineProperty(b.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bubbles",
{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canStopBubbles",{get:function(){return this._canStopBubbles},enumerable:!0,configurable:!0});b.prototype.isStopPropagation=function(){return this._propagationStoped};b.prototype.stopPropagation=function(){this._canStopBubbles&&(this._propagationStoped=!0)};b.prototype.isStopImmediatePropagation=function(){return this._immediatePropagationStoped};b.prototype.stopImmediatePropagation=function(){this._canStopBubbles&&
(this._propagationStoped=this._immediatePropagationStoped=!0)};b.prototype.removeCurrentListener=function(){this._listenerRemove=!0};return b}();c.Event=e})(c.event||(c.event={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function a(){this._listeners=[]}a.prototype.add=function(a){this._listeners.push(a)};a.prototype.remove=function(a){var b,c=this._listeners.length;for(b=0;b<c;b++)if(this._listeners[b]===a)return this._listeners.splice(b,1),!0;return!1};a.prototype.removeAt=function(a){return this._listeners.splice(a,1)};a.prototype.get=function(a){return this._listeners[a]};a.prototype.length=function(){return this._listeners.length};a.prototype.clear=function(){this._listeners.length=
0};return a}(),b=function(){function a(){this._captureDict={};this._bubbleDict={}}a.prototype.setBubbleParent=function(a){this._bubbleParent=a};a.prototype.hasListener=function(a,b){void 0===b&&(b=!1);return 0<this._getListenerList(a,b).length()};a.prototype.getListenerCount=function(a,b){return this._getListenerList(a,b).length()};a.prototype.addListener=function(a,b,c){void 0===c&&(c=!1);this._getListenerList(a,c).add(b)};a.prototype.removeListener=function(a,b,c){void 0===c&&(c=!1);return this._getListenerList(a,
c).remove(b)};a.prototype.clearListeners=function(a,b){this._getListenerList(a,b).clear()};a.prototype.clearAllListeners=function(){this._captureDict={};this._bubbleDict={}};a.prototype.dispatchEvent=function(a){var b,c,e,f;a._target=this;if(a.bubbles){e=this._getAncients();c=e.length;for(b=c-1;0<=b;b--)if(f=e[b],f._dispatchEventInPhase(a,0))return;if(!this._dispatchEventInPhase(a,0)&&!this._dispatchEventInPhase(a,2))for(b=0;b<c&&(f=e[b],!f._dispatchEventInPhase(a,1));b++);}else this._dispatchEventInPhase(a,
2)};a.prototype._dispatchEventInPhase=function(a,b){var c,e,f;a._eventPhase=b;a._listenerRemove=!1;a._currentTarget=this;f=this._getListenerList(a.type,0===b);c=f.length();if(0<c){for(c-=1;0<=c;c--)if(e=f.get(c),e(a),a._listenerRemove&&(a._listenerRemove=!1,f.removeAt(c)),a.isStopImmediatePropagation())return!0;if(a.isStopPropagation())return!0}return!1};a.prototype._getAncients=function(){for(var a=[],b=this;b._bubbleParent;)b=b._bubbleParent,a.push(b);return a};a.prototype._getListenerList=function(a,
b){var c,f=b?this._captureDict:this._bubbleDict;c=f[a];c||(c=new e,f[a]=c);return c};return a}();c.EventDispatcher=b})(c.event||(c.event={}))})(WOZLLA||(WOZLLA={}));__extends=this.__extends||function(c,f){function e(){this.constructor=c}for(var b in f)f.hasOwnProperty(b)&&(c[b]=f[b]);e.prototype=f.prototype;c.prototype=new e};
(function(c){(function(f){var e=function(b){function a(a){b.call(this);this._refCount=0;this._src=a}__extends(a,b);Object.defineProperty(a.prototype,"src",{get:function(){return this._src},enumerable:!0,configurable:!0});a.prototype.retain=function(){this._refCount++};a.prototype.release=function(a){void 0===a&&(a=!0);a&&0<this._refCount&&this._refCount--;0===this._refCount&&this.unload()};a.prototype.load=function(a,b){a()};a.prototype.unload=function(){var b=new c.event.Event(a.EVENT_UNLOAD,!1);
b.target=b.currentTarget=this;this.dispatchEvent(b)};a.EVENT_UNLOAD="unload";return a}(c.event.EventDispatcher);f.Asset=e})(c.assets||(c.assets={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function a(){this._loadedAssets={};this._loadingUnits={}}a.getInstance=function(){a.instance||(a.instance=new a);return a.instance};a.prototype.getAsset=function(a){return this._loadedAssets[a]};a.prototype.addAsset=function(a){var b=this;this._loadedAssets[a.src]=a;a.addListener(c.Asset.EVENT_UNLOAD,function(c){c.removeCurrentListener();b.removeAsset(a)})};a.prototype.removeAsset=function(a){delete this._loadedAssets[a.src]};a.prototype.loadAll=function(a){var b,
c,e;c=0;for(e=a.length;c<e;c++)b=a[c],this.load(b.src,b.AssetClass,b.callback)};a.prototype.load=function(a,c,g){var e=this,f,k;(f=this._loadedAssets[a])?g&&g():(k=this._loadingUnits[a])?k.addCallback(g,g):(f=new c(a),k=new b(a),k.addCallback(g,g),this._loadingUnits[a]=k,f.load(function(){delete e._loadingUnits[a];e.addAsset(f);k.complete(null,f)},function(b){console.log(b);delete e._loadingUnits[a];k.complete(b)}))};return a}();c.AssetLoader=e;var b=function(){function a(a){this.callbacks=[];this.src=
a}a.prototype.addCallback=function(a,b){this.callbacks.push({onSuccess:a,onError:b})};a.prototype.complete=function(a,b){this.callbacks.forEach(function(c){a?c.onError&&c.onError(a):c.onSuccess&&c.onSuccess(b)})};return a}()})(c.assets||(c.assets={}))})(WOZLLA||(WOZLLA={}));(function(c){c=c.renderer||(c.renderer={});(c.ITexture||(c.ITexture={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));(function(c){c=c.renderer||(c.renderer={});(c.IRenderer||(c.IRenderer={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(){this.values=new Float32Array(9);this.identity()}b.prototype.applyMatrix=function(a){this.values.set(a.values)};b.prototype.identity=function(){this.values[0]=1;this.values[1]=0;this.values[2]=0;this.values[3]=0;this.values[4]=1;this.values[5]=0;this.values[6]=0;this.values[7]=0;this.values[8]=1};b.prototype.invert=function(){var a=this.values[0],b=this.values[1],c=this.values[3],g=this.values[4],e=this.values[6],f=this.values[7],k=a*g-b*c;this.values[0]=
g/k;this.values[1]=-b/k;this.values[3]=-c/k;this.values[4]=a/k;this.values[6]=(c*f-g*e)/k;this.values[7]=-(a*f-b*e)/k};b.prototype.prepend=function(a,b,c,g,e,f){var k,l,n,m,p=this.values,s=p[6],v=p[7];if(1!=a||0!=b||0!=c||1!=g)k=p[0],l=p[1],n=p[3],m=p[4],p[0]=k*a+l*c,p[1]=k*b+l*g,p[3]=n*a+m*c,p[4]=n*b+m*g;p[6]=s*a+v*c+e;p[7]=s*b+v*g+f};b.prototype.append=function(a,b,c,g,e,f){var k,l,n,m,p=this.values;k=p[0];l=p[1];n=p[3];m=p[4];p[0]=a*k+b*n;p[1]=a*l+b*m;p[3]=c*k+g*n;p[4]=c*l+g*m;p[6]=e*k+f*n+p[6];
p[7]=e*l+f*m+p[7]};b.prototype.prependTransform=function(a,d,c,g,e,f,k,l,n){if(e%360){var m=e*b.DEG_TO_RAD;e=Math.cos(m);m=Math.sin(m)}else e=1,m=0;if(l||n)this.values[6]-=l,this.values[7]-=n;f||k?(f*=b.DEG_TO_RAD,k*=b.DEG_TO_RAD,this.prepend(e*c,m*c,-m*g,e*g,0,0),this.prepend(Math.cos(k),Math.sin(k),-Math.sin(f),Math.cos(f),a,d)):this.prepend(e*c,m*c,-m*g,e*g,a,d);return this};b.prototype.appendTransform=function(a,d,c,g,e,f,k,l,n){if(e%360){var m=e*b.DEG_TO_RAD;e=Math.cos(m);m=Math.sin(m)}else e=
1,m=0;f||k?(f*=b.DEG_TO_RAD,k*=b.DEG_TO_RAD,this.append(Math.cos(k),Math.sin(k),-Math.sin(f),Math.cos(f),a,d),this.append(e*c,m*c,-m*g,e*g,0,0)):this.append(e*c,m*c,-m*g,e*g,a,d);if(l||n)this.values[6]-=l*this.values[0]+n*this.values[3],this.values[7]-=l*this.values[1]+n*this.values[4];return this};b.DEG_TO_RAD=Math.PI/180;return b}();c.Matrix=e})(c.math||(c.math={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b,c){this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(a,b,c)}b.get=function(a,d,c,g){void 0===d&&(d=null);void 0===c&&(c=null);void 0===g&&(g=!1);g&&b.removeTweens(a);return new b(a,d,c)};b.removeTweens=function(a){if(a.tween_count){for(var d=
b._tweens,c=d.length-1;0<=c;c--)d[c]._target==a&&(d[c].paused=!0,d.splice(c,1));a.tween_count=0}};b.tick=function(a,d){void 0===d&&(d=!1);for(var c=b._tweens.concat(),g=c.length-1;0<=g;g--){var e=c[g];d&&!e.ignoreGlobalPause||e.paused||e.tick(e._useTicks?1:a)}};b._register=function(a,d){var c=a._target,g=b._tweens;if(d)c&&(c.tween_count=c.tween_count?c.tween_count+1:1),g.push(a);else for(c&&c.tween_count--,c=g.length;c--;)if(g[c]==a){g.splice(c,1);break}};b.removeAllTweens=function(){for(var a=b._tweens,
d=0,c=a.length;d<c;d++){var g=a[d];g.paused=!0;g._target.tweenjs_count=0}a.length=0};b.prototype.initialize=function(a,d,c){this._target=a;d&&(this._useTicks=d.useTicks,this.ignoreGlobalPause=d.ignoreGlobalPause,this.loop=d.loop,d.override&&b.removeTweens(a));this.pluginData=c||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];d&&d.paused?this.paused=!0:b._register(this,!0);d&&null!=d.position&&this.setPosition(d.position,b.NONE)};b.prototype.setPosition=function(a,
b){void 0===b&&(b=1);0>a&&(a=0);var c=a,g=!1;c>=this.duration&&(this.loop?c%=this.duration:(c=this.duration,g=!0));if(c==this._prevPos)return g;var e=this._prevPos;this.position=this._prevPos=c;this._prevPosition=a;if(this._target)if(g)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var f=0,k=this._steps.length;f<k&&!(this._steps[f].t>c);f++);f=this._steps[f-1];this._updateTargetProps(f,(this._stepPosition=c-f.t)/f.d)}0!=b&&0<this._actions.length&&(this._useTicks?this._runActions(c,
c):1==b&&c<e?(e!=this.duration&&this._runActions(e,this.duration),this._runActions(0,c,!0)):this._runActions(e,c));g&&this.setPaused(!0);return g};b.prototype._runActions=function(a,b,c){void 0===c&&(c=!1);var g=a,e=b,f=-1,k=this._actions.length,l=1;a>b&&(g=b,e=a,f=k,k=l=-1);for(;(f+=l)!=k;){b=this._actions[f];var n=b.t;(n==e||n>g&&n<e||c&&n==a)&&b.f.apply(b.o,b.p)}};b.prototype._updateTargetProps=function(a,d){var c,g,e,f;if(a||1!=d){if(this.passive=!!a.v)return;a.e&&(d=a.e(d,0,1,1));c=a.p0;g=a.p1}else this.passive=
!1,c=g=this._curQueueProps;for(var k in this._initQueueProps){null==(e=c[k])&&(c[k]=e=this._initQueueProps[k]);null==(f=g[k])&&(g[k]=f=e);e=e==f||0==d||1==d||"number"!=typeof e?1==d?f:e:e+(f-e)*d;var l=!1;if(f=b._plugins[k])for(var n=0,m=f.length;n<m;n++){var p=f[n].tween(this,k,e,c,g,d,!!a&&c==g,!a);p==b.IGNORE?l=!0:e=p}l||(this._target[k]=e)}};b.prototype.setPaused=function(a){this.paused=a;b._register(this,!a);return this};b.prototype._cloneProps=function(a){var b={},c;for(c in a)b[c]=a[c];return b};
b.prototype._addStep=function(a){0<a.d&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d);return this};b.prototype._appendQueueProps=function(a){var d,c,g,e,f,k;for(k in a)if(void 0===this._initQueueProps[k]){c=this._target[k];if(d=b._plugins[k])for(g=0,e=d.length;g<e;g++)c=d[g].init(this,k,c);this._initQueueProps[k]=this._curQueueProps[k]=void 0===c?null:c}for(k in a){c=this._curQueueProps[k];if(d=b._plugins[k])for(f=f||{},g=0,e=d.length;g<e;g++)d[g].step&&d[g].step(this,k,c,a[k],f);this._curQueueProps[k]=
a[k]}f&&this._appendQueueProps(f);return this._curQueueProps};b.prototype._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};b.prototype._set=function(a,b){for(var c in a)b[c]=a[c]};b.prototype.wait=function(a,b){void 0===b&&(b=!1);if(null==a||0>=a)return this;var c=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:c,p1:c,v:b})};b.prototype.to=function(a,b,c){void 0===c&&(c=void 0);if(isNaN(b)||0>b)b=0;return this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),
e:c,p1:this._cloneProps(this._appendQueueProps(a))})};b.prototype.call=function(a,b,c){void 0===b&&(b=void 0);void 0===c&&(c=void 0);a||(a=function(){});return this._addAction({f:a,p:c?c:[this],o:b?b:this._target})};b.prototype.set=function(a,b){void 0===b&&(b=null);return this._addAction({f:this._set,o:this,p:[a,b?b:this._target]})};b.prototype.play=function(a){a||(a=this);return this.call(a.setPaused,[!1],a)};b.prototype.pause=function(a){a||(a=this);return this.call(a.setPaused,[!0],a)};b.prototype.tick=
function(a){this.paused||this.setPosition(this._prevPosition+a)};b.NONE=0;b.LOOP=1;b.REVERSE=2;b._tweens=[];b.IGNORE={};b._plugins={};b._inited=!1;return b}();c.Tween=e})(c.utils||(c.utils={}))})(WOZLLA||(WOZLLA={}));
(function(c){var f=new c.math.Matrix,e=function(){function b(){this.worldMatrix=new c.math.Matrix;this.useGLCoords=!1;this._relative=!0;this._dirty=!1;this._values=Array(9);this.reset()}Object.defineProperty(b.prototype,"x",{get:function(){return this._values[0]},set:function(a){this._values[0]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"y",{get:function(){return this._values[1]},set:function(a){this._values[1]=a;this._dirty=!0},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"rotation",{get:function(){return this._values[4]},set:function(a){this._values[4]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scaleX",{get:function(){return this._values[5]},set:function(a){this._values[5]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scaleY",{get:function(){return this._values[6]},set:function(a){this._values[6]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"skewX",{get:function(){return this._values[7]},set:function(a){this._values[7]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"skewY",{get:function(){return this._values[8]},set:function(a){this._values[8]=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"relative",{get:function(){return this._relative},set:function(a){this._relative=a;this._dirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dirty",
{get:function(){return this._dirty},set:function(a){this._dirty=a},enumerable:!0,configurable:!0});b.prototype.setPosition=function(a,b){this._values[0]=a;this._values[1]=b;this._dirty=!0};b.prototype.setAnchor=function(a,b){this._values[2]=a;this._values[3]=b;this._dirty=!0};b.prototype.setRotation=function(a){this._values[4]=a;this._dirty=!0};b.prototype.setScale=function(a,b){this._values[5]=a;this._values[6]=b;this._dirty=!0};b.prototype.setSkew=function(a,b){this._values[7]=a;this._values[8]=
b;this._dirty=!0};b.prototype.reset=function(){this._values[0]=0;this._values[1]=0;this._values[2]=0;this._values[3]=0;this._values[4]=0;this._values[5]=1;this._values[6]=1;this._values[7]=0;this._values[8]=0};b.prototype.set=function(a){"number"===typeof a.x&&(this._values[0]=a.x);"number"===typeof a.y&&(this._values[1]=a.y);"number"===typeof a.rotation&&(this._values[4]=a.rotation);"number"===typeof a.scaleX&&(this._values[5]=a.scaleX);"number"===typeof a.scaleY&&(this._values[6]=a.scaleY);"number"===
typeof a.skewX&&(this._values[7]=a.skewX);"number"===typeof a.skewY&&(this._values[8]=a.skewY);"undefined"!==typeof a.relative&&(this._relative=a.relative);this._dirty=!0};b.prototype.transform=function(a){void 0===a&&(a=null);var d,c,g=this.worldMatrix;c=this._values[0];var e=this._values[1];d=this._values[4];var f=this._values[5],k=this._values[6],l=this._values[7],n=this._values[8];this.useGLCoords&&(l+=180);a&&this._relative?g.applyMatrix(a.worldMatrix):this===a?g.identity():g.applyMatrix(a.worldMatrix);
this.__local_matrix?(c=this.__local_matrix,g.append(c.a,c.b,c.c,c.d,c.tx,c.ty)):(d%360?(d*=b.DEG_TO_RAD,a=Math.cos(d),d=Math.sin(d)):(a=1,d=0),l||n?(l*=b.DEG_TO_RAD,n*=b.DEG_TO_RAD,g.append(Math.cos(n),Math.sin(n),-Math.sin(l),Math.cos(l),c,e),g.append(a*f,d*f,-d*k,a*k,0,0)):g.append(a*f,d*f,-d*k,a*k,c,e));this._dirty=!1};b.prototype.updateWorldMatrix=function(){if(this._dirty){var a=this.worldMatrix;a?a.identity():a=new c.math.Matrix;for(var b=this;null!=b;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,
b.rotation,b.skewX,b.skewY,0,0),b=b.parent}};b.prototype.globalToLocal=function(a,b,c){void 0===c&&(c=!1);c&&this.updateWorldMatrix();f.applyMatrix(this.worldMatrix);f.invert();f.append(1,0,0,1,a,b);return{x:f.values[6],y:f.values[7]}};b.prototype.localToGlobal=function(a,b,c){void 0===c&&(c=!1);c&&this.updateWorldMatrix();f.applyMatrix(this.worldMatrix);f.append(1,0,0,1,a,b);return{x:f.values[6],y:f.values[7]}};b.prototype.tween=function(a){return c.utils.Tween.get(this,null,null,a)};b.prototype.clearTweens=
function(){return c.utils.Tween.removeTweens(this)};b.DEG_TO_RAD=Math.PI/180;return b}();c.Transform=e})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(e){function b(){e.apply(this,arguments);this._py=this._px=this._bottom=this._right=this._left=this._top=this._height=this._width=0;this._anchorMode=b.ANCHOR_CENTER|b.ANCHOR_MIDDLE}__extends(b,e);Object.defineProperty(b.prototype,"width",{get:function(){return this._width},set:function(a){this._width!==a&&(this._width=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._height},set:function(a){this._height!==
a&&(this._height=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"top",{get:function(){return this._top},set:function(a){this._top!==a&&(this._top=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"left",{get:function(){return this._left},set:function(a){this._left!==a&&(this._left=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"right",{get:function(){return this._right},set:function(a){this._right!==
a&&(this._right=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bottom",{get:function(){return this._bottom},set:function(a){this._bottom!==a&&(this._bottom=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"px",{get:function(){return this._px},set:function(a){this._px!==a&&(this._px=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"py",{get:function(){return this._py},set:function(a){this._py!==
a&&(this._py=a,this.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"anchorMode",{get:function(){return this._anchorMode},set:function(a){this._anchorMode!==a&&(this._anchorMode=a,this.dirty=!0)},enumerable:!0,configurable:!0});b.prototype.set=function(a){this._anchorMode=a.anchorMode;this._width=a.width||0;this._height=a.height||0;this._top=a.top||0;this._left=a.left||0;this._right=a.right||0;this._bottom=a.bottom||0;this._px=a.px||0;this._px=a.py||0;this.dirty=!0};b.prototype.transform=
function(a){void 0===a&&(a=null);var d,h;h=a&&this._relative&&a instanceof b?a:c.Director.getInstance().viewRectTransform;d=this._anchorMode;(d&b.ANCHOR_LEFT)===b.ANCHOR_LEFT?this.x=this._px:(d&b.ANCHOR_RIGHT)===b.ANCHOR_RIGHT?this.x=h._width+this._px:(d&b.ANCHOR_HORIZONTAL_STRENGTH)===b.ANCHOR_HORIZONTAL_STRENGTH?(this.x=this._left,this._width=h._width-this._left-this._right):this.x=h._width/2+this._px;(d&b.ANCHOR_TOP)===b.ANCHOR_TOP?this.y=this._py:(d&b.ANCHOR_BOTTOM)===b.ANCHOR_BOTTOM?this.y=h._height+
this._py:(d&b.ANCHOR_VERTICAL_STRENGTH)===b.ANCHOR_VERTICAL_STRENGTH?(this.y=this._top,this._height=h._height-this._top-this._bottom):this.y=h._height/2+this._py;e.prototype.transform.call(this,a)};b.ANCHOR_TOP=1;b.ANCHOR_MIDDLE=16;b.ANCHOR_BOTTOM=256;b.ANCHOR_VERTICAL_STRENGTH=4096;b.ANCHOR_LEFT=65536;b.ANCHOR_CENTER=1048576;b.ANCHOR_RIGHT=16777216;b.ANCHOR_HORIZONTAL_STRENGTH=268435456;return b}(c.Transform);c.RectTransform=f})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(){function c(){}c.isTrue=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);if(!0!==b)throw Error(a);};c.isFalse=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);if(!1!==b)throw Error(a);};c.isTypeof=function(b,a,d){void 0===d&&(d=c.DEFAULT_MESSAGE);if(typeof b!==a)throw Error(d);};c.isNotTypeof=function(b,a,d){void 0===d&&(d=c.DEFAULT_MESSAGE);if(typeof b===a)throw Error(d);};c.isString=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isTypeof(b,"string",a)};c.isObject=function(b,
a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isTypeof(b,"object",a)};c.isUndefined=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isTypeof(b,"undefined",a)};c.isNotUndefined=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isNotTypeof(b,"undefined",a)};c.isFunction=function(b,a){void 0===a&&(a=c.DEFAULT_MESSAGE);c.isTypeof(b,"function",a)};c.DEFAULT_MESSAGE="Assertion Fail";return c}();c.Assert=f})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(e){function b(){e.apply(this,arguments)}__extends(b,e);Object.defineProperty(b.prototype,"gameObject",{get:function(){return this._gameObject},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"transform",{get:function(){return this._gameObject.transform},enumerable:!0,configurable:!0});b.prototype.init=function(){};b.prototype.destroy=function(){};b.prototype.loadAssets=function(a){a&&a()};b.prototype.listRequiredComponents=function(){return[]};b.register=
function(a,d){c.Assert.isObject(d);c.Assert.isString(d.name);c.Assert.isUndefined(b.configMap[d.name]);b.ctorMap[d.name]=a;b.configMap[d.name]=d};b.unregister=function(a){c.Assert.isString(a);c.Assert.isNotUndefined(b.configMap[a]);delete b.ctorMap[a];delete b.configMap[a]};b.create=function(a){c.Assert.isString(a);a=b.ctorMap[a];c.Assert.isFunction(a);return new a};b.getConfig=function(a){c.Assert.isString(a);a=b.configMap[a];c.Assert.isNotUndefined(a);return a};b.ctorMap={};b.configMap={};return b}(c.event.EventDispatcher);
c.Component=f})(WOZLLA||(WOZLLA={}));(function(c){var f=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.prototype.collideXY=function(a,b){return!1};b.prototype.collide=function(a){return!1};return b}(c.Component);c.Collider=f})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(a,b){return a.z-b.z},e={},b=function(a){function b(d){void 0===d&&(d=!1);a.call(this);this._visible=this._active=!0;this._loadingAssets=this._touchable=this._destroyed=this._initialized=!1;this._name="GameObject";this._children=[];this._components=[];this._transform=d?new c.RectTransform:new c.Transform;this._rectTransform=d?this._transform:null;this._z=0;this._behaviours=[]}__extends(b,a);b.getById=function(a){return e[a]};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},
set:function(a){var b=this._id;this._id=a;b&&delete e[b];e[a]=this},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._name},set:function(a){this._name=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rectTransform",{get:function(){return this._rectTransform},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"children",{get:function(){return this._children.slice(0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"childCount",{get:function(){return this._children.length},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"z",{get:function(){return this._z},set:function(a){this.setZ(a,!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"active",
{get:function(){return this._active},set:function(a){var b=this._active;this._active=a;!b&&a&&(this._transform.dirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"destroyed",{get:function(){return this._destroyed},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"touchable",{get:function(){return this._touchable},set:function(a){this._touchable=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"collider",{get:function(){return this._collider},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"behaviours",{get:function(){return this._behaviours.slice(0)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0});b.prototype.setZ=function(a,b){void 0===b&&(b=!0);this._z!==a&&(this._z=a,b&&this._children.sort(f))};b.prototype.addChild=function(a,b){void 0===b&&(b=!0);if(-1!==this._children.indexOf(a))return!1;a._parent&&a.removeMe();a.dispatchEvent(new c.CoreEvent("beforeadd",!0));this._children.push(a);b&&this._children.sort(f);a._parent=this;a._transform.dirty=!0;a.dispatchEvent(new c.CoreEvent("add",
!0));return!0};b.prototype.removeChild=function(a){var b=this._children.indexOf(a);return-1!==b?(a.dispatchEvent(new c.CoreEvent("beforeremove",!0,null,!1)),this._children.splice(b,1),a._parent=null,a.dispatchEvent(new c.CoreEvent("remove",!0,null,!1)),!0):!1};b.prototype.getChild=function(a){var b,d,c;d=0;for(c=this._children.length;d<c;d++)if(b=this._children[d],b._name===a)return b;return null};b.prototype.getChildren=function(a){var b,d,c,e=[];d=0;for(c=this._children.length;d<c;d++)b=this._children[d],
b._name===a&&e.push(b);return e};b.prototype.removeMe=function(){var a=this._parent;return a&&a.removeChild(this)};b.prototype.eachChild=function(a){this._children.forEach(a)};b.prototype.sortChildren=function(){this._children.sort(f)};b.prototype.getPath=function(a){void 0===a&&(a="/");for(var b=[],d=this;d;)b.unshift(d.name),d=d.parent;return b.join(a)};b.prototype.contains=function(a){if(a===this)return!0;for(;a=a.parent;)if(a===this)return!0;return!1};b.prototype.getComponent=function(a){var b,
d,c;if(0>=this._components.length)return null;d=0;for(c=this._components.length;d<c;d++)if(b=this._components[d],b instanceof a)return b;return null};b.prototype.hasComponent=function(a){var b,d,c;if(0>=this._components.length)return!1;d=0;for(c=this._components.length;d<c;d++)if(b=this._components[d],b instanceof a)return!0;return!1};b.prototype.getComponents=function(a){var b,d,c,e=[];if(0>=this._components.length)return e;d=0;for(c=this._components.length;d<c;d++)b=this._components[d],b instanceof
a&&e.push(b);return e};b.prototype.addComponent=function(a){if(-1!==this._components.indexOf(a))return!1;if(!this.checkComponentDependency(a))throw Error("Can't not add, because of dependency");a._gameObject&&a._gameObject.removeComponent(a);this._components.push(a);a._gameObject=this;a instanceof c.Behaviour?this._behaviours.push(a):a instanceof c.Renderer?this._renderer=a:a instanceof c.Collider?this._collider=a:a instanceof c.Mask&&(this._mask=a);return!0};b.prototype.removeComponent=function(a){var b,
d,e,f=this._components.indexOf(a);if(-1!==f){b=0;for(d=this._components.length;b<d;b++)if(e=this._components[b],e!==a&&this.checkComponentDependency(e))throw Error("Can't not remove, because of dependency");this._components.splice(f,1);a instanceof c.Behaviour?this._behaviours.splice(this._behaviours.indexOf(a),1):a instanceof c.Renderer?this._renderer=null:a instanceof c.Collider?this._collider=null:a instanceof c.Mask&&(this._mask=null);a._gameObject=null;return!0}return!1};b.prototype.init=function(){var a,
b;if(!this._initialized&&!this._destroyed){a=0;for(b=this._components.length;a<b;a++)this._components[a].init();a=0;for(b=this._children.length;a<b;a++)this._children[a].init();this._initialized=!0}};b.prototype.destroy=function(){var a,b;if(!this._destroyed&&this._initialized){a=0;for(b=this._components.length;a<b;a++)this._components[a].destroy();a=0;for(b=this._children.length;a<b;a++)this._children[a].destroy();this._id&&delete e[this._id];this.clearAllListeners();this._destroyed=!0}};b.prototype.update=
function(){var a,b,d;if(this._active){if(0<this._behaviours.length)for(a=0,b=this._behaviours.length;a<b;a++)d=this._behaviours[a],d.enabled&&d.update();if(0<this._children.length)for(a=0,b=this._children.length;a<b;a++)this._children[a].update()}};b.prototype.visit=function(a,c,e){var f;if(this._active&&this._initialized&&!this._destroyed)for(this._transform.dirty&&(e|=b.MASK_TRANSFORM_DIRTY),(e&b.MASK_TRANSFORM_DIRTY)==b.MASK_TRANSFORM_DIRTY&&this._transform.transform(c),this._visible||(e&=~b.MASK_VISIBLE),
(e&b.MASK_VISIBLE)===b.MASK_VISIBLE&&this.render(a,e),c=0,f=this._children.length;c<f;c++)this._children[c].visit(a,this._transform,e);else(e&b.MASK_TRANSFORM_DIRTY)===b.MASK_TRANSFORM_DIRTY&&(this._transform.dirty=!0)};b.prototype.render=function(a,b){this._mask&&this._mask.render(a,b);this._renderer&&this._renderer.render(a,b)};b.prototype.getUnderPoint=function(a,b,d){void 0===d&&(d=!1);var c,e;if(!this._active||!this._visible)return null;e=this._children;if(0<e.length)for(var f=e.length-1;0<=
f;f--)if(c=e[f],c=c.getUnderPoint(a,b,d))return c;if(!d||this._touchable)if(a=this.transform.globalToLocal(a,b),this.testHit(a.x,a.y))return this;return null};b.prototype.testHit=function(a,b){var d=this._collider;return d&&d.collideXY(a,b)};b.prototype.loadAssets=function(a){var b,d,c,e;if(!this._loadingAssets)if(c=this._components.length+this._children.length,0===c)a&&a();else{b=0;for(d=this._components.length;b<d;b++)e=this._components[b],e.loadAssets(function(){0===--c&&a&&a()});b=0;for(d=this._children.length;b<
d;b++)this._children[b].loadAssets(function(){0===--c&&a&&a()})}};b.prototype.checkComponentDependency=function(a){for(var b=a.listRequiredComponents(),d=!0,c=0,e=b.length;c<e;c++)a=b[c],d=d&&this.hasComponent(a);return d};b.MASK_TRANSFORM_DIRTY=1;b.MASK_VISIBLE=16;return b}(c.event.EventDispatcher);c.GameObject=b})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(e){function b(){e.call(this);this.name=this.id=b.ID;this._rootTransform=new c.Transform;this._viewRectTransform=new c.RectTransform;this._viewRectTransform.anchorMode=c.RectTransform.ANCHOR_TOP|c.RectTransform.ANCHOR_LEFT;this._viewRectTransform.width=c.Director.getInstance().renderer.viewport.width;this._viewRectTransform.height=c.Director.getInstance().renderer.viewport.height;this.init()}__extends(b,e);Object.defineProperty(b.prototype,"viewRectTransform",{get:function(){return this._viewRectTransform},
enumerable:!0,configurable:!0});b.prototype.visitStage=function(a){e.prototype.visit.call(this,a,this._rootTransform,c.GameObject.MASK_VISIBLE)};b.ID="WOZLLAStage";return b}(c.GameObject);c.Stage=f})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(){function c(){}c.update=function(b){var a=Date.now()+this._nowIncrease;this.now?(this.delta=(a-this.now)*b,this._nowIncrease+=this.delta*(b-1),this.now+=this.delta,this.measuredFPS=1E3/this.delta):(this.now=a,this.delta=1E3/60)};c.reset=function(){this.measuredFPS=this._nowIncrease=this.now=this.delta=0};c.delta=0;c.now=0;c.measuredFPS=0;c._nowIncrease=0;return c}();c.Time=f})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(){function e(){this._scheduleCount=0;this._schedules={};this._runScheduleCount=0}e.getInstance=function(){e.instance||(e.instance=new e);return e.instance};e.prototype.runSchedule=function(){var b,a;this._runScheduleCount=0;for(b in this._schedules)a=this._schedules[b],a.isFrame&&!a.paused?(a.frame--,0>a.frame&&(delete this._schedules[b],a.task.apply(a,a.args))):a.isTime&&!a.paused?(a.time-=c.Time.delta,0>a.time&&(delete this._schedules[b],a.task.apply(a,a.args))):a.isInterval&&
!a.paused?(a.time-=c.Time.delta,0>a.time&&(a.task.apply(a,a.args),a.time+=a.intervalTime)):a.isLoop&&!a.paused&&a.task.apply(a,a.args),this._runScheduleCount++};e.prototype.removeSchedule=function(b){delete this._schedules[b]};e.prototype.scheduleLoop=function(b,a){var d="Schedule_"+this._scheduleCount++;this._schedules[d]={task:b,args:a,isLoop:!0};return d};e.prototype.scheduleFrame=function(b,a,d){void 0===a&&(a=0);var c="Schedule_"+this._scheduleCount++;this._schedules[c]={task:b,frame:a,args:d,
isFrame:!0};return c};e.prototype.scheduleInterval=function(b,a,d){void 0===a&&(a=0);var c="Schedule_"+this._scheduleCount++;this._schedules[c]={task:b,intervalTime:a,time:a,args:d,isInterval:!0};return c};e.prototype.scheduleTime=function(b,a,d){void 0===a&&(a=0);var c="Schedule_"+this._scheduleCount++;this._schedules[c]={task:b,time:a||0,args:d,isTime:!0};return c};e.prototype.resumeSchedule=function(b){this._schedules[b].paused=!1};e.prototype.pauseSchedule=function(b){this._schedules[b].paused=
!0};return e}();c.Scheduler=f})(WOZLLA||(WOZLLA={}));
(function(c){function f(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var e=function(a){function b(d){a.call(this,d.type,d.bubbles,d.data);this.touchMoveDetection=!1;this.x=d.x;this.y=d.y;this.touch=d.touch;this.touchMoveDetection=d.touchMoveDetection;this.gesture=d.gesture;this.identifier=d.identifier}__extends(b,a);b.prototype.setTouchMoveDetection=function(a){this.touchMoveDetection=a};return b}(c.event.Event);c.GestureEvent=e;var b=function(){function a(b,
h){void 0===h&&(h=1);this.enabled=!0;this.canvasOffset=this.canvas=null;this.channelMap={};var g=this,e=window.navigator;g.canvas=b;g.canvasOffset=f(b);g.touchScale=h;Hammer(e.isCocoonJS?document:b,{transform:!1,doubletap:!1,hold:!1,rotate:!1,pinch:!1}).on(a.enabledGestures||"touch release tap swipe drag dragstart dragend",function(a){("release"===a.type||g.enabled)&&c.Scheduler.getInstance().scheduleFrame(function(){g.onGestureEvent(a)})})}a.setEanbledGestures=function(a){this.enabledGestures=a};
a.prototype.onGestureEvent=function(a){var b,g,e,f,k,l,n,m,p=a.type,s=c.Director.getInstance().stage,v=this.touchScale||1;if(n=a.gesture.srcEvent.changedTouches)for(f=n.length,e=0;e<f;e++)g=n[e],k=parseInt(g.identifier),b=g.pageX-this.canvasOffset.x,g=g.pageY-this.canvasOffset.y,b*=v,g*=v,"touch"===p&&(m=s.getUnderPoint(b,g,!0))&&(this.channelMap[k]=this.createDispatchChanel(m),delete this.channelMap[k-10]),(l=this.channelMap[k])&&l.onGestureEvent(a,m,b,g,k);else k=1,b=a.gesture.srcEvent.pageX-this.canvasOffset.x,
g=a.gesture.srcEvent.pageY-this.canvasOffset.y,b*=v,g*=v,"touch"===p&&((m=s.getUnderPoint(b,g,!0))?this.channelMap[k]=this.createDispatchChanel(m):delete this.channelMap[k]),(l=this.channelMap[k])&&l.onGestureEvent(a,m,b,g,k)};a.prototype.createDispatchChanel=function(a){var b=!0;return{onGestureEvent:function(g,f,u,k,l){var n=g.type,m=c.Director.getInstance().stage;switch(n){case "drag":if(!b){f=a;break}case "tap":case "release":f=m.getUnderPoint(u,k,!0)}if("tap"!==n||a===f)g=new e({x:u,y:k,type:n,
bubbles:!0,touch:f,gesture:g.gesture,identifier:l,touchMoveDetection:!1}),a.dispatchEvent(g),b=g.touchMoveDetection}}};return a}();c.Touch=b})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(){}b.getGLContext=function(a,b){var c,g=b||{},e={alpha:!0,antialias:!0,premultipliedAlpha:!1,stencil:!0},f;for(f in e)"undefined"===typeof g[f]&&(g[f]=e[f]);b=g;try{c=a.getContext("experimental-webgl",b)}catch(k){try{c=a.getContext("webgl",b)}catch(l){}}return c};b.compileShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log(a.getShaderInfoLog(b)),null)};
b.compileProgram=function(a,d,c){d=b.compileShader(a,a.VERTEX_SHADER,d);c=b.compileShader(a,a.FRAGMENT_SHADER,c);var g=a.createProgram();a.attachShader(g,d);a.attachShader(g,c);a.linkProgram(g);a.getProgramParameter(g,a.LINK_STATUS)||console.log("Could not initialise program");return{program:g,vertexShader:d,fragmentShader:c}};return b}();c.WebGLUtils=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){c=c.renderer||(c.renderer={});(c.ILayerManager||(c.ILayerManager={})).DEFAULT="default"})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(){this._layerIndexMap={};this._sortedLayers=[];this.define(c.ILayerManager.DEFAULT,0)}b.prototype.define=function(a,b){var c=this;if(this._layerIndexMap[a])throw Error("Layer has been defined: "+a);this._layerIndexMap[a]=b;this._sortedLayers.push(a);this._sortedLayers.sort(function(a,b){return c.getZIndex(a)-c.getZIndex(b)})};b.prototype.undefine=function(a){this._sortedLayers.splice(this._sortedLayers.indexOf(a),1);delete this._layerIndexMap[a]};
b.prototype.getZIndex=function(a){return this._layerIndexMap[a]};b.prototype.getSortedLayers=function(){return this._sortedLayers.slice(0)};b.prototype._getSortedLayers=function(){return this._sortedLayers};return b}();c.LayerManager=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b){this._srcFactor=a;this._distFactor=b}Object.defineProperty(b.prototype,"srcFactor",{get:function(){return this._srcFactor},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"distFactor",{get:function(){return this._distFactor},enumerable:!0,configurable:!0});b.prototype.applyBlend=function(a){a.blendFunc(this._srcFactor,this._distFactor)};b.NORMAL=1;b.ADD=2;b.MULTIPLY=3;b.SCREEN=4;return b}();c.BlendType=e})(c.renderer||(c.renderer=
{}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b,c){this._id=a;this._shaderProgramId=b;this._blendType=c}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"shaderProgramId",{get:function(){return this._shaderProgramId},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"blendType",{get:function(){return this._blendType},enumerable:!0,configurable:!0});b.prototype.equals=function(a){return a.blendType===
this._blendType&&a.shaderProgramId===this._shaderProgramId};return b}();c.Material=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));(function(c){c=c.renderer||(c.renderer={});(c.IMaterial||(c.IMaterial={})).DEFAULT="Builtin_default"})(WOZLLA||(WOZLLA={}));(function(c){c=c.renderer||(c.renderer={});(c.IShaderProgram||(c.IShaderProgram={})).V2T2C1A1="Builtin_V2T2C1A1"})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(){this._materialMap={};this._materialMap[c.IMaterial.DEFAULT]=this.createMaterial(c.IMaterial.DEFAULT,c.IShaderProgram.V2T2C1A1,c.BlendType.NORMAL)}b.prototype.createMaterial=function(a,b,e){b=new c.Material(a,b,e);return this._materialMap[a]=b};b.prototype.getMaterial=function(a){return this._materialMap[a]};b.prototype.deleteMaterial=function(a){delete this._materialMap[a.id]};b.prototype.clear=function(){this._materialMap={}};return b}();c.MaterialManager=
e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b,c){this._id=a;this._vertexShader=b;this._fragmentShader=c}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vertexShader",{get:function(){return this._vertexShader},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fragmentShader",{get:function(){return this._fragmentShader},enumerable:!0,configurable:!0});b.prototype.useProgram=function(a){a.useProgram(this._id)};
b.prototype.syncUniforms=function(a,b){};return b}();c.ShaderProgram=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){(function(e){var b=function(a){function b(d,c,e){a.call(this,d,c,e);this._locations={initialized:!1}}__extends(b,a);b.prototype.useProgram=function(b){a.prototype.useProgram.call(this,b);this._locations.initialized||(this._initLocaitions(b),this._locations.initialized=!0);this._activate(b)};b.prototype.syncUniforms=function(a,b){a.uniform2f(this._locations.projectionVector,b.projection.x,b.projection.y)};b.prototype._initLocaitions=function(a){var b=this._id;this._locations.uSampler=
a.getUniformLocation(b,"uSampler");this._locations.projectionVector=a.getUniformLocation(b,"projectionVector");this._locations.offsetVector=a.getUniformLocation(b,"offsetVector");this._locations.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this._locations.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this._locations.aColor=a.getAttribLocation(b,"aColor")};b.prototype._activate=function(a){a.activeTexture(a.TEXTURE0);var b=4*f.Quad.V2T2C1A1.strade;a.vertexAttribPointer(this._locations.aVertexPosition,
2,a.FLOAT,!1,b,0);a.vertexAttribPointer(this._locations.aTextureCoord,2,a.FLOAT,!1,b,8);a.vertexAttribPointer(this._locations.aColor,2,a.FLOAT,!1,b,16);a.enableVertexAttribArray(this._locations.aVertexPosition);a.enableVertexAttribArray(this._locations.aTextureCoord);a.enableVertexAttribArray(this._locations.aColor)};b.VERTEX_SOURCE="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\ngl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\nvTextureCoord = aTextureCoord;\nvec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;\nvColor = vec4(color * aColor.x, aColor.x);\n}";
b.FRAGMENT_SOURCE="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";return b}(c.renderer.ShaderProgram);e.V2T2C1A1=b})(f.shader||(f.shader={}))})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a){this._gl=a;this._shaderMap={};this._shaderMap[c.IShaderProgram.V2T2C1A1]=this.createShaderProgram(c.shader.V2T2C1A1.VERTEX_SOURCE,c.shader.V2T2C1A1.FRAGMENT_SOURCE,c.shader.V2T2C1A1)}b.prototype.getShaderProgram=function(a){return this._shaderMap[a]};b.prototype.createShaderProgram=function(a,b,e){void 0===e&&(e=c.ShaderProgram);a=c.WebGLUtils.compileProgram(this._gl,a,b);e=new e(a.program,a.vertexShader,a.fragmentShader);return this._shaderMap[e.id]=
e};b.prototype.deleteShaderProgram=function(a){this._gl.deleteProgram(a.id);this._gl.deleteShader(a.vertexShader);this._gl.deleteShader(a.fragmentShader);delete this._shaderMap[a.id]};b.prototype.clear=function(){for(var a in this._shaderMap)this.deleteShaderProgram(this._shaderMap[a])};return b}();c.ShaderManager=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b){this._id=a;this._descriptor=b}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0});b.prototype.bind=function(a){a.bindTexture(a.TEXTURE_2D,this._id)};return b}();c.Texture=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){function e(a){return 0===(a&a-1)}var b=function(){function a(a){this._gl=a;this._textureMap={}}a.prototype.getTexture=function(a){return this._textureMap[a]};a.prototype.generateTexture=function(a,b){var g,t;g=this._gl;var u=b||g.createTexture();g.bindTexture(g.TEXTURE_2D,u);g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);e(a.width)&&e(a.height)?(g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE));switch(a.textureFormat){case 0:case 1:g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,a.source);break;case 2:switch(a.pixelFormat){case 5:t=c.WebGLExtension.getExtension(g,c.WebGLExtension.PVRTC);t=t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;break;case 4:t=c.WebGLExtension.getExtension(g,
c.WebGLExtension.PVRTC);t=t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;default:throw Error("Unsupported pixel format: "+a.pixelFormat);}g.compressedTexImage2D(g.TEXTURE_2D,0,t,a.width,a.height,0,a.source);break;default:throw Error("Unsupported texture format: "+a.textureFormat);}g=new c.Texture(u,a);return this._textureMap[u]=g};a.prototype.updateTexture=function(a){this.generateTexture(a.descriptor,a.id)};a.prototype.deleteTexture=function(a){this._gl.deleteTexture(a.id);delete this._textureMap[a.id]};
a.prototype.clear=function(){for(var a in this._textureMap)this.deleteTexture(this._textureMap[a])};return a}();c.TextureManager=b})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){function e(a,b){return a.globalZ===b.globalZ?a._addIndex-b._addIndex:a.globalZ-b.globalZ}var b=function(){function b(a,e){this._commandQueueMap={};this._blendModes={};this._uniforms={};this._gl=a;this._viewport=e;this._blendModes[c.BlendType.NORMAL]=new c.BlendType(a.ONE,a.ONE_MINUS_SRC_ALPHA);this._blendModes[c.BlendType.ADD]=new c.BlendType(a.SRC_ALPHA,a.DST_ALPHA);this._blendModes[c.BlendType.MULTIPLY]=new c.BlendType(a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA);this._blendModes[c.BlendType.SCREEN]=
new c.BlendType(a.SRC_ALPHA,a.ONE);this._layerManager=new c.LayerManager;this._materialManager=new c.MaterialManager;this._shaderManager=new c.ShaderManager(a);this._textureManager=new c.TextureManager(a);this._quadBatch=new d(a);this._uniforms.projection={x:e.width/2,y:-e.height/2};a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.enable(a.BLEND)}Object.defineProperty(b.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"materialManager",{get:function(){return this._materialManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"shaderManager",{get:function(){return this._shaderManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"textureManager",{get:function(){return this._textureManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"gl",{get:function(){return this._gl},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"viewport",{get:function(){return this._viewport},
enumerable:!0,configurable:!0});b.prototype.addCommand=function(b){var c=b.layer,d=this._commandQueueMap[c];d||(d=this._commandQueueMap[c]=new a(c));d.add(b)};b.prototype.render=function(){var a=this,b,d,e,h=this._gl;h.viewport(0,0,this._viewport.width,this._viewport.height);h.clearColor(0,0,0,0);h.clear(h.COLOR_BUFFER_BIT);this._eachCommand(function(h){b?b instanceof c.CustomCommand?a.flush():h instanceof c.CustomCommand?a.flush():h.materialId!==e.id?a.flush():h.texture!==d&&a.flush():a.flush();
h instanceof c.CustomCommand?h.execute(a):(a._quadBatch.canFill(h.quad)||a.flush(),a._quadBatch.fillQuad(h.quad));a._usingMaterial=e=a._materialManager.getMaterial(h.materialId);a._usingTexture=d=h.texture;b=h});b&&(this.flush(),this._clearCommands(),this._usingMaterial=this._usingTexture=null)};b.prototype.flush=function(){var a,b;this._usingMaterial&&(a=this._gl,b=this._shaderManager.getShaderProgram(this._usingMaterial.shaderProgramId),b.useProgram(a),b.syncUniforms(a,this._uniforms),this._blendModes[this._usingMaterial.blendType].applyBlend(a),
this._usingTexture&&this._usingTexture.bind(a),this._quadBatch.flush(a))};b.prototype._clearCommands=function(){var a=this._commandQueueMap,b;for(b in a)a[b].clear()};b.prototype._eachCommand=function(a){var b,c,d,e,h,f,p,s=this._commandQueueMap,v=this._layerManager._getSortedLayers();b=0;for(c=v.length;b<c;b++)if(d=v[b],h=s[d]){f=h.negativeZQueue;if(0<f.length)for(d=0,e=f.length;d<e;d++)p=f[d],a(p);f=h.zeroZQueue;if(0<f.length)for(d=0,e=f.length;d<e;d++)p=f[d],a(p);f=h.positiveZQueue;if(0<f.length)for(d=
0,e=f.length;d<e;d++)p=f[d],a(p)}};b.MAX_QUAD_SIZE=500;return b}();c.Renderer=b;var a=function(){function a(b){this._addIndex=0;this.negativeZQueue=[];this.zeroZQueue=[];this.positiveZQueue=[];this.layer=b}a.prototype.add=function(a){a._addIndex=this._addIndex++;0===a.globalZ?this.zeroZQueue.push(a):0<a.globalZ?this.positiveZQueue.push(a):this.negativeZQueue.push(a)};a.prototype.clear=function(){var a,b,d;a=0;for(b=this.negativeZQueue.length;a<b;a++)d=this.negativeZQueue[a],d.isPoolable&&d.release();
a=0;for(b=this.zeroZQueue.length;a<b;a++)d=this.zeroZQueue[a],d.isPoolable&&d.release();a=0;for(b=this.positiveZQueue.length;a<b;a++)d=this.positiveZQueue[a],d.isPoolable&&d.release();this.negativeZQueue.length=0;this.zeroZQueue.length=0;this._addIndex=this.positiveZQueue.length=0};a.prototype.sort=function(){this.positiveZQueue.sort(e);this.negativeZQueue.sort(e)};return a}(),d=function(){function a(d){this._size=b.MAX_QUAD_SIZE;this._curBatchSize=this._curVertexIndex=0;this._gl=d;this._initBuffers()}
Object.defineProperty(a.prototype,"vertexBuffer",{get:function(){return this._vertexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});a.prototype.canFill=function(a){return this._curVertexIndex<this._size};a.prototype.fillQuad=function(a){var b,d,c=this._vertices;b=this._curVertexIndex;if(a.count===a.renderCount)c.set(a.storage,b);else{var e=0,h=a.renderOffset*a.type.size,f=a.renderCount*
a.type.size;for(d=a.storage;e<f;h++,e++)c[b+e]=d[h]}this._curVertexIndex+=a.renderCount*a.type.size;this._curBatchSize+=a.renderCount};a.prototype.flush=function(a){0!==this._curBatchSize&&(a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this._vertices,a.DYNAMIC_DRAW),a.drawElements(a.TRIANGLES,6*this._curBatchSize,a.UNSIGNED_SHORT,0),this._curBatchSize=this._curVertexIndex=0)};a.prototype._initBuffers=function(){var a,b,d=this._gl,c=6*this._size;this._vertices=new Float32Array(24*
this._size);this._indices=new Uint16Array(c);for(b=a=0;a<c;a+=6,b+=4)this._indices[a]=b,this._indices[a+1]=b+1,this._indices[a+2]=b+2,this._indices[a+3]=b,this._indices[a+4]=b+2,this._indices[a+5]=b+3;this._vertexBuffer=d.createBuffer();this._indexBuffer=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this._indexBuffer);d.bufferData(d.ELEMENT_ARRAY_BUFFER,this._indices,d.STATIC_DRAW);d.bindBuffer(d.ARRAY_BUFFER,this._vertexBuffer);d.bufferData(d.ARRAY_BUFFER,this._vertices,d.DYNAMIC_DRAW)};return a}()})(c.renderer||
(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){var f=window.requestAnimationFrame||window.msRequestAnimationFrame||function(b,a){void 0===a&&(a=1E3/62);setTimeout(b,a)},e=function(){function b(a,d){void 0===d&&(d={});this._paused=this._runing=!1;this._timeScale=1;b.instance=this;this._view="string"===typeof a?document.getElementById("canvas"):a;this._scheduler=c.Scheduler.getInstance();this._assetLoader=c.assets.AssetLoader.getInstance();this._touch=new c.Touch(a,d.touchScale);this._renderer=new c.renderer.Renderer(c.renderer.WebGLUtils.getGLContext(a,
d.renderer),{x:0,y:0,width:a.width,height:a.height});this._stage=new c.Stage}b.getInstance=function(){return b.instance};Object.defineProperty(b.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"touch",{get:function(){return this._touch},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scheduler",{get:function(){return this._scheduler},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"assetLoader",{get:function(){return this._assetLoader},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"viewRectTransform",{get:function(){return this._stage.viewRectTransform},enumerable:!0,configurable:!0});b.prototype.start=function(){var a=this,b;this._runing||(this._runing=!0,c.Time.reset(),b=function(){a._runing&&
f(b);a.runStep()},f(b))};b.prototype.stop=function(){this._runing=!1};b.prototype.runStep=function(a){void 0===a&&(a=this._timeScale);c.Time.update(a);this._stage.update();this._stage.visitStage(this._renderer);this._renderer.render();this._scheduler.runSchedule();c.utils.Tween.tick(c.Time.delta)};return b}();c.Director=e})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=function(a){function d(b){a.call(this,b)}__extends(d,a);Object.defineProperty(d.prototype,"glTexture",{get:function(){return this._glTexture},enumerable:!0,configurable:!0});d.prototype._generateTexture=function(a){var d=c.Director.getInstance().renderer;if(!d)throw Error("Director not initialized");this._glTexture=d.textureManager.generateTexture(new b(a))};d.prototype._generatePVRTexture=function(a){throw Error("Unsupported now");};return d}(f.Asset);f.GLTextureAsset=
e;var b=function(){function a(a){this._source=a;this._pixelFormat=this._textureFormat=0}Object.defineProperty(a.prototype,"width",{get:function(){return this._source.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._source.height},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureFormat",{get:function(){return this._textureFormat},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!0,configurable:!0});return a}();f.HTMLImageDescriptor=b;e=function(){function a(a,b){this._source=a;this._textureFormat=2;this._pixelFormat=b}Object.defineProperty(a.prototype,"width",{get:function(){return this._source.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._source.height},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureFormat",{get:function(){return this._textureFormat},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!0,configurable:!0});return a}();f.PVRDescriptor=e})(c.assets||(c.assets={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){function e(a,b){for(var d in b)"undefined"===typeof a[d]&&(a[d]=b[d]);return a}var b={json:function(a){return JSON.parse(a.responseText)},arraybuffer:function(a){return a.response}},a=function(){},d=function(){function d(){}d.request=function(c){void 0===c&&(c={});var f,u;c=e(c,{url:"",async:!0,method:"GET",contentType:"text",responseType:"text/plain",timeout:3E4,success:a,error:a});f=new XMLHttpRequest;f.responseType=c.responseType;f.onreadystatechange=function(){var d;
4===f.readyState&&(f.onreadystatechange=a,clearTimeout(u),d=b[c.contentType]||function(){return f.responseText},c.success(d(f)))};f.open(c.method,c.url,c.async);u=setTimeout(function(){f.onreadystatechange=a;f.abort();c.error({code:d.ERROR_TIMEOUT,message:"request timeout"})},c.timeout);f.send()};d.ERROR_TIMEOUT=1;d.ERROR_SERVER=2;return d}();c.Ajax=d})(c.utils||(c.utils={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){function e(a){var b=a,c;if(a&&"object"===typeof a)for(c in b="[object Array]"===Object.prototype.toString.call(a)?[]:{},a)b[c]=e(a[c]);return b}var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.cloneData=function(){return this._data?e(this._data):this._data};b.prototype.load=function(a,b){var d=this;c.utils.Ajax.request({url:this.src,contentType:"json",success:function(b){d._data=b;a()},error:function(a){b(a)}})};b.prototype.unload=function(){this._data=
null;a.prototype.unload.call(this)};return b}(f.Asset);f.JSONAsset=b})(c.assets||(c.assets={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){(function(c){var b=function(){function a(a){this.loading=!1;this.proxyTarget=a}a.prototype.setAssetSrc=function(a){this.newAssetSrc=a};a.prototype.loadAsset=function(a){var b=this;this.checkDirty()&&!this.loading&&(this.loading=!0,this.asset&&this.asset.release(),this.asset=null,this.doLoad(function(c){c?c.src!==b.newAssetSrc?(c.retain(),c.release(),b.asset=null):(b.asset=c,b.asset.retain()):(b.asset=null,a&&a());b.loading=!1;b.proxyTarget.onAssetLoaded(c);a&&a()}))};a.prototype.onDestroy=
function(){this.asset&&this.asset.release();this.asset=null};a.prototype.checkDirty=function(){return this.asset?this.newAssetSrc!==this.asset.src:!!this.newAssetSrc};a.prototype.doLoad=function(a){a(null)};return a}();c.AssetProxy=b})(c.proxy||(c.proxy={}))})(c.assets||(c.assets={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){(function(e){var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.getSprite=function(a){return this.asset?this.asset.getSprite(a):null};b.prototype.doLoad=function(a){var b=this.newAssetSrc;b?c.AssetLoader.getInstance().load(b,c.SpriteAtlas,function(){a(c.AssetLoader.getInstance().getAsset(b))}):a(null)};return b}(e.AssetProxy);e.SpriteAtlasProxy=b})(c.proxy||(c.proxy={}))})(c.assets||(c.assets={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b,c){this._spriteAtlas=a;this._frame=b;this._name=c}Object.defineProperty(b.prototype,"spriteAtlas",{get:function(){return this._spriteAtlas},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});return b}();c.Sprite=e})(c.assets||(c.assets={}))})(WOZLLA||
(WOZLLA={}));
(function(c){(function(f){function e(a){var b=a.lastIndexOf("/");return-1!==b?a.substr(b+1,a.length):a}var b=/(\.png|\.jpg)$/i,a=function(a){function h(b){a.call(this,b);this._spriteCache={}}__extends(h,a);Object.defineProperty(h.prototype,"imageSrc",{get:function(){return this._imageSrc},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"metaSrc",{get:function(){return this._metaSrc},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"sourceImage",{get:function(){return this._sourceImage},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"spriteData",{get:function(){return this._spriteData},enumerable:!0,configurable:!0});h.prototype.getSprite=function(a){var b;return a?(b=this._spriteCache[a])?b:this._spriteData?(b=this._spriteData.frames[a])?("undefined"===typeof b.frame.width&&(b.frame.width=b.frame.w,b.frame.height=b.frame.h),b=new f.Sprite(this,{x:b.frame.x,y:b.frame.y,width:b.frame.width,height:b.frame.height},a),this._spriteCache[a]=b):null:null:this._entireSprite};h.prototype.load=
function(a,c){var d=this;b.test(this.src)?(this._imageSrc=this.src,this._loadImage(function(b,e){b?c&&c(b):(d._generateTexture(e),d._sourceImage=e,d._entireSprite=new f.Sprite(d,{x:0,y:0,width:e.width,height:e.height}),a&&a())})):(this._metaSrc=this.src,this._loadSpriteAtlas(function(b,e,h){b?c&&c(b):(d._sourceImage=e,d._generateTexture(e),d._entireSprite=new f.Sprite(d,{x:0,y:0,width:e.width,height:e.height}),d._spriteData=h,a&&a())}))};h.prototype._loadImage=function(a){var b=this,c=new Image;c.src=
this._imageSrc;c.onload=function(){a&&a(null,c)};c.onerror=function(){a("Fail to load image: "+b._imageSrc)}};h.prototype._loadSpriteAtlas=function(a){var b=this;c.utils.Ajax.request({url:b._metaSrc,contentType:"json",success:function(c){var d=c.meta.image,h=e(b._metaSrc);b._imageSrc=b._metaSrc.replace(new RegExp(h+"$"),d);b._loadImage(function(b,d){b?a&&a(b):a&&a(null,d,c)})},error:function(b){a("Fail to load sprite: "+this._metaSrc+", "+b.code+":"+b.message)}})};return h}(f.GLTextureAsset);f.SpriteAtlas=
a})(c.assets||(c.assets={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b,c,e){this.x=a;this.y=b;this.width=c;this.height=e}Object.defineProperty(b.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bottom",{get:function(){return this.y+
this.height},enumerable:!0,configurable:!0});b.prototype.containsXY=function(a,b){return this.x<=a&&this.right>a&&this.y<=b&&this.bottom>b};b.prototype.toString=function(){return"Rectangle["+this.x+","+this.y+","+this.width+","+this.height+"]"};return b}();c.Rectangle=e})(c.math||(c.math={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.collideXY=function(a,b){return this.region&&this.region.containsXY(a,b)};a.prototype.collide=function(a){return!1};return a}(c.Collider);f.CircleCollider=e})(c.component||(c.component={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.collideXY=function(a,b){return!0};a.prototype.collide=function(a){return!1};return a}(c.Collider);f.MaskCollider=e})(c.component||(c.component={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.fromSpriteRenderer=function(a){var b=new c.component.RectCollider,e=a.sprite.frame;a=a.spriteOffset;b.region=new c.math.Rectangle(0-e.width*a.x,0-e.height*a.y,e.width,e.height);return b};a.prototype.collideXY=function(a,b){return this.region&&this.region.containsXY(a,b)};a.prototype.collide=function(a){return!1};return a}(c.Collider);f.RectCollider=e})(c.component||(c.component={}))})(WOZLLA||(WOZLLA=
{}));(function(c){(function(c){var e=function(){function b(a,b){this._globalZ=a;this._layer=b}Object.defineProperty(b.prototype,"globalZ",{get:function(){return this._globalZ},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});return b}();c.RenderCommandBase=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(b){function a(a,c){b.call(this,a,c)}__extends(a,b);a.prototype.execute=function(a){throw Error("abstract method");};return a}(c.RenderCommandBase);c.CustomCommand=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(d){function h(){d.apply(this,arguments);this.reverse=!1;this._endGlobalZ=this._startGlobalZ=0;this._maskLayer=c.renderer.ILayerManager.DEFAULT}__extends(h,d);h.prototype.setMaskRange=function(a,b,d){void 0===d&&(d=c.renderer.ILayerManager.DEFAULT);this._startGlobalZ=a;this._endGlobalZ=b;this._maskLayer=d};h.prototype.render=function(c,d){c.addCommand(new e(this._startGlobalZ,this._maskLayer));this.renderMask(c,d);c.addCommand(new b(this._startGlobalZ,this._maskLayer,this.reverse));
c.addCommand(new a(this._endGlobalZ,this._maskLayer))};h.prototype.renderMask=function(a,b){};return h}(c.Component);c.Mask=f;var e=function(a){function b(c,e){a.call(this,c,e)}__extends(b,a);b.prototype.execute=function(a){a=a.gl;a.enable(a.STENCIL_TEST);a.clear(a.STENCIL_BUFFER_BIT);a.colorMask(!1,!1,!1,!1);a.stencilFunc(a.ALWAYS,1,0);a.stencilOp(a.KEEP,a.KEEP,a.REPLACE)};return b}(c.renderer.CustomCommand),b=function(a){function b(c,e,h){a.call(this,c,e);this.reverse=h}__extends(b,a);b.prototype.execute=
function(a){a=a.gl;a.colorMask(!0,!0,!0,!0);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.stencilFunc(this.reverse?a.NOTEQUAL:a.EQUAL,1,255)};return b}(c.renderer.CustomCommand),a=function(a){function b(c,e){a.call(this,c,e)}__extends(b,a);b.prototype.execute=function(a){a.gl.disable(a.gl.STENCIL_TEST)};return b}(c.renderer.CustomCommand)})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.prototype.render=function(a,b){};return b}(c.Component);c.Renderer=f})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function a(a){this._info=a}Object.defineProperty(a.prototype,"size",{get:function(){return 4*this.strade},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"strade",{get:function(){return this._info[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexIndex",{get:function(){return this._info[1]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"texCoordIndex",{get:function(){return this._info[2]},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"alphaIndex",{get:function(){return this._info[3]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorIndex",{get:function(){return this._info[4]},enumerable:!0,configurable:!0});return a}();c.QuadType=e;var b=function(){function a(b,c){void 0===c&&(c=a.V2T2C1A1);this._count=b;this._type=c;this._storage=Array(c.size*b);this._renderOffset=0;this._renderCount=b}Object.defineProperty(a.prototype,"storage",{get:function(){return this._storage},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderOffset",{get:function(){return this._renderOffset},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderCount",{get:function(){return this._renderCount},enumerable:!0,configurable:!0});a.prototype.setRenderRange=
function(a,b){this._renderOffset=a;this._renderCount=b};a.prototype.setVertices=function(a,b,c,e,f,k,l,n,m){void 0===m&&(m=0);var p=this._type.strade;m=this._type.size*m+this._type.vertexIndex;this._storage[0+m]=a;this._storage[1+m]=b;this._storage[0+m+1*p]=c;this._storage[1+m+1*p]=e;this._storage[0+m+2*p]=f;this._storage[1+m+2*p]=k;this._storage[0+m+3*p]=l;this._storage[1+m+3*p]=n};a.prototype.setTexCoords=function(a,b,c,e,f,k,l,n,m){void 0===m&&(m=0);var p=this._type.strade;m=this._type.size*m+
this._type.texCoordIndex;this._storage[0+m]=a;this._storage[1+m]=b;this._storage[0+m+1*p]=c;this._storage[1+m+1*p]=e;this._storage[0+m+2*p]=f;this._storage[1+m+2*p]=k;this._storage[0+m+3*p]=l;this._storage[1+m+3*p]=n};a.prototype.setAlpha=function(a,b){void 0===b&&(b=0);var c=this._type.strade,e=this._type.size*b+this._type.alphaIndex;this._storage[e]=a;this._storage[e+1*c]=a;this._storage[e+2*c]=a;this._storage[e+3*c]=a};a.prototype.setColor=function(a,b){void 0===b&&(b=0);var c=this._type.strade,
e=this._type.size*b+this._type.colorIndex;this._storage[e]=a;this._storage[e+1*c]=a;this._storage[e+2*c]=a;this._storage[e+3*c]=a};a.V2T2C1A1=new e([6,0,2,4,5]);return a}();c.Quad=b})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b){this._minCount=a;this._factory=b;this._pool=[];for(var c=0;c<this._minCount;c++)this._pool.push(this._factory())}b.prototype.retain=function(){var a=this._pool.shift();return a?a:this._factory()};b.prototype.release=function(a){-1===this._pool.indexOf(a)&&this._pool.push(a)};return b}();c.ObjectPool=e})(c.utils||(c.utils={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e,b=function(a){function b(c,d){a.call(this,c,d);this.isPoolable=!0}__extends(b,a);b.init=function(a,b,c,d,f){var l=e.retain();l.initWith(a,b,c,d,f);return l};Object.defineProperty(b.prototype,"texture",{get:function(){return this._texture},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"materialId",{get:function(){return this._materialId},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"quad",{get:function(){return this._quad},enumerable:!0,
configurable:!0});b.prototype.initWith=function(a,b,c,d,e){this._globalZ=a;this._layer=b;this._texture=c;this._materialId=d;this._quad=e};b.prototype.release=function(){e.release(this)};return b}(f.RenderCommandBase);f.QuadCommand=b;e=new c.utils.ObjectPool(200,function(){return new b(0,f.ILayerManager.DEFAULT)})})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=c.renderer.QuadCommand,b=function(a){function b(){a.apply(this,arguments);this._quadLayer=c.renderer.ILayerManager.DEFAULT;this._quadMaterialId=c.renderer.IMaterial.DEFAULT;this._quadGlobalZ=0;this._quadAlpha=1;this._quadColor=16777215;this._quadColorDirty=this._quadAlphaDirty=this._quadVertexDirty=!0;this._textureUpdated=!1}__extends(b,a);b.prototype.setQuadRenderRange=function(a,b){this._quad.setRenderRange(a,b)};b.prototype.setQuadGlobalZ=function(a){this._quadGlobalZ=
a};b.prototype.setQuadLayer=function(a){this._quadLayer=a};b.prototype.setQuadMaterialId=function(a){this._quadMaterialId=a};b.prototype.setQuadAlpha=function(a){this._quadAlpha=a;this._quadAlphaDirty=!0};b.prototype.setQuadColor=function(a){this._quadColor=a;this._quadColorDirty=!0};b.prototype.setTexture=function(a){this._texture=a;this._textureUVS=null;this._textureUpdated=!0};b.prototype.setTextureFrame=function(a){this._textureFrame=a;this._textureUVS=null;this._textureUpdated=!0};b.prototype.setTextureOffset=
function(a){this._textureOffset=a;this._textureUpdated=!0};b.prototype.init=function(){this._initQuad();a.prototype.init.call(this)};b.prototype.render=function(a,b){this._texture&&((b&c.GameObject.MASK_TRANSFORM_DIRTY)===c.GameObject.MASK_TRANSFORM_DIRTY&&(this._quadVertexDirty=!0),this._textureUpdated&&this._updateQuad(),this._quadVertexDirty&&(this._updateQuadVertices(),this._quadVertexDirty=!1),this._quadAlphaDirty&&this._updateQuadAlpha(),this._quadColorDirty&&this._updateQuadColor(),a.addCommand(e.init(this._quadGlobalZ,
this._quadLayer,this._texture,this._quadMaterialId,this._quad)))};b.prototype._initQuad=function(){this._quad=new c.renderer.Quad(1)};b.prototype._getTextureFrame=function(){return this._textureFrame||{x:0,y:0,width:this._texture.descriptor.width,height:this._texture.descriptor.height}};b.prototype._getTextureOffset=function(){return this._textureOffset||{x:0,y:0}};b.prototype._getTextureUVS=function(){var a,b,c,d;if(this._textureUVS)return this._textureUVS;a=this._texture.descriptor.width;b=this._texture.descriptor.height;
c=this._textureFrame||{x:0,y:0,width:a,height:b};d={};d.x0=c.x/a;d.y0=c.y/b;d.x1=(c.x+c.width)/a;d.y1=c.y/b;d.x2=(c.x+c.width)/a;d.y2=(c.y+c.height)/b;d.x3=c.x/a;d.y3=(c.y+c.height)/b;return this._textureUVS=d};b.prototype._updateQuad=function(a){void 0===a&&(a=0);this._updateQuadVertices(a);this._updateQuadAlpha(a);this._updateQuadColor(a);this._textureUpdated=!1};b.prototype._updateQuadVertices=function(a){void 0===a&&(a=0);var b=this._getTextureUVS(),c=this._getTextureFrame(),d=this._getTextureOffset();
this._updateQuadVerticesByArgs(b,c,d,this._gameObject.transform.worldMatrix,a);this._quadVertexDirty=!1};b.prototype._updateQuadVerticesByArgs=function(a,b,c,d,e){void 0===e&&(e=0);var f=d.values[0],n=d.values[1],m=d.values[3],p=d.values[4],s=d.values[6];d=d.values[7];var v=-c.x*b.width,q=v+b.width;c=-c.y*b.height;b=c+b.height;this._quad.setVertices(f*v+m*c+s,p*c+n*v+d,f*q+m*c+s,p*c+n*q+d,f*q+m*b+s,p*b+n*q+d,f*v+m*b+s,p*b+n*v+d,e);this._quad.setTexCoords(a.x0,a.y0,a.x1,a.y1,a.x2,a.y2,a.x3,a.y3,e)};
b.prototype._clearQuadVertices=function(a){this._quad.setVertices(0,0,0,0,0,0,0,0);this._quad.setTexCoords(0,0,0,0,0,0,0,0)};b.prototype._updateQuadAlpha=function(a){void 0===a&&(a=0);this._quad.setAlpha(this._quadAlpha,a);this._quadAlphaDirty=!1};b.prototype._updateQuadColor=function(a){void 0===a&&(a=0);this._quad.setColor(this._quadColor,a);this._quadColorDirty=!1};return b}(c.Renderer);f.QuadRenderer=b})(c.component||(c.component={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=function(b){function a(){b.apply(this,arguments);this._helperGameObject=new c.GameObject}__extends(a,b);Object.defineProperty(a.prototype,"region",{get:function(){return this._region},set:function(a){this._region=a;this._helperGameObject.transform.setPosition(a.x,a.y);this._helperGameObject.transform.setScale(a.width,a.height)},enumerable:!0,configurable:!0});a.prototype.renderMask=function(a,b){this._region&&(this._maskQuadRenderer||this._initMaskQuadRenderer(a),this._helperGameObject.transform.dirty&&
(b|=c.GameObject.MASK_TRANSFORM_DIRTY),(b&c.GameObject.MASK_TRANSFORM_DIRTY)==c.GameObject.MASK_TRANSFORM_DIRTY&&this._helperGameObject.transform.transform(this.transform),this._maskQuadRenderer.setQuadGlobalZ(this._startGlobalZ),this._maskQuadRenderer.render(a,b))};a.prototype._initMaskQuadRenderer=function(a){var b=document.createElement("canvas"),e=b.getContext("2d");b.width=1;b.height=1;e.fillStyle="#FFFFFF";e.fillRect(0,0,b.width,b.height);b=new c.assets.HTMLImageDescriptor(b);a=a.textureManager.generateTexture(b);
this._maskQuadRenderer=new c.component.QuadRenderer;this._maskQuadRenderer.setTexture(a);this._helperGameObject.addComponent(this._maskQuadRenderer);this._helperGameObject.init()};return a}(c.Mask);f.RectMask=e})(c.component||(c.component={}))})(WOZLLA||(WOZLLA={}));(function(c){(function(f){var e=function(){function b(){}b.array2rect=function(a){return new c.math.Rectangle(a[0],a[1],a[2],a[3])};return b}();f.PropertyConverter=e})(c.component||(c.component={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=window.createjs,b=function(a){function b(){a.apply(this,arguments);this.dirty=!0}__extends(b,a);b.prototype.init=function(){this.canvasSize&&(c.Assert.isTrue(0<this.canvasSize.width&&2048>=this.canvasSize.width),c.Assert.isTrue(0<this.canvasSize.height&&2048>=this.canvasSize.height),this.initCanvas(this.canvasSize.width,this.canvasSize.height),this.graphics=new e.Graphics,this.draw(this.graphics),this.graphics.draw(this.context));a.prototype.init.call(this)};b.prototype.initCanvas=
function(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;this.canvas=c;this.context=c.getContext("2d")};b.prototype.draw=function(a){};b.prototype.clear=function(){this.context.clearRect(0,0,this.canvasSize.width,this.canvasSize.height)};b.prototype.render=function(b,d){this.canvas&&!this._glTexture&&(this._glTexture=b.textureManager.generateTexture(new c.assets.HTMLImageDescriptor(this.canvas)),this.setTexture(this._glTexture),this.dirty=!1);this._glTexture&&(this.dirty&&(this.draw(this.graphics),
this.graphics.draw(this.context),this.dirty=!1,b.textureManager.updateTexture(this._glTexture)),a.prototype.render.call(this,b,d))};return b}(f.QuadRenderer);f.CanvasRenderer=b})(c.component||(c.component={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=function(b){function a(){b.call(this);this._spriteProxy=new c.assets.proxy.SpriteAtlasProxy(this)}__extends(a,b);Object.defineProperty(a.prototype,"color",{get:function(){return this._quadColor},set:function(a){this.setQuadColor(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"alpha",{get:function(){return this._quadAlpha},set:function(a){this.setQuadAlpha(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"materialId",{get:function(){return this._quadMaterialId},
set:function(a){this.setQuadMaterialId(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderLayer",{get:function(){return this._quadLayer},set:function(a){this.setQuadLayer(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"renderOrder",{get:function(){return this._quadGlobalZ},set:function(a){this.setQuadGlobalZ(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sprite",{get:function(){return this._sprite},set:function(a){var b=this._sprite;
b!==a&&((this._sprite=a)?(this.setTextureFrame(a.frame),b&&b.spriteAtlas===a.spriteAtlas||this.setTexture(a.spriteAtlas.glTexture)):(this.setTexture(null),this.setTextureFrame(null)))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"spriteOffset",{get:function(){return this._getTextureOffset()},set:function(a){this.setTextureOffset(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"imageSrc",{get:function(){return this._spriteAtlasSrc},set:function(a){this.spriteAtlasSrc=
a;this.spriteName=null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"spriteAtlasSrc",{get:function(){return this._spriteAtlasSrc},set:function(a){this._spriteAtlasSrc=a;this._spriteProxy.setAssetSrc(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"spriteName",{get:function(){return this._spriteName},set:function(a){this._spriteName=a;this.sprite=this._spriteProxy.getSprite(a)},enumerable:!0,configurable:!0});a.prototype.destroy=function(){this._spriteProxy.onDestroy();
b.prototype.destroy.call(this)};a.prototype.onAssetLoaded=function(a){this.sprite=a?a.getSprite(this._spriteName):null};a.prototype.loadAssets=function(a){this._spriteProxy.loadAsset(a)};return a}(f.QuadRenderer);f.SpriteRenderer=e;c.Component.register(e,{name:"SpriteRenderer",properties:[{name:"color",type:"int",defaultValue:16777215},{name:"alpha",type:"int",defaultValue:1},{name:"spriteAtlasSrc",type:"string"},{name:"spriteName",type:"string"}]})})(c.component||(c.component={}))})(WOZLLA||(WOZLLA=
{}));
(function(c){(function(f){var e=c.renderer.QuadCommand,b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);Object.defineProperty(b.prototype,"renderRegion",{get:function(){return this._renderRegion},set:function(a){this._renderRegion=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"patch",{get:function(){return this._patch},set:function(a){this._patch=a;this._quadVertexDirty=!0},enumerable:!0,configurable:!0});b.prototype._initQuad=function(){this._quad=new c.renderer.Quad(9)};b.prototype._updateNinePatchQuads=
function(){this._updateNinePatchQuadVertices();this._updateNinePatchQuadAlpha();this._updateNinePatchQuadColor();this._textureUpdated=!1};b.prototype._updateNinePatchQuadVertices=function(){for(var a=new c.Transform,b=this._getTextureFrame(),d,e={x:0,y:0},f=this._patch||new c.math.Rectangle(0,0,b.width,b.height),l=this._renderRegion||f,b=[{frame:{x:b.x,y:b.y,width:f.left,height:f.top},pos:{x:l.x,y:l.y},size:{width:1,height:1}},{frame:{x:b.x+f.left,y:b.y,width:f.width,height:f.top},pos:{x:l.x+f.left,
y:l.y},size:{width:(l.width-(f.right-f.width))/f.width,height:1}},{frame:{x:b.x+f.right,y:b.y,width:b.width-f.right,height:f.top},pos:{x:l.right,y:l.y},size:{width:1,height:1}},{frame:{x:b.x,y:b.y+f.top,width:f.left,height:f.height},pos:{x:l.x,y:l.y+f.top},size:{width:1,height:(l.height-(f.bottom-f.height))/f.height}},{frame:{x:b.x+f.left,y:b.y+f.top,width:f.width,height:f.height},pos:{x:l.x+f.left,y:l.y+f.top},size:{width:(l.width-(f.right-f.width))/f.width,height:(l.height-(f.bottom-f.height))/
f.height}},{frame:{x:b.x+f.right,y:b.y+f.top,width:b.width-f.right,height:f.height},pos:{x:l.right,y:l.y+f.top},size:{width:1,height:(l.height-(f.bottom-f.height))/f.height}},{frame:{x:b.x,y:b.y+f.bottom,width:b.width-f.right,height:b.height-f.bottom},pos:{x:l.x,y:l.bottom},size:{width:1,height:1}},{frame:{x:b.x+f.left,y:b.y+f.bottom,width:f.width,height:b.height-f.bottom},pos:{x:l.x+f.left,y:l.bottom},size:{width:(l.width-(f.right-f.width))/f.width,height:1}},{frame:{x:b.x+f.right,y:b.y+f.bottom,
width:b.width-f.right,height:b.height-f.bottom},pos:{x:l.right,y:l.bottom},size:{width:1,height:1}}],f=0;9>f;f++)if(l=b[f],0<l.frame.width&&0<l.frame.height){d=l.frame;var n=this._texture,m=n.descriptor.width,n=n.descriptor.height,p={};p.x0=d.x/m;p.y0=d.y/n;p.x1=(d.x+d.width)/m;p.y1=d.y/n;p.x2=(d.x+d.width)/m;p.y2=(d.y+d.height)/n;p.x3=d.x/m;p.y3=(d.y+d.height)/n;d=p;a.set(this.gameObject.transform);a.x+=l.pos.x;a.y+=l.pos.y;a.setScale(l.size.width,l.size.height);a.updateWorldMatrix();this._updateQuadVerticesByArgs(d,
l.frame,e,a.worldMatrix,f)}else this._clearQuadVertices(f);this._quadVertexDirty=!1};b.prototype._updateNinePatchQuadAlpha=function(){for(var a=0;9>a;a++)this._updateQuadAlpha(a);this._quadAlphaDirty=!1};b.prototype._updateNinePatchQuadColor=function(){for(var a=0;9>a;a++)this._updateQuadColor(a);this._quadColorDirty=!1};b.prototype.render=function(a,b){this._texture&&((b&c.GameObject.MASK_TRANSFORM_DIRTY)===c.GameObject.MASK_TRANSFORM_DIRTY&&(this._quadVertexDirty=!0),this._textureUpdated&&this._updateNinePatchQuads(),
this._quadVertexDirty&&(this._updateNinePatchQuadVertices(),this._quadVertexDirty=!1),this._quadAlphaDirty&&this._updateNinePatchQuadAlpha(),this._quadColorDirty&&this._updateNinePatchQuadColor(),a.addCommand(e.init(this._quadGlobalZ,this._quadLayer,this._texture,this._quadMaterialId,this._quad)))};return b}(f.SpriteRenderer);f.NinePatchRenderer=b;c.Component.register(b,{name:"NinePatchRenderer",properties:[{name:"patch",type:"rect",defaultValue:[0,0,0,0],convert:f.PropertyConverter.array2rect},{name:"renderRegion",
type:"rect",defaultValue:[0,0,0,0],convert:f.PropertyConverter.array2rect},{group:"SpriteRenderer",properties:c.Component.getConfig("SpriteRenderer").properties}]})})(c.component||(c.component={}))})(WOZLLA||(WOZLLA={}));(function(c){var f=function(c){function b(){c.apply(this,arguments);this.enabled=!0}__extends(b,c);b.prototype.update=function(){};return b}(c.Component);c.Behaviour=f})(WOZLLA||(WOZLLA={}));
(function(c){var f=function(c){function b(a,b,f,g){void 0===b&&(b=!1);void 0===f&&(f=null);void 0===g&&(g=!0);c.call(this,a,b,f,g)}__extends(b,c);return b}(c.event.Event);c.CoreEvent=f})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){function e(a,b){b()}var b=function(){function a(){this.doInit=this.doLoad=!1}a.prototype.instantiateWithSrc=function(a,b){void 0===b&&(b=e);this.src=a;this.newCallback=b;return this};a.prototype.instantiateWithJSON=function(a,b){void 0===b&&(b=e);this.data=a;this.newCallback=b;return this};a.prototype.load=function(a){void 0===a&&(a=e);this.doLoad=!0;this.loadCallback=a;return this};a.prototype.init=function(){this.doLoad?this.doInit=!0:this.err="JSONXBuilder: init must after load";
return this};a.prototype.build=function(a){var b=this;this._loadJSONData(function(){b._checkError(a)||b._newGameObjectTree(function(){b._checkError(a)||(b.doLoad?b.newCallback(b.root,function(){b._loadAssets(function(){b._checkError(a)||(b.doInit&&b._init(),a(b.err,b.root))})}):a(b.err,b.root))})})};a.prototype._checkError=function(a){return this.err?(a(this.err,null),!0):!1};a.prototype._loadJSONData=function(a){var b=this;this.src&&!this.data?c.utils.Ajax.request({url:this.src,contentType:"json",
success:function(c){b.data=c;a&&a()},error:function(c){b.err=c;a&&a()}}):a&&a()};a.prototype._newGameObjectTree=function(a){var b=this;this._newGameObject(this.data.root,function(c){b.root=c;a&&a()})};a.prototype._newGameObject=function(a,b){var e=this,f=new c.GameObject(a.rect);f.id=a.id;f.name=a.name;f.active=a.active;f.visible=a.visible;f.touchable=a.touchable;f.transform.set(a.transform);var u=a.components;u&&0<u.length&&u.forEach(function(a){f.addComponent(e._newComponent(a))});var k=0,l=a.children;
l&&0!==l.length?l.forEach(function(a){a.reference?e._newReferenceObject(a,function(a){a&&f.addChild(a);k++;k===l.length&&b(f)}):e._newGameObject(a,function(a){f.addChild(a);k++;k===l.length&&b(f)})}):b(f)};a.prototype._newReferenceObject=function(b,c){var e=this;(new a).instantiateWithSrc(b.reference).build(function(a,f){a?e.err=a:f&&(f.name=b.name,f.id=b.id,f.active=b.active,f.visible=b.visible,f.touchable=b.touchable,f.transform.set(b.transform));c(f)})};a.prototype._newComponent=function(a){var b=
c.Component.create(a.name);c.Component.getConfig(a.name).properties.forEach(function(c){var e=a.properties[c.name],e="undefined"===typeof e?c.defaultValue:e;c.convert&&(e=c.convert(e));b[c.name]=e});return b};a.prototype._loadAssets=function(a){this.root.loadAssets(a)};a.prototype._init=function(){this.root.init()};return a}();f.JSONXBuilder=b})(c.jsonx||(c.jsonx={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b,c){this.centerX=a;this.centerY=b;this.radius=c}b.prototype.containsXY=function(a,b){return Math.pow(a-this.centerX,2)+Math.pow(b-this.centerY,2)<=this.radius};b.prototype.toString=function(){return"Circle["+this.centerX+","+this.centerY+","+this.radius+"]"};return b}();c.Circle=e})(c.math||(c.math={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){(function(c){c.rectIntersect=function(b,a){return b.x<a.x+a.width&&a.x<b.x+b.width&&b.y<a.y+a.height&&a.y<b.y+b.height};c.rectIntersect2=function(b,a,c,e,f,t,u,k){return b<=f+u&&f<=b+c&&a<=t+k&&t<=a+e}})(c.MathUtils||(c.MathUtils={}))})(c.math||(c.math={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(a,b){this.width=a;this.height=b}b.prototype.toString=function(){return"Size["+this.width+","+this.height+"]"};return b}();c.Size=e})(c.math||(c.math={}))})(WOZLLA||(WOZLLA={}));(function(c){c=c.renderer||(c.renderer={});(c.IMaterialManager||(c.IMaterialManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));(function(c){c=c.renderer||(c.renderer={});(c.IShaderManager||(c.IShaderManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){(function(c){c[c.PNG=0]="PNG";c[c.JPEG=1]="JPEG";c[c.PVR=2]="PVR"})(c.TextureFormat||(c.TextureFormat={}));(function(c){c[c.RGBA8888=0]="RGBA8888";c[c.RGBA4444=1]="RGBA4444";c[c.RGB888=2]="RGB888";c[c.RGB565=3]="RGB565";c[c.PVRTC4=4]="PVRTC4";c[c.PVRTC2=5]="PVRTC2"})(c.PixelFormat||(c.PixelFormat={}))})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));(function(c){c=c.renderer||(c.renderer={});(c.ITextureManager||(c.ITextureManager={})).DOC="DOC"})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(){}b.getExtension=function(a,c,e){void 0===e&&(e=!0);a=a.getExtension(c)||a.getExtension(a,b.VENDOR_WEBKIT+c);if(null!=a)return a;if(e)throw Error("Unsupported extension: "+c);};b.VENDOR_WEBKIT="WEBKIT_";b.PVRTC="WEBGL_compressed_texture_pvrtc";b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842;b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843;return b}();c.WebGLExtension=e})(c.renderer||(c.renderer={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=function(d){function e(){d.apply(this,arguments);this._stateConfig={}}__extends(e,d);e.prototype.defineState=function(a,b){void 0===b&&(b=!1);c.Assert.isUndefined(this._stateConfig[a],'state "'+a+'" has been defined');this._stateConfig[a]={data:{}};b&&(this._defaultState=a)};e.prototype.getStateData=function(a,b){c.Assert.isNotUndefined(this._stateConfig[a],'state "'+a+'" not defined');return this._stateConfig[a].data[b]};e.prototype.setStateData=function(a,b,d){c.Assert.isNotUndefined(this._stateConfig[a],
'state "'+a+'" not defined');this._stateConfig[a].data[b]=d};e.prototype.defineTransition=function(a,b,d){c.Assert.isNotUndefined(this._stateConfig[a],'state "'+a+'" not defined');c.Assert.isNotUndefined(this._stateConfig[b],'state "'+b+'" not defined');this._stateConfig[a][b]=d};e.prototype.init=function(){this._currentState=this._defaultState;this.dispatchEvent(new c.event.Event(e.INIT,!1,new b(this._currentState)))};e.prototype.getCurrentState=function(){return this._currentState};e.prototype.changeState=
function(d){var f=this,u,k;c.Assert.isNotUndefined(this._stateConfig[d]);u=this._currentState;k=this._stateConfig[d][d]||a.getInstance();this._currentTransition&&this._currentTransition.cancel();k.reset();k.execute(u,d,function(){f._currentTransition=null;f._currentState=d;f.dispatchEvent(new c.event.Event(e.CHANGE,!1,new b(f._currentState)))});this._currentTransition=k};e.INIT="state.init";e.CHANGE="state.change";return e}(c.event.EventDispatcher);f.StateMachine=e;var b=function(){return function(a){this.state=
a}}();f.StateEventData=b;var a=function(){function a(){this._canceled=!1}a.getInstance=function(){a.instance||(a.instance=new a);return a.instance};a.prototype.reset=function(){this._canceled=!1};a.prototype.cancel=function(){this._canceled=!0};a.prototype.execute=function(a,b,c){this._canceled||c()};return a}();f.EmptyTransition=a})(c.utils||(c.utils={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=c.utils.StateMachine,b=function(a){function b(){a.call(this);this._stateMachine=new c.utils.StateMachine;this.initStates()}__extends(b,a);b.prototype.init=function(){var b=this;this._stateMachine.addListener(e.INIT,function(a){return b.onStateChange(a)});this._stateMachine.addListener(e.CHANGE,function(a){return b.onStateChange(a)});this._stateMachine.init();a.prototype.init.call(this)};b.prototype.initStates=function(){};b.prototype.getStateSpriteName=function(a){return this._stateMachine.getStateData(a,
"spriteName")};b.prototype.setStateSpriteName=function(a,b){this._stateMachine.setStateData(a,"spriteName",b)};b.prototype.onStateChange=function(a){this.spriteName=this.getStateSpriteName(a.data.state)};return b}(c.component.SpriteRenderer);f.StateWidget=b})(c.ui||(c.ui={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(b){function a(){b.apply(this,arguments)}__extends(a,b);Object.defineProperty(a.prototype,"normalSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_NORMAL)},set:function(b){this.setStateSpriteName(a.STATE_NORMAL,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"disabledSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_DISABLED)},set:function(b){this.setStateSpriteName(a.STATE_DISABLED,b)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"pressedSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_PRESSED)},set:function(b){this.setStateSpriteName(a.STATE_PRESSED,b)},enumerable:!0,configurable:!0});a.prototype.init=function(){var a=this;this.gameObject.addListener("touch",function(b){return a.onTouch(b)});this.gameObject.addListener("release",function(b){return a.onRelease(b)});this.gameObject.addListener("tap",function(b){return a.onTap(b)});b.prototype.init.call(this)};a.prototype.destroy=
function(){this._stateMachine.clearAllListeners();b.prototype.destroy.call(this)};a.prototype.isEnabled=function(){return this._stateMachine.getCurrentState()!==a.STATE_DISABLED};a.prototype.setEnabled=function(b){void 0===b&&(b=!0);this._stateMachine.changeState(b?a.STATE_NORMAL:a.STATE_DISABLED);this._gameObject.touchable=b};a.prototype.initStates=function(){this._stateMachine.defineState(a.STATE_NORMAL,!0);this._stateMachine.defineState(a.STATE_DISABLED);this._stateMachine.defineState(a.STATE_PRESSED)};
a.prototype.onTouch=function(b){this._stateMachine.changeState(a.STATE_PRESSED)};a.prototype.onRelease=function(b){this._stateMachine.changeState(a.STATE_NORMAL)};a.prototype.onTap=function(a){};a.STATE_NORMAL="normal";a.STATE_DISABLED="disabled";a.STATE_PRESSED="pressed";return a}(c.StateWidget);c.Button=e})(c.ui||(c.ui={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(b){function a(){b.apply(this,arguments)}__extends(a,b);Object.defineProperty(a.prototype,"uncheckedSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_UNCHECKED)},set:function(b){this.setStateSpriteName(a.STATE_UNCHECKED,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"disabledSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_DISABLED)},set:function(b){this.setStateSpriteName(a.STATE_DISABLED,b)},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"checkedSpriteName",{get:function(){return this.getStateSpriteName(a.STATE_CHECKED)},set:function(b){this.setStateSpriteName(a.STATE_CHECKED,b)},enumerable:!0,configurable:!0});a.prototype.init=function(){var a=this;this._gameObject.addListener("tap",function(b){return a.onTap(b)});b.prototype.init.call(this)};a.prototype.destroy=function(){this._stateMachine.clearAllListeners();b.prototype.destroy.call(this)};a.prototype.isEnabled=function(){return this._stateMachine.getCurrentState()!==
a.STATE_DISABLED};a.prototype.setEnabled=function(b){void 0===b&&(b=!0);this._stateMachine.changeState(b?a.STATE_UNCHECKED:a.STATE_DISABLED);this._gameObject.touchable=b};a.prototype.initStates=function(){this._stateMachine.defineState(a.STATE_UNCHECKED,!0);this._stateMachine.defineState(a.STATE_DISABLED);this._stateMachine.defineState(a.STATE_CHECKED)};a.prototype.onTap=function(b){this._stateMachine.getCurrentState()===a.STATE_CHECKED?this._stateMachine.changeState(a.STATE_UNCHECKED):this._stateMachine.changeState(a.STATE_CHECKED)};
a.STATE_UNCHECKED="unchecked";a.STATE_CHECKED="checked";a.STATE_DISABLED="disabled";return a}(c.StateWidget);c.CheckBox=e})(c.ui||(c.ui={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(){function b(){}b.get=function(a){-1>a&&(a=-1);1<a&&(a=1);return function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}};b.getPowIn=function(a){return function(b){return Math.pow(b,a)}};b.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}};b.getPowInOut=function(a){return function(b){return 1>(b*=2)?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}};b.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};b.sineOut=function(a){return Math.sin(a*
Math.PI/2)};b.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)};b.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}};b.getBackOut=function(a){return function(b){b-=1;return b*b*((a+1)*b+a)+1}};b.getBackInOut=function(a){a*=1.525;return function(b){return 1>(b*=2)?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}};b.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};b.circOut=function(a){return Math.sqrt(1-a*a)};b.circInOut=function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-
(a-=2)*a)+1)};b.bounceIn=function(a){return 1-b.bounceOut(1-a)};b.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};b.bounceInOut=function(a){return.5>a?.5*b.bounceIn(2*a):.5*b.bounceOut(2*a-1)+.5};b.getElasticIn=function(a,b){var c=2*Math.PI;return function(e){if(0==e||1==e)return e;var f=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin((e-f)*c/b))}};b.getElasticOut=function(a,
b){var c=2*Math.PI;return function(e){if(0==e||1==e)return e;var f=b/c*Math.asin(1/a);return a*Math.pow(2,-10*e)*Math.sin((e-f)*c/b)+1}};b.getElasticInOut=function(a,b){var c=2*Math.PI;return function(e){var f=b/c*Math.asin(1/a);return 1>(e*=2)?-.5*a*Math.pow(2,10*(e-=1))*Math.sin((e-f)*c/b):a*Math.pow(2,-10*(e-=1))*Math.sin((e-f)*c/b)*.5+1}};b.linear=function(a){return a};b.expoIn=function(a){return 0==a?0:Math.pow(2,10*(a-1))-.001};b.expoOut=function(a){return 1==a?1:-Math.pow(2,-10*a)+1};b.expoInOut=
function(a){a/=.5;return a=1>a?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*(a-1))+2)};b.getByKey=function(a){return b[b.keyMap[a]]};b.quadIn=b.getPowIn(2);b.quadOut=b.getPowOut(2);b.quadInOut=b.getPowInOut(2);b.cubicIn=b.getPowIn(3);b.cubicOut=b.getPowOut(3);b.cubicInOut=b.getPowInOut(3);b.quartIn=b.getPowIn(4);b.quartOut=b.getPowOut(4);b.quartInOut=b.getPowInOut(4);b.quintIn=b.getPowIn(5);b.quintOut=b.getPowOut(5);b.quintInOut=b.getPowInOut(5);b.backIn=b.getBackIn(1.7);b.backOut=b.getBackOut(1.7);
b.backInOut=b.getBackInOut(1.7);b.elasticIn=b.getElasticIn(1,.3);b.elasticOut=b.getElasticOut(1,.3);b.elasticInOut=b.getElasticInOut(1,.3*1.5);b.keyMap={0:"linear",1:"sineIn",2:"sineOut",3:"sineInOut",4:"quadIn",5:"quadOut",6:"quadInOut",7:"cubicIn",8:"cubicOut",9:"cubicInOut",10:"quartIn",11:"quartOut",12:"quartInOut",13:"quintIn",14:"quintOut",15:"quintInOut",16:"expoIn",17:"expoOut",18:"expoInOut",19:"circIn",20:"circOut",21:"circInOut",22:"elasticIn",23:"elasticOut",24:"elasticInOut",25:"backIn",
26:"backOut",27:"backInOut",28:"bounceIn",29:"bounceOut",30:"bounceInOut"};return b}();c.Ease=e})(c.utils||(c.utils={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=function(b){function a(){b.apply(this,arguments)}__extends(a,b);Object.defineProperty(a.prototype,"skeletonSrc",{get:function(){return this._skeletonSrc},set:function(a){this._skeletonSrc=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureSrc",{get:function(){return this._textureSrc},set:function(a){this._textureSrc=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"armatureName",{get:function(){return this._armatureName},
set:function(a){this._armatureName=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0});a.prototype.init=function(){this.initArmature();b.prototype.init.call(this)};a.prototype.destroy=function(){this._skeletonJSONAsset&&this._skeletonJSONAsset.release();this._skeletonJSONAsset=null;this._wTextureAtlas&&this._wTextureAtlas.release();this._wTextureAtlas=null;this._armature&&this._armature.dispose();this._armature=
null;this._factory&&this._factory.dispose();this._container&&(this._container.destroy(),this._container.removeMe(),this._container=null);b.prototype.destroy.call(this)};a.prototype.render=function(a,b){this._container.visit(a,this.transform,b)};a.prototype.loadAssets=function(a){var b=this,e;this._skeletonSrc&&this._textureSrc&&this._armatureName?(e=c.Director.getInstance().assetLoader,e.load(this._skeletonSrc,c.assets.JSONAsset,function(){var c=e.getAsset(b._skeletonSrc);c?(c.retain(),e.load(b._textureSrc,
f.WTextureAtlas,function(){var f=e.getAsset(b._textureSrc);f?(f.retain(),b._skeletonJSONAsset=c,b._wTextureAtlas=f):c.release();a()})):a()})):a()};a.prototype.initArmature=function(){var a,b,c;this._skeletonJSONAsset&&this._wTextureAtlas&&this._armatureName&&(b=new f.WFactory,a=this._skeletonJSONAsset.cloneData(),b.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(a),a.name),b.addTextureAtlas(this._wTextureAtlas,this._wTextureAtlas.name),a=b.buildArmature(this._armatureName),c=a.getDisplay(),
dragonBones.WorldClock.clock.add(a),f.setupWorldClock(),this._container=c,this._factory=b,this._armature=a)};return a}(c.Renderer);f.SkeletonRenderer=e})(c.DragonBones||(c.DragonBones={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(c){var e=function(b){function a(){b.call(this,this);this._display=null}__extends(a,b);a.prototype.dispose=function(){this._display&&(this._display.destroy(),this._display.removeMe());b.prototype.dispose.call(this);this._display=null};a.prototype._updateDisplay=function(a){this._display=a};a.prototype._getDisplayIndex=function(){return-1};a.prototype._addDisplayToContainer=function(a,b){this._display&&a&&a.addChild(this._display)};a.prototype._removeDisplayFromContainer=function(){this._display&&
this._display.parent&&this._display.parent.removeChild(this._display)};a.prototype._updateTransform=function(){var a;this._display&&(a=this._display.transform,a.__local_matrix=this._globalTransformMatrix,a.dirty=!0)};a.prototype._updateDisplayVisible=function(a){this._display&&this._parent&&(this._display.visible=this._parent._visible&&this._visible&&a)};a.prototype._updateDisplayColor=function(a,c,e,f,u,k,l,n){b.prototype._updateDisplayColor.call(this,a,c,e,f,u,k,l,n);this._display&&(a=this._display.renderer)&&
(a.alpha=u)};a.prototype._updateDisplayBlendMode=function(a){};return a}(dragonBones.Slot);c.WSlot=e})(c.DragonBones||(c.DragonBones={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){function e(a){var b=a.lastIndexOf("/");return-1!==b?a.substr(b+1,a.length):a}var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.dispose=function(){};b.prototype.getRegion=function(a){a=this.getSprite(a).frame;return new dragonBones.Rectangle(a.x,a.y,a.width,a.height)};b.prototype._loadSpriteAtlas=function(a){var b=this;c.utils.Ajax.request({url:this._metaSrc,contentType:"json",success:function(c){var d=c.imagePath,f=e(b._metaSrc);b._imageSrc=
b._metaSrc.replace(new RegExp(f+"$"),d);b._loadImage(function(d,e){if(d)a&&a(d);else{var f=b._parseData(c);b.name=f.name;a&&a(null,e,f)}})},error:function(c){a("Fail to load sprite: "+b._metaSrc+", "+c.code+":"+c.message)}})};b.prototype._parseData=function(a){var b={name:a.name,frames:{}};a.SubTexture.forEach(function(a){b.frames[a.name]={frame:a}});return b};return b}(c.assets.SpriteAtlas);f.WTextureAtlas=b})(c.DragonBones||(c.DragonBones={}))})(WOZLLA||(WOZLLA={}));
(function(c){(function(f){var e=!1;f.setupWorldClock=function(){e||(e=!0,c.Director.getInstance().scheduler.scheduleLoop(function(){dragonBones.WorldClock.clock.advanceTime(1/60)}))};var b=function(a){function b(){a.call(this,this)}__extends(b,a);b.prototype._generateArmature=function(){var a=new c.GameObject;a.init();return new dragonBones.Armature(a)};b.prototype._generateSlot=function(){return new f.WSlot};b.prototype._generateDisplay=function(a,b,d,e){var f=new c.GameObject,l=new c.component.SpriteRenderer;
l.sprite=a.getSprite(b);l.spriteOffset={x:d/l.sprite.frame.width,y:e/l.sprite.frame.height};f.addComponent(l);f.init();return f};return b}(dragonBones.BaseFactory);f.WFactory=b})(c.DragonBones||(c.DragonBones={}))})(WOZLLA||(WOZLLA={}));
